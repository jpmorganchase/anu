{
  "version": 3,
  "sources": ["../../../dev/gui/src/2D/valueAndUnit.ts", "../../../dev/gui/src/2D/measure.ts", "../../../dev/gui/src/2D/math2D.ts", "../../../dev/gui/src/2D/controls/control.ts", "../../../dev/gui/src/2D/controls/container.ts", "../../../dev/gui/src/2D/controls/rectangle.ts", "../../../dev/gui/src/2D/controls/textBlock.ts", "../../../dev/gui/src/2D/controls/image.ts", "../../../dev/gui/src/2D/controls/button.ts", "../../../dev/gui/src/2D/controls/stackPanel.ts", "../../../dev/gui/src/2D/controls/checkbox.ts", "../../../dev/gui/src/2D/controls/textWrapper.ts", "../../../dev/gui/src/2D/controls/inputText.ts", "../../../dev/gui/src/2D/controls/grid.ts", "../../../dev/gui/src/2D/controls/colorpicker.ts", "../../../dev/gui/src/2D/controls/ellipse.ts", "../../../dev/gui/src/2D/controls/focusableButton.ts", "../../../dev/gui/src/2D/controls/inputTextArea.ts", "../../../dev/gui/src/2D/controls/inputPassword.ts", "../../../dev/gui/src/2D/controls/line.ts", "../../../dev/gui/src/2D/multiLinePoint.ts", "../../../dev/gui/src/2D/controls/multiLine.ts", "../../../dev/gui/src/2D/controls/radioButton.ts", "../../../dev/gui/src/2D/controls/sliders/baseSlider.ts", "../../../dev/gui/src/2D/controls/sliders/slider.ts", "../../../dev/gui/src/2D/controls/selector.ts", "../../../dev/gui/src/2D/controls/scrollViewers/scrollViewerWindow.ts", "../../../dev/gui/src/2D/controls/sliders/scrollBar.ts", "../../../dev/gui/src/2D/controls/sliders/imageScrollBar.ts", "../../../dev/gui/src/2D/controls/scrollViewers/scrollViewer.ts", "../../../dev/gui/src/2D/controls/toggleButton.ts", "../../../dev/gui/src/2D/controls/virtualKeyboard.ts", "../../../dev/gui/src/2D/controls/displayGrid.ts", "../../../dev/gui/src/2D/controls/sliders/imageBasedSlider.ts", "../../../dev/gui/src/2D/controls/statics.ts", "../../../dev/gui/src/2D/controls/gradient/BaseGradient.ts", "../../../dev/gui/src/2D/controls/gradient/LinearGradient.ts", "../../../dev/gui/src/2D/controls/gradient/RadialGradient.ts", "../../../dev/gui/src/2D/style.ts", "../../../dev/gui/src/2D/advancedDynamicTexture.ts", "../../../dev/gui/src/2D/adtInstrumentation.ts", "../../../dev/gui/src/2D/xmlLoader.ts", "../../../dev/gui/src/3D/vector3WithInfo.ts", "../../../dev/gui/src/3D/controls/control3D.ts", "../../../dev/gui/src/3D/controls/contentDisplay3D.ts", "../../../dev/gui/src/3D/controls/abstractButton3D.ts", "../../../dev/gui/src/3D/controls/button3D.ts", "../../../dev/gui/src/3D/controls/container3D.ts", "../../../dev/gui/src/3D/controls/volumeBasedPanel.ts", "../../../dev/gui/src/3D/controls/cylinderPanel.ts", "../../../dev/gui/src/3D/materials/fluent/shaders/fluent.vertex.ts", "../../../dev/gui/src/3D/materials/fluent/shaders/fluent.fragment.ts", "../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts", "../../../dev/gui/src/3D/controls/touchHolographicMenu.ts", "../../../dev/gui/src/3D/controls/handMenu.ts", "../../../dev/gui/src/3D/materials/fluentBackplate/shaders/fluentBackplate.fragment.ts", "../../../dev/gui/src/3D/materials/fluentBackplate/shaders/fluentBackplate.vertex.ts", "../../../dev/gui/src/3D/materials/fluentBackplate/fluentBackplateMaterial.ts", "../../../dev/gui/src/3D/controls/holographicBackplate.ts", "../../../dev/gui/src/3D/controls/holographicButton.ts", "../../../dev/gui/src/3D/materials/fluentButton/shaders/fluentButton.fragment.ts", "../../../dev/gui/src/3D/materials/fluentButton/shaders/fluentButton.vertex.ts", "../../../dev/gui/src/3D/materials/fluentButton/fluentButtonMaterial.ts", "../../../dev/gui/src/3D/controls/touchButton3D.ts", "../../../dev/gui/src/3D/controls/touchHolographicButton.ts", "../../../dev/gui/src/3D/behaviors/defaultBehavior.ts", "../../../dev/gui/src/3D/materials/handle/shaders/handle.vertex.ts", "../../../dev/gui/src/3D/materials/handle/shaders/handle.fragment.ts", "../../../dev/gui/src/3D/materials/handle/handleMaterial.ts", "../../../dev/gui/src/3D/gizmos/gizmoHandle.ts", "../../../dev/gui/src/3D/gizmos/slateGizmo.ts", "../../../dev/gui/src/3D/controls/holographicSlate.ts", "../../../dev/gui/src/3D/controls/meshButton3D.ts", "../../../dev/gui/src/3D/controls/nearMenu.ts", "../../../dev/gui/src/3D/controls/planePanel.ts", "../../../dev/gui/src/3D/controls/scatterPanel.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderBar.fragment.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderBar.vertex.ts", "../../../dev/gui/src/3D/materials/mrdl/mrdlSliderBarMaterial.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderThumb.fragment.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderThumb.vertex.ts", "../../../dev/gui/src/3D/materials/mrdl/mrdlSliderThumbMaterial.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackplate.fragment.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackplate.vertex.ts", "../../../dev/gui/src/3D/materials/mrdl/mrdlBackplateMaterial.ts", "../../../dev/gui/src/3D/controls/slider3D.ts", "../../../dev/gui/src/3D/controls/spherePanel.ts", "../../../dev/gui/src/3D/controls/stackPanel3D.ts", "../../../dev/gui/src/3D/controls/touchMeshButton3D.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackglow.fragment.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackglow.vertex.ts", "../../../dev/gui/src/3D/materials/mrdl/mrdlBackglowMaterial.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlFrontplate.fragment.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlFrontplate.vertex.ts", "../../../dev/gui/src/3D/materials/mrdl/mrdlFrontplateMaterial.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlInnerquad.fragment.ts", "../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlInnerquad.vertex.ts", "../../../dev/gui/src/3D/materials/mrdl/mrdlInnerquadMaterial.ts", "../../../dev/gui/src/3D/controls/MRTK3/touchHolographicButton.ts", "../../../dev/gui/src/3D/gui3DManager.ts"],
  "sourcesContent": ["import { Observable } from \"core/Misc/observable\";\r\nimport type { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\n\r\n/**\r\n * Class used to specific a value and its associated unit\r\n */\r\nexport class ValueAndUnit {\r\n    private _value = 1;\r\n    private _unit = ValueAndUnit.UNITMODE_PIXEL;\r\n    private _originalUnit: number;\r\n\r\n    /**\r\n     * Gets or sets a value indicating that this value will not scale accordingly with adaptive scaling property\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#adaptive-scaling\r\n     */\r\n    public ignoreAdaptiveScaling = false;\r\n\r\n    /**\r\n     * Observable event triggered each time the value or unit changes\r\n     */\r\n    public onChangedObservable = new Observable<void>();\r\n\r\n    /**\r\n     * Creates a new ValueAndUnit\r\n     * @param value defines the value to store\r\n     * @param unit defines the unit to store - defaults to ValueAndUnit.UNITMODE_PIXEL\r\n     * @param negativeValueAllowed defines a boolean indicating if the value can be negative\r\n     */\r\n    public constructor(\r\n        value: number,\r\n        /** defines the unit to store */\r\n        unit = ValueAndUnit.UNITMODE_PIXEL,\r\n        /** defines a boolean indicating if the value can be negative */\r\n        public negativeValueAllowed = true\r\n    ) {\r\n        this._value = value;\r\n        this._unit = unit;\r\n        this._originalUnit = unit;\r\n    }\r\n\r\n    /** Gets a boolean indicating if the value is a percentage */\r\n    public get isPercentage(): boolean {\r\n        return this._unit === ValueAndUnit.UNITMODE_PERCENTAGE;\r\n    }\r\n\r\n    /** Gets a boolean indicating if the value is store as pixel */\r\n    public get isPixel(): boolean {\r\n        return this._unit === ValueAndUnit.UNITMODE_PIXEL;\r\n    }\r\n\r\n    /**\r\n     * Gets value (without units)\r\n     * @deprecated use value property instead\r\n     */\r\n    public get internalValue(): number {\r\n        return this._value;\r\n    }\r\n\r\n    /** Gets value (without units) */\r\n    public get value(): number {\r\n        return this._value;\r\n    }\r\n\r\n    /** Sets value (without units) */\r\n    public set value(value: number) {\r\n        if (value !== this._value) {\r\n            this._value = value;\r\n            this.onChangedObservable.notifyObservers();\r\n        }\r\n    }\r\n\r\n    /** Gets units (without value) */\r\n    public get unit(): number {\r\n        return this._unit;\r\n    }\r\n\r\n    /** Sets units (without value) */\r\n    public set unit(value: number) {\r\n        if (value !== this._unit) {\r\n            this._unit = value;\r\n            this.onChangedObservable.notifyObservers();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets value as pixel\r\n     * @param host defines the root host\r\n     * @param refValue defines the reference value for percentages\r\n     * @returns the value as pixel\r\n     */\r\n    public getValueInPixel(host: AdvancedDynamicTexture, refValue: number): number {\r\n        if (this.isPixel) {\r\n            return this.getValue(host);\r\n        }\r\n\r\n        return this.getValue(host) * refValue;\r\n    }\r\n\r\n    /**\r\n     * Update the current value and unit.\r\n     * @param value defines the value to store\r\n     * @param unit defines the unit to store\r\n     * @returns the current ValueAndUnit\r\n     */\r\n    public updateInPlace(value: number, unit = ValueAndUnit.UNITMODE_PIXEL): ValueAndUnit {\r\n        if (this.value !== value || this.unit !== unit) {\r\n            // set member variables to notify only once\r\n            this._value = value;\r\n            this._unit = unit;\r\n            this.onChangedObservable.notifyObservers();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets the value accordingly to its unit\r\n     * @param host  defines the root host\r\n     * @returns the value\r\n     */\r\n    public getValue(host: AdvancedDynamicTexture): number {\r\n        if (host && !this.ignoreAdaptiveScaling && this.unit !== ValueAndUnit.UNITMODE_PERCENTAGE) {\r\n            let width: number = 0;\r\n            let height: number = 0;\r\n\r\n            if (host.idealWidth) {\r\n                width = Math.ceil((this._value * host.getSize().width) / host.idealWidth);\r\n            }\r\n\r\n            if (host.idealHeight) {\r\n                height = Math.ceil((this._value * host.getSize().height) / host.idealHeight);\r\n            }\r\n\r\n            if (host.useSmallestIdeal && host.idealWidth && host.idealHeight) {\r\n                return window.innerWidth < window.innerHeight ? width : height;\r\n            }\r\n\r\n            if (host.idealWidth) {\r\n                // horizontal\r\n                return width;\r\n            }\r\n\r\n            if (host.idealHeight) {\r\n                // vertical\r\n                return height;\r\n            }\r\n        }\r\n        return this._value;\r\n    }\r\n\r\n    /**\r\n     * Gets a string representation of the value\r\n     * @param host defines the root host\r\n     * @param decimals defines an optional number of decimals to display\r\n     * @returns a string\r\n     */\r\n    public toString(host: AdvancedDynamicTexture, decimals?: number): string {\r\n        switch (this._unit) {\r\n            case ValueAndUnit.UNITMODE_PERCENTAGE: {\r\n                const percentage = this.getValue(host) * 100;\r\n                return (decimals ? percentage.toFixed(decimals) : percentage) + \"%\";\r\n            }\r\n            case ValueAndUnit.UNITMODE_PIXEL: {\r\n                const pixels = this.getValue(host);\r\n                return (decimals ? pixels.toFixed(decimals) : pixels) + \"px\";\r\n            }\r\n        }\r\n\r\n        return this._unit.toString();\r\n    }\r\n\r\n    /**\r\n     * Store a value parsed from a string\r\n     * @param source defines the source string\r\n     * @returns true if the value was successfully parsed and updated\r\n     */\r\n    public fromString(source: string | number): boolean {\r\n        const match = ValueAndUnit._Regex.exec(source.toString());\r\n\r\n        if (!match || match.length === 0) {\r\n            return false;\r\n        }\r\n\r\n        let sourceValue = parseFloat(match[1]);\r\n        let sourceUnit = this._originalUnit;\r\n\r\n        if (!this.negativeValueAllowed) {\r\n            if (sourceValue < 0) {\r\n                sourceValue = 0;\r\n            }\r\n        }\r\n\r\n        if (match.length === 4) {\r\n            switch (match[3]) {\r\n                case \"px\":\r\n                    sourceUnit = ValueAndUnit.UNITMODE_PIXEL;\r\n                    break;\r\n                case \"%\":\r\n                    sourceUnit = ValueAndUnit.UNITMODE_PERCENTAGE;\r\n                    sourceValue /= 100.0;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (sourceValue === this._value && sourceUnit === this._unit) {\r\n            return false;\r\n        }\r\n\r\n        this._value = sourceValue;\r\n        this._unit = sourceUnit;\r\n        this.onChangedObservable.notifyObservers();\r\n\r\n        return true;\r\n    }\r\n\r\n    // Static\r\n    private static _Regex = /(^-?\\d*(\\.\\d+)?)(%|px)?/;\r\n    private static _UNITMODE_PERCENTAGE = 0;\r\n    private static _UNITMODE_PIXEL = 1;\r\n\r\n    /** UNITMODE_PERCENTAGE */\r\n    public static get UNITMODE_PERCENTAGE(): number {\r\n        return ValueAndUnit._UNITMODE_PERCENTAGE;\r\n    }\r\n\r\n    /** UNITMODE_PIXEL */\r\n    public static get UNITMODE_PIXEL(): number {\r\n        return ValueAndUnit._UNITMODE_PIXEL;\r\n    }\r\n}\r\n", "import type { Matrix2D } from \"./math2D\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nconst tmpRect = [new Vector2(0, 0), new Vector2(0, 0), new Vector2(0, 0), new Vector2(0, 0)];\r\n\r\nconst tmpRect2 = [new Vector2(0, 0), new Vector2(0, 0), new Vector2(0, 0), new Vector2(0, 0)];\r\n\r\nconst tmpV1 = new Vector2(0, 0);\r\nconst tmpV2 = new Vector2(0, 0);\r\n\r\n/**\r\n * Class used to store 2D control sizes\r\n */\r\nexport class Measure {\r\n    /**\r\n     * Creates a new measure\r\n     * @param left defines left coordinate\r\n     * @param top defines top coordinate\r\n     * @param width defines width dimension\r\n     * @param height defines height dimension\r\n     */\r\n    public constructor(\r\n        /** defines left coordinate */\r\n        public left: number,\r\n        /** defines top coordinate  */\r\n        public top: number,\r\n        /** defines width dimension  */\r\n        public width: number,\r\n        /** defines height dimension */\r\n        public height: number\r\n    ) {}\r\n\r\n    /**\r\n     * Copy from another measure\r\n     * @param other defines the other measure to copy from\r\n     */\r\n    public copyFrom(other: Measure): void {\r\n        this.left = other.left;\r\n        this.top = other.top;\r\n        this.width = other.width;\r\n        this.height = other.height;\r\n    }\r\n\r\n    /**\r\n     * Copy from a group of 4 floats\r\n     * @param left defines left coordinate\r\n     * @param top defines top coordinate\r\n     * @param width defines width dimension\r\n     * @param height defines height dimension\r\n     */\r\n    public copyFromFloats(left: number, top: number, width: number, height: number): void {\r\n        this.left = left;\r\n        this.top = top;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Computes the axis aligned bounding box measure for two given measures\r\n     * @param a Input measure\r\n     * @param b Input measure\r\n     * @param result the resulting bounding measure\r\n     */\r\n    public static CombineToRef(a: Measure, b: Measure, result: Measure) {\r\n        const left = Math.min(a.left, b.left);\r\n        const top = Math.min(a.top, b.top);\r\n        const right = Math.max(a.left + a.width, b.left + b.width);\r\n        const bottom = Math.max(a.top + a.height, b.top + b.height);\r\n        result.left = left;\r\n        result.top = top;\r\n        result.width = right - left;\r\n        result.height = bottom - top;\r\n    }\r\n\r\n    /**\r\n     * Computes the axis aligned bounding box of the measure after it is modified by a given transform\r\n     * @param transform the matrix to transform the measure before computing the AABB\r\n     * @param addX number to add to left\r\n     * @param addY number to add to top\r\n     * @param addWidth number to add to width\r\n     * @param addHeight number to add to height\r\n     * @param result the resulting AABB\r\n     */\r\n    public addAndTransformToRef(transform: Matrix2D, addX: number, addY: number, addWidth: number, addHeight: number, result: Measure) {\r\n        const left = this.left + addX;\r\n        const top = this.top + addY;\r\n        const width = this.width + addWidth;\r\n        const height = this.height + addHeight;\r\n\r\n        tmpRect[0].copyFromFloats(left, top);\r\n        tmpRect[1].copyFromFloats(left + width, top);\r\n        tmpRect[2].copyFromFloats(left + width, top + height);\r\n        tmpRect[3].copyFromFloats(left, top + height);\r\n\r\n        tmpV1.copyFromFloats(Number.MAX_VALUE, Number.MAX_VALUE);\r\n        tmpV2.copyFromFloats(0, 0);\r\n        for (let i = 0; i < 4; i++) {\r\n            transform.transformCoordinates(tmpRect[i].x, tmpRect[i].y, tmpRect2[i]);\r\n            tmpV1.x = Math.floor(Math.min(tmpV1.x, tmpRect2[i].x));\r\n            tmpV1.y = Math.floor(Math.min(tmpV1.y, tmpRect2[i].y));\r\n            tmpV2.x = Math.ceil(Math.max(tmpV2.x, tmpRect2[i].x));\r\n            tmpV2.y = Math.ceil(Math.max(tmpV2.y, tmpRect2[i].y));\r\n        }\r\n        result.left = tmpV1.x;\r\n        result.top = tmpV1.y;\r\n        result.width = tmpV2.x - tmpV1.x;\r\n        result.height = tmpV2.y - tmpV1.y;\r\n    }\r\n\r\n    /**\r\n     * Computes the axis aligned bounding box of the measure after it is modified by a given transform\r\n     * @param transform the matrix to transform the measure before computing the AABB\r\n     * @param result the resulting AABB\r\n     */\r\n    public transformToRef(transform: Matrix2D, result: Measure) {\r\n        this.addAndTransformToRef(transform, 0, 0, 0, 0, result);\r\n    }\r\n    /**\r\n     * Check equality between this measure and another one\r\n     * @param other defines the other measures\r\n     * @returns true if both measures are equals\r\n     */\r\n    public isEqualsTo(other: Measure): boolean {\r\n        if (this.left !== other.left) {\r\n            return false;\r\n        }\r\n\r\n        if (this.top !== other.top) {\r\n            return false;\r\n        }\r\n\r\n        if (this.width !== other.width) {\r\n            return false;\r\n        }\r\n\r\n        if (this.height !== other.height) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Creates an empty measure\r\n     * @returns a new measure\r\n     */\r\n    public static Empty(): Measure {\r\n        return new Measure(0, 0, 0, 0);\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { Epsilon } from \"core/Maths/math.constants\";\r\n\r\n/**\r\n * Class used to transport Vector2 information for pointer events\r\n */\r\nexport class Vector2WithInfo extends Vector2 {\r\n    /**\r\n     * Creates a new Vector2WithInfo\r\n     * @param source defines the vector2 data to transport\r\n     * @param buttonIndex defines the current mouse button index\r\n     */\r\n    public constructor(\r\n        source: Vector2,\r\n        /** defines the current mouse button index */\r\n        public buttonIndex: number = 0\r\n    ) {\r\n        super(source.x, source.y);\r\n    }\r\n}\r\n\r\n/** Class used to provide 2D matrix features */\r\nexport class Matrix2D {\r\n    /** Gets the internal array of 6 floats used to store matrix data */\r\n    public m = new Float32Array(6);\r\n\r\n    /**\r\n     * Creates a new matrix\r\n     * @param m00 defines value for (0, 0)\r\n     * @param m01 defines value for (0, 1)\r\n     * @param m10 defines value for (1, 0)\r\n     * @param m11 defines value for (1, 1)\r\n     * @param m20 defines value for (2, 0)\r\n     * @param m21 defines value for (2, 1)\r\n     */\r\n    constructor(m00: number, m01: number, m10: number, m11: number, m20: number, m21: number) {\r\n        this.fromValues(m00, m01, m10, m11, m20, m21);\r\n    }\r\n\r\n    /**\r\n     * Fills the matrix from direct values\r\n     * @param m00 defines value for (0, 0)\r\n     * @param m01 defines value for (0, 1)\r\n     * @param m10 defines value for (1, 0)\r\n     * @param m11 defines value for (1, 1)\r\n     * @param m20 defines value for (2, 0)\r\n     * @param m21 defines value for (2, 1)\r\n     * @returns the current modified matrix\r\n     */\r\n    public fromValues(m00: number, m01: number, m10: number, m11: number, m20: number, m21: number): Matrix2D {\r\n        this.m[0] = m00;\r\n        this.m[1] = m01;\r\n        this.m[2] = m10;\r\n        this.m[3] = m11;\r\n        this.m[4] = m20;\r\n        this.m[5] = m21;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets matrix determinant\r\n     * @returns the determinant\r\n     */\r\n    public determinant(): number {\r\n        return this.m[0] * this.m[3] - this.m[1] * this.m[2];\r\n    }\r\n\r\n    /**\r\n     * Inverses the matrix and stores it in a target matrix\r\n     * @param result defines the target matrix\r\n     * @returns the current matrix\r\n     */\r\n    public invertToRef(result: Matrix2D): Matrix2D {\r\n        const l0 = this.m[0];\r\n        const l1 = this.m[1];\r\n        const l2 = this.m[2];\r\n        const l3 = this.m[3];\r\n        const l4 = this.m[4];\r\n        const l5 = this.m[5];\r\n\r\n        const det = this.determinant();\r\n        if (det < Epsilon * Epsilon) {\r\n            result.m[0] = 0;\r\n            result.m[1] = 0;\r\n            result.m[2] = 0;\r\n            result.m[3] = 0;\r\n            result.m[4] = 0;\r\n            result.m[5] = 0;\r\n            return this;\r\n        }\r\n\r\n        const detDiv = 1 / det;\r\n\r\n        const det4 = l2 * l5 - l3 * l4;\r\n        const det5 = l1 * l4 - l0 * l5;\r\n\r\n        result.m[0] = l3 * detDiv;\r\n        result.m[1] = -l1 * detDiv;\r\n        result.m[2] = -l2 * detDiv;\r\n        result.m[3] = l0 * detDiv;\r\n        result.m[4] = det4 * detDiv;\r\n        result.m[5] = det5 * detDiv;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiplies the current matrix with another one\r\n     * @param other defines the second operand\r\n     * @param result defines the target matrix\r\n     * @returns the current matrix\r\n     */\r\n    public multiplyToRef(other: Matrix2D, result: Matrix2D): Matrix2D {\r\n        const l0 = this.m[0];\r\n        const l1 = this.m[1];\r\n        const l2 = this.m[2];\r\n        const l3 = this.m[3];\r\n        const l4 = this.m[4];\r\n        const l5 = this.m[5];\r\n\r\n        const r0 = other.m[0];\r\n        const r1 = other.m[1];\r\n        const r2 = other.m[2];\r\n        const r3 = other.m[3];\r\n        const r4 = other.m[4];\r\n        const r5 = other.m[5];\r\n\r\n        result.m[0] = l0 * r0 + l1 * r2;\r\n        result.m[1] = l0 * r1 + l1 * r3;\r\n        result.m[2] = l2 * r0 + l3 * r2;\r\n        result.m[3] = l2 * r1 + l3 * r3;\r\n        result.m[4] = l4 * r0 + l5 * r2 + r4;\r\n        result.m[5] = l4 * r1 + l5 * r3 + r5;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Applies the current matrix to a set of 2 floats and stores the result in a vector2\r\n     * @param x defines the x coordinate to transform\r\n     * @param y defines the x coordinate to transform\r\n     * @param result defines the target vector2\r\n     * @returns the current matrix\r\n     */\r\n    public transformCoordinates(x: number, y: number, result: Vector2): Matrix2D {\r\n        result.x = x * this.m[0] + y * this.m[2] + this.m[4];\r\n        result.y = x * this.m[1] + y * this.m[3] + this.m[5];\r\n\r\n        return this;\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates an identity matrix\r\n     * @returns a new matrix\r\n     */\r\n    public static Identity(): Matrix2D {\r\n        return new Matrix2D(1, 0, 0, 1, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates an identity matrix and stores it in a target matrix\r\n     * @param result defines the target matrix\r\n     */\r\n    public static IdentityToRef(result: Matrix2D): void {\r\n        result.m[0] = 1;\r\n        result.m[1] = 0;\r\n        result.m[2] = 0;\r\n        result.m[3] = 1;\r\n        result.m[4] = 0;\r\n        result.m[5] = 0;\r\n    }\r\n\r\n    /**\r\n     * Creates a translation matrix and stores it in a target matrix\r\n     * @param x defines the x coordinate of the translation\r\n     * @param y defines the y coordinate of the translation\r\n     * @param result defines the target matrix\r\n     */\r\n    public static TranslationToRef(x: number, y: number, result: Matrix2D): void {\r\n        result.fromValues(1, 0, 0, 1, x, y);\r\n    }\r\n\r\n    /**\r\n     * Creates a scaling matrix and stores it in a target matrix\r\n     * @param x defines the x coordinate of the scaling\r\n     * @param y defines the y coordinate of the scaling\r\n     * @param result defines the target matrix\r\n     */\r\n    public static ScalingToRef(x: number, y: number, result: Matrix2D): void {\r\n        result.fromValues(x, 0, 0, y, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates a rotation matrix and stores it in a target matrix\r\n     * @param angle defines the rotation angle\r\n     * @param result defines the target matrix\r\n     */\r\n    public static RotationToRef(angle: number, result: Matrix2D): void {\r\n        const s = Math.sin(angle);\r\n        const c = Math.cos(angle);\r\n\r\n        result.fromValues(c, s, -s, c, 0, 0);\r\n    }\r\n\r\n    private static _TempPreTranslationMatrix = Matrix2D.Identity();\r\n    private static _TempPostTranslationMatrix = Matrix2D.Identity();\r\n    private static _TempRotationMatrix = Matrix2D.Identity();\r\n    private static _TempScalingMatrix = Matrix2D.Identity();\r\n    private static _TempCompose0 = Matrix2D.Identity();\r\n    private static _TempCompose1 = Matrix2D.Identity();\r\n    private static _TempCompose2 = Matrix2D.Identity();\r\n\r\n    /**\r\n     * Composes a matrix from translation, rotation, scaling and parent matrix and stores it in a target matrix\r\n     * @param tx defines the x coordinate of the translation\r\n     * @param ty defines the y coordinate of the translation\r\n     * @param angle defines the rotation angle\r\n     * @param scaleX defines the x coordinate of the scaling\r\n     * @param scaleY defines the y coordinate of the scaling\r\n     * @param parentMatrix defines the parent matrix to multiply by (can be null)\r\n     * @param result defines the target matrix\r\n     */\r\n    public static ComposeToRef(tx: number, ty: number, angle: number, scaleX: number, scaleY: number, parentMatrix: Nullable<Matrix2D>, result: Matrix2D): void {\r\n        Matrix2D.TranslationToRef(tx, ty, Matrix2D._TempPreTranslationMatrix);\r\n\r\n        Matrix2D.ScalingToRef(scaleX, scaleY, Matrix2D._TempScalingMatrix);\r\n\r\n        Matrix2D.RotationToRef(angle, Matrix2D._TempRotationMatrix);\r\n\r\n        Matrix2D.TranslationToRef(-tx, -ty, Matrix2D._TempPostTranslationMatrix);\r\n\r\n        Matrix2D._TempPreTranslationMatrix.multiplyToRef(Matrix2D._TempScalingMatrix, Matrix2D._TempCompose0);\r\n        Matrix2D._TempCompose0.multiplyToRef(Matrix2D._TempRotationMatrix, Matrix2D._TempCompose1);\r\n        if (parentMatrix) {\r\n            Matrix2D._TempCompose1.multiplyToRef(Matrix2D._TempPostTranslationMatrix, Matrix2D._TempCompose2);\r\n            Matrix2D._TempCompose2.multiplyToRef(parentMatrix, result);\r\n        } else {\r\n            Matrix2D._TempCompose1.multiplyToRef(Matrix2D._TempPostTranslationMatrix, result);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Useful math functions\r\n */\r\nexport class MathTools {\r\n    /**\r\n     * Default rounding precision for GUI elements. It should be\r\n     * set to a power of ten, where the exponent means the number\r\n     * of decimal digits to round to, i.e, 100 means 2 decimal digits,\r\n     * 1000 means 3 decimal digits, etc. Default is 100 (2 decimal digits).\r\n     */\r\n    public static DefaultRoundingPrecision = 100;\r\n\r\n    /**\r\n     * Rounds a number to the nearest multiple of a given precision\r\n     * @param value the value to be rounded\r\n     * @param precision the multiple to which the value will be rounded. Default is 100 (2 decimal digits)\r\n     * @returns\r\n     */\r\n    public static Round(value: number, precision: number = MathTools.DefaultRoundingPrecision): number {\r\n        return Math.round(value * precision) / precision;\r\n    }\r\n}\r\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Vector2, Vector3, Matrix } from \"core/Maths/math.vector\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport type { Container } from \"./container\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Measure } from \"../measure\";\r\nimport type { Style } from \"../style\";\r\nimport { Matrix2D, Vector2WithInfo } from \"../math2D\";\r\nimport { GetClass, RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { ICanvasGradient, ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\nimport type { IAccessibilityTag } from \"core/IAccessibilityTag\";\r\nimport type { IPointerEvent } from \"core/Events/deviceInputEvents\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { BaseGradient } from \"./gradient/BaseGradient\";\r\n\r\n/**\r\n * Root class used for all 2D controls\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#controls\r\n */\r\nexport class Control implements IAnimatable {\r\n    /**\r\n     * Gets or sets a boolean indicating if alpha must be an inherited value (false by default)\r\n     */\r\n    public static AllowAlphaInheritance = false;\r\n\r\n    private _alpha = 1;\r\n    private _alphaSet = false;\r\n    private _zIndex = 0;\r\n    /** @internal */\r\n    public _host: AdvancedDynamicTexture;\r\n    /** Gets or sets the control parent */\r\n    public parent: Nullable<Container>;\r\n    /** @internal */\r\n    public _currentMeasure = Measure.Empty();\r\n    /** @internal */\r\n    public _tempPaddingMeasure = Measure.Empty();\r\n    private _fontFamily = \"\";\r\n    private _fontStyle = \"\";\r\n    private _fontWeight = \"\";\r\n    private _fontSize = new ValueAndUnit(18, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _font: string;\r\n    /** @internal */\r\n    public _width = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n    /** @internal */\r\n    public _height = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n    /** @internal */\r\n    protected _fontOffset: { ascent: number; height: number; descent: number };\r\n    private _color = \"\";\r\n    private _style: Nullable<Style> = null;\r\n    private _styleObserver: Nullable<Observer<Style>>;\r\n    /** @internal */\r\n    protected _horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n    /** @internal */\r\n    protected _verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n    /** @internal */\r\n    protected _isDirty = true;\r\n    /** @internal */\r\n    protected _wasDirty = false;\r\n    /** @internal */\r\n    public _tempParentMeasure = Measure.Empty();\r\n    /** @internal */\r\n    public _prevCurrentMeasureTransformedIntoGlobalSpace = Measure.Empty();\r\n    /** @internal */\r\n    public _cachedParentMeasure = Measure.Empty();\r\n    private _descendantsOnlyPadding = false;\r\n    private _paddingLeft = new ValueAndUnit(0);\r\n    private _paddingRight = new ValueAndUnit(0);\r\n    private _paddingTop = new ValueAndUnit(0);\r\n    private _paddingBottom = new ValueAndUnit(0);\r\n    /** @internal */\r\n    public _left = new ValueAndUnit(0);\r\n    /** @internal */\r\n    public _top = new ValueAndUnit(0);\r\n    private _scaleX = 1.0;\r\n    private _scaleY = 1.0;\r\n    private _rotation = 0;\r\n    private _transformCenterX = 0.5;\r\n    private _transformCenterY = 0.5;\r\n    /** @internal */\r\n    public _transformMatrix = Matrix2D.Identity();\r\n    /** @internal */\r\n    protected _invertTransformMatrix = Matrix2D.Identity();\r\n    /** @internal */\r\n    protected _transformedPosition = Vector2.Zero();\r\n    private _isMatrixDirty = true;\r\n    private _cachedOffsetX: number;\r\n    private _cachedOffsetY: number;\r\n    private _isVisible = true;\r\n    private _isHighlighted = false;\r\n    private _highlightColor = \"#4affff\";\r\n    protected _highlightLineWidth = 2;\r\n    /** @internal */\r\n    public _linkedMesh: Nullable<TransformNode>;\r\n    private _fontSet = false;\r\n    private _dummyVector2 = Vector2.Zero();\r\n    private _downCount = 0;\r\n    private _enterCount = -1;\r\n    private _doNotRender = false;\r\n    private _downPointerIds: { [id: number]: boolean } = {};\r\n    private _evaluatedMeasure = new Measure(0, 0, 0, 0);\r\n    private _evaluatedParentMeasure = new Measure(0, 0, 0, 0);\r\n    protected _isEnabled = true;\r\n    protected _disabledColor = \"#9a9a9a\";\r\n    protected _disabledColorItem = \"#6a6a6a\";\r\n    protected _isReadOnly = false;\r\n    private _gradient: Nullable<BaseGradient> = null;\r\n    /** @internal */\r\n    protected _rebuildLayout = false;\r\n\r\n    /**\r\n     * Observable that fires when the control's enabled state changes\r\n     */\r\n    public onEnabledStateChangedObservable = new Observable<boolean>();\r\n\r\n    /** @internal */\r\n    public _customData: any = {};\r\n\r\n    /** @internal */\r\n    public _isClipped = false;\r\n\r\n    /** @internal */\r\n    public _automaticSize = false;\r\n\r\n    /** @internal */\r\n    public _tag: any;\r\n\r\n    /**\r\n     * Gets or sets the unique id of the node. Please note that this number will be updated when the control is added to a container\r\n     */\r\n    public uniqueId: number;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the control is readonly (default: false).\r\n     * A readonly control will still raise pointer events but will not react to them\r\n     */\r\n    public get isReadOnly() {\r\n        return this._isReadOnly;\r\n    }\r\n\r\n    public set isReadOnly(value: boolean) {\r\n        this._isReadOnly = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the transformed measure, that is the bounding box of the control after applying all transformations\r\n     */\r\n    public get transformedMeasure(): Measure {\r\n        return this._evaluatedMeasure;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an object used to store user defined information for the node\r\n     */\r\n    @serialize()\r\n    public metadata: any = null;\r\n\r\n    /** Gets or sets a boolean indicating if the control can be hit with pointer events */\r\n    @serialize()\r\n    public isHitTestVisible = true;\r\n    /** Gets or sets a boolean indicating if the control can block pointer events. False by default except on the following controls:\r\n     * * Button controls (Button, RadioButton, ToggleButton)\r\n     * * Checkbox\r\n     * * ColorPicker\r\n     * * InputText\r\n     * * Slider\r\n     */\r\n    @serialize()\r\n    public isPointerBlocker = false;\r\n    /** Gets or sets a boolean indicating if the control can be focusable */\r\n    @serialize()\r\n    public isFocusInvisible = false;\r\n\r\n    protected _clipChildren = true;\r\n    /**\r\n     * Sets/Gets a boolean indicating if the children are clipped to the current control bounds.\r\n     * Please note that not clipping children may generate issues with adt.useInvalidateRectOptimization so it is recommended to turn this optimization off if you want to use unclipped children\r\n     */\r\n    public set clipChildren(value: boolean) {\r\n        this._clipChildren = value;\r\n    }\r\n\r\n    @serialize()\r\n    public get clipChildren() {\r\n        return this._clipChildren;\r\n    }\r\n\r\n    protected _clipContent = true;\r\n    /**\r\n     * Sets/Gets a boolean indicating that control content must be clipped\r\n     * Please note that not clipping content may generate issues with adt.useInvalidateRectOptimization so it is recommended to turn this optimization off if you want to use unclipped children\r\n     */\r\n    public set clipContent(value: boolean) {\r\n        this._clipContent = value;\r\n    }\r\n\r\n    @serialize()\r\n    public get clipContent() {\r\n        return this._clipContent;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the current control should cache its rendering (useful when the control does not change often)\r\n     */\r\n    @serialize()\r\n    public useBitmapCache = false;\r\n\r\n    private _cacheData: Nullable<ImageData>;\r\n\r\n    private _shadowOffsetX = 0;\r\n    /** Gets or sets a value indicating the offset to apply on X axis to render the shadow */\r\n    @serialize()\r\n    public get shadowOffsetX() {\r\n        return this._shadowOffsetX;\r\n    }\r\n\r\n    public set shadowOffsetX(value: number) {\r\n        if (this._shadowOffsetX === value) {\r\n            return;\r\n        }\r\n\r\n        this._shadowOffsetX = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    private _shadowOffsetY = 0;\r\n    /** Gets or sets a value indicating the offset to apply on Y axis to render the shadow */\r\n    @serialize()\r\n    public get shadowOffsetY() {\r\n        return this._shadowOffsetY;\r\n    }\r\n\r\n    public set shadowOffsetY(value: number) {\r\n        if (this._shadowOffsetY === value) {\r\n            return;\r\n        }\r\n\r\n        this._shadowOffsetY = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    private _shadowBlur = 0;\r\n    private _previousShadowBlur = 0;\r\n    /** Gets or sets a value indicating the amount of blur to use to render the shadow */\r\n    @serialize()\r\n    public get shadowBlur() {\r\n        return this._shadowBlur;\r\n    }\r\n\r\n    public set shadowBlur(value: number) {\r\n        if (this._shadowBlur === value) {\r\n            return;\r\n        }\r\n\r\n        this._previousShadowBlur = this._shadowBlur;\r\n\r\n        this._shadowBlur = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    private _shadowColor = \"black\";\r\n    /** Gets or sets a value indicating the color of the shadow (black by default ie. \"#000\") */\r\n    @serialize()\r\n    public get shadowColor() {\r\n        return this._shadowColor;\r\n    }\r\n\r\n    public set shadowColor(value: string) {\r\n        if (this._shadowColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._shadowColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the cursor to use when the control is hovered */\r\n    @serialize()\r\n    public hoverCursor = \"\";\r\n\r\n    /** @internal */\r\n    protected _linkOffsetX = new ValueAndUnit(0);\r\n    /** @internal */\r\n    protected _linkOffsetY = new ValueAndUnit(0);\r\n\r\n    // Properties\r\n\r\n    /** Gets the control type name */\r\n    public get typeName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    /**\r\n     * Get the current class name of the control.\r\n     * @returns current class name\r\n     */\r\n    public getClassName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the accessibility tag to describe the control for accessibility purpose.\r\n     * By default, GUI controls already indicate accessibility info, but one can override the info using this tag.\r\n     */\r\n    public set accessibilityTag(value: Nullable<IAccessibilityTag>) {\r\n        this._accessibilityTag = value;\r\n        this.onAccessibilityTagChangedObservable.notifyObservers(value);\r\n    }\r\n\r\n    public get accessibilityTag() {\r\n        return this._accessibilityTag;\r\n    }\r\n\r\n    protected _accessibilityTag: Nullable<IAccessibilityTag> = null;\r\n\r\n    /**\r\n     * Observable that fires whenever the accessibility event of the control has changed\r\n     */\r\n    public onAccessibilityTagChangedObservable = new Observable<Nullable<IAccessibilityTag>>();\r\n\r\n    /**\r\n     * An event triggered when pointer wheel is scrolled\r\n     */\r\n    public onWheelObservable = new Observable<Vector2>();\r\n    /**\r\n     * An event triggered when the pointer moves over the control.\r\n     */\r\n    public onPointerMoveObservable = new Observable<Vector2>();\r\n\r\n    /**\r\n     * An event triggered when the pointer moves out of the control.\r\n     */\r\n    public onPointerOutObservable = new Observable<Control>();\r\n\r\n    /**\r\n     * An event triggered when the pointer taps the control\r\n     */\r\n    public onPointerDownObservable = new Observable<Vector2WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer up\r\n     */\r\n    public onPointerUpObservable = new Observable<Vector2WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when a control is clicked on\r\n     */\r\n    public onPointerClickObservable = new Observable<Vector2WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer enters the control\r\n     */\r\n    public onPointerEnterObservable = new Observable<Control>();\r\n\r\n    /**\r\n     * An event triggered when the control is marked as dirty\r\n     */\r\n    public onDirtyObservable = new Observable<Control>();\r\n\r\n    /**\r\n     * An event triggered before drawing the control\r\n     */\r\n    public onBeforeDrawObservable = new Observable<Control>();\r\n\r\n    /**\r\n     * An event triggered after the control was drawn\r\n     */\r\n    public onAfterDrawObservable = new Observable<Control>();\r\n\r\n    /**\r\n     * An event triggered when the control has been disposed\r\n     */\r\n    public onDisposeObservable = new Observable<Control>();\r\n\r\n    /**\r\n     * An event triggered when the control isVisible is changed\r\n     */\r\n    public onIsVisibleChangedObservable = new Observable<boolean>();\r\n\r\n    /**\r\n     * Get the hosting AdvancedDynamicTexture\r\n     */\r\n    public get host(): AdvancedDynamicTexture {\r\n        return this._host;\r\n    }\r\n\r\n    /** Gets or set information about font offsets (used to render and align text) */\r\n    @serialize()\r\n    public get fontOffset(): { ascent: number; height: number; descent: number } {\r\n        return this._fontOffset;\r\n    }\r\n\r\n    public set fontOffset(offset: { ascent: number; height: number; descent: number }) {\r\n        this._fontOffset = offset;\r\n    }\r\n\r\n    /** Gets or sets alpha value for the control (1 means opaque and 0 means entirely transparent) */\r\n    @serialize()\r\n    public get alpha(): number {\r\n        return this._alpha;\r\n    }\r\n\r\n    public set alpha(value: number) {\r\n        if (this._alpha === value) {\r\n            return;\r\n        }\r\n        this._alphaSet = true;\r\n        this._alpha = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a number indicating size of stroke we want to highlight the control with (mostly for debugging purpose)\r\n     */\r\n    public get highlightLineWidth(): number {\r\n        return this._highlightLineWidth;\r\n    }\r\n\r\n    public set highlightLineWidth(value: number) {\r\n        if (this._highlightLineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._highlightLineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that we want to highlight the control (mostly for debugging purpose)\r\n     */\r\n    public get isHighlighted(): boolean {\r\n        return this._isHighlighted;\r\n    }\r\n\r\n    public set isHighlighted(value: boolean) {\r\n        if (this._isHighlighted === value) {\r\n            return;\r\n        }\r\n\r\n        this._isHighlighted = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Indicates if the control should be serialized. Defaults to true.\r\n     */\r\n    @serialize()\r\n    public isSerializable: boolean = true;\r\n\r\n    /**\r\n     * Gets or sets a string defining the color to use for highlighting this control\r\n     */\r\n    public get highlightColor(): string {\r\n        return this._highlightColor;\r\n    }\r\n\r\n    public set highlightColor(value: string) {\r\n        if (this._highlightColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._highlightColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating the scale factor on X axis (1 by default)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#rotation-and-scaling\r\n     */\r\n    @serialize()\r\n    public get scaleX(): number {\r\n        return this._scaleX;\r\n    }\r\n\r\n    public set scaleX(value: number) {\r\n        if (this._scaleX === value) {\r\n            return;\r\n        }\r\n\r\n        this._scaleX = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating the scale factor on Y axis (1 by default)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#rotation-and-scaling\r\n     */\r\n    @serialize()\r\n    public get scaleY(): number {\r\n        return this._scaleY;\r\n    }\r\n\r\n    public set scaleY(value: number) {\r\n        if (this._scaleY === value) {\r\n            return;\r\n        }\r\n\r\n        this._scaleY = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the rotation angle (0 by default)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#rotation-and-scaling\r\n     */\r\n    @serialize()\r\n    public get rotation(): number {\r\n        return this._rotation;\r\n    }\r\n\r\n    public set rotation(value: number) {\r\n        if (this._rotation === value) {\r\n            return;\r\n        }\r\n\r\n        this._rotation = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the transformation center on Y axis (0 by default)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#rotation-and-scaling\r\n     */\r\n    @serialize()\r\n    public get transformCenterY(): number {\r\n        return this._transformCenterY;\r\n    }\r\n\r\n    public set transformCenterY(value: number) {\r\n        if (this._transformCenterY === value) {\r\n            return;\r\n        }\r\n\r\n        this._transformCenterY = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the transformation center on X axis (0 by default)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#rotation-and-scaling\r\n     */\r\n    @serialize()\r\n    public get transformCenterX(): number {\r\n        return this._transformCenterX;\r\n    }\r\n\r\n    public set transformCenterX(value: number) {\r\n        if (this._transformCenterX === value) {\r\n            return;\r\n        }\r\n\r\n        this._transformCenterX = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the horizontal alignment\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#alignments\r\n     */\r\n    @serialize()\r\n    public get horizontalAlignment(): number {\r\n        return this._horizontalAlignment;\r\n    }\r\n\r\n    public set horizontalAlignment(value: number) {\r\n        if (this._horizontalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._horizontalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the vertical alignment\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#alignments\r\n     */\r\n    @serialize()\r\n    public get verticalAlignment(): number {\r\n        return this._verticalAlignment;\r\n    }\r\n\r\n    public set verticalAlignment(value: number) {\r\n        if (this._verticalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._verticalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    private _fixedRatio = 0;\r\n    public set fixedRatio(value: number) {\r\n        if (this._fixedRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._fixedRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a fixed ratio for this control.\r\n     * When different from 0, the ratio is used to compute the \"second\" dimension.\r\n     * The first dimension used in the computation is the last one set (by setting width / widthInPixels or height / heightInPixels), and the\r\n     * second dimension is computed as first dimension * fixedRatio\r\n     */\r\n    @serialize()\r\n    public get fixedRatio(): number {\r\n        return this._fixedRatio;\r\n    }\r\n\r\n    private _fixedRatioMasterIsWidth = true;\r\n    set fixedRatioMasterIsWidth(value: boolean) {\r\n        if (this._fixedRatioMasterIsWidth === value) {\r\n            return;\r\n        }\r\n        this._fixedRatioMasterIsWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the fixed ratio is set on the width instead of the height. True by default.\r\n     * When the height of a control is set, this property is changed to false.\r\n     */\r\n    @serialize()\r\n    get fixedRatioMasterIsWidth(): boolean {\r\n        return this._fixedRatioMasterIsWidth;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets control width\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    public set width(value: string | number) {\r\n        this._fixedRatioMasterIsWidth = true;\r\n\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the control width in pixel\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get widthInPixels(): number {\r\n        return this._width.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set widthInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this._fixedRatioMasterIsWidth = true;\r\n        this.width = value + \"px\";\r\n    }\r\n\r\n    /**\r\n     * Gets or sets control height\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get height(): string | number {\r\n        return this._height.toString(this._host);\r\n    }\r\n\r\n    public set height(value: string | number) {\r\n        this._fixedRatioMasterIsWidth = false;\r\n\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets control height in pixel\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get heightInPixels(): number {\r\n        return this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set heightInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this._fixedRatioMasterIsWidth = false;\r\n        this.height = value + \"px\";\r\n    }\r\n\r\n    /** Gets or set font family */\r\n    public get fontFamily(): string {\r\n        return this._fontFamily;\r\n    }\r\n\r\n    public set fontFamily(value: string) {\r\n        if (this._fontFamily === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontFamily = value;\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /** Gets or sets font style */\r\n    public get fontStyle(): string {\r\n        return this._fontStyle;\r\n    }\r\n\r\n    public set fontStyle(value: string) {\r\n        if (this._fontStyle === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontStyle = value;\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /** Gets or sets font weight */\r\n    public get fontWeight(): string {\r\n        return this._fontWeight;\r\n    }\r\n\r\n    public set fontWeight(value: string) {\r\n        if (this._fontWeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontWeight = value;\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets style\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#styles\r\n     */\r\n    @serialize()\r\n    public get style(): Nullable<Style> {\r\n        return this._style;\r\n    }\r\n\r\n    public set style(value: Nullable<Style>) {\r\n        if (this._style) {\r\n            this._style.onChangedObservable.remove(this._styleObserver);\r\n            this._styleObserver = null;\r\n        }\r\n\r\n        this._style = value;\r\n\r\n        if (this._style) {\r\n            this._styleObserver = this._style.onChangedObservable.add(() => {\r\n                this._markAsDirty();\r\n                this._resetFontCache();\r\n            });\r\n        }\r\n\r\n        this._markAsDirty();\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /** @internal */\r\n    public get _isFontSizeInPercentage(): boolean {\r\n        return this._fontSize.isPercentage;\r\n    }\r\n\r\n    /** Gets or sets font size in pixels */\r\n    public get fontSizeInPixels(): number {\r\n        const fontSizeToUse = this._style ? this._style._fontSize : this._fontSize;\r\n\r\n        if (fontSizeToUse.isPixel) {\r\n            return fontSizeToUse.getValue(this._host);\r\n        }\r\n\r\n        return fontSizeToUse.getValueInPixel(this._host, this._tempParentMeasure.height || this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set fontSizeInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.fontSize = value + \"px\";\r\n    }\r\n\r\n    /** Gets or sets font size */\r\n    public get fontSize(): string | number {\r\n        return this._fontSize.toString(this._host);\r\n    }\r\n\r\n    public set fontSize(value: string | number) {\r\n        if (this._fontSize.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._fontSize.fromString(value)) {\r\n            this._markAsDirty();\r\n            this._resetFontCache();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets foreground color */\r\n    @serialize()\r\n    public get color(): string {\r\n        return this._color;\r\n    }\r\n\r\n    public set color(value: string) {\r\n        if (this._color === value) {\r\n            return;\r\n        }\r\n\r\n        this._color = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets gradient. Setting a gradient will override the color */\r\n    @serialize()\r\n    public get gradient(): Nullable<BaseGradient> {\r\n        return this._gradient;\r\n    }\r\n\r\n    public set gradient(value: Nullable<BaseGradient>) {\r\n        if (this._gradient === value) {\r\n            return;\r\n        }\r\n\r\n        this._gradient = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets z index which is used to reorder controls on the z axis */\r\n    @serialize()\r\n    public get zIndex(): number {\r\n        return this._zIndex;\r\n    }\r\n\r\n    public set zIndex(value: number) {\r\n        if (this.zIndex === value) {\r\n            return;\r\n        }\r\n\r\n        this._zIndex = value;\r\n\r\n        if (this.parent) {\r\n            this.parent._reOrderControl(this);\r\n        }\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control can be rendered */\r\n    @serialize()\r\n    public get notRenderable(): boolean {\r\n        return this._doNotRender;\r\n    }\r\n\r\n    public set notRenderable(value: boolean) {\r\n        if (this._doNotRender === value) {\r\n            return;\r\n        }\r\n\r\n        this._doNotRender = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control is visible */\r\n    @serialize()\r\n    public get isVisible(): boolean {\r\n        return this._isVisible;\r\n    }\r\n\r\n    public set isVisible(value: boolean) {\r\n        if (this._isVisible === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVisible = value;\r\n        this._markAsDirty(true);\r\n\r\n        this.onIsVisibleChangedObservable.notifyObservers(value);\r\n    }\r\n\r\n    /** Gets a boolean indicating that the control needs to update its rendering */\r\n    public get isDirty(): boolean {\r\n        return this._isDirty;\r\n    }\r\n\r\n    /**\r\n     * Gets the current linked mesh (or null if none)\r\n     */\r\n    public get linkedMesh(): Nullable<TransformNode> {\r\n        return this._linkedMesh;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding should work like in CSS.\r\n     * Basically, it will add the padding amount on each side of the parent control for its children.\r\n     */\r\n    @serialize()\r\n    public get descendantsOnlyPadding(): boolean {\r\n        return this._descendantsOnlyPadding;\r\n    }\r\n\r\n    public set descendantsOnlyPadding(value: boolean) {\r\n        if (this._descendantsOnlyPadding === value) {\r\n            return;\r\n        }\r\n\r\n        this._descendantsOnlyPadding = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the left of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get paddingLeft(): string | number {\r\n        return this._paddingLeft.toString(this._host);\r\n    }\r\n\r\n    public set paddingLeft(value: string | number) {\r\n        if (this._paddingLeft.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding in pixels to use on the left of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get paddingLeftInPixels(): number {\r\n        return this._paddingLeft.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set paddingLeftInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.paddingLeft = value + \"px\";\r\n    }\r\n\r\n    /** @internal */\r\n    public get _paddingLeftInPixels(): number {\r\n        if (this._descendantsOnlyPadding) {\r\n            return 0;\r\n        }\r\n\r\n        return this.paddingLeftInPixels;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the right of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get paddingRight(): string | number {\r\n        return this._paddingRight.toString(this._host);\r\n    }\r\n\r\n    public set paddingRight(value: string | number) {\r\n        if (this._paddingRight.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding in pixels to use on the right of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get paddingRightInPixels(): number {\r\n        return this._paddingRight.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set paddingRightInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.paddingRight = value + \"px\";\r\n    }\r\n\r\n    /** @internal */\r\n    public get _paddingRightInPixels(): number {\r\n        if (this._descendantsOnlyPadding) {\r\n            return 0;\r\n        }\r\n\r\n        return this.paddingRightInPixels;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the top of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get paddingTop(): string | number {\r\n        return this._paddingTop.toString(this._host);\r\n    }\r\n\r\n    public set paddingTop(value: string | number) {\r\n        if (this._paddingTop.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding in pixels to use on the top of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get paddingTopInPixels(): number {\r\n        return this._paddingTop.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set paddingTopInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.paddingTop = value + \"px\";\r\n    }\r\n\r\n    /** @internal */\r\n    public get _paddingTopInPixels(): number {\r\n        if (this._descendantsOnlyPadding) {\r\n            return 0;\r\n        }\r\n\r\n        return this.paddingTopInPixels;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the bottom of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get paddingBottom(): string | number {\r\n        return this._paddingBottom.toString(this._host);\r\n    }\r\n\r\n    public set paddingBottom(value: string | number) {\r\n        if (this._paddingBottom.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding in pixels to use on the bottom of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get paddingBottomInPixels(): number {\r\n        return this._paddingBottom.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set paddingBottomInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.paddingBottom = value + \"px\";\r\n    }\r\n\r\n    /** @internal */\r\n    public get _paddingBottomInPixels(): number {\r\n        if (this._descendantsOnlyPadding) {\r\n            return 0;\r\n        }\r\n\r\n        return this.paddingBottomInPixels;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the left coordinate of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get left(): string | number {\r\n        return this._left.toString(this._host);\r\n    }\r\n\r\n    public set left(value: string | number) {\r\n        if (this._left.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the left coordinate in pixels of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get leftInPixels(): number {\r\n        return this._left.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set leftInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.left = value + \"px\";\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the top coordinate of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get top(): string | number {\r\n        return this._top.toString(this._host);\r\n    }\r\n\r\n    public set top(value: string | number) {\r\n        if (this._top.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the top coordinate in pixels of the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public get topInPixels(): number {\r\n        return this._top.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set topInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.top = value + \"px\";\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the offset on X axis to the linked mesh\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#tracking-positions\r\n     */\r\n    @serialize()\r\n    public get linkOffsetX(): string | number {\r\n        return this._linkOffsetX.toString(this._host);\r\n    }\r\n\r\n    public set linkOffsetX(value: string | number) {\r\n        if (this._linkOffsetX.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the offset in pixels on X axis to the linked mesh\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#tracking-positions\r\n     */\r\n    public get linkOffsetXInPixels(): number {\r\n        return this._linkOffsetX.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set linkOffsetXInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.linkOffsetX = value + \"px\";\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the offset on Y axis to the linked mesh\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#tracking-positions\r\n     */\r\n    @serialize()\r\n    public get linkOffsetY(): string | number {\r\n        return this._linkOffsetY.toString(this._host);\r\n    }\r\n\r\n    public set linkOffsetY(value: string | number) {\r\n        if (this._linkOffsetY.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the offset in pixels on Y axis to the linked mesh\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#tracking-positions\r\n     */\r\n    public get linkOffsetYInPixels(): number {\r\n        return this._linkOffsetY.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set linkOffsetYInPixels(value: number) {\r\n        if (isNaN(value)) {\r\n            return;\r\n        }\r\n        this.linkOffsetY = value + \"px\";\r\n    }\r\n\r\n    /** Gets the center coordinate on X axis */\r\n    public get centerX(): number {\r\n        return this._currentMeasure.left + this._currentMeasure.width / 2;\r\n    }\r\n\r\n    /** Gets the center coordinate on Y axis */\r\n    public get centerY(): number {\r\n        return this._currentMeasure.top + this._currentMeasure.height / 2;\r\n    }\r\n\r\n    /** Gets or sets if control is Enabled */\r\n    @serialize()\r\n    public get isEnabled(): boolean {\r\n        return this._isEnabled;\r\n    }\r\n\r\n    public set isEnabled(value: boolean) {\r\n        if (this._isEnabled === value) {\r\n            return;\r\n        }\r\n\r\n        this._isEnabled = value;\r\n        this._markAsDirty();\r\n        // if this control or any of it's descendants are under a pointer, we need to fire a pointerOut event\r\n        const recursivelyFirePointerOut = (control: Control) => {\r\n            if (!control.host) {\r\n                return;\r\n            }\r\n            for (const pointer in control.host._lastControlOver) {\r\n                if (control === this.host._lastControlOver[pointer]) {\r\n                    control._onPointerOut(control, null, true);\r\n                    delete control.host._lastControlOver[pointer];\r\n                }\r\n            }\r\n            if ((control as Container).children !== undefined) {\r\n                (control as Container).children.forEach(recursivelyFirePointerOut);\r\n            }\r\n        };\r\n        recursivelyFirePointerOut(this);\r\n        this.onEnabledStateChangedObservable.notifyObservers(value);\r\n    }\r\n    /** Gets or sets background color of control if it's disabled. Only applies to Button class. */\r\n    @serialize()\r\n    public get disabledColor(): string {\r\n        return this._disabledColor;\r\n    }\r\n\r\n    public set disabledColor(value: string) {\r\n        if (this._disabledColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._disabledColor = value;\r\n        this._markAsDirty();\r\n    }\r\n    /** Gets or sets front color of control if it's disabled. Only applies to Checkbox class. */\r\n    @serialize()\r\n    public get disabledColorItem(): string {\r\n        return this._disabledColorItem;\r\n    }\r\n\r\n    public set disabledColorItem(value: string) {\r\n        if (this._disabledColorItem === value) {\r\n            return;\r\n        }\r\n\r\n        this._disabledColorItem = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets/sets the overlap group of the control.\r\n     * Controls with overlapGroup set to a number can be deoverlapped.\r\n     * Controls with overlapGroup set to undefined are not deoverlapped.\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#deoverlapping\r\n     */\r\n    @serialize()\r\n    public overlapGroup?: number;\r\n    /**\r\n     * Gets/sets the deoverlap movement multiplier\r\n     */\r\n    @serialize()\r\n    public overlapDeltaMultiplier?: number;\r\n\r\n    /**\r\n     * Array of animations\r\n     */\r\n    animations: Nullable<Animation[]> = null;\r\n\r\n    // Functions\r\n\r\n    /**\r\n     * Creates a new control\r\n     * @param name defines the name of the control\r\n     */\r\n    constructor(\r\n        /** defines the name of the control */\r\n        public name?: string\r\n    ) {}\r\n\r\n    /** @internal */\r\n    protected _getTypeName(): string {\r\n        return \"Control\";\r\n    }\r\n\r\n    /**\r\n     * Gets the first ascendant in the hierarchy of the given type\r\n     * @param className defines the required type\r\n     * @returns the ascendant or null if not found\r\n     */\r\n    public getAscendantOfClass(className: string): Nullable<Control> {\r\n        if (!this.parent) {\r\n            return null;\r\n        }\r\n\r\n        if (this.parent.getClassName() === className) {\r\n            return this.parent;\r\n        }\r\n\r\n        return this.parent.getAscendantOfClass(className);\r\n    }\r\n\r\n    /**\r\n     * Mark control element as dirty\r\n     * @param force force non visible elements to be marked too\r\n     */\r\n    public markAsDirty(force = false): void {\r\n        this._markAsDirty(force);\r\n    }\r\n\r\n    /**\r\n     * Mark the element and its children as dirty\r\n     */\r\n    public markAllAsDirty(): void {\r\n        this._markAllAsDirty();\r\n    }\r\n\r\n    /** @internal */\r\n    public _resetFontCache(): void {\r\n        this._fontSet = true;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Determines if a container is an ascendant of the current control\r\n     * @param container defines the container to look for\r\n     * @returns true if the container is one of the ascendant of the control\r\n     */\r\n    public isAscendant(container: Control): boolean {\r\n        if (!this.parent) {\r\n            return false;\r\n        }\r\n\r\n        if (this.parent === container) {\r\n            return true;\r\n        }\r\n\r\n        return this.parent.isAscendant(container);\r\n    }\r\n\r\n    /**\r\n     * Gets coordinates in local control space\r\n     * @param globalCoordinates defines the coordinates to transform\r\n     * @returns the new coordinates in local space\r\n     */\r\n    public getLocalCoordinates(globalCoordinates: Vector2): Vector2 {\r\n        const result = Vector2.Zero();\r\n\r\n        this.getLocalCoordinatesToRef(globalCoordinates, result);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Gets coordinates in local control space\r\n     * @param globalCoordinates defines the coordinates to transform\r\n     * @param result defines the target vector2 where to store the result\r\n     * @returns the current control\r\n     */\r\n    public getLocalCoordinatesToRef(globalCoordinates: Vector2, result: Vector2): Control {\r\n        result.x = globalCoordinates.x - this._currentMeasure.left;\r\n        result.y = globalCoordinates.y - this._currentMeasure.top;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets coordinates in parent local control space\r\n     * @param globalCoordinates defines the coordinates to transform\r\n     * @returns the new coordinates in parent local space\r\n     */\r\n    public getParentLocalCoordinates(globalCoordinates: Vector2): Vector2 {\r\n        const result = Vector2.Zero();\r\n\r\n        result.x = globalCoordinates.x - this._cachedParentMeasure.left;\r\n        result.y = globalCoordinates.y - this._cachedParentMeasure.top;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Move the current control to a vector3 position projected onto the screen.\r\n     * @param position defines the target position\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public moveToVector3(position: Vector3, scene: Scene): void {\r\n        if (!this._host || this.parent !== this._host._rootContainer) {\r\n            Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\r\n            return;\r\n        }\r\n\r\n        this.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        const globalViewport = this._host._getGlobalViewport();\r\n        const projectedPosition = Vector3.Project(position, Matrix.IdentityReadOnly, scene.getTransformMatrix(), globalViewport);\r\n\r\n        this._moveToProjectedPosition(projectedPosition);\r\n\r\n        if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n            this.notRenderable = true;\r\n            return;\r\n        }\r\n        this.notRenderable = false;\r\n    }\r\n\r\n    /**\r\n     * Will store all controls that have this control as ascendant in a given array\r\n     * @param results defines the array where to store the descendants\r\n     * @param directDescendantsOnly defines if true only direct descendants of 'this' will be considered, if false direct and also indirect (children of children, an so on in a recursive manner) descendants of 'this' will be considered\r\n     * @param predicate defines an optional predicate that will be called on every evaluated child, the predicate must return true for a given child to be part of the result, otherwise it will be ignored\r\n     */\r\n    public getDescendantsToRef(results: Control[], directDescendantsOnly: boolean = false, predicate?: (control: Control) => boolean): void {\r\n        // Do nothing by default\r\n    }\r\n\r\n    /**\r\n     * Will return all controls that have this control as ascendant\r\n     * @param directDescendantsOnly defines if true only direct descendants of 'this' will be considered, if false direct and also indirect (children of children, an so on in a recursive manner) descendants of 'this' will be considered\r\n     * @param predicate defines an optional predicate that will be called on every evaluated child, the predicate must return true for a given child to be part of the result, otherwise it will be ignored\r\n     * @returns all child controls\r\n     */\r\n    public getDescendants(directDescendantsOnly?: boolean, predicate?: (control: Control) => boolean): Control[] {\r\n        const results: Control[] = [];\r\n\r\n        this.getDescendantsToRef(results, directDescendantsOnly, predicate);\r\n\r\n        return results;\r\n    }\r\n\r\n    /**\r\n     * Link current control with a target mesh\r\n     * @param mesh defines the mesh to link with\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#tracking-positions\r\n     */\r\n    public linkWithMesh(mesh: Nullable<TransformNode>): void {\r\n        if (!this._host || (this.parent && this.parent !== this._host._rootContainer)) {\r\n            if (mesh) {\r\n                Tools.Error(\"Cannot link a control to a mesh if the control is not at root level\");\r\n            }\r\n            return;\r\n        }\r\n\r\n        const index = this._host._linkedControls.indexOf(this);\r\n        if (index !== -1) {\r\n            this._linkedMesh = mesh;\r\n            if (!mesh) {\r\n                this._host._linkedControls.splice(index, 1);\r\n            }\r\n            return;\r\n        } else if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        this.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._linkedMesh = mesh;\r\n        this._host._linkedControls.push(this);\r\n    }\r\n\r\n    /**\r\n     * Shorthand function to set the top, right, bottom, and left padding values on the control.\r\n     * @param { string | number} paddingTop - The value of the top padding.\r\n     * @param { string | number} paddingRight - The value of the right padding. If omitted, top is used.\r\n     * @param { string | number} paddingBottom - The value of the bottom padding. If omitted, top is used.\r\n     * @param { string | number} paddingLeft - The value of the left padding. If omitted, right is used.\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public setPadding(paddingTop: string | number, paddingRight?: string | number, paddingBottom?: string | number, paddingLeft?: string | number) {\r\n        const top = paddingTop;\r\n        const right = paddingRight ?? top;\r\n        const bottom = paddingBottom ?? top;\r\n        const left = paddingLeft ?? right;\r\n\r\n        this.paddingTop = top;\r\n        this.paddingRight = right;\r\n        this.paddingBottom = bottom;\r\n        this.paddingLeft = left;\r\n    }\r\n\r\n    /**\r\n     * Shorthand funtion to set the top, right, bottom, and left padding values in pixels on the control.\r\n     * @param { number} paddingTop - The value in pixels of the top padding.\r\n     * @param { number} paddingRight - The value in pixels of the right padding. If omitted, top is used.\r\n     * @param { number} paddingBottom - The value in pixels of the bottom padding. If omitted, top is used.\r\n     * @param { number} paddingLeft - The value in pixels of the left padding. If omitted, right is used.\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    public setPaddingInPixels(paddingTop: number, paddingRight?: number, paddingBottom?: number, paddingLeft?: number) {\r\n        const top = paddingTop;\r\n        const right = paddingRight ?? top;\r\n        const bottom = paddingBottom ?? top;\r\n        const left = paddingLeft ?? right;\r\n\r\n        this.paddingTopInPixels = top;\r\n        this.paddingRightInPixels = right;\r\n        this.paddingBottomInPixels = bottom;\r\n        this.paddingLeftInPixels = left;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _moveToProjectedPosition(projectedPosition: Vector3): void {\r\n        const oldLeft = this._left.getValue(this._host);\r\n        const oldTop = this._top.getValue(this._host);\r\n\r\n        const parentMeasure = this.parent?._currentMeasure;\r\n        if (parentMeasure) {\r\n            this._processMeasures(parentMeasure, this._host.getContext());\r\n        }\r\n\r\n        let newLeft = projectedPosition.x + this._linkOffsetX.getValue(this._host) - this._currentMeasure.width / 2;\r\n        let newTop = projectedPosition.y + this._linkOffsetY.getValue(this._host) - this._currentMeasure.height / 2;\r\n\r\n        const leftAndTopIgnoreAdaptiveScaling = this._left.ignoreAdaptiveScaling && this._top.ignoreAdaptiveScaling;\r\n        if (leftAndTopIgnoreAdaptiveScaling) {\r\n            if (Math.abs(newLeft - oldLeft) < 0.5) {\r\n                newLeft = oldLeft;\r\n            }\r\n\r\n            if (Math.abs(newTop - oldTop) < 0.5) {\r\n                newTop = oldTop;\r\n            }\r\n        }\r\n\r\n        if (!leftAndTopIgnoreAdaptiveScaling && oldLeft === newLeft && oldTop === newTop) {\r\n            return;\r\n        }\r\n\r\n        this.left = newLeft + \"px\";\r\n        this.top = newTop + \"px\";\r\n\r\n        this._left.ignoreAdaptiveScaling = true;\r\n        this._top.ignoreAdaptiveScaling = true;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _offsetLeft(offset: number) {\r\n        this._isDirty = true;\r\n        this._currentMeasure.left += offset;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _offsetTop(offset: number) {\r\n        this._isDirty = true;\r\n        this._currentMeasure.top += offset;\r\n    }\r\n\r\n    /** @internal */\r\n    public _markMatrixAsDirty(): void {\r\n        this._isMatrixDirty = true;\r\n        this._flagDescendantsAsMatrixDirty();\r\n    }\r\n\r\n    /** @internal */\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        // No child\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _intersectsRect(rect: Measure, context?: ICanvasRenderingContext) {\r\n        // make sure we are transformed correctly before checking intersections. no-op if nothing is dirty.\r\n        this._transform(context);\r\n        if (this._evaluatedMeasure.left >= rect.left + rect.width) {\r\n            return false;\r\n        }\r\n\r\n        if (this._evaluatedMeasure.top >= rect.top + rect.height) {\r\n            return false;\r\n        }\r\n\r\n        if (this._evaluatedMeasure.left + this._evaluatedMeasure.width <= rect.left) {\r\n            return false;\r\n        }\r\n\r\n        if (this._evaluatedMeasure.top + this._evaluatedMeasure.height <= rect.top) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @internal */\r\n    protected _computeAdditionalOffsetX() {\r\n        return 0;\r\n    }\r\n\r\n    /** @internal */\r\n    protected _computeAdditionalOffsetY() {\r\n        return 0;\r\n    }\r\n\r\n    /** @internal */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public invalidateRect() {\r\n        this._transform();\r\n        if (this.host && this.host.useInvalidateRectOptimization) {\r\n            // Rotate by transform to get the measure transformed to global space\r\n            this._currentMeasure.transformToRef(this._transformMatrix, this._tmpMeasureA);\r\n            // get the boudning box of the current measure and last frames measure in global space and invalidate it\r\n            // the previous measure is used to properly clear a control that is scaled down\r\n            Measure.CombineToRef(this._tmpMeasureA, this._prevCurrentMeasureTransformedIntoGlobalSpace, this._tmpMeasureA);\r\n\r\n            // Expand rect based on shadows\r\n            const shadowOffsetX = this.shadowOffsetX;\r\n            const shadowOffsetY = this.shadowOffsetY;\r\n            const shadowBlur = Math.max(this._previousShadowBlur, this.shadowBlur);\r\n\r\n            const leftShadowOffset = Math.min(Math.min(shadowOffsetX, 0) - shadowBlur * 2, 0);\r\n            const rightShadowOffset = Math.max(Math.max(shadowOffsetX, 0) + shadowBlur * 2, 0);\r\n            const topShadowOffset = Math.min(Math.min(shadowOffsetY, 0) - shadowBlur * 2, 0);\r\n            const bottomShadowOffset = Math.max(Math.max(shadowOffsetY, 0) + shadowBlur * 2, 0);\r\n\r\n            const offsetX = this._computeAdditionalOffsetX();\r\n            const offsetY = this._computeAdditionalOffsetY();\r\n\r\n            this.host.invalidateRect(\r\n                Math.floor(this._tmpMeasureA.left + leftShadowOffset - offsetX),\r\n                Math.floor(this._tmpMeasureA.top + topShadowOffset - offsetY),\r\n                Math.ceil(this._tmpMeasureA.left + this._tmpMeasureA.width + rightShadowOffset + offsetX),\r\n                Math.ceil(this._tmpMeasureA.top + this._tmpMeasureA.height + bottomShadowOffset + offsetY)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _markAsDirty(force = false): void {\r\n        if (!this._isVisible && !force) {\r\n            return;\r\n        }\r\n\r\n        this._isDirty = true;\r\n        this._markMatrixAsDirty();\r\n\r\n        // Redraw only this rectangle\r\n        if (this._host) {\r\n            this._host.markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _markAllAsDirty(): void {\r\n        this._markAsDirty();\r\n\r\n        if (this._font) {\r\n            this._prepareFont();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _link(host: AdvancedDynamicTexture): void {\r\n        this._host = host;\r\n        if (this._host) {\r\n            this.uniqueId = this._host.getScene()!.getUniqueId();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _transform(context?: ICanvasRenderingContext): void {\r\n        if (!this._isMatrixDirty && this._scaleX === 1 && this._scaleY === 1 && this._rotation === 0) {\r\n            return;\r\n        }\r\n\r\n        // postTranslate\r\n        const offsetX = this._currentMeasure.width * this._transformCenterX + this._currentMeasure.left;\r\n        const offsetY = this._currentMeasure.height * this._transformCenterY + this._currentMeasure.top;\r\n        if (context) {\r\n            context.translate(offsetX, offsetY);\r\n\r\n            // rotate\r\n            context.rotate(this._rotation);\r\n\r\n            // scale\r\n            context.scale(this._scaleX, this._scaleY);\r\n\r\n            // preTranslate\r\n            context.translate(-offsetX, -offsetY);\r\n        }\r\n        // Need to update matrices?\r\n        if (this._isMatrixDirty || this._cachedOffsetX !== offsetX || this._cachedOffsetY !== offsetY) {\r\n            this._cachedOffsetX = offsetX;\r\n            this._cachedOffsetY = offsetY;\r\n            this._isMatrixDirty = false;\r\n            this._flagDescendantsAsMatrixDirty();\r\n\r\n            Matrix2D.ComposeToRef(-offsetX, -offsetY, this._rotation, this._scaleX, this._scaleY, this.parent ? this.parent._transformMatrix : null, this._transformMatrix);\r\n\r\n            this._transformMatrix.invertToRef(this._invertTransformMatrix);\r\n            this._currentMeasure.transformToRef(this._transformMatrix, this._evaluatedMeasure);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _renderHighlight(context: ICanvasRenderingContext): void {\r\n        if (!this.isHighlighted) {\r\n            return;\r\n        }\r\n\r\n        context.save();\r\n        context.strokeStyle = this._highlightColor;\r\n        context.lineWidth = this._highlightLineWidth;\r\n\r\n        this._renderHighlightSpecific(context);\r\n        context.restore();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _renderHighlightSpecific(context: ICanvasRenderingContext): void {\r\n        context.strokeRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n    }\r\n\r\n    protected _getColor(context: ICanvasRenderingContext): string | ICanvasGradient {\r\n        return this.gradient ? this.gradient.getCanvasGradient(context) : this.color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _applyStates(context: ICanvasRenderingContext): void {\r\n        if (this._isFontSizeInPercentage) {\r\n            this._fontSet = true;\r\n        }\r\n\r\n        if (this._host && this._host.useSmallestIdeal && !this._font) {\r\n            this._fontSet = true;\r\n        }\r\n\r\n        if (this._fontSet) {\r\n            this._prepareFont();\r\n            this._fontSet = false;\r\n        }\r\n\r\n        if (this._font) {\r\n            context.font = this._font;\r\n        }\r\n\r\n        if (this._color || this.gradient) {\r\n            context.fillStyle = this._getColor(context);\r\n        }\r\n\r\n        if (Control.AllowAlphaInheritance) {\r\n            context.globalAlpha *= this._alpha;\r\n        } else if (this._alphaSet) {\r\n            context.globalAlpha = this.parent && !this.parent.renderToIntermediateTexture ? this.parent.alpha * this._alpha : this._alpha;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _layout(parentMeasure: Measure, context: ICanvasRenderingContext): boolean {\r\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) {\r\n            return false;\r\n        }\r\n\r\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(parentMeasure)) {\r\n            this.host._numLayoutCalls++;\r\n\r\n            this._currentMeasure.addAndTransformToRef(\r\n                this._transformMatrix,\r\n                -this._paddingLeftInPixels | 0,\r\n                -this._paddingTopInPixels | 0,\r\n                this._paddingRightInPixels | 0,\r\n                this._paddingBottomInPixels | 0,\r\n                this._prevCurrentMeasureTransformedIntoGlobalSpace\r\n            );\r\n\r\n            context.save();\r\n\r\n            this._applyStates(context);\r\n\r\n            let rebuildCount = 0;\r\n            do {\r\n                this._rebuildLayout = false;\r\n                this._processMeasures(parentMeasure, context);\r\n                rebuildCount++;\r\n            } while (this._rebuildLayout && rebuildCount < 3);\r\n\r\n            if (rebuildCount >= 3) {\r\n                Logger.Error(`Layout cycle detected in GUI (Control name=${this.name}, uniqueId=${this.uniqueId})`);\r\n            }\r\n\r\n            context.restore();\r\n            this.invalidateRect();\r\n            this._evaluateClippingState(parentMeasure);\r\n        }\r\n\r\n        this._wasDirty = this._isDirty;\r\n        this._isDirty = false;\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _processMeasures(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        this._tempPaddingMeasure.copyFrom(parentMeasure);\r\n\r\n        // Apply padding if in correct mode\r\n        if (this.parent && this.parent.descendantsOnlyPadding) {\r\n            this._tempPaddingMeasure.left += this.parent.paddingLeftInPixels;\r\n            this._tempPaddingMeasure.top += this.parent.paddingTopInPixels;\r\n            this._tempPaddingMeasure.width -= this.parent.paddingLeftInPixels + this.parent.paddingRightInPixels;\r\n            this._tempPaddingMeasure.height -= this.parent.paddingTopInPixels + this.parent.paddingBottomInPixels;\r\n        }\r\n\r\n        this._currentMeasure.copyFrom(this._tempPaddingMeasure);\r\n\r\n        // Let children take some pre-measurement actions\r\n        this._preMeasure(this._tempPaddingMeasure, context);\r\n\r\n        this._measure();\r\n\r\n        // Let children take some post-measurement actions\r\n        this._postMeasure(this._tempPaddingMeasure, context);\r\n\r\n        this._computeAlignment(this._tempPaddingMeasure, context);\r\n\r\n        // Convert to int values\r\n        this._currentMeasure.left = this._currentMeasure.left | 0;\r\n        this._currentMeasure.top = this._currentMeasure.top | 0;\r\n        this._currentMeasure.width = this._currentMeasure.width | 0;\r\n        this._currentMeasure.height = this._currentMeasure.height | 0;\r\n\r\n        // Let children add more features\r\n        this._additionalProcessing(this._tempPaddingMeasure, context);\r\n\r\n        this._cachedParentMeasure.copyFrom(this._tempPaddingMeasure);\r\n\r\n        this._currentMeasure.transformToRef(this._transformMatrix, this._evaluatedMeasure);\r\n        if (this.onDirtyObservable.hasObservers()) {\r\n            this.onDirtyObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    protected _evaluateClippingState(parentMeasure: Measure) {\r\n        // Since transformMatrix is used here, we need to have it freshly computed\r\n        this._transform();\r\n        this._currentMeasure.transformToRef(this._transformMatrix, this._evaluatedMeasure);\r\n        if (this.parent && this.parent.clipChildren) {\r\n            parentMeasure.transformToRef(this.parent._transformMatrix, this._evaluatedParentMeasure);\r\n            // Early clip\r\n            if (this._evaluatedMeasure.left > this._evaluatedParentMeasure.left + this._evaluatedParentMeasure.width) {\r\n                this._isClipped = true;\r\n                return;\r\n            }\r\n\r\n            if (this._evaluatedMeasure.left + this._evaluatedMeasure.width < this._evaluatedParentMeasure.left) {\r\n                this._isClipped = true;\r\n                return;\r\n            }\r\n\r\n            if (this._evaluatedMeasure.top > this._evaluatedParentMeasure.top + this._evaluatedParentMeasure.height) {\r\n                this._isClipped = true;\r\n                return;\r\n            }\r\n\r\n            if (this._evaluatedMeasure.top + this._evaluatedMeasure.height < this._evaluatedParentMeasure.top) {\r\n                this._isClipped = true;\r\n                return;\r\n            }\r\n        }\r\n\r\n        this._isClipped = false;\r\n    }\r\n\r\n    /** @internal */\r\n    public _measure(): void {\r\n        // Width / Height\r\n        if (this._width.isPixel) {\r\n            this._currentMeasure.width = this._width.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.width *= this._width.getValue(this._host);\r\n        }\r\n\r\n        if (this._height.isPixel) {\r\n            this._currentMeasure.height = this._height.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.height *= this._height.getValue(this._host);\r\n        }\r\n\r\n        if (this._fixedRatio !== 0) {\r\n            if (this._fixedRatioMasterIsWidth) {\r\n                this._currentMeasure.height = this._currentMeasure.width * this._fixedRatio;\r\n            } else {\r\n                this._currentMeasure.width = this._currentMeasure.height * this._fixedRatio;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _computeAlignment(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        const width = this._currentMeasure.width;\r\n        const height = this._currentMeasure.height;\r\n\r\n        const parentWidth = parentMeasure.width;\r\n        const parentHeight = parentMeasure.height;\r\n\r\n        // Left / top\r\n        let x = 0;\r\n        let y = 0;\r\n\r\n        switch (this.horizontalAlignment) {\r\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                x = 0;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                x = parentWidth - width;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                x = (parentWidth - width) / 2;\r\n                break;\r\n        }\r\n\r\n        switch (this.verticalAlignment) {\r\n            case Control.VERTICAL_ALIGNMENT_TOP:\r\n                y = 0;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\r\n                y = parentHeight - height;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_CENTER:\r\n                y = (parentHeight - height) / 2;\r\n                break;\r\n        }\r\n\r\n        if (!this.descendantsOnlyPadding) {\r\n            if (this._paddingLeft.isPixel) {\r\n                this._currentMeasure.left += this._paddingLeft.getValue(this._host);\r\n                this._currentMeasure.width -= this._paddingLeft.getValue(this._host);\r\n            } else {\r\n                this._currentMeasure.left += parentWidth * this._paddingLeft.getValue(this._host);\r\n                this._currentMeasure.width -= parentWidth * this._paddingLeft.getValue(this._host);\r\n            }\r\n\r\n            if (this._paddingRight.isPixel) {\r\n                this._currentMeasure.width -= this._paddingRight.getValue(this._host);\r\n            } else {\r\n                this._currentMeasure.width -= parentWidth * this._paddingRight.getValue(this._host);\r\n            }\r\n\r\n            if (this._paddingTop.isPixel) {\r\n                this._currentMeasure.top += this._paddingTop.getValue(this._host);\r\n                this._currentMeasure.height -= this._paddingTop.getValue(this._host);\r\n            } else {\r\n                this._currentMeasure.top += parentHeight * this._paddingTop.getValue(this._host);\r\n                this._currentMeasure.height -= parentHeight * this._paddingTop.getValue(this._host);\r\n            }\r\n\r\n            if (this._paddingBottom.isPixel) {\r\n                this._currentMeasure.height -= this._paddingBottom.getValue(this._host);\r\n            } else {\r\n                this._currentMeasure.height -= parentHeight * this._paddingBottom.getValue(this._host);\r\n            }\r\n        }\r\n\r\n        if (this._left.isPixel) {\r\n            this._currentMeasure.left += this._left.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.left += parentWidth * this._left.getValue(this._host);\r\n        }\r\n\r\n        if (this._top.isPixel) {\r\n            this._currentMeasure.top += this._top.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.top += parentHeight * this._top.getValue(this._host);\r\n        }\r\n\r\n        this._currentMeasure.left += x;\r\n        this._currentMeasure.top += y;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _preMeasure(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _postMeasure(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _clipForChildren(context: ICanvasRenderingContext): void {\r\n        // DO nothing\r\n    }\r\n\r\n    private static _ClipMeasure = new Measure(0, 0, 0, 0);\r\n    private _tmpMeasureA = new Measure(0, 0, 0, 0);\r\n    private _clip(context: ICanvasRenderingContext, invalidatedRectangle?: Nullable<Measure>) {\r\n        context.beginPath();\r\n        Control._ClipMeasure.copyFrom(this._currentMeasure);\r\n        if (invalidatedRectangle) {\r\n            // Rotate the invalidated rect into the control's space\r\n            invalidatedRectangle.transformToRef(this._invertTransformMatrix, this._tmpMeasureA);\r\n\r\n            // Get the intersection of the rect in context space and the current context\r\n            const intersection = new Measure(0, 0, 0, 0);\r\n            intersection.left = Math.max(this._tmpMeasureA.left, this._currentMeasure.left);\r\n            intersection.top = Math.max(this._tmpMeasureA.top, this._currentMeasure.top);\r\n            intersection.width = Math.min(this._tmpMeasureA.left + this._tmpMeasureA.width, this._currentMeasure.left + this._currentMeasure.width) - intersection.left;\r\n            intersection.height = Math.min(this._tmpMeasureA.top + this._tmpMeasureA.height, this._currentMeasure.top + this._currentMeasure.height) - intersection.top;\r\n            Control._ClipMeasure.copyFrom(intersection);\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            const shadowOffsetX = this.shadowOffsetX;\r\n            const shadowOffsetY = this.shadowOffsetY;\r\n            const shadowBlur = this.shadowBlur;\r\n\r\n            const leftShadowOffset = Math.min(Math.min(shadowOffsetX, 0) - shadowBlur * 2, 0);\r\n            const rightShadowOffset = Math.max(Math.max(shadowOffsetX, 0) + shadowBlur * 2, 0);\r\n            const topShadowOffset = Math.min(Math.min(shadowOffsetY, 0) - shadowBlur * 2, 0);\r\n            const bottomShadowOffset = Math.max(Math.max(shadowOffsetY, 0) + shadowBlur * 2, 0);\r\n\r\n            context.rect(\r\n                Control._ClipMeasure.left + leftShadowOffset,\r\n                Control._ClipMeasure.top + topShadowOffset,\r\n                Control._ClipMeasure.width + rightShadowOffset - leftShadowOffset,\r\n                Control._ClipMeasure.height + bottomShadowOffset - topShadowOffset\r\n            );\r\n        } else {\r\n            context.rect(Control._ClipMeasure.left, Control._ClipMeasure.top, Control._ClipMeasure.width, Control._ClipMeasure.height);\r\n        }\r\n\r\n        context.clip();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _render(context: ICanvasRenderingContext, invalidatedRectangle?: Nullable<Measure>): boolean {\r\n        if (!this.isVisible || this.notRenderable || this._isClipped) {\r\n            this._isDirty = false;\r\n            return false;\r\n        }\r\n\r\n        this.host._numRenderCalls++;\r\n\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        // Transform\r\n        this._transform(context);\r\n\r\n        // Clip\r\n        if (this.clipContent) {\r\n            this._clip(context, invalidatedRectangle);\r\n        }\r\n\r\n        if (this.onBeforeDrawObservable.hasObservers()) {\r\n            this.onBeforeDrawObservable.notifyObservers(this);\r\n        }\r\n\r\n        if (this.useBitmapCache && !this._wasDirty && this._cacheData) {\r\n            context.putImageData(this._cacheData, this._currentMeasure.left, this._currentMeasure.top);\r\n        } else {\r\n            this._draw(context, invalidatedRectangle);\r\n        }\r\n\r\n        if (this.useBitmapCache && this._wasDirty) {\r\n            this._cacheData = context.getImageData(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n        }\r\n\r\n        this._renderHighlight(context);\r\n\r\n        if (this.onAfterDrawObservable.hasObservers()) {\r\n            this.onAfterDrawObservable.notifyObservers(this);\r\n        }\r\n\r\n        context.restore();\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _draw(context: ICanvasRenderingContext, invalidatedRectangle?: Nullable<Measure>): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * Tests if a given coordinates belong to the current control\r\n     * @param x defines x coordinate to test\r\n     * @param y defines y coordinate to test\r\n     * @returns true if the coordinates are inside the control\r\n     */\r\n    public contains(x: number, y: number): boolean {\r\n        // Invert transform\r\n        this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n\r\n        x = this._transformedPosition.x;\r\n        y = this._transformedPosition.y;\r\n\r\n        // Check\r\n        if (x < this._currentMeasure.left) {\r\n            return false;\r\n        }\r\n\r\n        if (x > this._currentMeasure.left + this._currentMeasure.width) {\r\n            return false;\r\n        }\r\n\r\n        if (y < this._currentMeasure.top) {\r\n            return false;\r\n        }\r\n\r\n        if (y > this._currentMeasure.top + this._currentMeasure.height) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isPointerBlocker) {\r\n            this._host._shouldBlockPointer = true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _processPicking(x: number, y: number, pi: Nullable<PointerInfoBase>, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled) {\r\n            return false;\r\n        }\r\n        if (!this.isHitTestVisible || !this.isVisible || this._doNotRender) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: Nullable<PointerInfoBase>): void {\r\n        const canNotify: boolean = this.onPointerMoveObservable.notifyObservers(coordinates, -1, target, this, pi);\r\n\r\n        if (canNotify && this.parent != null && !this.isPointerBlocker) {\r\n            this.parent._onPointerMove(target, coordinates, pointerId, pi);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerEnter(target: Control, pi: Nullable<PointerInfoBase>): boolean {\r\n        if (!this._isEnabled) {\r\n            return false;\r\n        }\r\n        if (this._enterCount > 0) {\r\n            return false;\r\n        }\r\n\r\n        if (this._enterCount === -1) {\r\n            // -1 is for touch input, we are now sure we are with a mouse or pencil\r\n            this._enterCount = 0;\r\n        }\r\n        this._enterCount++;\r\n\r\n        const canNotify: boolean = this.onPointerEnterObservable.notifyObservers(this, -1, target, this, pi);\r\n\r\n        if (canNotify && this.parent != null && !this.isPointerBlocker) {\r\n            this.parent._onPointerEnter(target, pi);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerOut(target: Control, pi: Nullable<PointerInfoBase>, force = false): void {\r\n        if (!force && (!this._isEnabled || target === this)) {\r\n            return;\r\n        }\r\n        this._enterCount = 0;\r\n\r\n        let canNotify: boolean = true;\r\n\r\n        if (!target.isAscendant(this)) {\r\n            canNotify = this.onPointerOutObservable.notifyObservers(this, -1, target, this, pi);\r\n        }\r\n\r\n        if (canNotify && this.parent != null && !this.isPointerBlocker) {\r\n            this.parent._onPointerOut(target, pi, force);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: Nullable<PointerInfoBase>): boolean {\r\n        // Prevent pointerout to lose control context.\r\n        // Event redundancy is checked inside the function.\r\n        this._onPointerEnter(this, pi);\r\n\r\n        if (this._downCount !== 0) {\r\n            return false;\r\n        }\r\n\r\n        this._downCount++;\r\n\r\n        this._downPointerIds[pointerId] = true;\r\n\r\n        const canNotify: boolean = this.onPointerDownObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this, pi);\r\n\r\n        if (canNotify && this.parent != null && !this.isPointerBlocker) {\r\n            this.parent._onPointerDown(target, coordinates, pointerId, buttonIndex, pi);\r\n        }\r\n\r\n        if (pi && this.uniqueId !== this._host.rootContainer.uniqueId) {\r\n            this._host._capturedPointerIds.add((pi.event as IPointerEvent).pointerId);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi?: Nullable<PointerInfoBase>): void {\r\n        if (!this._isEnabled) {\r\n            return;\r\n        }\r\n        this._downCount = 0;\r\n\r\n        delete this._downPointerIds[pointerId];\r\n\r\n        let canNotifyClick: boolean = notifyClick;\r\n        if (notifyClick && (this._enterCount > 0 || this._enterCount === -1)) {\r\n            canNotifyClick = this.onPointerClickObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this, pi);\r\n        }\r\n        const canNotify: boolean = this.onPointerUpObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this, pi);\r\n\r\n        if (canNotify && this.parent != null && !this.isPointerBlocker) {\r\n            this.parent._onPointerUp(target, coordinates, pointerId, buttonIndex, canNotifyClick, pi);\r\n        }\r\n\r\n        if (pi && this.uniqueId !== this._host.rootContainer.uniqueId) {\r\n            this._host._capturedPointerIds.delete((pi.event as IPointerEvent).pointerId);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _forcePointerUp(pointerId: Nullable<number> = null) {\r\n        if (pointerId !== null) {\r\n            this._onPointerUp(this, Vector2.Zero(), pointerId, 0, true);\r\n        } else {\r\n            for (const key in this._downPointerIds) {\r\n                this._onPointerUp(this, Vector2.Zero(), +key as number, 0, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onWheelScroll(deltaX?: number, deltaY?: number): void {\r\n        if (!this._isEnabled) {\r\n            return;\r\n        }\r\n        const canNotify: boolean = this.onWheelObservable.notifyObservers(new Vector2(deltaX, deltaY));\r\n\r\n        if (canNotify && this.parent != null) {\r\n            this.parent._onWheelScroll(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _onCanvasBlur(): void {}\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _processObservables(\r\n        type: number,\r\n        x: number,\r\n        y: number,\r\n        pi: Nullable<PointerInfoBase>,\r\n        pointerId: number,\r\n        buttonIndex: number,\r\n        deltaX?: number,\r\n        deltaY?: number\r\n    ): boolean {\r\n        if (!this._isEnabled) {\r\n            return false;\r\n        }\r\n        this._dummyVector2.copyFromFloats(x, y);\r\n        if (type === PointerEventTypes.POINTERMOVE) {\r\n            this._onPointerMove(this, this._dummyVector2, pointerId, pi);\r\n\r\n            const previousControlOver = this._host._lastControlOver[pointerId];\r\n            if (previousControlOver && previousControlOver !== this) {\r\n                previousControlOver._onPointerOut(this, pi);\r\n            }\r\n\r\n            if (previousControlOver !== this) {\r\n                this._onPointerEnter(this, pi);\r\n            }\r\n\r\n            this._host._lastControlOver[pointerId] = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERDOWN) {\r\n            this._onPointerDown(this, this._dummyVector2, pointerId, buttonIndex, pi);\r\n            this._host._registerLastControlDown(this, pointerId);\r\n            this._host._lastPickedControl = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERUP) {\r\n            if (this._host._lastControlDown[pointerId]) {\r\n                this._host._lastControlDown[pointerId]._onPointerUp(this, this._dummyVector2, pointerId, buttonIndex, true, pi);\r\n            }\r\n            delete this._host._lastControlDown[pointerId];\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERWHEEL) {\r\n            if (this._host._lastControlOver[pointerId]) {\r\n                this._host._lastControlOver[pointerId]._onWheelScroll(deltaX, deltaY);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _getStyleProperty(propName: \"fontStyle\" | \"fontWeight\" | \"fontFamily\", defaultValue: string): string {\r\n        const prop = (this._style && this._style[propName]) ?? this[propName];\r\n        if (!prop && this.parent) {\r\n            return this.parent._getStyleProperty(propName, defaultValue);\r\n        } else if (!this.parent) {\r\n            return defaultValue;\r\n        } else {\r\n            return prop;\r\n        }\r\n    }\r\n\r\n    private _prepareFont() {\r\n        if (!this._font && !this._fontSet) {\r\n            return;\r\n        }\r\n\r\n        this._font =\r\n            this._getStyleProperty(\"fontStyle\", \"\") +\r\n            \" \" +\r\n            this._getStyleProperty(\"fontWeight\", \"\") +\r\n            \" \" +\r\n            this.fontSizeInPixels +\r\n            \"px \" +\r\n            this._getStyleProperty(\"fontFamily\", \"Arial\");\r\n\r\n        this._fontOffset = Control._GetFontOffset(this._font);\r\n\r\n        //children need to be refreshed\r\n        this.getDescendants().forEach((child) => child._markAllAsDirty());\r\n    }\r\n\r\n    /**\r\n     * A control has a dimension fully defined if that dimension doesn't depend on the parent's dimension.\r\n     * As an example, a control that has dimensions in pixels is fully defined, while in percentage is not fully defined.\r\n     * @param dim the dimension to check (width or height)\r\n     * @returns if the dimension is fully defined\r\n     */\r\n    public isDimensionFullyDefined(dim: \"width\" | \"height\"): boolean {\r\n        return this.getDimension(dim).isPixel;\r\n    }\r\n\r\n    /**\r\n     * Gets the dimension of the control along a specified axis\r\n     * @param dim the dimension to retrieve (width or height)\r\n     * @returns the dimension value along the specified axis\r\n     */\r\n    public getDimension(dim: \"width\" | \"height\"): ValueAndUnit {\r\n        if (dim === \"width\") {\r\n            return this._width;\r\n        } else {\r\n            return this._height;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clones a control and its descendants\r\n     * @param host the texture where the control will be instantiated. Can be empty, in which case the control will be created on the same texture\r\n     * @returns the cloned control\r\n     */\r\n    public clone(host?: AdvancedDynamicTexture): Control {\r\n        const serialization: any = {};\r\n        this.serialize(serialization, true);\r\n\r\n        const controlType = Tools.Instantiate(\"BABYLON.GUI.\" + serialization.className);\r\n        const cloned = new controlType();\r\n        cloned.parse(serialization, host);\r\n\r\n        return cloned;\r\n    }\r\n\r\n    /**\r\n     * Parses a serialized object into this control\r\n     * @param serializedObject the object with the serialized properties\r\n     * @param host the texture where the control will be instantiated. Can be empty, in which case the control will be created on the same texture\r\n     * @returns this control\r\n     */\r\n    public parse(serializedObject: any, host?: AdvancedDynamicTexture): Control {\r\n        SerializationHelper.Parse(() => this, serializedObject, null);\r\n\r\n        this.name = serializedObject.name;\r\n\r\n        this._parseFromContent(serializedObject, host ?? this._host);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Serializes the current control\r\n     * @param serializationObject defined the JSON serialized object\r\n     * @param force if the control should be serialized even if the isSerializable flag is set to false (default false)\r\n     */\r\n    public serialize(serializationObject: any, force: boolean = false) {\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n        SerializationHelper.Serialize(this, serializationObject);\r\n        serializationObject.name = this.name;\r\n        serializationObject.className = this.getClassName();\r\n\r\n        // Call prepareFont to guarantee the font is properly set before serializing\r\n        this._prepareFont();\r\n        if (this._font) {\r\n            serializationObject.fontFamily = this._fontFamily;\r\n            serializationObject.fontSize = this.fontSize;\r\n            serializationObject.fontWeight = this.fontWeight;\r\n            serializationObject.fontStyle = this.fontStyle;\r\n        }\r\n\r\n        if (this._gradient) {\r\n            serializationObject.gradient = {};\r\n            this._gradient.serialize(serializationObject.gradient);\r\n        }\r\n\r\n        // Animations\r\n        SerializationHelper.AppendSerializedAnimations(this, serializationObject);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        if (serializedObject.fontFamily) {\r\n            this.fontFamily = serializedObject.fontFamily;\r\n        }\r\n\r\n        if (serializedObject.fontSize) {\r\n            this.fontSize = serializedObject.fontSize;\r\n        }\r\n\r\n        if (serializedObject.fontWeight) {\r\n            this.fontWeight = serializedObject.fontWeight;\r\n        }\r\n\r\n        if (serializedObject.fontStyle) {\r\n            this.fontStyle = serializedObject.fontStyle;\r\n        }\r\n\r\n        // Gradient\r\n        if (serializedObject.gradient) {\r\n            const className = Tools.Instantiate(\"BABYLON.GUI.\" + serializedObject.gradient.className);\r\n            this._gradient = new className();\r\n            this._gradient?.parse(serializedObject.gradient);\r\n        }\r\n\r\n        // Animations\r\n        if (serializedObject.animations) {\r\n            this.animations = [];\r\n            for (let animationIndex = 0; animationIndex < serializedObject.animations.length; animationIndex++) {\r\n                const parsedAnimation = serializedObject.animations[animationIndex];\r\n                const internalClass = GetClass(\"BABYLON.Animation\");\r\n                if (internalClass) {\r\n                    this.animations.push(internalClass.Parse(parsedAnimation));\r\n                }\r\n            }\r\n\r\n            if (serializedObject.autoAnimate && this._host && this._host.getScene()) {\r\n                this._host\r\n                    .getScene()!\r\n                    .beginAnimation(\r\n                        this,\r\n                        serializedObject.autoAnimateFrom,\r\n                        serializedObject.autoAnimateTo,\r\n                        serializedObject.autoAnimateLoop,\r\n                        serializedObject.autoAnimateSpeed || 1.0\r\n                    );\r\n            }\r\n        }\r\n\r\n        this.fixedRatioMasterIsWidth = serializedObject.fixedRatioMasterIsWidth ?? this.fixedRatioMasterIsWidth;\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        this.onDirtyObservable.clear();\r\n        this.onBeforeDrawObservable.clear();\r\n        this.onAfterDrawObservable.clear();\r\n        this.onPointerDownObservable.clear();\r\n        this.onPointerEnterObservable.clear();\r\n        this.onPointerMoveObservable.clear();\r\n        this.onPointerOutObservable.clear();\r\n        this.onPointerUpObservable.clear();\r\n        this.onPointerClickObservable.clear();\r\n        this.onWheelObservable.clear();\r\n\r\n        if (this._styleObserver && this._style) {\r\n            this._style.onChangedObservable.remove(this._styleObserver);\r\n            this._styleObserver = null;\r\n        }\r\n\r\n        if (this.parent) {\r\n            this.parent.removeControl(this);\r\n            this.parent = null;\r\n        }\r\n\r\n        if (this._host) {\r\n            const index = this._host._linkedControls.indexOf(this);\r\n            if (index > -1) {\r\n                this.linkWithMesh(null);\r\n            }\r\n        }\r\n\r\n        // Callback\r\n        this.onDisposeObservable.notifyObservers(this);\r\n        this.onDisposeObservable.clear();\r\n    }\r\n\r\n    // Statics\r\n    private static _HORIZONTAL_ALIGNMENT_LEFT = 0;\r\n    private static _HORIZONTAL_ALIGNMENT_RIGHT = 1;\r\n    private static _HORIZONTAL_ALIGNMENT_CENTER = 2;\r\n\r\n    private static _VERTICAL_ALIGNMENT_TOP = 0;\r\n    private static _VERTICAL_ALIGNMENT_BOTTOM = 1;\r\n    private static _VERTICAL_ALIGNMENT_CENTER = 2;\r\n\r\n    /** HORIZONTAL_ALIGNMENT_LEFT */\r\n    public static get HORIZONTAL_ALIGNMENT_LEFT(): number {\r\n        return Control._HORIZONTAL_ALIGNMENT_LEFT;\r\n    }\r\n\r\n    /** HORIZONTAL_ALIGNMENT_RIGHT */\r\n    public static get HORIZONTAL_ALIGNMENT_RIGHT(): number {\r\n        return Control._HORIZONTAL_ALIGNMENT_RIGHT;\r\n    }\r\n\r\n    /** HORIZONTAL_ALIGNMENT_CENTER */\r\n    public static get HORIZONTAL_ALIGNMENT_CENTER(): number {\r\n        return Control._HORIZONTAL_ALIGNMENT_CENTER;\r\n    }\r\n\r\n    /** VERTICAL_ALIGNMENT_TOP */\r\n    public static get VERTICAL_ALIGNMENT_TOP(): number {\r\n        return Control._VERTICAL_ALIGNMENT_TOP;\r\n    }\r\n\r\n    /** VERTICAL_ALIGNMENT_BOTTOM */\r\n    public static get VERTICAL_ALIGNMENT_BOTTOM(): number {\r\n        return Control._VERTICAL_ALIGNMENT_BOTTOM;\r\n    }\r\n\r\n    /** VERTICAL_ALIGNMENT_CENTER */\r\n    public static get VERTICAL_ALIGNMENT_CENTER(): number {\r\n        return Control._VERTICAL_ALIGNMENT_CENTER;\r\n    }\r\n\r\n    private static _FontHeightSizes: { [key: string]: { ascent: number; height: number; descent: number } } = {};\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public static _GetFontOffset(font: string): { ascent: number; height: number; descent: number } {\r\n        if (Control._FontHeightSizes[font]) {\r\n            return Control._FontHeightSizes[font];\r\n        }\r\n\r\n        const engine = EngineStore.LastCreatedEngine;\r\n        if (!engine) {\r\n            throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n        }\r\n\r\n        const result = engine.getFontOffset(font);\r\n        Control._FontHeightSizes[font] = result;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a Control from parsed data\r\n     * @param serializedObject defines parsed data\r\n     * @param host defines the hosting AdvancedDynamicTexture\r\n     * @returns a new Control\r\n     */\r\n    public static Parse(serializedObject: any, host: AdvancedDynamicTexture): Control {\r\n        const controlType = Tools.Instantiate(\"BABYLON.GUI.\" + serializedObject.className);\r\n        const control = SerializationHelper.Parse(() => new controlType(), serializedObject, null);\r\n\r\n        control.name = serializedObject.name;\r\n\r\n        control._parseFromContent(serializedObject, host);\r\n\r\n        return control;\r\n    }\r\n\r\n    public static AddHeader: (control: Control, text: string, size: string | number, options: { isHorizontal: boolean; controlFirst: boolean }) => any = () => {};\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected static drawEllipse(x: number, y: number, width: number, height: number, context: ICanvasRenderingContext): void {\r\n        context.translate(x, y);\r\n        context.scale(width, height);\r\n\r\n        context.beginPath();\r\n        context.arc(0, 0, 1, 0, 2 * Math.PI);\r\n        context.closePath();\r\n\r\n        context.scale(1 / width, 1 / height);\r\n        context.translate(-x, -y);\r\n    }\r\n\r\n    /**\r\n     * Returns true if the control is ready to be used\r\n     * @returns\r\n     */\r\n    public isReady(): boolean {\r\n        // Most controls are ready by default, so the default implementation is to return true\r\n        return true;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Control\", Control);\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { DynamicTexture } from \"core/Materials/Textures/dynamicTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { BaseGradient } from \"./gradient/BaseGradient\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { Matrix2D } from \"../math2D\";\r\n\r\n/**\r\n * Root class for 2D containers\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#containers\r\n */\r\nexport class Container extends Control {\r\n    /** @internal */\r\n    public _children = new Array<Control>();\r\n    /** @internal */\r\n    protected _measureForChildren = Measure.Empty();\r\n    /** @internal */\r\n    protected _background = \"\";\r\n    /** @internal */\r\n    protected _backgroundGradient: Nullable<BaseGradient> = null;\r\n    /** @internal */\r\n    protected _adaptWidthToChildren = false;\r\n    /** @internal */\r\n    protected _adaptHeightToChildren = false;\r\n    /** @internal */\r\n    protected _renderToIntermediateTexture: boolean = false;\r\n    /** @internal */\r\n    protected _intermediateTexture: Nullable<DynamicTexture> = null;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the container will let internal controls handle picking instead of doing it directly using its bounding info\r\n     */\r\n    @serialize()\r\n    public delegatePickingToChildren = false;\r\n\r\n    /** Gets or sets boolean indicating if children should be rendered to an intermediate texture rather than directly to host, useful for alpha blending */\r\n    @serialize()\r\n    public get renderToIntermediateTexture(): boolean {\r\n        return this._renderToIntermediateTexture;\r\n    }\r\n    public set renderToIntermediateTexture(value: boolean) {\r\n        if (this._renderToIntermediateTexture === value) {\r\n            return;\r\n        }\r\n        this._renderToIntermediateTexture = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that layout cycle errors should be displayed on the console\r\n     */\r\n    public logLayoutCycleErrors = false;\r\n\r\n    /**\r\n     * Gets or sets the number of layout cycles (a change involved by a control while evaluating the layout) allowed\r\n     */\r\n    @serialize()\r\n    public maxLayoutCycle = 3;\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children height */\r\n    @serialize()\r\n    public get adaptHeightToChildren(): boolean {\r\n        return this._adaptHeightToChildren;\r\n    }\r\n\r\n    public set adaptHeightToChildren(value: boolean) {\r\n        if (this._adaptHeightToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptHeightToChildren = value;\r\n\r\n        if (value) {\r\n            this.height = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children width */\r\n    @serialize()\r\n    public get adaptWidthToChildren(): boolean {\r\n        return this._adaptWidthToChildren;\r\n    }\r\n\r\n    public set adaptWidthToChildren(value: boolean) {\r\n        if (this._adaptWidthToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptWidthToChildren = value;\r\n\r\n        if (value) {\r\n            this.width = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background gradient color. Takes precedence over background */\r\n    @serialize()\r\n    public get backgroundGradient() {\r\n        return this._backgroundGradient;\r\n    }\r\n\r\n    public set backgroundGradient(value: Nullable<BaseGradient>) {\r\n        if (this._backgroundGradient === value) {\r\n            return;\r\n        }\r\n        this._backgroundGradient = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._children;\r\n    }\r\n\r\n    public get isReadOnly() {\r\n        return this._isReadOnly;\r\n    }\r\n\r\n    public set isReadOnly(value: boolean) {\r\n        this._isReadOnly = value;\r\n\r\n        for (const child of this._children) {\r\n            child.isReadOnly = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new Container\r\n     * @param name defines the name of the container\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Container\";\r\n    }\r\n\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        for (const child of this.children) {\r\n            child._isClipped = false;\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its name\r\n     * @param name defines the child name to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByName(name: string): Nullable<Control> {\r\n        for (const child of this.children) {\r\n            if (child.name === name) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its type and its name\r\n     * @param name defines the child name to look for\r\n     * @param type defines the child type to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByType(name: string, type: string): Nullable<Control> {\r\n        for (const child of this.children) {\r\n            if (child.typeName === type) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Search for a specific control in children\r\n     * @param control defines the control to look for\r\n     * @returns true if the control is in child list\r\n     */\r\n    public containsControl(control: Control): boolean {\r\n        return this.children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current container\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Nullable<Control>): Container {\r\n        if (!control) {\r\n            return this;\r\n        }\r\n\r\n        const index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control._link(this._host);\r\n\r\n        control._markAllAsDirty();\r\n\r\n        this._reOrderControl(control);\r\n\r\n        this._markAsDirty();\r\n\r\n        this.onControlAddedObservable.notifyObservers(control);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes all controls from the current container\r\n     * @returns the current container\r\n     */\r\n    public clearControls(): Container {\r\n        const children = this.children.slice();\r\n\r\n        for (const child of children) {\r\n            this.removeControl(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        const index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n        }\r\n\r\n        control.linkWithMesh(null);\r\n\r\n        if (this._host) {\r\n            this._host._cleanControlAfterRemoval(control);\r\n        }\r\n\r\n        this._markAsDirty();\r\n\r\n        this.onControlRemovedObservable.notifyObservers(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * An event triggered when any control is added to this container.\r\n     */\r\n    public onControlAddedObservable = new Observable<Nullable<Control>>();\r\n\r\n    /**\r\n     * An event triggered when any control is removed from this container.\r\n     */\r\n    public onControlRemovedObservable = new Observable<Nullable<Control>>();\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _reOrderControl(control: Control): void {\r\n        const linkedMesh = control.linkedMesh;\r\n\r\n        this.removeControl(control);\r\n\r\n        let wasAdded = false;\r\n        for (let index = 0; index < this._children.length; index++) {\r\n            if (this._children[index].zIndex > control.zIndex) {\r\n                this._children.splice(index, 0, control);\r\n                wasAdded = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!wasAdded) {\r\n            this._children.push(control);\r\n        }\r\n\r\n        control.parent = this;\r\n\r\n        if (linkedMesh) {\r\n            control.linkWithMesh(linkedMesh);\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _offsetLeft(offset: number) {\r\n        super._offsetLeft(offset);\r\n\r\n        for (const child of this._children) {\r\n            child._offsetLeft(offset);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _offsetTop(offset: number) {\r\n        super._offsetTop(offset);\r\n\r\n        for (const child of this._children) {\r\n            child._offsetTop(offset);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _markAllAsDirty(): void {\r\n        super._markAllAsDirty();\r\n\r\n        for (let index = 0; index < this._children.length; index++) {\r\n            this._children[index]._markAllAsDirty();\r\n        }\r\n    }\r\n\r\n    protected _getBackgroundColor(context: ICanvasRenderingContext) {\r\n        return this._backgroundGradient ? this._backgroundGradient.getCanvasGradient(context) : this._background;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _localDraw(context: ICanvasRenderingContext): void {\r\n        if (this._background || this._backgroundGradient) {\r\n            context.save();\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            context.fillStyle = this._getBackgroundColor(context);\r\n\r\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            context.restore();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _link(host: AdvancedDynamicTexture): void {\r\n        super._link(host);\r\n\r\n        for (const child of this._children) {\r\n            child._link(host);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    protected _beforeLayout() {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _processMeasures(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(parentMeasure)) {\r\n            super._processMeasures(parentMeasure, context);\r\n            this._evaluateClippingState(parentMeasure);\r\n            if (this._renderToIntermediateTexture) {\r\n                if (this._intermediateTexture && this._host.getScene() != this._intermediateTexture.getScene()) {\r\n                    this._intermediateTexture.dispose();\r\n                    this._intermediateTexture = null;\r\n                }\r\n                if (!this._intermediateTexture) {\r\n                    this._intermediateTexture = new DynamicTexture(\r\n                        \"\",\r\n                        { width: this._currentMeasure.width, height: this._currentMeasure.height },\r\n                        this._host.getScene(),\r\n                        false,\r\n                        Texture.NEAREST_SAMPLINGMODE,\r\n                        Constants.TEXTUREFORMAT_RGBA,\r\n                        false\r\n                    );\r\n                    this._intermediateTexture.hasAlpha = true;\r\n                } else {\r\n                    this._intermediateTexture.scaleTo(this._currentMeasure.width, this._currentMeasure.height);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _layout(parentMeasure: Measure, context: ICanvasRenderingContext): boolean {\r\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) {\r\n            return false;\r\n        }\r\n\r\n        this.host._numLayoutCalls++;\r\n\r\n        if (this._isDirty) {\r\n            this._currentMeasure.transformToRef(this._transformMatrix, this._prevCurrentMeasureTransformedIntoGlobalSpace);\r\n        }\r\n\r\n        let rebuildCount = 0;\r\n\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._beforeLayout();\r\n\r\n        do {\r\n            let computedWidth = -1;\r\n            let computedHeight = -1;\r\n            this._rebuildLayout = false;\r\n            this._processMeasures(parentMeasure, context);\r\n\r\n            if (!this._isClipped) {\r\n                for (const child of this._children) {\r\n                    child._tempParentMeasure.copyFrom(this._measureForChildren);\r\n\r\n                    if (child._layout(this._measureForChildren, context)) {\r\n                        if (child.isVisible && !child.notRenderable) {\r\n                            if (this.adaptWidthToChildren && child._width.isPixel) {\r\n                                computedWidth = Math.max(computedWidth, child._currentMeasure.width + child._paddingLeftInPixels + child._paddingRightInPixels);\r\n                            }\r\n                            if (this.adaptHeightToChildren && child._height.isPixel) {\r\n                                computedHeight = Math.max(computedHeight, child._currentMeasure.height + child._paddingTopInPixels + child._paddingBottomInPixels);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (this.adaptWidthToChildren && computedWidth >= 0) {\r\n                    computedWidth += this.paddingLeftInPixels + this.paddingRightInPixels;\r\n                    if (this.width !== computedWidth + \"px\") {\r\n                        this.parent?._markAsDirty();\r\n                        this.width = computedWidth + \"px\";\r\n                        this._width.ignoreAdaptiveScaling = true;\r\n                        this._rebuildLayout = true;\r\n                    }\r\n                }\r\n                if (this.adaptHeightToChildren && computedHeight >= 0) {\r\n                    computedHeight += this.paddingTopInPixels + this.paddingBottomInPixels;\r\n                    if (this.height !== computedHeight + \"px\") {\r\n                        this.parent?._markAsDirty();\r\n                        this.height = computedHeight + \"px\";\r\n                        this._height.ignoreAdaptiveScaling = true;\r\n                        this._rebuildLayout = true;\r\n                    }\r\n                }\r\n\r\n                this._postMeasure();\r\n            }\r\n            rebuildCount++;\r\n        } while (this._rebuildLayout && rebuildCount < this.maxLayoutCycle);\r\n\r\n        if (rebuildCount >= 3 && this.logLayoutCycleErrors) {\r\n            Logger.Error(`Layout cycle detected in GUI (Container name=${this.name}, uniqueId=${this.uniqueId})`);\r\n        }\r\n\r\n        context.restore();\r\n\r\n        if (this._isDirty) {\r\n            this.invalidateRect();\r\n\r\n            this._isDirty = false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected _postMeasure() {\r\n        // Do nothing by default\r\n    }\r\n\r\n    private _inverseTransformMatrix = Matrix2D.Identity();\r\n    private _inverseMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _draw(context: ICanvasRenderingContext, invalidatedRectangle?: Measure): void {\r\n        const renderToIntermediateTextureThisDraw = this._renderToIntermediateTexture && this._intermediateTexture;\r\n        const contextToDrawTo = renderToIntermediateTextureThisDraw ? (<DynamicTexture>this._intermediateTexture).getContext() : context;\r\n\r\n        if (renderToIntermediateTextureThisDraw) {\r\n            contextToDrawTo.save();\r\n            contextToDrawTo.translate(-this._currentMeasure.left, -this._currentMeasure.top);\r\n            if (invalidatedRectangle) {\r\n                this._transformMatrix.invertToRef(this._inverseTransformMatrix);\r\n                invalidatedRectangle.transformToRef(this._inverseTransformMatrix, this._inverseMeasure);\r\n                contextToDrawTo.clearRect(this._inverseMeasure.left, this._inverseMeasure.top, this._inverseMeasure.width, this._inverseMeasure.height);\r\n            } else {\r\n                contextToDrawTo.clearRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        }\r\n\r\n        this._localDraw(contextToDrawTo);\r\n\r\n        context.save();\r\n\r\n        if (this.clipChildren) {\r\n            this._clipForChildren(contextToDrawTo);\r\n        }\r\n\r\n        for (const child of this._children) {\r\n            // Only redraw parts of the screen that are invalidated\r\n            if (invalidatedRectangle) {\r\n                if (!child._intersectsRect(invalidatedRectangle)) {\r\n                    continue;\r\n                }\r\n            }\r\n            child._render(contextToDrawTo, invalidatedRectangle);\r\n        }\r\n\r\n        if (renderToIntermediateTextureThisDraw) {\r\n            contextToDrawTo.restore();\r\n            context.save();\r\n            context.globalAlpha = this.alpha;\r\n            context.drawImage(contextToDrawTo.canvas, this._currentMeasure.left, this._currentMeasure.top);\r\n            context.restore();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    public getDescendantsToRef(results: Control[], directDescendantsOnly: boolean = false, predicate?: (control: Control) => boolean): void {\r\n        if (!this.children) {\r\n            return;\r\n        }\r\n\r\n        for (let index = 0; index < this.children.length; index++) {\r\n            const item = this.children[index];\r\n\r\n            if (!predicate || predicate(item)) {\r\n                results.push(item);\r\n            }\r\n\r\n            if (!directDescendantsOnly) {\r\n                item.getDescendantsToRef(results, false, predicate);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _processPicking(x: number, y: number, pi: Nullable<PointerInfoBase>, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        // checks if the picking position is within the container\r\n        const contains = super.contains(x, y);\r\n\r\n        // if clipChildren is off, we should still pass picking events to children even if we don't contain the pointer\r\n        if (!contains && this.clipChildren) {\r\n            return false;\r\n        }\r\n\r\n        if (this.delegatePickingToChildren) {\r\n            let contains = false;\r\n            for (let index = this._children.length - 1; index >= 0; index--) {\r\n                const child = this._children[index];\r\n                if (child.isEnabled && child.isHitTestVisible && child.isVisible && !child.notRenderable && child.contains(x, y)) {\r\n                    contains = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!contains) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Checking backwards to pick closest first\r\n        for (let index = this._children.length - 1; index >= 0; index--) {\r\n            const child = this._children[index];\r\n            if (child._processPicking(x, y, pi, type, pointerId, buttonIndex, deltaX, deltaY)) {\r\n                if (child.hoverCursor) {\r\n                    this._host._changeCursor(child.hoverCursor);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!contains) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isHitTestVisible) {\r\n            return false;\r\n        }\r\n\r\n        return this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.copyFrom(this._currentMeasure);\r\n    }\r\n\r\n    protected _getAdaptDimTo(dim: \"width\" | \"height\"): boolean {\r\n        if (dim === \"width\") {\r\n            return this.adaptWidthToChildren;\r\n        } else {\r\n            return this.adaptHeightToChildren;\r\n        }\r\n    }\r\n\r\n    public isDimensionFullyDefined(dim: \"width\" | \"height\"): boolean {\r\n        if (this._getAdaptDimTo(dim)) {\r\n            for (const child of this.children) {\r\n                if (!child.isDimensionFullyDefined(dim)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return super.isDimensionFullyDefined(dim);\r\n    }\r\n\r\n    /**\r\n     * Serializes the current control\r\n     * @param serializationObject defined the JSON serialized object\r\n     * @param force force serialization even if isSerializable === false\r\n     */\r\n    public serialize(serializationObject: any, force: boolean = false) {\r\n        super.serialize(serializationObject, force);\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n\r\n        if (this.backgroundGradient) {\r\n            serializationObject.backgroundGradient = {};\r\n            this.backgroundGradient.serialize(serializationObject.backgroundGradient);\r\n        }\r\n\r\n        if (!this.children.length) {\r\n            return;\r\n        }\r\n\r\n        serializationObject.children = [];\r\n\r\n        for (const child of this.children) {\r\n            if (child.isSerializable || force) {\r\n                const childSerializationObject = {};\r\n                child.serialize(childSerializationObject);\r\n                serializationObject.children.push(childSerializationObject);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        for (let index = this.children.length - 1; index >= 0; index--) {\r\n            this.children[index].dispose();\r\n        }\r\n        this._intermediateTexture?.dispose();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n        this._link(host);\r\n\r\n        // Gradient\r\n        if (serializedObject.backgroundGradient) {\r\n            const className = Tools.Instantiate(\"BABYLON.GUI.\" + serializedObject.backgroundGradient.className);\r\n            this._backgroundGradient = new className();\r\n            this._backgroundGradient?.parse(serializedObject.backgroundGradient);\r\n        }\r\n\r\n        if (!serializedObject.children) {\r\n            return;\r\n        }\r\n\r\n        for (const childData of serializedObject.children) {\r\n            this.addControl(Control.Parse(childData, host));\r\n        }\r\n    }\r\n\r\n    public isReady(): boolean {\r\n        for (const child of this.children) {\r\n            if (!child.isReady()) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Container\", Container);\r\n", "import { Container } from \"./container\";\r\nimport type { Measure } from \"../measure\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/** Class used to create rectangle container */\r\nexport class Rectangle extends Container {\r\n    private _thickness = 1;\r\n    private _cornerRadius = [0, 0, 0, 0];\r\n    private _cachedRadius = [0, 0, 0, 0];\r\n\r\n    /** Gets or sets border thickness */\r\n    @serialize()\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the corner radius of all angles */\r\n    @serialize()\r\n    public get cornerRadius(): number {\r\n        return this._cornerRadius[0];\r\n    }\r\n\r\n    public set cornerRadius(value: number) {\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        if (this._cornerRadius[0] === value && this._cornerRadius[1] === value && this._cornerRadius[2] === value && this._cornerRadius[3] === value) {\r\n            return;\r\n        }\r\n\r\n        this._cornerRadius[0] = this._cornerRadius[1] = this._cornerRadius[2] = this._cornerRadius[3] = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the corner radius top left angle */\r\n    @serialize()\r\n    public get cornerRadiusX(): number {\r\n        return this._cornerRadius[0];\r\n    }\r\n\r\n    public set cornerRadiusX(value: number) {\r\n        if (this._cornerRadius[0] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[0] = value;\r\n    }\r\n\r\n    /** Gets or sets the corner radius top right angle */\r\n    @serialize()\r\n    public get cornerRadiusY(): number {\r\n        return this._cornerRadius[1];\r\n    }\r\n\r\n    public set cornerRadiusY(value: number) {\r\n        if (this._cornerRadius[1] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[1] = value;\r\n    }\r\n\r\n    /** Gets or sets the corner radius bottom left angle */\r\n    @serialize()\r\n    public get cornerRadiusZ(): number {\r\n        return this._cornerRadius[2];\r\n    }\r\n\r\n    public set cornerRadiusZ(value: number) {\r\n        if (this._cornerRadius[2] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[2] = value;\r\n    }\r\n\r\n    /** Gets or sets the corner radius bottom right angle */\r\n    @serialize()\r\n    public get cornerRadiusW(): number {\r\n        return this._cornerRadius[3];\r\n    }\r\n\r\n    public set cornerRadiusW(value: number) {\r\n        if (this._cornerRadius[3] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[3] = value;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Rectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Rectangle\";\r\n    }\r\n\r\n    /** @internal */\r\n    protected _computeAdditionalOffsetX() {\r\n        let additionalWidth = 0;\r\n        if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n            // Take in account the aliasing\r\n            additionalWidth += 1;\r\n        }\r\n        if (this.thickness) {\r\n            additionalWidth += this.thickness / 2;\r\n        }\r\n        return additionalWidth;\r\n    }\r\n\r\n    /** @internal */\r\n    protected _computeAdditionalOffsetY() {\r\n        let additionalHeight = 0;\r\n        if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n            // Take in account the aliasing\r\n            additionalHeight += 1;\r\n        }\r\n        if (this.thickness) {\r\n            additionalHeight += this.thickness / 2;\r\n        }\r\n        return additionalHeight;\r\n    }\r\n\r\n    protected _getRectangleFill(context: ICanvasRenderingContext) {\r\n        return this._getBackgroundColor(context);\r\n    }\r\n\r\n    protected _localDraw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this._background || this._backgroundGradient) {\r\n            context.fillStyle = this._getRectangleFill(context);\r\n\r\n            if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.fill();\r\n            } else {\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        }\r\n\r\n        if (this._thickness) {\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            if (this.color || this.gradient) {\r\n                context.strokeStyle = this.gradient ? this.gradient.getCanvasGradient(context) : this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.stroke();\r\n            } else {\r\n                context.strokeRect(\r\n                    this._currentMeasure.left + this._thickness / 2,\r\n                    this._currentMeasure.top + this._thickness / 2,\r\n                    this._currentMeasure.width - this._thickness,\r\n                    this._currentMeasure.height - this._thickness\r\n                );\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    private _drawRoundedRect(context: ICanvasRenderingContext, offset: number = 0): void {\r\n        const x = this._currentMeasure.left + offset;\r\n        const y = this._currentMeasure.top + offset;\r\n        const width = this._currentMeasure.width - offset * 2;\r\n        const height = this._currentMeasure.height - offset * 2;\r\n\r\n        for (let index = 0; index < this._cornerRadius.length; index++) {\r\n            this._cachedRadius[index] = Math.abs(Math.min(height / 2, Math.min(width / 2, this._cornerRadius[index])));\r\n        }\r\n\r\n        context.beginPath();\r\n        context.moveTo(x + this._cachedRadius[0], y);\r\n        context.lineTo(x + width - this._cachedRadius[1], y);\r\n        context.arc(x + width - this._cachedRadius[1], y + this._cachedRadius[1], this._cachedRadius[1], (3 * Math.PI) / 2, Math.PI * 2);\r\n        context.lineTo(x + width, y + height - this._cachedRadius[2]);\r\n        context.arc(x + width - this._cachedRadius[2], y + height - this._cachedRadius[2], this._cachedRadius[2], 0, Math.PI / 2);\r\n        context.lineTo(x + this._cachedRadius[3], y + height);\r\n        context.arc(x + this._cachedRadius[3], y + height - this._cachedRadius[3], this._cachedRadius[3], Math.PI / 2, Math.PI);\r\n        context.lineTo(x, y + this._cachedRadius[0]);\r\n        context.arc(x + this._cachedRadius[0], y + this._cachedRadius[0], this._cachedRadius[0], Math.PI, (3 * Math.PI) / 2);\r\n        context.closePath();\r\n    }\r\n\r\n    protected _clipForChildren(context: ICanvasRenderingContext) {\r\n        if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n            this._drawRoundedRect(context, this._thickness);\r\n            context.clip();\r\n        }\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Rectangle\", Rectangle);\r\n", "import { Observable } from \"core/Misc/observable\";\r\nimport type { Measure } from \"../measure\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Control } from \"./control\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext, ITextMetrics } from \"core/Engines/ICanvas\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\n\r\n/**\r\n * Enum that determines the text-wrapping mode to use.\r\n */\r\nexport enum TextWrapping {\r\n    /**\r\n     * Clip the text when it's larger than Control.width; this is the default mode.\r\n     */\r\n    Clip = 0,\r\n\r\n    /**\r\n     * Wrap the text word-wise, i.e. try to add line-breaks at word boundary to fit within Control.width.\r\n     */\r\n    WordWrap = 1,\r\n\r\n    /**\r\n     * Ellipsize the text, i.e. shrink with trailing  when text is larger than Control.width.\r\n     */\r\n    Ellipsis = 2,\r\n\r\n    /**\r\n     * Wrap the text word-wise and clip the text when the text's height is larger than the Control.height, and shrink the last line with trailing  .\r\n     */\r\n    WordWrapEllipsis,\r\n}\r\n\r\n/**\r\n * Class used to create text block control\r\n */\r\nexport class TextBlock extends Control {\r\n    private _text = \"\";\r\n    private _textWrapping = TextWrapping.Clip;\r\n    private _textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n    private _textVerticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n\r\n    private _lines: any[];\r\n    private _resizeToFit: boolean = false;\r\n    private _lineSpacing: ValueAndUnit = new ValueAndUnit(0);\r\n    private _outlineWidth: number = 0;\r\n    private _outlineColor: string = \"white\";\r\n    private _underline: boolean = false;\r\n    private _lineThrough: boolean = false;\r\n    private _wordDivider: string = \" \";\r\n    private _forceResizeWidth: boolean = false;\r\n    private _applyOutlineToUnderline: boolean = false;\r\n\r\n    /**\r\n     * An event triggered after the text is changed\r\n     */\r\n    public onTextChangedObservable = new Observable<TextBlock>();\r\n\r\n    /**\r\n     * An event triggered after the text was broken up into lines\r\n     */\r\n    public onLinesReadyObservable = new Observable<TextBlock>();\r\n\r\n    /**\r\n     * Function used to split a string into words. By default, a string is split at each space character found\r\n     */\r\n    public wordSplittingFunction: Nullable<(line: string) => string[]>;\r\n\r\n    /**\r\n     * Return the line list (you may need to use the onLinesReadyObservable to make sure the list is ready)\r\n     */\r\n    public get lines(): any[] {\r\n        return this._lines;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the TextBlock will be resized to fit its content\r\n\r\n     */\r\n    @serialize()\r\n    public get resizeToFit(): boolean {\r\n        return this._resizeToFit;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the TextBlock will be resized to fit its content\r\n\r\n     */\r\n    public set resizeToFit(value: boolean) {\r\n        if (this._resizeToFit === value) {\r\n            return;\r\n        }\r\n        this._resizeToFit = value;\r\n\r\n        if (this._resizeToFit) {\r\n            this._width.ignoreAdaptiveScaling = true;\r\n            this._height.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if text must be wrapped\r\n     */\r\n    @serialize()\r\n    public get textWrapping(): TextWrapping | boolean {\r\n        return this._textWrapping;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if text must be wrapped\r\n     */\r\n    public set textWrapping(value: TextWrapping | boolean) {\r\n        if (this._textWrapping === value) {\r\n            return;\r\n        }\r\n        this._textWrapping = +value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text to display\r\n     */\r\n    @serialize()\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text to display\r\n     */\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n        this._text = value + \"\"; // Making sure it is a text\r\n        this._markAsDirty();\r\n\r\n        this.onTextChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text horizontal alignment (BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    @serialize()\r\n    public get textHorizontalAlignment(): number {\r\n        return this._textHorizontalAlignment;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text horizontal alignment (BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public set textHorizontalAlignment(value: number) {\r\n        if (this._textHorizontalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._textHorizontalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text vertical alignment (BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    @serialize()\r\n    public get textVerticalAlignment(): number {\r\n        return this._textVerticalAlignment;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text vertical alignment (BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public set textVerticalAlignment(value: number) {\r\n        if (this._textVerticalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._textVerticalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets line spacing value\r\n     */\r\n    @serialize()\r\n    public set lineSpacing(value: string | number) {\r\n        if (this._lineSpacing.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets line spacing value\r\n     */\r\n    public get lineSpacing(): string | number {\r\n        return this._lineSpacing.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    @serialize()\r\n    public get outlineWidth(): number {\r\n        return this._outlineWidth;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    public set outlineWidth(value: number) {\r\n        if (this._outlineWidth === value) {\r\n            return;\r\n        }\r\n        this._outlineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that text must have underline\r\n     */\r\n    @serialize()\r\n    public get underline(): boolean {\r\n        return this._underline;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that text must have underline\r\n     */\r\n    public set underline(value: boolean) {\r\n        if (this._underline === value) {\r\n            return;\r\n        }\r\n        this._underline = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that text must be crossed out\r\n     */\r\n    @serialize()\r\n    public get lineThrough(): boolean {\r\n        return this._lineThrough;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that text must be crossed out\r\n     */\r\n    public set lineThrough(value: boolean) {\r\n        if (this._lineThrough === value) {\r\n            return;\r\n        }\r\n        this._lineThrough = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * If the outline should be applied to the underline/strike-through too. Has different behavior in Edge/Chrome vs Firefox.\r\n     */\r\n    @serialize()\r\n    public get applyOutlineToUnderline(): boolean {\r\n        return this._applyOutlineToUnderline;\r\n    }\r\n\r\n    public set applyOutlineToUnderline(value: boolean) {\r\n        if (this._applyOutlineToUnderline === value) {\r\n            return;\r\n        }\r\n        this._applyOutlineToUnderline = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    @serialize()\r\n    public get outlineColor(): string {\r\n        return this._outlineColor;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    public set outlineColor(value: string) {\r\n        if (this._outlineColor === value) {\r\n            return;\r\n        }\r\n        this._outlineColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets word divider\r\n     */\r\n    @serialize()\r\n    public get wordDivider(): string {\r\n        return this._wordDivider;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets word divider\r\n     */\r\n    public set wordDivider(value: string) {\r\n        if (this._wordDivider === value) {\r\n            return;\r\n        }\r\n        this._wordDivider = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * By default, if a text block has text wrapping other than Clip, its width\r\n     * is not resized even if resizeToFit = true. This parameter forces the width\r\n     * to be resized.\r\n     */\r\n    @serialize()\r\n    public get forceResizeWidth(): boolean {\r\n        return this._forceResizeWidth;\r\n    }\r\n\r\n    public set forceResizeWidth(value: boolean) {\r\n        if (this._forceResizeWidth === value) {\r\n            return;\r\n        }\r\n        this._forceResizeWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new TextBlock object\r\n     * @param name defines the name of the control\r\n     * @param text defines the text to display (empty string by default)\r\n     */\r\n    constructor(\r\n        /**\r\n         * Defines the name of the control\r\n         */\r\n        public name?: string,\r\n        text: string = \"\"\r\n    ) {\r\n        super(name);\r\n\r\n        this.text = text;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TextBlock\";\r\n    }\r\n\r\n    protected _processMeasures(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        if (!this._fontOffset || this.isDirty) {\r\n            this._fontOffset = Control._GetFontOffset(context.font);\r\n        }\r\n        super._processMeasures(parentMeasure, context);\r\n\r\n        // Prepare lines\r\n        this._lines = this._breakLines(this._currentMeasure.width, this._currentMeasure.height, context);\r\n        this.onLinesReadyObservable.notifyObservers(this);\r\n\r\n        let maxLineWidth: number = 0;\r\n\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n\r\n            if (line.width > maxLineWidth) {\r\n                maxLineWidth = line.width;\r\n            }\r\n        }\r\n\r\n        if (this._resizeToFit) {\r\n            if (this._textWrapping === TextWrapping.Clip || this._forceResizeWidth) {\r\n                const newWidth = Math.ceil(this._paddingLeftInPixels) + Math.ceil(this._paddingRightInPixels) + Math.ceil(maxLineWidth);\r\n                if (newWidth !== this._width.getValueInPixel(this._host, this._tempParentMeasure.width)) {\r\n                    this._width.updateInPlace(newWidth, ValueAndUnit.UNITMODE_PIXEL);\r\n                    this._rebuildLayout = true;\r\n                }\r\n            }\r\n            let newHeight = (this._paddingTopInPixels + this._paddingBottomInPixels + this._fontOffset.height * this._lines.length) | 0;\r\n\r\n            if (this._lines.length > 0 && this._lineSpacing.internalValue !== 0) {\r\n                let lineSpacing = 0;\r\n                if (this._lineSpacing.isPixel) {\r\n                    lineSpacing = this._lineSpacing.getValue(this._host);\r\n                } else {\r\n                    lineSpacing = this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n                }\r\n\r\n                newHeight += (this._lines.length - 1) * lineSpacing;\r\n            }\r\n\r\n            if (newHeight !== this._height.internalValue) {\r\n                this._height.updateInPlace(newHeight, ValueAndUnit.UNITMODE_PIXEL);\r\n                this._rebuildLayout = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _drawText(text: string, textWidth: number, y: number, context: ICanvasRenderingContext): void {\r\n        const width = this._currentMeasure.width;\r\n        let x = 0;\r\n        switch (this._textHorizontalAlignment) {\r\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                x = 0;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                x = width - textWidth;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                x = (width - textWidth) / 2;\r\n                break;\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this.outlineWidth) {\r\n            context.strokeText(text, this._currentMeasure.left + x, y);\r\n        }\r\n        context.fillText(text, this._currentMeasure.left + x, y);\r\n\r\n        if (this._underline) {\r\n            this._drawLine(this._currentMeasure.left + x, y + 3, this._currentMeasure.left + x + textWidth, y + 3, context);\r\n        }\r\n\r\n        if (this._lineThrough) {\r\n            this._drawLine(this._currentMeasure.left + x, y - this.fontSizeInPixels / 3, this._currentMeasure.left + x + textWidth, y - this.fontSizeInPixels / 3, context);\r\n        }\r\n    }\r\n\r\n    private _drawLine(xFrom: number, yFrom: number, xTo: number, yTo: number, context: ICanvasRenderingContext): void {\r\n        context.beginPath();\r\n        context.lineWidth = Math.round(this.fontSizeInPixels * 0.05);\r\n        context.moveTo(xFrom, yFrom);\r\n        context.lineTo(xTo, yTo);\r\n        if (this.outlineWidth && this.applyOutlineToUnderline) {\r\n            context.stroke();\r\n            context.fill();\r\n        } else {\r\n            const currentStroke = context.strokeStyle;\r\n            context.strokeStyle = context.fillStyle;\r\n            context.stroke();\r\n            context.strokeStyle = currentStroke;\r\n        }\r\n        context.closePath();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        // Render lines\r\n        this._renderLines(context);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _applyStates(context: ICanvasRenderingContext): void {\r\n        super._applyStates(context);\r\n        if (this.outlineWidth) {\r\n            context.lineWidth = this.outlineWidth;\r\n            context.strokeStyle = this.outlineColor;\r\n            context.lineJoin = \"miter\";\r\n            context.miterLimit = 2;\r\n        }\r\n    }\r\n\r\n    private _linesTemp: object[] = [];\r\n\r\n    protected _breakLines(refWidth: number, refHeight: number, context: ICanvasRenderingContext): object[] {\r\n        this._linesTemp.length = 0;\r\n        const _lines = this.text.split(\"\\n\");\r\n\r\n        if (this._textWrapping === TextWrapping.Ellipsis) {\r\n            for (const _line of _lines) {\r\n                this._linesTemp.push(this._parseLineEllipsis(_line, refWidth, context));\r\n            }\r\n        } else if (this._textWrapping === TextWrapping.WordWrap) {\r\n            for (const _line of _lines) {\r\n                this._linesTemp.push(...this._parseLineWordWrap(_line, refWidth, context));\r\n            }\r\n        } else if (this._textWrapping === TextWrapping.WordWrapEllipsis) {\r\n            for (const _line of _lines) {\r\n                this._linesTemp.push(...this._parseLineWordWrapEllipsis(_line, refWidth, refHeight!, context));\r\n            }\r\n        } else {\r\n            for (const _line of _lines) {\r\n                this._linesTemp.push(this._parseLine(_line, context));\r\n            }\r\n        }\r\n\r\n        return this._linesTemp;\r\n    }\r\n\r\n    protected _parseLine(line: string = \"\", context: ICanvasRenderingContext): object {\r\n        return { text: line, width: this._getTextMetricsWidth(context.measureText(line)) };\r\n    }\r\n\r\n    //Calculate how many characters approximately we need to remove\r\n    private _getCharsToRemove(lineWidth: number, width: number, lineLength: number) {\r\n        const diff = lineWidth > width ? lineWidth - width : 0;\r\n        // This isn't exact unless the font is monospaced\r\n        const charWidth = lineWidth / lineLength;\r\n        const removeChars = Math.max(Math.floor(diff / charWidth), 1);\r\n        return removeChars;\r\n    }\r\n\r\n    protected _parseLineEllipsis(line: string = \"\", width: number, context: ICanvasRenderingContext): object {\r\n        let lineWidth = this._getTextMetricsWidth(context.measureText(line));\r\n\r\n        let removeChars = this._getCharsToRemove(lineWidth, width, line.length);\r\n\r\n        // unicode support. split('') does not work with unicode!\r\n        // make sure Array.from is available\r\n        const characters = Array.from && Array.from(line);\r\n        if (!characters) {\r\n            // no array.from, use the old method\r\n            while (line.length > 2 && lineWidth > width) {\r\n                line = line.slice(0, -removeChars);\r\n                lineWidth = this._getTextMetricsWidth(context.measureText(line + \"\"));\r\n\r\n                removeChars = this._getCharsToRemove(lineWidth, width, line.length);\r\n            }\r\n            // Add on the end\r\n            line += \"\";\r\n        } else {\r\n            while (characters.length && lineWidth > width) {\r\n                characters.splice(characters.length - removeChars, removeChars);\r\n                line = `${characters.join(\"\")}`;\r\n                lineWidth = this._getTextMetricsWidth(context.measureText(line));\r\n\r\n                removeChars = this._getCharsToRemove(lineWidth, width, line.length);\r\n            }\r\n        }\r\n\r\n        return { text: line, width: lineWidth };\r\n    }\r\n\r\n    private _getTextMetricsWidth(textMetrics: ITextMetrics) {\r\n        if (textMetrics.actualBoundingBoxLeft !== undefined) {\r\n            return Math.abs(textMetrics.actualBoundingBoxLeft) + Math.abs(textMetrics.actualBoundingBoxRight);\r\n        }\r\n        return textMetrics.width;\r\n    }\r\n\r\n    protected _parseLineWordWrap(line: string = \"\", width: number, context: ICanvasRenderingContext): object[] {\r\n        const lines = [];\r\n        const words = this.wordSplittingFunction ? this.wordSplittingFunction(line) : line.split(this._wordDivider);\r\n        let lineWidth = this._getTextMetricsWidth(context.measureText(line));\r\n\r\n        for (let n = 0; n < words.length; n++) {\r\n            const testLine = n > 0 ? line + this._wordDivider + words[n] : words[0];\r\n            const testWidth = this._getTextMetricsWidth(context.measureText(testLine));\r\n            if (testWidth > width && n > 0) {\r\n                lines.push({ text: line, width: lineWidth });\r\n                line = words[n];\r\n                lineWidth = this._getTextMetricsWidth(context.measureText(line));\r\n            } else {\r\n                lineWidth = testWidth;\r\n                line = testLine;\r\n            }\r\n        }\r\n        lines.push({ text: line, width: lineWidth });\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _parseLineWordWrapEllipsis(line: string = \"\", width: number, height: number, context: ICanvasRenderingContext): object[] {\r\n        const lines = this._parseLineWordWrap(line, width, context);\r\n        for (let n = 1; n <= lines.length; n++) {\r\n            const currentHeight = this._computeHeightForLinesOf(n);\r\n            if (currentHeight > height && n > 1) {\r\n                const lastLine = lines[n - 2] as { text: string; width: number };\r\n                const currentLine = lines[n - 1] as { text: string; width: number };\r\n                lines[n - 2] = this._parseLineEllipsis(lastLine.text + this._wordDivider + currentLine.text, width, context);\r\n                const linesToRemove = lines.length - n + 1;\r\n                for (let i = 0; i < linesToRemove; i++) {\r\n                    lines.pop();\r\n                }\r\n                return lines;\r\n            }\r\n        }\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _renderLines(context: ICanvasRenderingContext): void {\r\n        if (!this._fontOffset || !this._lines) {\r\n            return;\r\n        }\r\n        const height = this._currentMeasure.height;\r\n        let rootY = 0;\r\n        switch (this._textVerticalAlignment) {\r\n            case Control.VERTICAL_ALIGNMENT_TOP:\r\n                rootY = this._fontOffset.ascent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\r\n                rootY = height - this._fontOffset.height * (this._lines.length - 1) - this._fontOffset.descent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_CENTER:\r\n                rootY = this._fontOffset.ascent + (height - this._fontOffset.height * this._lines.length) / 2;\r\n                break;\r\n        }\r\n\r\n        rootY += this._currentMeasure.top;\r\n\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n\r\n            if (i !== 0 && this._lineSpacing.internalValue !== 0) {\r\n                if (this._lineSpacing.isPixel) {\r\n                    rootY += this._lineSpacing.getValue(this._host);\r\n                } else {\r\n                    rootY = rootY + this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n                }\r\n            }\r\n\r\n            this._drawText(line.text, line.width, rootY, context);\r\n            rootY += this._fontOffset.height;\r\n        }\r\n    }\r\n\r\n    private _computeHeightForLinesOf(lineCount: number): number {\r\n        let newHeight = this._paddingTopInPixels + this._paddingBottomInPixels + this._fontOffset.height * lineCount;\r\n\r\n        if (lineCount > 0 && this._lineSpacing.internalValue !== 0) {\r\n            let lineSpacing = 0;\r\n            if (this._lineSpacing.isPixel) {\r\n                lineSpacing = this._lineSpacing.getValue(this._host);\r\n            } else {\r\n                lineSpacing = this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n            }\r\n\r\n            newHeight += (lineCount - 1) * lineSpacing;\r\n        }\r\n\r\n        return newHeight;\r\n    }\r\n\r\n    public isDimensionFullyDefined(dim: \"width\" | \"height\"): boolean {\r\n        if (this.resizeToFit) {\r\n            return true;\r\n        }\r\n        return super.isDimensionFullyDefined(dim);\r\n    }\r\n\r\n    /**\r\n     * Given a width constraint applied on the text block, find the expected height\r\n     * @returns expected height\r\n     */\r\n    public computeExpectedHeight(): number {\r\n        if (this.text && this.widthInPixels) {\r\n            // Should abstract platform instead of using LastCreatedEngine\r\n            const context = EngineStore.LastCreatedEngine?.createCanvas(0, 0).getContext(\"2d\");\r\n            if (context) {\r\n                this._applyStates(context);\r\n                if (!this._fontOffset) {\r\n                    this._fontOffset = Control._GetFontOffset(context.font);\r\n                }\r\n                const lines = this._lines\r\n                    ? this._lines\r\n                    : this._breakLines(\r\n                          this.widthInPixels - this._paddingLeftInPixels - this._paddingRightInPixels,\r\n                          this.heightInPixels - this._paddingTopInPixels - this._paddingBottomInPixels,\r\n                          context\r\n                      );\r\n                return this._computeHeightForLinesOf(lines.length);\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    dispose(): void {\r\n        super.dispose();\r\n\r\n        this.onTextChangedObservable.clear();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.TextBlock\", TextBlock);\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Tools } from \"core/Misc/tools\";\r\n\r\nimport { Control } from \"./control\";\r\nimport type { Measure } from \"../measure\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvas, ICanvasRenderingContext, IImage } from \"core/Engines/ICanvas\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\n\r\n/**\r\n * Class used to create 2D images\r\n */\r\nexport class Image extends Control {\r\n    /**\r\n     *  Specifies an alternate text for the image, if the image for some reason cannot be displayed.\r\n     */\r\n    public alt?: string;\r\n\r\n    private _workingCanvas: Nullable<ICanvas> = null;\r\n\r\n    private _domImage: IImage;\r\n    private _imageWidth: number;\r\n    private _imageHeight: number;\r\n    private _loaded = false;\r\n    private _stretch = Image.STRETCH_FILL;\r\n    private _source: Nullable<string>;\r\n    private _autoScale = false;\r\n\r\n    private _sourceLeft = 0;\r\n    private _sourceTop = 0;\r\n    private _sourceWidth = 0;\r\n    private _sourceHeight = 0;\r\n    private _svgAttributesComputationCompleted: boolean = false;\r\n    private _isSVG: boolean = false;\r\n\r\n    private _cellWidth: number = 0;\r\n    private _cellHeight: number = 0;\r\n    private _cellId: number = -1;\r\n\r\n    private _sliceLeft: number;\r\n    private _sliceRight: number;\r\n    private _sliceTop: number;\r\n    private _sliceBottom: number;\r\n\r\n    private _populateNinePatchSlicesFromImage = false;\r\n\r\n    private _detectPointerOnOpaqueOnly: boolean;\r\n\r\n    private _imageDataCache: {\r\n        data: Uint8ClampedArray | null;\r\n        key: string;\r\n    } = { data: null, key: \"\" };\r\n\r\n    /**\r\n     * Cache of images to avoid loading the same image multiple times\r\n     */\r\n    public static SourceImgCache = new Map<string, { img: IImage; timesUsed: number; loaded: boolean; waitingForLoadCallback: Array<() => void> }>();\r\n\r\n    /**\r\n     * Observable notified when the content is loaded\r\n     */\r\n    public onImageLoadedObservable = new Observable<Image>();\r\n\r\n    /**\r\n     * Observable notified when _sourceLeft, _sourceTop, _sourceWidth and _sourceHeight are computed\r\n     */\r\n    public onSVGAttributesComputedObservable = new Observable<Image>();\r\n\r\n    /**\r\n     * Gets or sets the referrer policy to apply on the img element load request.\r\n     * You should set referrerPolicy before set the source of the image if you want to ensure the header will be present on the xhr loading request\r\n     */\r\n    public referrerPolicy: Nullable<ReferrerPolicy>;\r\n\r\n    /**\r\n     * Gets a boolean indicating that the content is loaded\r\n     */\r\n    public get isLoaded(): boolean {\r\n        return this._loaded;\r\n    }\r\n\r\n    public isReady(): boolean {\r\n        return this.isLoaded;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if pointers should only be validated on pixels with alpha > 0.\r\n     * Beware using this as this will consume more memory as the image has to be stored twice\r\n     */\r\n    @serialize()\r\n    public get detectPointerOnOpaqueOnly(): boolean {\r\n        return this._detectPointerOnOpaqueOnly;\r\n    }\r\n\r\n    public set detectPointerOnOpaqueOnly(value: boolean) {\r\n        if (this._detectPointerOnOpaqueOnly === value) {\r\n            return;\r\n        }\r\n\r\n        this._detectPointerOnOpaqueOnly = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the left value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceLeft(): number {\r\n        return this._sliceLeft;\r\n    }\r\n\r\n    public set sliceLeft(value: number) {\r\n        if (this._sliceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the right value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceRight(): number {\r\n        return this._sliceRight;\r\n    }\r\n\r\n    public set sliceRight(value: number) {\r\n        if (this._sliceRight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceRight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceTop(): number {\r\n        return this._sliceTop;\r\n    }\r\n\r\n    public set sliceTop(value: number) {\r\n        if (this._sliceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the bottom value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceBottom(): number {\r\n        return this._sliceBottom;\r\n    }\r\n\r\n    public set sliceBottom(value: number) {\r\n        if (this._sliceBottom === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceBottom = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the left coordinate in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceLeft(): number {\r\n        return this._sourceLeft;\r\n    }\r\n\r\n    public set sourceLeft(value: number) {\r\n        if (this._sourceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top coordinate in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceTop(): number {\r\n        return this._sourceTop;\r\n    }\r\n\r\n    public set sourceTop(value: number) {\r\n        if (this._sourceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the width to capture in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceWidth(): number {\r\n        return this._sourceWidth;\r\n    }\r\n\r\n    public set sourceWidth(value: number) {\r\n        if (this._sourceWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height to capture in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceHeight(): number {\r\n        return this._sourceHeight;\r\n    }\r\n\r\n    public set sourceHeight(value: number) {\r\n        if (this._sourceHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets the image width\r\n     */\r\n    public get imageWidth(): number {\r\n        return this._imageWidth;\r\n    }\r\n\r\n    /**\r\n     * Gets the image height\r\n     */\r\n    public get imageHeight(): number {\r\n        return this._imageHeight;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if nine patch slices (left, top, right, bottom) should be read from image data\r\n     */\r\n    @serialize()\r\n    public get populateNinePatchSlicesFromImage(): boolean {\r\n        return this._populateNinePatchSlicesFromImage;\r\n    }\r\n\r\n    public set populateNinePatchSlicesFromImage(value: boolean) {\r\n        if (this._populateNinePatchSlicesFromImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._populateNinePatchSlicesFromImage = value;\r\n\r\n        if (this._populateNinePatchSlicesFromImage && this._loaded) {\r\n            this._extractNinePatchSliceDataFromImage();\r\n        }\r\n    }\r\n\r\n    /** Indicates if the format of the image is SVG */\r\n    public get isSVG(): boolean {\r\n        return this._isSVG;\r\n    }\r\n\r\n    /** Gets the status of the SVG attributes computation (sourceLeft, sourceTop, sourceWidth, sourceHeight) */\r\n    public get svgAttributesComputationCompleted(): boolean {\r\n        return this._svgAttributesComputationCompleted;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the image can force its container to adapt its size\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    public get autoScale(): boolean {\r\n        return this._autoScale;\r\n    }\r\n\r\n    public set autoScale(value: boolean) {\r\n        if (this._autoScale === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoScale = value;\r\n\r\n        if (value && this._loaded) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the stretching mode used by the image */\r\n    @serialize()\r\n    public get stretch(): number {\r\n        return this._stretch;\r\n    }\r\n\r\n    public set stretch(value: number) {\r\n        if (this._stretch === value) {\r\n            return;\r\n        }\r\n\r\n        this._stretch = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _rotate90(n: number, preserveProperties: boolean = false): Image {\r\n        const width = this._domImage.width;\r\n        const height = this._domImage.height;\r\n\r\n        // Should abstract platform instead of using LastCreatedEngine\r\n        const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n        if (!engine) {\r\n            throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n        }\r\n        const canvas = engine.createCanvas(height, width);\r\n\r\n        const context = canvas.getContext(\"2d\")!;\r\n\r\n        context.translate(canvas.width / 2, canvas.height / 2);\r\n        context.rotate((n * Math.PI) / 2);\r\n\r\n        context.drawImage(this._domImage, 0, 0, width, height, -width / 2, -height / 2, width, height);\r\n\r\n        const dataUrl: string = canvas.toDataURL(\"image/jpg\");\r\n        const rotatedImage = new Image(this.name + \"rotated\", dataUrl);\r\n\r\n        if (preserveProperties) {\r\n            rotatedImage._stretch = this._stretch;\r\n            rotatedImage._autoScale = this._autoScale;\r\n            rotatedImage._cellId = this._cellId;\r\n            rotatedImage._cellWidth = n % 1 ? this._cellHeight : this._cellWidth;\r\n            rotatedImage._cellHeight = n % 1 ? this._cellWidth : this._cellHeight;\r\n        }\r\n\r\n        this._handleRotationForSVGImage(this, rotatedImage, n);\r\n\r\n        this._imageDataCache.data = null;\r\n\r\n        return rotatedImage;\r\n    }\r\n\r\n    private _handleRotationForSVGImage(srcImage: Image, dstImage: Image, n: number): void {\r\n        if (!srcImage._isSVG) {\r\n            return;\r\n        }\r\n\r\n        if (srcImage._svgAttributesComputationCompleted) {\r\n            this._rotate90SourceProperties(srcImage, dstImage, n);\r\n            this._markAsDirty();\r\n        } else {\r\n            srcImage.onSVGAttributesComputedObservable.addOnce(() => {\r\n                this._rotate90SourceProperties(srcImage, dstImage, n);\r\n                this._markAsDirty();\r\n            });\r\n        }\r\n    }\r\n\r\n    private _rotate90SourceProperties(srcImage: Image, dstImage: Image, n: number): void {\r\n        let srcLeft = srcImage.sourceLeft,\r\n            srcTop = srcImage.sourceTop,\r\n            srcWidth = srcImage.domImage.width,\r\n            srcHeight = srcImage.domImage.height;\r\n\r\n        let dstLeft = srcLeft,\r\n            dstTop = srcTop,\r\n            dstWidth = srcImage.sourceWidth,\r\n            dstHeight = srcImage.sourceHeight;\r\n\r\n        if (n != 0) {\r\n            const mult = n < 0 ? -1 : 1;\r\n            n = n % 4;\r\n            for (let i = 0; i < Math.abs(n); ++i) {\r\n                dstLeft = -(srcTop - srcHeight / 2) * mult + srcHeight / 2;\r\n                dstTop = (srcLeft - srcWidth / 2) * mult + srcWidth / 2;\r\n                [dstWidth, dstHeight] = [dstHeight, dstWidth];\r\n                if (n < 0) {\r\n                    dstTop -= dstHeight;\r\n                } else {\r\n                    dstLeft -= dstWidth;\r\n                }\r\n                srcLeft = dstLeft;\r\n                srcTop = dstTop;\r\n                [srcWidth, srcHeight] = [srcHeight, srcWidth];\r\n            }\r\n        }\r\n\r\n        dstImage.sourceLeft = dstLeft;\r\n        dstImage.sourceTop = dstTop;\r\n        dstImage.sourceWidth = dstWidth;\r\n        dstImage.sourceHeight = dstHeight;\r\n    }\r\n\r\n    private _extractNinePatchSliceDataFromImage() {\r\n        const width = this._domImage.width;\r\n        const height = this._domImage.height;\r\n\r\n        if (!this._workingCanvas) {\r\n            const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n            if (!engine) {\r\n                throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n            }\r\n            this._workingCanvas = engine.createCanvas(width, height);\r\n        }\r\n        const canvas = this._workingCanvas;\r\n        const context = canvas.getContext(\"2d\")!;\r\n\r\n        context.drawImage(this._domImage, 0, 0, width, height);\r\n        const imageData = context.getImageData(0, 0, width, height);\r\n\r\n        // Left and right\r\n        this._sliceLeft = -1;\r\n        this._sliceRight = -1;\r\n        for (let x = 0; x < width; x++) {\r\n            const alpha = imageData.data[x * 4 + 3];\r\n\r\n            if (alpha > 127 && this._sliceLeft === -1) {\r\n                this._sliceLeft = x;\r\n                continue;\r\n            }\r\n\r\n            if (alpha < 127 && this._sliceLeft > -1) {\r\n                this._sliceRight = x;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // top and bottom\r\n        this._sliceTop = -1;\r\n        this._sliceBottom = -1;\r\n        for (let y = 0; y < height; y++) {\r\n            const alpha = imageData.data[y * width * 4 + 3];\r\n\r\n            if (alpha > 127 && this._sliceTop === -1) {\r\n                this._sliceTop = y;\r\n                continue;\r\n            }\r\n\r\n            if (alpha < 127 && this._sliceTop > -1) {\r\n                this._sliceBottom = y;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the internal DOM image used to render the control\r\n     */\r\n    public set domImage(value: IImage) {\r\n        this._domImage = value;\r\n        this._loaded = false;\r\n        this._imageDataCache.data = null;\r\n\r\n        if (this._domImage.width) {\r\n            this._onImageLoaded();\r\n        } else {\r\n            this._domImage.onload = () => {\r\n                this._onImageLoaded();\r\n            };\r\n        }\r\n    }\r\n\r\n    public get domImage(): IImage {\r\n        return this._domImage;\r\n    }\r\n\r\n    private _onImageLoaded(): void {\r\n        this._imageDataCache.data = null;\r\n        this._imageWidth = this._domImage.width;\r\n        this._imageHeight = this._domImage.height;\r\n        this._loaded = true;\r\n\r\n        if (this._populateNinePatchSlicesFromImage) {\r\n            this._extractNinePatchSliceDataFromImage();\r\n        }\r\n\r\n        if (this._autoScale) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n\r\n        this.onImageLoadedObservable.notifyObservers(this);\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets the image source url\r\n     */\r\n    @serialize()\r\n    public get source() {\r\n        return this._source;\r\n    }\r\n\r\n    /**\r\n     * Resets the internal Image Element cache. Can reduce memory usage.\r\n     */\r\n    public static ResetImageCache() {\r\n        Image.SourceImgCache.clear();\r\n    }\r\n\r\n    private _removeCacheUsage(source: Nullable<string>) {\r\n        const value = source && Image.SourceImgCache.get(source);\r\n        if (value) {\r\n            value.timesUsed -= 1;\r\n            // Since the image isn't being used anymore, we can clean it from the cache\r\n            if (value.timesUsed === 0) {\r\n                Image.SourceImgCache.delete(source);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets image source url\r\n     */\r\n    public set source(value: Nullable<string>) {\r\n        if (this._source === value) {\r\n            return;\r\n        }\r\n\r\n        this._removeCacheUsage(this._source);\r\n\r\n        this._loaded = false;\r\n        this._source = value;\r\n        this._imageDataCache.data = null;\r\n\r\n        if (value) {\r\n            value = this._svgCheck(value);\r\n        }\r\n\r\n        // Should abstract platform instead of using LastCreatedEngine\r\n        const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n        if (!engine) {\r\n            throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n        }\r\n        if (value && Image.SourceImgCache.has(value)) {\r\n            const cachedData = Image.SourceImgCache.get(value)!;\r\n            this._domImage = cachedData.img;\r\n            cachedData.timesUsed += 1;\r\n            if (cachedData.loaded) {\r\n                this._onImageLoaded();\r\n            } else {\r\n                cachedData.waitingForLoadCallback.push(this._onImageLoaded.bind(this));\r\n            }\r\n            return;\r\n        }\r\n        this._domImage = engine.createCanvasImage();\r\n        if (value) {\r\n            Image.SourceImgCache.set(value, { img: this._domImage, timesUsed: 1, loaded: false, waitingForLoadCallback: [this._onImageLoaded.bind(this)] });\r\n        }\r\n\r\n        this._domImage.onload = () => {\r\n            if (value) {\r\n                const cachedData = Image.SourceImgCache.get(value);\r\n                if (cachedData) {\r\n                    cachedData.loaded = true;\r\n                    for (const waitingCallback of cachedData.waitingForLoadCallback) {\r\n                        waitingCallback();\r\n                    }\r\n                    cachedData.waitingForLoadCallback.length = 0;\r\n                    return;\r\n                }\r\n            }\r\n            this._onImageLoaded();\r\n        };\r\n        if (value) {\r\n            Tools.SetCorsBehavior(value, this._domImage);\r\n            Tools.SetReferrerPolicyBehavior(this.referrerPolicy, this._domImage);\r\n            this._domImage.src = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks for svg document with icon id present\r\n     * @param value the source svg\r\n     * @returns the svg\r\n     */\r\n    private _svgCheck(value: string): string {\r\n        if (window.SVGSVGElement && value.search(/.svg#/gi) !== -1 && value.indexOf(\"#\") === value.lastIndexOf(\"#\")) {\r\n            this._isSVG = true;\r\n            const svgsrc = value.split(\"#\")[0];\r\n            const elemid = value.split(\"#\")[1];\r\n            // check if object alr exist in document\r\n            const svgExist = <HTMLObjectElement>document.body.querySelector('object[data=\"' + svgsrc + '\"]');\r\n            if (svgExist) {\r\n                const svgDoc = svgExist.contentDocument;\r\n                // get viewbox width and height, get svg document width and height in px\r\n                if (svgDoc && svgDoc.documentElement) {\r\n                    const vb = svgDoc.documentElement.getAttribute(\"viewBox\");\r\n                    const docwidth = Number(svgDoc.documentElement.getAttribute(\"width\"));\r\n                    const docheight = Number(svgDoc.documentElement.getAttribute(\"height\"));\r\n                    const elem = <SVGGraphicsElement>(<unknown>svgDoc.getElementById(elemid));\r\n                    if (elem && vb && docwidth && docheight) {\r\n                        this._getSVGAttribs(svgExist, elemid);\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                // wait for object to load\r\n                svgExist.addEventListener(\"load\", () => {\r\n                    this._getSVGAttribs(svgExist, elemid);\r\n                });\r\n            } else {\r\n                // create document object\r\n                const svgImage = document.createElement(\"object\");\r\n                svgImage.data = svgsrc;\r\n                svgImage.type = \"image/svg+xml\";\r\n                svgImage.width = \"0%\";\r\n                svgImage.height = \"0%\";\r\n                document.body.appendChild(svgImage);\r\n                // when the object has loaded, get the element attribs\r\n                svgImage.onload = () => {\r\n                    const svgobj = <HTMLObjectElement>document.body.querySelector('object[data=\"' + svgsrc + '\"]');\r\n                    if (svgobj) {\r\n                        this._getSVGAttribs(svgobj, elemid);\r\n                    }\r\n                };\r\n            }\r\n            return svgsrc;\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets sourceLeft, sourceTop, sourceWidth, sourceHeight automatically\r\n     * given external svg file and icon id\r\n     * @param svgsrc\r\n     * @param elemid\r\n     */\r\n    private _getSVGAttribs(svgsrc: HTMLObjectElement, elemid: string) {\r\n        const svgDoc = svgsrc.contentDocument;\r\n        // get viewbox width and height, get svg document width and height in px\r\n        if (svgDoc && svgDoc.documentElement) {\r\n            const vb = svgDoc.documentElement.getAttribute(\"viewBox\");\r\n            const docwidth = Number(svgDoc.documentElement.getAttribute(\"width\"));\r\n            const docheight = Number(svgDoc.documentElement.getAttribute(\"height\"));\r\n            // get element bbox and matrix transform\r\n            const elem = svgDoc.getElementById(elemid) as Nullable<SVGGraphicsElement>;\r\n            if (vb && docwidth && docheight && elem) {\r\n                const vb_width = Number(vb.split(\" \")[2]);\r\n                const vb_height = Number(vb.split(\" \")[3]);\r\n                const elem_bbox = elem.getBBox();\r\n                let elem_matrix_a = 1;\r\n                let elem_matrix_d = 1;\r\n                let elem_matrix_e = 0;\r\n                let elem_matrix_f = 0;\r\n                const mainMatrix = elem.transform.baseVal.consolidate()!.matrix;\r\n                if (elem.transform && elem.transform.baseVal.consolidate()) {\r\n                    elem_matrix_a = mainMatrix.a;\r\n                    elem_matrix_d = mainMatrix.d;\r\n                    elem_matrix_e = mainMatrix.e;\r\n                    elem_matrix_f = mainMatrix.f;\r\n                }\r\n\r\n                // compute source coordinates and dimensions\r\n                this.sourceLeft = ((elem_matrix_a * elem_bbox.x + elem_matrix_e) * docwidth) / vb_width;\r\n                this.sourceTop = ((elem_matrix_d * elem_bbox.y + elem_matrix_f) * docheight) / vb_height;\r\n                this.sourceWidth = elem_bbox.width * elem_matrix_a * (docwidth / vb_width);\r\n                this.sourceHeight = elem_bbox.height * elem_matrix_d * (docheight / vb_height);\r\n                this._svgAttributesComputationCompleted = true;\r\n                this.onSVGAttributesComputedObservable.notifyObservers(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell width to use when animation sheet is enabled\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n    set cellWidth(value: number) {\r\n        if (this._cellWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell height to use when animation sheet is enabled\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n    set cellHeight(value: number) {\r\n        if (this._cellHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell id to use (this will turn on the animation sheet mode)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    get cellId(): number {\r\n        return this._cellId;\r\n    }\r\n    set cellId(value: number) {\r\n        if (this._cellId === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellId = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Image\r\n     * @param name defines the control name\r\n     * @param url defines the image url\r\n     */\r\n    constructor(\r\n        public name?: string,\r\n        url: Nullable<string> = null\r\n    ) {\r\n        super(name);\r\n        this.source = url;\r\n    }\r\n\r\n    /**\r\n     * Tests if a given coordinates belong to the current control\r\n     * @param x defines x coordinate to test\r\n     * @param y defines y coordinate to test\r\n     * @returns true if the coordinates are inside the control\r\n     */\r\n    public contains(x: number, y: number): boolean {\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this._detectPointerOnOpaqueOnly || !this._workingCanvas) {\r\n            return true;\r\n        }\r\n\r\n        const width = this._currentMeasure.width | 0;\r\n        const height = this._currentMeasure.height | 0;\r\n        const key = width + \"_\" + height;\r\n\r\n        let imageData = this._imageDataCache.data;\r\n\r\n        if (!imageData || this._imageDataCache.key !== key) {\r\n            const canvas = this._workingCanvas;\r\n            const context = canvas.getContext(\"2d\")!;\r\n\r\n            this._imageDataCache.data = imageData = context.getImageData(0, 0, width, height).data;\r\n            this._imageDataCache.key = key;\r\n        }\r\n\r\n        x = (x - this._currentMeasure.left) | 0;\r\n        y = (y - this._currentMeasure.top) | 0;\r\n\r\n        const pickedPixel = imageData[(x + y * width) * 4 + 3];\r\n\r\n        return pickedPixel > 0;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Image\";\r\n    }\r\n\r\n    /** Force the control to synchronize with its content */\r\n    public synchronizeSizeWithContent() {\r\n        if (!this._loaded) {\r\n            return;\r\n        }\r\n\r\n        this.width = this._domImage.width + \"px\";\r\n        this.height = this._domImage.height + \"px\";\r\n    }\r\n\r\n    protected _processMeasures(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        if (this._loaded) {\r\n            switch (this._stretch) {\r\n                case Image.STRETCH_NONE:\r\n                    break;\r\n                case Image.STRETCH_FILL:\r\n                    break;\r\n                case Image.STRETCH_UNIFORM:\r\n                    break;\r\n                case Image.STRETCH_NINE_PATCH:\r\n                    break;\r\n                case Image.STRETCH_EXTEND:\r\n                    if (this._autoScale) {\r\n                        this.synchronizeSizeWithContent();\r\n                    }\r\n                    if (this.parent && this.parent.parent) {\r\n                        // Will update root size if root is not the top root\r\n                        this.parent.adaptWidthToChildren = true;\r\n                        this.parent.adaptHeightToChildren = true;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n\r\n        super._processMeasures(parentMeasure, context);\r\n    }\r\n\r\n    private _prepareWorkingCanvasForOpaqueDetection() {\r\n        if (!this._detectPointerOnOpaqueOnly) {\r\n            return;\r\n        }\r\n\r\n        const width = this._currentMeasure.width;\r\n        const height = this._currentMeasure.height;\r\n\r\n        if (!this._workingCanvas) {\r\n            const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n            if (!engine) {\r\n                throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n            }\r\n            this._workingCanvas = engine.createCanvas(width, height);\r\n        }\r\n        const canvas = this._workingCanvas;\r\n\r\n        const context = canvas.getContext(\"2d\")!;\r\n\r\n        context.clearRect(0, 0, width, height);\r\n    }\r\n\r\n    private _drawImage(context: ICanvasRenderingContext, sx: number, sy: number, sw: number, sh: number, tx: number, ty: number, tw: number, th: number) {\r\n        context.drawImage(this._domImage, sx, sy, sw, sh, tx, ty, tw, th);\r\n\r\n        if (!this._detectPointerOnOpaqueOnly) {\r\n            return;\r\n        }\r\n\r\n        const transform = context.getTransform();\r\n\r\n        const canvas = this._workingCanvas!;\r\n        const workingCanvasContext = canvas.getContext(\"2d\")!;\r\n        workingCanvasContext.save();\r\n        const ttx = tx - this._currentMeasure.left;\r\n        const tty = ty - this._currentMeasure.top;\r\n        workingCanvasContext.setTransform(transform.a, transform.b, transform.c, transform.d, (ttx + tw) / 2, (tty + th) / 2);\r\n        workingCanvasContext.translate(-(ttx + tw) / 2, -(tty + th) / 2);\r\n\r\n        workingCanvasContext.drawImage(this._domImage, sx, sy, sw, sh, ttx, tty, tw, th);\r\n        workingCanvasContext.restore();\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        let x, y, width, height;\r\n        if (this.cellId == -1) {\r\n            x = this._sourceLeft;\r\n            y = this._sourceTop;\r\n\r\n            width = this._sourceWidth ? this._sourceWidth : this._imageWidth;\r\n            height = this._sourceHeight ? this._sourceHeight : this._imageHeight;\r\n        } else {\r\n            const rowCount = this._domImage.naturalWidth / this.cellWidth;\r\n            const column = (this.cellId / rowCount) >> 0;\r\n            const row = this.cellId % rowCount;\r\n\r\n            x = this.cellWidth * row;\r\n            y = this.cellHeight * column;\r\n            width = this.cellWidth;\r\n            height = this.cellHeight;\r\n        }\r\n\r\n        this._prepareWorkingCanvasForOpaqueDetection();\r\n\r\n        this._applyStates(context);\r\n        if (this._loaded) {\r\n            switch (this._stretch) {\r\n                case Image.STRETCH_NONE:\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_FILL:\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_UNIFORM: {\r\n                    const hRatio = this._currentMeasure.width / width;\r\n                    const vRatio = this._currentMeasure.height / height;\r\n                    const ratio = Math.min(hRatio, vRatio);\r\n                    const centerX = (this._currentMeasure.width - width * ratio) / 2;\r\n                    const centerY = (this._currentMeasure.height - height * ratio) / 2;\r\n\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left + centerX, this._currentMeasure.top + centerY, width * ratio, height * ratio);\r\n                    break;\r\n                }\r\n                case Image.STRETCH_EXTEND:\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_NINE_PATCH:\r\n                    this._renderNinePatch(context, x, y, width, height);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _renderNinePatch(context: ICanvasRenderingContext, sx: number, sy: number, sw: number, sh: number): void {\r\n        const leftWidth = this._sliceLeft;\r\n        const topHeight = this._sliceTop;\r\n        const bottomHeight = sh - this._sliceBottom;\r\n        const rightWidth = sw - this._sliceRight;\r\n        const centerWidth = this._sliceRight - this._sliceLeft;\r\n        const centerHeight = this._sliceBottom - this._sliceTop;\r\n        const targetCenterWidth = this._currentMeasure.width - rightWidth - leftWidth + 2;\r\n        const targetCenterHeight = this._currentMeasure.height - bottomHeight - topHeight + 2;\r\n        const centerLeftOffset = this._currentMeasure.left + leftWidth - 1;\r\n        const centerTopOffset = this._currentMeasure.top + topHeight - 1;\r\n        const rightOffset = this._currentMeasure.left + this._currentMeasure.width - rightWidth;\r\n        const bottomOffset = this._currentMeasure.top + this._currentMeasure.height - bottomHeight;\r\n\r\n        //Top Left\r\n        this._drawImage(context, sx, sy, leftWidth, topHeight, this._currentMeasure.left, this._currentMeasure.top, leftWidth, topHeight);\r\n        //Top\r\n        this._drawImage(context, sx + this._sliceLeft, sy, centerWidth, topHeight, centerLeftOffset + 1, this._currentMeasure.top, targetCenterWidth - 2, topHeight);\r\n        //Top Right\r\n        this._drawImage(context, sx + this._sliceRight, sy, rightWidth, topHeight, rightOffset, this._currentMeasure.top, rightWidth, topHeight);\r\n        //Left\r\n        this._drawImage(context, sx, sy + this._sliceTop, leftWidth, centerHeight, this._currentMeasure.left, centerTopOffset + 1, leftWidth, targetCenterHeight - 2);\r\n        // Center\r\n        this._drawImage(context, sx + this._sliceLeft, sy + this._sliceTop, centerWidth, centerHeight, centerLeftOffset, centerTopOffset, targetCenterWidth, targetCenterHeight);\r\n        //Right\r\n        this._drawImage(context, sx + this._sliceRight, sy + this._sliceTop, rightWidth, centerHeight, rightOffset, centerTopOffset + 1, rightWidth, targetCenterHeight - 2);\r\n        //Bottom Left\r\n        this._drawImage(context, sx, sy + this._sliceBottom, leftWidth, bottomHeight, this._currentMeasure.left, bottomOffset, leftWidth, bottomHeight);\r\n        //Bottom\r\n        this._drawImage(context, sx + this.sliceLeft, sy + this._sliceBottom, centerWidth, bottomHeight, centerLeftOffset + 1, bottomOffset, targetCenterWidth - 2, bottomHeight);\r\n        //Bottom Right\r\n        this._drawImage(context, sx + this._sliceRight, sy + this._sliceBottom, rightWidth, bottomHeight, rightOffset, bottomOffset, rightWidth, bottomHeight);\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n        this.onImageLoadedObservable.clear();\r\n        this.onSVGAttributesComputedObservable.clear();\r\n        this._removeCacheUsage(this._source);\r\n    }\r\n\r\n    // Static\r\n    /** STRETCH_NONE */\r\n    public static readonly STRETCH_NONE = 0;\r\n    /** STRETCH_FILL */\r\n    public static readonly STRETCH_FILL = 1;\r\n    /** STRETCH_UNIFORM */\r\n    public static readonly STRETCH_UNIFORM = 2;\r\n    /** STRETCH_EXTEND */\r\n    public static readonly STRETCH_EXTEND = 3;\r\n    /** NINE_PATCH */\r\n    public static readonly STRETCH_NINE_PATCH = 4;\r\n}\r\nRegisterClass(\"BABYLON.GUI.Image\", Image);\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Rectangle } from \"./rectangle\";\r\nimport { Control } from \"./control\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { Image } from \"./image\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to create 2D buttons\r\n */\r\nexport class Button extends Rectangle {\r\n    /**\r\n     * Function called to generate a pointer enter animation\r\n     */\r\n    public pointerEnterAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer out animation\r\n     */\r\n    public pointerOutAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer down animation\r\n     */\r\n    public pointerDownAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer up animation\r\n     */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    private _image: Nullable<Image>;\r\n    /**\r\n     * Returns the image part of the button (if any)\r\n     */\r\n    public get image(): Nullable<Image> {\r\n        return this._image;\r\n    }\r\n\r\n    private _textBlock: Nullable<TextBlock>;\r\n    /**\r\n     * Returns the TextBlock part of the button (if any)\r\n     */\r\n    public get textBlock(): Nullable<TextBlock> {\r\n        return this._textBlock;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Button\r\n     * @param name defines the name of the button\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.thickness = 1;\r\n        this.isPointerBlocker = true;\r\n\r\n        let alphaStore: Nullable<number> = null;\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            alphaStore = this.alpha;\r\n            this.alpha -= 0.1;\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (alphaStore !== null) {\r\n                this.alpha = alphaStore;\r\n            }\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            this.scaleX -= 0.05;\r\n            this.scaleY -= 0.05;\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            this.scaleX += 0.05;\r\n            this.scaleY += 0.05;\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Button\";\r\n    }\r\n\r\n    // While being a container, the button behaves like a control.\r\n    /**\r\n     * @internal\r\n     */\r\n    public _processPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled || !this.isHitTestVisible || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.delegatePickingToChildren) {\r\n            let contains = false;\r\n            for (let index = this._children.length - 1; index >= 0; index--) {\r\n                const child = this._children[index];\r\n                if (child.isEnabled && child.isHitTestVisible && child.isVisible && !child.notRenderable && child.contains(x, y)) {\r\n                    contains = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!contains) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerEnter(target: Control, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerEnter(target, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isReadOnly && this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerOut(target: Control, pi: PointerInfoBase, force = false): void {\r\n        if (!this.isReadOnly && this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n\r\n        super._onPointerOut(target, pi, force);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isReadOnly && this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected _getRectangleFill(context: ICanvasRenderingContext) {\r\n        if (this.isEnabled) {\r\n            return this._getBackgroundColor(context);\r\n        } else {\r\n            return this._disabledColor;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi: PointerInfoBase): void {\r\n        if (!this.isReadOnly && this.pointerUpAnimation) {\r\n            this.pointerUpAnimation();\r\n        }\r\n\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick, pi);\r\n    }\r\n\r\n    /**\r\n     * Serializes the current button\r\n     * @param serializationObject defines the JSON serialized object\r\n     * @param force force serialization even if isSerializable === false\r\n     */\r\n    public serialize(serializationObject: any, force: boolean) {\r\n        super.serialize(serializationObject, force);\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n\r\n        if (this._textBlock) {\r\n            serializationObject.textBlockName = this._textBlock.name;\r\n        }\r\n        if (this._image) {\r\n            serializationObject.imageName = this._image.name;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n\r\n        if (serializedObject.textBlockName) {\r\n            this._textBlock = this.getChildByName(serializedObject.textBlockName) as Nullable<TextBlock>;\r\n        }\r\n\r\n        if (serializedObject.imageName) {\r\n            this._image = this.getChildByName(serializedObject.imageName) as Nullable<Image>;\r\n        }\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates a new button made with an image and a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageButton(name: string, text: string, imageUrl: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding text\r\n        const textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        textBlock.paddingLeft = \"20%\";\r\n        result.addControl(textBlock);\r\n\r\n        // Adding image\r\n        const iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.width = \"20%\";\r\n        iconImage.stretch = Image.STRETCH_UNIFORM;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image\r\n     * @param name defines the name of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageOnlyButton(name: string, imageUrl: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding image\r\n        const iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @returns a new Button\r\n     */\r\n    public static CreateSimpleButton(name: string, text: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding text\r\n        const textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        // Store\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image and a centered text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageWithCenterTextButton(name: string, text: string, imageUrl: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding image\r\n        const iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        result.addControl(iconImage);\r\n\r\n        // Adding text\r\n        const textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Button\", Button);\r\n", "import { Container } from \"./container\";\r\nimport type { Measure } from \"../measure\";\r\nimport { Control } from \"./control\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\n/**\r\n * Class used to create a 2D stack panel container\r\n */\r\nexport class StackPanel extends Container {\r\n    private _isVertical = true;\r\n    private _manualWidth = false;\r\n    private _manualHeight = false;\r\n    private _doNotTrackManualChanges = false;\r\n    private _spacing = 0;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that layout warnings should be ignored\r\n     */\r\n    @serialize()\r\n    public ignoreLayoutWarnings = false;\r\n\r\n    /** Gets or sets a boolean indicating if the stack panel is vertical or horizontal*/\r\n    @serialize()\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the spacing (in pixels) between each child.\r\n     */\r\n    @serialize()\r\n    public get spacing(): number {\r\n        return this._spacing;\r\n    }\r\n\r\n    public set spacing(value: number) {\r\n        if (this._spacing === value) {\r\n            return;\r\n        }\r\n\r\n        this._spacing = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets panel width.\r\n     * This value should not be set when in horizontal mode as it will be computed automatically\r\n     */\r\n    @serialize()\r\n    public set width(value: string | number) {\r\n        if (!this._doNotTrackManualChanges) {\r\n            this._manualWidth = true;\r\n        }\r\n\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets panel height.\r\n     * This value should not be set when in vertical mode as it will be computed automatically\r\n     */\r\n    @serialize()\r\n    public set height(value: string | number) {\r\n        if (!this._doNotTrackManualChanges) {\r\n            this._manualHeight = true;\r\n        }\r\n\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    public get height(): string | number {\r\n        return this._height.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Creates a new StackPanel\r\n     * @param name defines control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"StackPanel\";\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _preMeasure(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        for (const child of this._children) {\r\n            if (this._isVertical) {\r\n                child.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n            } else {\r\n                child.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            }\r\n        }\r\n\r\n        super._preMeasure(parentMeasure, context);\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.copyFrom(parentMeasure);\r\n\r\n        this._measureForChildren.left = this._currentMeasure.left;\r\n        this._measureForChildren.top = this._currentMeasure.top;\r\n\r\n        if (!this.isVertical || this._manualWidth) {\r\n            this._measureForChildren.width = this._currentMeasure.width;\r\n        }\r\n\r\n        if (this.isVertical || this._manualHeight) {\r\n            this._measureForChildren.height = this._currentMeasure.height;\r\n        }\r\n    }\r\n\r\n    protected _postMeasure(): void {\r\n        let stackWidth = 0;\r\n        let stackHeight = 0;\r\n        const childrenCount = this._children.length;\r\n        for (let index = 0; index < childrenCount; index++) {\r\n            const child = this._children[index];\r\n            if (!child.isVisible || child.notRenderable) {\r\n                continue;\r\n            }\r\n\r\n            if (this._isVertical) {\r\n                if (child.top !== stackHeight + \"px\") {\r\n                    child.top = stackHeight + \"px\";\r\n                    this._rebuildLayout = true;\r\n                    child._top.ignoreAdaptiveScaling = true;\r\n                }\r\n\r\n                if (!this.ignoreLayoutWarnings && !child.isDimensionFullyDefined(\"height\")) {\r\n                    Logger.Warn(`Control (Name:${child.name}, UniqueId:${child.uniqueId}) is using height in percentage mode inside a vertical StackPanel`, 1);\r\n                } else {\r\n                    stackHeight += child._currentMeasure.height + child._paddingTopInPixels + child._paddingBottomInPixels + (index < childrenCount - 1 ? this._spacing : 0);\r\n                }\r\n            } else {\r\n                if (child.left !== stackWidth + \"px\") {\r\n                    child.left = stackWidth + \"px\";\r\n                    this._rebuildLayout = true;\r\n                    child._left.ignoreAdaptiveScaling = true;\r\n                }\r\n\r\n                if (!this.ignoreLayoutWarnings && !child.isDimensionFullyDefined(\"width\")) {\r\n                    Logger.Warn(`Control (Name:${child.name}, UniqueId:${child.uniqueId}) is using width in percentage mode inside a horizontal StackPanel`, 1);\r\n                } else {\r\n                    stackWidth += child._currentMeasure.width + child._paddingLeftInPixels + child._paddingRightInPixels + (index < childrenCount - 1 ? this._spacing : 0);\r\n                }\r\n            }\r\n        }\r\n\r\n        stackWidth += this._paddingLeftInPixels + this._paddingRightInPixels;\r\n        stackHeight += this._paddingTopInPixels + this._paddingBottomInPixels;\r\n\r\n        this._doNotTrackManualChanges = true;\r\n\r\n        // Let stack panel width or height default to stackHeight and stackWidth if dimensions are not specified.\r\n        // User can now define their own height and width for stack panel.\r\n\r\n        let panelWidthChanged = false;\r\n        let panelHeightChanged = false;\r\n\r\n        if ((!this._manualHeight || this.adaptHeightToChildren) && this._isVertical) {\r\n            // do not specify height if strictly defined by user\r\n            const previousHeight = this.height;\r\n            this.height = stackHeight + \"px\";\r\n            panelHeightChanged = previousHeight !== this.height || !this._height.ignoreAdaptiveScaling;\r\n        }\r\n        if ((!this._manualWidth || this.adaptWidthToChildren) && !this._isVertical) {\r\n            // do not specify width if strictly defined by user\r\n            const previousWidth = this.width;\r\n            this.width = stackWidth + \"px\";\r\n            panelWidthChanged = previousWidth !== this.width || !this._width.ignoreAdaptiveScaling;\r\n        }\r\n\r\n        if (panelHeightChanged) {\r\n            this._height.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        if (panelWidthChanged) {\r\n            this._width.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        this._doNotTrackManualChanges = false;\r\n\r\n        if (panelWidthChanged || panelHeightChanged) {\r\n            this._rebuildLayout = true;\r\n        }\r\n\r\n        super._postMeasure();\r\n    }\r\n\r\n    private _getManualDim(dim: \"width\" | \"height\") {\r\n        if (dim === \"width\") {\r\n            return this._manualWidth;\r\n        } else {\r\n            return this._manualHeight;\r\n        }\r\n    }\r\n\r\n    public isDimensionFullyDefined(dim: \"width\" | \"height\"): boolean {\r\n        if (dim === \"height\" ? this.isVertical : !this.isVertical && !this._getManualDim(dim)) {\r\n            for (const child of this._children) {\r\n                if (!child.isDimensionFullyDefined(dim)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        return this.getDimension(dim).isPixel || this._getAdaptDimTo(dim);\r\n    }\r\n\r\n    /**\r\n     * Serializes the current control\r\n     * @param serializationObject defined the JSON serialized object\r\n     * @param force force serialization even if isSerializable === false\r\n     */\r\n    public serialize(serializationObject: any, force: boolean) {\r\n        super.serialize(serializationObject, force);\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n        serializationObject.manualWidth = this._manualWidth;\r\n        serializationObject.manualHeight = this._manualHeight;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        this._manualWidth = serializedObject.manualWidth;\r\n        this._manualHeight = serializedObject.manualHeight;\r\n\r\n        super._parseFromContent(serializedObject, host);\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.StackPanel\", StackPanel);\r\n", "import { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to represent a 2D checkbox\r\n */\r\nexport class Checkbox extends Control {\r\n    private _isChecked = false;\r\n    private _background = \"black\";\r\n    private _checkSizeRatio = 0.8;\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness  */\r\n    @serialize()\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Observable raised when isChecked property changes\r\n     */\r\n    public onIsCheckedChangedObservable = new Observable<boolean>();\r\n\r\n    /** Gets or sets a value indicating the ratio between overall size and check size */\r\n    @serialize()\r\n    public get checkSizeRatio(): number {\r\n        return this._checkSizeRatio;\r\n    }\r\n\r\n    public set checkSizeRatio(value: number) {\r\n        value = Math.max(Math.min(1, value), 0);\r\n\r\n        if (this._checkSizeRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._checkSizeRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the checkbox is checked or not */\r\n    @serialize()\r\n    public get isChecked(): boolean {\r\n        return this._isChecked;\r\n    }\r\n\r\n    public set isChecked(value: boolean) {\r\n        if (this._isChecked === value) {\r\n            return;\r\n        }\r\n\r\n        this._isChecked = value;\r\n        this._markAsDirty();\r\n\r\n        this.onIsCheckedChangedObservable.notifyObservers(value);\r\n    }\r\n\r\n    /**\r\n     * Creates a new CheckBox\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Checkbox\";\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        const actualWidth = this._currentMeasure.width - this._thickness;\r\n        const actualHeight = this._currentMeasure.height - this._thickness;\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\r\n        context.fillRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, actualWidth, actualHeight);\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        if (this._isChecked) {\r\n            // Color is white if not set\r\n            context.fillStyle = this._isEnabled ? (this.color ? this.color : \"#ffffff\") : this._disabledColorItem;\r\n            const offsetWidth = actualWidth * this._checkSizeRatio;\r\n            const offsetHeight = actualHeight * this._checkSizeRatio;\r\n\r\n            context.fillRect(\r\n                this._currentMeasure.left + this._thickness / 2 + (actualWidth - offsetWidth) / 2,\r\n                this._currentMeasure.top + this._thickness / 2 + (actualHeight - offsetHeight) / 2,\r\n                offsetWidth,\r\n                offsetHeight\r\n            );\r\n        }\r\n\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._thickness;\r\n\r\n        context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, actualWidth, actualHeight);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isReadOnly) {\r\n            this.isChecked = !this.isChecked;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Utility function to easily create a checkbox with a header\r\n     * @param title defines the label to use for the header\r\n     * @param onValueChanged defines the callback to call when value changes\r\n     * @returns a StackPanel containing the checkbox and a textBlock\r\n     */\r\n    public static AddCheckBoxWithHeader(title: string, onValueChanged: (value: boolean) => void): StackPanel {\r\n        const panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.height = \"30px\";\r\n\r\n        const checkbox = new Checkbox();\r\n        checkbox.width = \"20px\";\r\n        checkbox.height = \"20px\";\r\n        checkbox.isChecked = true;\r\n        checkbox.color = \"green\";\r\n        checkbox.onIsCheckedChangedObservable.add(onValueChanged);\r\n        panel.addControl(checkbox);\r\n\r\n        const header = new TextBlock();\r\n        header.text = title;\r\n        header.width = \"180px\";\r\n        header.paddingLeft = \"5px\";\r\n        header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        header.color = \"white\";\r\n        panel.addControl(header);\r\n\r\n        return panel;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Checkbox\", Checkbox);\r\n", "/** @internal */\r\nexport class TextWrapper {\r\n    private _text: string;\r\n    private _characters: string[] | undefined;\r\n\r\n    public get text(): string {\r\n        return this._characters ? this._characters.join(\"\") : this._text;\r\n    }\r\n\r\n    public set text(txt: string) {\r\n        this._text = txt;\r\n        this._characters = Array.from && Array.from(txt);\r\n    }\r\n\r\n    public get length(): number {\r\n        return this._characters ? this._characters.length : this._text.length;\r\n    }\r\n\r\n    public removePart(idxStart: number, idxEnd: number, insertTxt?: string): void {\r\n        this._text = this._text.slice(0, idxStart) + (insertTxt ? insertTxt : \"\") + this._text.slice(idxEnd);\r\n        if (this._characters) {\r\n            const newCharacters = insertTxt ? Array.from(insertTxt) : [];\r\n            this._characters.splice(idxStart, idxEnd - idxStart, ...newCharacters);\r\n        }\r\n    }\r\n\r\n    public charAt(idx: number): string {\r\n        return this._characters ? this._characters[idx] : this._text.charAt(idx);\r\n    }\r\n\r\n    public substr(from: number, length?: number): string {\r\n        if (this._characters) {\r\n            if (isNaN(from)) {\r\n                from = 0;\r\n            } else if (from >= 0) {\r\n                from = Math.min(from, this._characters.length);\r\n            } else {\r\n                from = this._characters.length + Math.max(from, -this._characters.length);\r\n            }\r\n            if (length === undefined) {\r\n                length = this._characters.length - from;\r\n            } else if (isNaN(length)) {\r\n                length = 0;\r\n            } else if (length < 0) {\r\n                length = 0;\r\n            }\r\n            const temp = [];\r\n            while (--length >= 0) {\r\n                temp[length] = this._characters[from + length];\r\n            }\r\n            return temp.join(\"\");\r\n        }\r\n\r\n        return this._text.substr(from, length);\r\n    }\r\n\r\n    public substring(from: number, to?: number): string {\r\n        if (this._characters) {\r\n            if (isNaN(from)) {\r\n                from = 0;\r\n            } else if (from > this._characters.length) {\r\n                from = this._characters.length;\r\n            } else if (from < 0) {\r\n                from = 0;\r\n            }\r\n            if (to === undefined) {\r\n                to = this._characters.length;\r\n            } else if (isNaN(to)) {\r\n                to = 0;\r\n            } else if (to > this._characters.length) {\r\n                to = this._characters.length;\r\n            } else if (to < 0) {\r\n                to = 0;\r\n            }\r\n            const temp = [];\r\n            let idx = 0;\r\n            while (from < to) {\r\n                temp[idx++] = this._characters[from++];\r\n            }\r\n            return temp.join(\"\");\r\n        }\r\n\r\n        return this._text.substring(from, to);\r\n    }\r\n\r\n    public isWord(index: number): boolean {\r\n        const rWord = /\\w/g;\r\n        return this._characters ? this._characters[index].search(rWord) !== -1 : this._text.search(rWord) !== -1;\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\nimport type { ClipboardInfo } from \"core/Events/clipboardEvents\";\r\nimport { ClipboardEventTypes } from \"core/Events/clipboardEvents\";\r\nimport type { PointerInfo, PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\n\r\nimport { Control } from \"./control\";\r\nimport type { IFocusableControl } from \"./focusableControl\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport type { VirtualKeyboard } from \"./virtualKeyboard\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { TextWrapper } from \"./textWrapper\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { IKeyboardEvent, IPointerEvent } from \"core/Events/deviceInputEvents\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to create input text control\r\n */\r\nexport class InputText extends Control implements IFocusableControl {\r\n    protected _textWrapper: TextWrapper;\r\n    protected _placeholderText = \"\";\r\n    protected _background = \"#222222\";\r\n    protected _focusedBackground = \"#000000\";\r\n    protected _focusedColor = \"white\";\r\n    protected _placeholderColor = \"gray\";\r\n    protected _thickness = 1;\r\n    protected _margin = new ValueAndUnit(10, ValueAndUnit.UNITMODE_PIXEL);\r\n    protected _autoStretchWidth = true;\r\n    protected _maxWidth = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n    protected _isFocused = false;\r\n    /** the type of device that most recently focused the input: \"mouse\", \"touch\" or \"pen\" */\r\n    protected _focusedBy: string;\r\n    protected _blinkTimeout: number;\r\n    protected _blinkIsEven = false;\r\n    private _cursorOffset = 0;\r\n    protected _scrollLeft: Nullable<number>;\r\n    protected _textWidth: number;\r\n    protected _clickedCoordinate: Nullable<number>;\r\n    protected _deadKey = false;\r\n    protected _addKey = true;\r\n    protected _currentKey = \"\";\r\n    protected _isTextHighlightOn = false;\r\n    protected _textHighlightColor = \"#d5e0ff\";\r\n    protected _highligherOpacity = 0.4;\r\n    protected _highlightedText = \"\";\r\n    private _startHighlightIndex = 0;\r\n    private _endHighlightIndex = 0;\r\n    private _cursorIndex = -1;\r\n    private _outlineWidth: number = 0;\r\n    private _outlineColor: string = \"white\";\r\n    protected _onFocusSelectAll = false;\r\n    protected _isPointerDown = false;\r\n    protected _onClipboardObserver: Nullable<Observer<ClipboardInfo>>;\r\n    protected _onPointerDblTapObserver: Nullable<Observer<PointerInfo>>;\r\n\r\n    /** @internal */\r\n    public _connectedVirtualKeyboard: Nullable<VirtualKeyboard>;\r\n\r\n    /** Gets or sets a string representing the message displayed on mobile when the control gets the focus */\r\n    @serialize()\r\n    public promptMessage = \"Please enter text:\";\r\n    /** Force disable prompt on mobile device */\r\n    @serialize()\r\n    public disableMobilePrompt = false;\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    public get outlineWidth(): number {\r\n        return this._outlineWidth;\r\n    }\r\n\r\n    public set outlineWidth(value: number) {\r\n        if (this._outlineWidth === value) {\r\n            return;\r\n        }\r\n        this._outlineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    public get outlineColor(): string {\r\n        return this._outlineColor;\r\n    }\r\n\r\n    public set outlineColor(value: string) {\r\n        if (this._outlineColor === value) {\r\n            return;\r\n        }\r\n        this._outlineColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Observable raised when the text changes */\r\n    public onTextChangedObservable = new Observable<InputText>();\r\n    /** Observable raised just before an entered character is to be added */\r\n    public onBeforeKeyAddObservable = new Observable<InputText>();\r\n    /** Observable raised when the control gets the focus */\r\n    public onFocusObservable = new Observable<InputText>();\r\n    /** Observable raised when the control loses the focus */\r\n    public onBlurObservable = new Observable<InputText>();\r\n    /** Observable raised when the text is highlighted */\r\n    public onTextHighlightObservable = new Observable<InputText>();\r\n    /** Observable raised when copy event is triggered */\r\n    public onTextCopyObservable = new Observable<InputText>();\r\n    /** Observable raised when cut event is triggered */\r\n    public onTextCutObservable = new Observable<InputText>();\r\n    /** Observable raised when paste event is triggered */\r\n    public onTextPasteObservable = new Observable<InputText>();\r\n    /** Observable raised when a key event was processed */\r\n    public onKeyboardEventProcessedObservable = new Observable<IKeyboardEvent>();\r\n\r\n    /** Gets or sets the maximum width allowed by the control */\r\n    @serialize()\r\n    public get maxWidth(): string | number {\r\n        return this._maxWidth.toString(this._host);\r\n    }\r\n\r\n    /** Gets the maximum width allowed by the control in pixels */\r\n    public get maxWidthInPixels(): number {\r\n        return this._maxWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set maxWidth(value: string | number) {\r\n        if (this._maxWidth.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._maxWidth.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the text highlighter transparency; default: 0.4 */\r\n    @serialize()\r\n    public get highligherOpacity(): number {\r\n        return this._highligherOpacity;\r\n    }\r\n\r\n    public set highligherOpacity(value: number) {\r\n        if (this._highligherOpacity === value) {\r\n            return;\r\n        }\r\n        this._highligherOpacity = value;\r\n        this._markAsDirty();\r\n    }\r\n    /** Gets or sets a boolean indicating whether to select complete text by default on input focus */\r\n    @serialize()\r\n    public get onFocusSelectAll(): boolean {\r\n        return this._onFocusSelectAll;\r\n    }\r\n\r\n    public set onFocusSelectAll(value: boolean) {\r\n        if (this._onFocusSelectAll === value) {\r\n            return;\r\n        }\r\n\r\n        this._onFocusSelectAll = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the text hightlight color */\r\n    @serialize()\r\n    public get textHighlightColor(): string {\r\n        return this._textHighlightColor;\r\n    }\r\n\r\n    public set textHighlightColor(value: string) {\r\n        if (this._textHighlightColor === value) {\r\n            return;\r\n        }\r\n        this._textHighlightColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets control margin */\r\n    @serialize()\r\n    public get margin(): string {\r\n        return this._margin.toString(this._host);\r\n    }\r\n\r\n    /** Gets control margin in pixels */\r\n    public get marginInPixels(): number {\r\n        return this._margin.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set margin(value: string) {\r\n        if (this._margin.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._margin.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control can auto stretch its width to adapt to the text */\r\n    @serialize()\r\n    public get autoStretchWidth(): boolean {\r\n        return this._autoStretchWidth;\r\n    }\r\n\r\n    public set autoStretchWidth(value: boolean) {\r\n        if (this._autoStretchWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoStretchWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets border thickness */\r\n    @serialize()\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the background color when focused */\r\n    @serialize()\r\n    public get focusedBackground(): string {\r\n        return this._focusedBackground;\r\n    }\r\n\r\n    public set focusedBackground(value: string) {\r\n        if (this._focusedBackground === value) {\r\n            return;\r\n        }\r\n\r\n        this._focusedBackground = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the background color when focused */\r\n    @serialize()\r\n    public get focusedColor(): string {\r\n        return this._focusedColor;\r\n    }\r\n\r\n    public set focusedColor(value: string) {\r\n        if (this._focusedColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._focusedColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the placeholder color */\r\n    @serialize()\r\n    public get placeholderColor(): string {\r\n        return this._placeholderColor;\r\n    }\r\n\r\n    public set placeholderColor(value: string) {\r\n        if (this._placeholderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._placeholderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the text displayed when the control is empty */\r\n    @serialize()\r\n    public get placeholderText(): string {\r\n        return this._placeholderText;\r\n    }\r\n\r\n    public set placeholderText(value: string) {\r\n        if (this._placeholderText === value) {\r\n            return;\r\n        }\r\n        this._placeholderText = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the dead key. 0 to disable. */\r\n    @serialize()\r\n    public get deadKey(): boolean {\r\n        return this._deadKey;\r\n    }\r\n\r\n    public set deadKey(flag: boolean) {\r\n        this._deadKey = flag;\r\n    }\r\n\r\n    /** Gets or sets the highlight text */\r\n    public get highlightedText(): string {\r\n        return this._highlightedText;\r\n    }\r\n    public set highlightedText(text: string) {\r\n        if (this._highlightedText === text) {\r\n            return;\r\n        }\r\n        this._highlightedText = text;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets if the current key should be added */\r\n    public get addKey(): boolean {\r\n        return this._addKey;\r\n    }\r\n\r\n    public set addKey(flag: boolean) {\r\n        this._addKey = flag;\r\n    }\r\n\r\n    /** Gets or sets the value of the current key being entered */\r\n    public get currentKey(): string {\r\n        return this._currentKey;\r\n    }\r\n\r\n    public set currentKey(key: string) {\r\n        this._currentKey = key;\r\n    }\r\n\r\n    /** Gets or sets the text displayed in the control */\r\n    @serialize()\r\n    public get text(): string {\r\n        return this._textWrapper.text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        const valueAsString = value.toString(); // Forcing convertion\r\n\r\n        if (!this._textWrapper) {\r\n            this._textWrapper = new TextWrapper();\r\n        }\r\n\r\n        if (this._textWrapper.text === valueAsString) {\r\n            return;\r\n        }\r\n        this._textWrapper.text = valueAsString;\r\n        this._textHasChanged();\r\n    }\r\n\r\n    protected _textHasChanged(): void {\r\n        this._markAsDirty();\r\n        this.onTextChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    protected _applyStates(context: ICanvasRenderingContext): void {\r\n        super._applyStates(context);\r\n        if (this.outlineWidth) {\r\n            context.lineWidth = this.outlineWidth;\r\n            context.strokeStyle = this.outlineColor;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets control width */\r\n    @serialize()\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    public set width(value: string | number) {\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n\r\n        this.autoStretchWidth = false;\r\n    }\r\n\r\n    /**\r\n     * Creates a new InputText\r\n     * @param name defines the control name\r\n     * @param text defines the text of the control\r\n     */\r\n    constructor(\r\n        public name?: string,\r\n        text: string = \"\"\r\n    ) {\r\n        super(name);\r\n\r\n        this.text = text;\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    /** @internal */\r\n    public onBlur(): void {\r\n        this._isFocused = false;\r\n        this._scrollLeft = null;\r\n        this._cursorOffset = 0;\r\n        clearTimeout(this._blinkTimeout);\r\n        this._markAsDirty();\r\n\r\n        this.onBlurObservable.notifyObservers(this);\r\n\r\n        this._host.unRegisterClipboardEvents();\r\n        if (this._onClipboardObserver) {\r\n            this._host.onClipboardObservable.remove(this._onClipboardObserver);\r\n        }\r\n        const scene = this._host.getScene();\r\n        if (this._onPointerDblTapObserver && scene) {\r\n            scene.onPointerObservable.remove(this._onPointerDblTapObserver);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public onFocus(): void {\r\n        if (!this._isEnabled) {\r\n            return;\r\n        }\r\n        this._scrollLeft = null;\r\n        this._isFocused = true;\r\n        this._blinkIsEven = false;\r\n        this._cursorOffset = 0;\r\n        this._markAsDirty();\r\n\r\n        this.onFocusObservable.notifyObservers(this);\r\n\r\n        if (this._focusedBy === \"touch\" && !this.disableMobilePrompt) {\r\n            const value = prompt(this.promptMessage);\r\n\r\n            if (value !== null) {\r\n                this.text = value;\r\n            }\r\n            this._host.focusedControl = null;\r\n            return;\r\n        }\r\n\r\n        this._host.registerClipboardEvents();\r\n\r\n        this._onClipboardObserver = this._host.onClipboardObservable.add((clipboardInfo) => {\r\n            // process clipboard event, can be configured.\r\n            switch (clipboardInfo.type) {\r\n                case ClipboardEventTypes.COPY:\r\n                    this._onCopyText(clipboardInfo.event);\r\n                    this.onTextCopyObservable.notifyObservers(this);\r\n                    break;\r\n                case ClipboardEventTypes.CUT:\r\n                    this._onCutText(clipboardInfo.event);\r\n                    this.onTextCutObservable.notifyObservers(this);\r\n                    break;\r\n                case ClipboardEventTypes.PASTE:\r\n                    this._onPasteText(clipboardInfo.event);\r\n                    this.onTextPasteObservable.notifyObservers(this);\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        });\r\n\r\n        const scene = this._host.getScene();\r\n        if (scene) {\r\n            //register the pointer double tap event\r\n            this._onPointerDblTapObserver = scene.onPointerObservable.add((pointerInfo) => {\r\n                if (!this._isFocused) {\r\n                    return;\r\n                }\r\n                if (pointerInfo.type === PointerEventTypes.POINTERDOUBLETAP) {\r\n                    this._processDblClick(pointerInfo);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this._onFocusSelectAll) {\r\n            this._selectAllText();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Function to focus an inputText programmatically\r\n     */\r\n    public focus() {\r\n        this._host.moveFocusToControl(this);\r\n    }\r\n\r\n    /**\r\n     * Function to unfocus an inputText programmatically\r\n     */\r\n    public blur() {\r\n        this._host.focusedControl = null;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"InputText\";\r\n    }\r\n\r\n    /**\r\n     * Function called to get the list of controls that should not steal the focus from this control\r\n     * @returns an array of controls\r\n     */\r\n    public keepsFocusWith(): Nullable<Control[]> {\r\n        if (!this._connectedVirtualKeyboard) {\r\n            return null;\r\n        }\r\n        return [this._connectedVirtualKeyboard];\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public processKey(keyCode: number, key?: string, evt?: IKeyboardEvent) {\r\n        if (this.isReadOnly) {\r\n            return;\r\n        }\r\n\r\n        //return if clipboard event keys (i.e -ctr/cmd + c,v,x)\r\n        if (evt && (evt.ctrlKey || evt.metaKey) && (keyCode === 67 || keyCode === 86 || keyCode === 88)) {\r\n            return;\r\n        }\r\n\r\n        //select all\r\n        if (evt && (evt.ctrlKey || evt.metaKey) && keyCode === 65) {\r\n            this._selectAllText();\r\n            evt.preventDefault();\r\n            return;\r\n        }\r\n        // Specific cases\r\n        switch (keyCode) {\r\n            case 32: //SPACE\r\n                key = \" \"; //ie11 key for space is \"Spacebar\"\r\n                break;\r\n            case 191: //SLASH\r\n                if (evt) {\r\n                    evt.preventDefault();\r\n                }\r\n                break;\r\n            case 8: // BACKSPACE\r\n                if (this._textWrapper.text && this._textWrapper.length > 0) {\r\n                    //delete the highlighted text\r\n                    if (this.isTextHighlightOn) {\r\n                        this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex);\r\n                        this._textHasChanged();\r\n                        this.isTextHighlightOn = false;\r\n                        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\r\n                        this._blinkIsEven = false;\r\n                        if (evt) {\r\n                            evt.preventDefault();\r\n                        }\r\n                        return;\r\n                    }\r\n                    //delete single character\r\n                    if (this._cursorOffset === 0) {\r\n                        this.text = this._textWrapper.substr(0, this._textWrapper.length - 1);\r\n                    } else {\r\n                        const deletePosition = this._textWrapper.length - this._cursorOffset;\r\n                        if (deletePosition > 0) {\r\n                            this._textWrapper.removePart(deletePosition - 1, deletePosition);\r\n                            this._textHasChanged();\r\n                        }\r\n                    }\r\n                }\r\n                if (evt) {\r\n                    evt.preventDefault();\r\n                }\r\n                return;\r\n            case 46: // DELETE\r\n                if (this.isTextHighlightOn) {\r\n                    this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex);\r\n                    this._textHasChanged();\r\n                    this.isTextHighlightOn = false;\r\n                    this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\r\n                    if (evt) {\r\n                        evt.preventDefault();\r\n                    }\r\n                    return;\r\n                }\r\n                if (this._textWrapper.text && this._textWrapper.length > 0 && this._cursorOffset > 0) {\r\n                    const deletePosition = this._textWrapper.length - this._cursorOffset;\r\n                    this._textWrapper.removePart(deletePosition, deletePosition + 1);\r\n                    this._textHasChanged();\r\n                    this._cursorOffset--;\r\n                }\r\n                if (evt) {\r\n                    evt.preventDefault();\r\n                }\r\n                return;\r\n            case 13: // RETURN\r\n                this._host.focusedControl = null;\r\n                this.isTextHighlightOn = false;\r\n                return;\r\n            case 35: // END\r\n                this._cursorOffset = 0;\r\n                this._blinkIsEven = false;\r\n                this.isTextHighlightOn = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case 36: // HOME\r\n                this._cursorOffset = this._textWrapper.length;\r\n                this._blinkIsEven = false;\r\n                this.isTextHighlightOn = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case 37: // LEFT\r\n                this._cursorOffset++;\r\n                if (this._cursorOffset > this._textWrapper.length) {\r\n                    this._cursorOffset = this._textWrapper.length;\r\n                }\r\n\r\n                if (evt && evt.shiftKey) {\r\n                    // update the cursor\r\n                    this._blinkIsEven = false;\r\n                    // shift + ctrl/cmd + <-\r\n                    if (evt.ctrlKey || evt.metaKey) {\r\n                        if (!this.isTextHighlightOn) {\r\n                            if (this._textWrapper.length === this._cursorOffset) {\r\n                                return;\r\n                            } else {\r\n                                this._endHighlightIndex = this._textWrapper.length - this._cursorOffset + 1;\r\n                            }\r\n                        }\r\n                        this._startHighlightIndex = 0;\r\n                        this._cursorIndex = this._textWrapper.length - this._endHighlightIndex;\r\n                        this._cursorOffset = this._textWrapper.length;\r\n                        this.isTextHighlightOn = true;\r\n                        this._markAsDirty();\r\n                        return;\r\n                    }\r\n                    //store the starting point\r\n                    if (!this.isTextHighlightOn) {\r\n                        this.isTextHighlightOn = true;\r\n                        this._cursorIndex = this._cursorOffset >= this._textWrapper.length ? this._textWrapper.length : this._cursorOffset - 1;\r\n                    }\r\n                    //if text is already highlighted\r\n                    else if (this._cursorIndex === -1) {\r\n                        this._cursorIndex = this._textWrapper.length - this._endHighlightIndex;\r\n                        this._cursorOffset = this._startHighlightIndex === 0 ? this._textWrapper.length : this._textWrapper.length - this._startHighlightIndex + 1;\r\n                    }\r\n                    //set the highlight indexes\r\n                    if (this._cursorIndex < this._cursorOffset) {\r\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorIndex;\r\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n                    } else if (this._cursorIndex > this._cursorOffset) {\r\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\r\n                    } else {\r\n                        this.isTextHighlightOn = false;\r\n                    }\r\n                    this._markAsDirty();\r\n                    return;\r\n                }\r\n                if (this.isTextHighlightOn) {\r\n                    this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\r\n                    this.isTextHighlightOn = false;\r\n                }\r\n                if (evt && (evt.ctrlKey || evt.metaKey)) {\r\n                    this._cursorOffset = this._textWrapper.length;\r\n                    evt.preventDefault();\r\n                }\r\n                this._blinkIsEven = false;\r\n                this.isTextHighlightOn = false;\r\n                this._cursorIndex = -1;\r\n                this._markAsDirty();\r\n                return;\r\n            case 39: // RIGHT\r\n                this._cursorOffset--;\r\n                if (this._cursorOffset < 0) {\r\n                    this._cursorOffset = 0;\r\n                }\r\n                if (evt && evt.shiftKey) {\r\n                    //update the cursor\r\n                    this._blinkIsEven = false;\r\n                    //shift + ctrl/cmd + ->\r\n                    if (evt.ctrlKey || evt.metaKey) {\r\n                        if (!this.isTextHighlightOn) {\r\n                            if (this._cursorOffset === 0) {\r\n                                return;\r\n                            } else {\r\n                                this._startHighlightIndex = this._textWrapper.length - this._cursorOffset - 1;\r\n                            }\r\n                        }\r\n                        this._endHighlightIndex = this._textWrapper.length;\r\n                        this.isTextHighlightOn = true;\r\n                        this._cursorIndex = this._textWrapper.length - this._startHighlightIndex;\r\n                        this._cursorOffset = 0;\r\n                        this._markAsDirty();\r\n                        return;\r\n                    }\r\n\r\n                    if (!this.isTextHighlightOn) {\r\n                        this.isTextHighlightOn = true;\r\n                        this._cursorIndex = this._cursorOffset <= 0 ? 0 : this._cursorOffset + 1;\r\n                    }\r\n                    //if text is already highlighted\r\n                    else if (this._cursorIndex === -1) {\r\n                        this._cursorIndex = this._textWrapper.length - this._startHighlightIndex;\r\n                        this._cursorOffset = this._textWrapper.length === this._endHighlightIndex ? 0 : this._textWrapper.length - this._endHighlightIndex - 1;\r\n                    }\r\n                    //set the highlight indexes\r\n                    if (this._cursorIndex < this._cursorOffset) {\r\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorIndex;\r\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n                    } else if (this._cursorIndex > this._cursorOffset) {\r\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\r\n                    } else {\r\n                        this.isTextHighlightOn = false;\r\n                    }\r\n                    this._markAsDirty();\r\n                    return;\r\n                }\r\n                if (this.isTextHighlightOn) {\r\n                    this._cursorOffset = this._textWrapper.length - this._endHighlightIndex;\r\n                    this.isTextHighlightOn = false;\r\n                }\r\n                //ctr + ->\r\n                if (evt && (evt.ctrlKey || evt.metaKey)) {\r\n                    this._cursorOffset = 0;\r\n                    evt.preventDefault();\r\n                }\r\n                this._blinkIsEven = false;\r\n                this.isTextHighlightOn = false;\r\n                this._cursorIndex = -1;\r\n                this._markAsDirty();\r\n                return;\r\n        }\r\n        if (keyCode === 32) {\r\n            key = evt?.key ?? \" \";\r\n        }\r\n        this._deadKey = key === \"Dead\";\r\n        // Printable characters\r\n        if (\r\n            key &&\r\n            (keyCode === -1 || // Direct access\r\n                keyCode === 32 || // Space\r\n                keyCode === 34 || // \"    add support for single and double quotes\r\n                keyCode === 39 || // '\r\n                (keyCode > 47 && keyCode < 64) || // Numbers\r\n                (keyCode > 64 && keyCode < 91) || // Letters\r\n                (keyCode > 159 && keyCode < 193) || // Special characters\r\n                (keyCode > 218 && keyCode < 223) || // Special characters\r\n                (keyCode > 95 && keyCode < 112))\r\n        ) {\r\n            // Numpad\r\n            this._currentKey = key;\r\n            this.onBeforeKeyAddObservable.notifyObservers(this);\r\n            key = this._currentKey;\r\n            if (this._addKey && !this._deadKey) {\r\n                if (this.isTextHighlightOn) {\r\n                    this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex, key);\r\n                    this._textHasChanged();\r\n                    this._cursorOffset = this._textWrapper.length - (this._startHighlightIndex + 1);\r\n                    this.isTextHighlightOn = false;\r\n                    this._blinkIsEven = false;\r\n                    this._markAsDirty();\r\n                } else if (this._cursorOffset === 0) {\r\n                    this.text += this._deadKey && evt?.key ? evt.key : key;\r\n                } else {\r\n                    const insertPosition = this._textWrapper.length - this._cursorOffset;\r\n                    this._textWrapper.removePart(insertPosition, insertPosition, key);\r\n                    this._textHasChanged();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _updateValueFromCursorIndex(offset: number) {\r\n        //update the cursor\r\n        this._blinkIsEven = false;\r\n\r\n        if (this._cursorIndex === -1) {\r\n            this._cursorIndex = offset;\r\n        } else {\r\n            if (this._cursorIndex < this._cursorOffset) {\r\n                this._endHighlightIndex = this._textWrapper.length - this._cursorIndex;\r\n                this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n            } else if (this._cursorIndex > this._cursorOffset) {\r\n                this._endHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n                this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\r\n            } else {\r\n                this.isTextHighlightOn = false;\r\n                this._markAsDirty();\r\n                return;\r\n            }\r\n        }\r\n        this.isTextHighlightOn = true;\r\n        this._markAsDirty();\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _processDblClick(evt: PointerInfo) {\r\n        //pre-find the start and end index of the word under cursor, speeds up the rendering\r\n        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\r\n        this._endHighlightIndex = this._startHighlightIndex;\r\n        let moveLeft, moveRight;\r\n        do {\r\n            moveRight = this._endHighlightIndex < this._textWrapper.length && this._textWrapper.isWord(this._endHighlightIndex) ? ++this._endHighlightIndex : 0;\r\n            moveLeft = this._startHighlightIndex > 0 && this._textWrapper.isWord(this._startHighlightIndex - 1) ? --this._startHighlightIndex : 0;\r\n        } while (moveLeft || moveRight);\r\n\r\n        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\r\n\r\n        this.isTextHighlightOn = true;\r\n        this._clickedCoordinate = null;\r\n        this._blinkIsEven = true;\r\n        this._cursorIndex = -1;\r\n        this._markAsDirty();\r\n    }\r\n    /** @internal */\r\n    protected _selectAllText() {\r\n        this._blinkIsEven = true;\r\n        this.isTextHighlightOn = true;\r\n\r\n        this._startHighlightIndex = 0;\r\n        this._endHighlightIndex = this._textWrapper.length;\r\n        this._cursorOffset = this._textWrapper.length;\r\n        this._cursorIndex = -1;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Handles the keyboard event\r\n     * @param evt Defines the KeyboardEvent\r\n     */\r\n    public processKeyboard(evt: IKeyboardEvent): void {\r\n        // process pressed key\r\n        this.processKey(evt.keyCode, evt.key, evt);\r\n\r\n        this.onKeyboardEventProcessedObservable.notifyObservers(evt);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _onCopyText(ev: ClipboardEvent): void {\r\n        this.isTextHighlightOn = false;\r\n        //when write permission to clipbaord data is denied\r\n        try {\r\n            ev.clipboardData && ev.clipboardData.setData(\"text/plain\", this._highlightedText);\r\n        } catch {} //pass\r\n        this._host.clipboardData = this._highlightedText;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _onCutText(ev: ClipboardEvent): void {\r\n        if (!this._highlightedText) {\r\n            return;\r\n        }\r\n        this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex);\r\n        this._textHasChanged();\r\n        this.isTextHighlightOn = false;\r\n        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\r\n        //when write permission to clipbaord data is denied\r\n        try {\r\n            ev.clipboardData && ev.clipboardData.setData(\"text/plain\", this._highlightedText);\r\n        } catch {} //pass\r\n\r\n        this._host.clipboardData = this._highlightedText;\r\n        this._highlightedText = \"\";\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _onPasteText(ev: ClipboardEvent): void {\r\n        let data: string = \"\";\r\n        if (ev.clipboardData && ev.clipboardData.types.indexOf(\"text/plain\") !== -1) {\r\n            data = ev.clipboardData.getData(\"text/plain\");\r\n        } else {\r\n            //get the cached data; returns blank string by default\r\n            data = this._host.clipboardData;\r\n        }\r\n        const insertPosition = this._textWrapper.length - this._cursorOffset;\r\n        this._textWrapper.removePart(insertPosition, insertPosition, data);\r\n        this._textHasChanged();\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        // Background\r\n        if (this._isFocused) {\r\n            if (this._focusedBackground) {\r\n                context.fillStyle = this._isEnabled ? this._focusedBackground : this._disabledColor;\r\n\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        } else if (this._background) {\r\n            context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\r\n\r\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        if (!this._fontOffset || this._wasDirty) {\r\n            this._fontOffset = Control._GetFontOffset(context.font);\r\n        }\r\n\r\n        // Text\r\n        const clipTextLeft = this._currentMeasure.left + this._margin.getValueInPixel(this._host, this._tempParentMeasure.width);\r\n        if (this.color) {\r\n            context.fillStyle = this.color;\r\n        }\r\n\r\n        let text = this._beforeRenderText(this._textWrapper);\r\n\r\n        if (!this._isFocused && !this._textWrapper.text && this._placeholderText) {\r\n            text = new TextWrapper();\r\n            text.text = this._placeholderText;\r\n\r\n            if (this._placeholderColor) {\r\n                context.fillStyle = this._placeholderColor;\r\n            }\r\n        }\r\n\r\n        this._textWidth = context.measureText(text.text).width;\r\n        const marginWidth = this._margin.getValueInPixel(this._host, this._tempParentMeasure.width) * 2;\r\n        if (this._autoStretchWidth) {\r\n            this.width = Math.min(this._maxWidth.getValueInPixel(this._host, this._tempParentMeasure.width), this._textWidth + marginWidth) + \"px\";\r\n            this._autoStretchWidth = true; // setting the width will have reset _autoStretchWidth to false!\r\n        }\r\n\r\n        const rootY = this._fontOffset.ascent + (this._currentMeasure.height - this._fontOffset.height) / 2;\r\n        const availableWidth = this._width.getValueInPixel(this._host, this._tempParentMeasure.width) - marginWidth;\r\n\r\n        context.save();\r\n        context.beginPath();\r\n        context.rect(clipTextLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, availableWidth + 2, this._currentMeasure.height);\r\n        context.clip();\r\n\r\n        if (this._isFocused && this._textWidth > availableWidth) {\r\n            const textLeft = clipTextLeft - this._textWidth + availableWidth;\r\n            if (!this._scrollLeft) {\r\n                this._scrollLeft = textLeft;\r\n            }\r\n        } else {\r\n            this._scrollLeft = clipTextLeft;\r\n        }\r\n\r\n        if (this.outlineWidth) {\r\n            context.strokeText(text.text, this._scrollLeft, this._currentMeasure.top + rootY);\r\n        }\r\n\r\n        context.fillText(text.text, this._scrollLeft, this._currentMeasure.top + rootY);\r\n\r\n        // Cursor\r\n        if (this._isFocused) {\r\n            // Need to move cursor\r\n            if (this._clickedCoordinate) {\r\n                const rightPosition = this._scrollLeft + this._textWidth;\r\n                const absoluteCursorPosition = rightPosition - this._clickedCoordinate;\r\n                let currentSize = 0;\r\n                this._cursorOffset = 0;\r\n                let previousDist = 0;\r\n                do {\r\n                    if (this._cursorOffset) {\r\n                        previousDist = Math.abs(absoluteCursorPosition - currentSize);\r\n                    }\r\n                    this._cursorOffset++;\r\n                    currentSize = context.measureText(text.substr(text.length - this._cursorOffset, this._cursorOffset)).width;\r\n                } while (currentSize < absoluteCursorPosition && text.length >= this._cursorOffset);\r\n\r\n                // Find closest move\r\n                if (Math.abs(absoluteCursorPosition - currentSize) > previousDist) {\r\n                    this._cursorOffset--;\r\n                }\r\n\r\n                this._blinkIsEven = false;\r\n                this._clickedCoordinate = null;\r\n            }\r\n\r\n            // Render cursor\r\n            if (!this._blinkIsEven) {\r\n                const cursorOffsetText = text.substr(text.length - this._cursorOffset);\r\n                const cursorOffsetWidth = context.measureText(cursorOffsetText).width;\r\n                let cursorLeft = this._scrollLeft + this._textWidth - cursorOffsetWidth;\r\n\r\n                if (cursorLeft < clipTextLeft) {\r\n                    this._scrollLeft += clipTextLeft - cursorLeft;\r\n                    cursorLeft = clipTextLeft;\r\n                    this._markAsDirty();\r\n                } else if (cursorLeft > clipTextLeft + availableWidth) {\r\n                    this._scrollLeft += clipTextLeft + availableWidth - cursorLeft;\r\n                    cursorLeft = clipTextLeft + availableWidth;\r\n                    this._markAsDirty();\r\n                }\r\n                if (!this.isTextHighlightOn) {\r\n                    context.fillRect(cursorLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, 2, this._fontOffset.height);\r\n                }\r\n            }\r\n\r\n            clearTimeout(this._blinkTimeout);\r\n            this._blinkTimeout = <any>setTimeout(() => {\r\n                this._blinkIsEven = !this._blinkIsEven;\r\n                this._markAsDirty();\r\n            }, 500);\r\n\r\n            //show the highlighted text\r\n            if (this.isTextHighlightOn) {\r\n                clearTimeout(this._blinkTimeout);\r\n                const highlightCursorOffsetWidth = context.measureText(text.substring(this._startHighlightIndex)).width;\r\n                let highlightCursorLeft = this._scrollLeft + this._textWidth - highlightCursorOffsetWidth;\r\n                this._highlightedText = text.substring(this._startHighlightIndex, this._endHighlightIndex);\r\n                let width = context.measureText(text.substring(this._startHighlightIndex, this._endHighlightIndex)).width;\r\n                if (highlightCursorLeft < clipTextLeft) {\r\n                    width = width - (clipTextLeft - highlightCursorLeft);\r\n                    if (!width) {\r\n                        // when using left arrow on text.length > availableWidth;\r\n                        // assigns the width of the first letter after clipTextLeft\r\n                        width = context.measureText(text.charAt(text.length - this._cursorOffset)).width;\r\n                    }\r\n                    highlightCursorLeft = clipTextLeft;\r\n                }\r\n                //for transparancy\r\n                context.globalAlpha = this._highligherOpacity;\r\n                context.fillStyle = this._textHighlightColor;\r\n                context.fillRect(highlightCursorLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, width, this._fontOffset.height);\r\n                context.globalAlpha = 1.0;\r\n            }\r\n        }\r\n        context.restore();\r\n\r\n        // Border\r\n        if (this._thickness) {\r\n            if (this._isFocused) {\r\n                if (this.focusedColor) {\r\n                    context.strokeStyle = this.focusedColor;\r\n                }\r\n            } else {\r\n                if (this.color) {\r\n                    context.strokeStyle = this.color;\r\n                }\r\n            }\r\n\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.strokeRect(\r\n                this._currentMeasure.left + this._thickness / 2,\r\n                this._currentMeasure.top + this._thickness / 2,\r\n                this._currentMeasure.width - this._thickness,\r\n                this._currentMeasure.height - this._thickness\r\n            );\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        this._clickedCoordinate = coordinates.x;\r\n        this.isTextHighlightOn = false;\r\n        this._highlightedText = \"\";\r\n        this._cursorIndex = -1;\r\n        this._isPointerDown = true;\r\n        this._host._capturingControl[pointerId] = this;\r\n        this._focusedBy = (pi.event as IPointerEvent).pointerType;\r\n        if (this._host.focusedControl === this) {\r\n            // Move cursor\r\n            clearTimeout(this._blinkTimeout);\r\n            this._markAsDirty();\r\n            return true;\r\n        }\r\n        if (!this._isEnabled) {\r\n            return false;\r\n        }\r\n        this._host.focusedControl = this;\r\n\r\n        return true;\r\n    }\r\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\r\n        if (this._host.focusedControl === this && this._isPointerDown && !this.isReadOnly) {\r\n            this._clickedCoordinate = coordinates.x;\r\n            this._markAsDirty();\r\n            this._updateValueFromCursorIndex(this._cursorOffset);\r\n        }\r\n        super._onPointerMove(target, coordinates, pointerId, pi);\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._isPointerDown = false;\r\n        delete this._host._capturingControl[pointerId];\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n\r\n    protected _beforeRenderText(textWrapper: TextWrapper): TextWrapper {\r\n        return textWrapper;\r\n    }\r\n\r\n    /** @internal */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    private set isTextHighlightOn(value: boolean) {\r\n        if (this._isTextHighlightOn === value) {\r\n            return;\r\n        }\r\n        if (value) {\r\n            this.onTextHighlightObservable.notifyObservers(this);\r\n        }\r\n        this._isTextHighlightOn = value;\r\n    }\r\n\r\n    /** @internal */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    private get isTextHighlightOn(): boolean {\r\n        return this._isTextHighlightOn;\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this.onBlurObservable.clear();\r\n        this.onFocusObservable.clear();\r\n        this.onTextChangedObservable.clear();\r\n        this.onTextCopyObservable.clear();\r\n        this.onTextCutObservable.clear();\r\n        this.onTextPasteObservable.clear();\r\n        this.onTextHighlightObservable.clear();\r\n        this.onKeyboardEventProcessedObservable.clear();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.InputText\", InputText);\r\n", "import type { Nullable } from \"core/types\";\r\n\r\nimport { Container } from \"./container\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Control } from \"./control\";\r\nimport type { Measure } from \"../measure\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\n\r\n/**\r\n * Class used to create a 2D grid container\r\n */\r\nexport class Grid extends Container {\r\n    private _rowDefinitions = new Array<ValueAndUnit>();\r\n    private _rowDefinitionObservers: Observer<void>[] = [];\r\n    private _columnDefinitions = new Array<ValueAndUnit>();\r\n    private _columnDefinitionObservers: Observer<void>[] = [];\r\n    private _cells: { [key: string]: Container } = {};\r\n    private _childControls = new Array<Control>();\r\n\r\n    /**\r\n     * Sets/Gets a boolean indicating that control content must be clipped\r\n     * Please note that not clipping content may generate issues with adt.useInvalidateRectOptimization so it is recommended to turn this optimization off if you want to use unclipped children\r\n     */\r\n    public set clipContent(value: boolean) {\r\n        this._clipContent = value;\r\n\r\n        // This value has to be replicated on all of the container cells\r\n        for (const key in this._cells) {\r\n            this._cells[key].clipContent = value;\r\n        }\r\n    }\r\n\r\n    @serialize()\r\n    public get clipContent(): boolean {\r\n        return this._clipContent;\r\n    }\r\n\r\n    /**\r\n     * Sets/Gets a boolean indicating if the children are clipped to the current control bounds.\r\n     * Please note that not clipping children may generate issues with adt.useInvalidateRectOptimization so it is recommended to turn this optimization off if you want to use unclipped children\r\n     */\r\n    public set clipChildren(value: boolean) {\r\n        this._clipChildren = value;\r\n\r\n        // This value has to be replicated on all of the container cells\r\n        for (const key in this._cells) {\r\n            this._cells[key].clipChildren = value;\r\n        }\r\n    }\r\n\r\n    public get clipChildren(): boolean {\r\n        return this._clipChildren;\r\n    }\r\n\r\n    /**\r\n     * Gets the number of columns\r\n     */\r\n    public get columnCount(): number {\r\n        return this._columnDefinitions.length;\r\n    }\r\n\r\n    /**\r\n     * Gets the number of rows\r\n     */\r\n    public get rowCount(): number {\r\n        return this._rowDefinitions.length;\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._childControls;\r\n    }\r\n\r\n    /** Gets the list of cells (e.g. the containers) */\r\n    public get cells(): { [key: string]: Container } {\r\n        return this._cells;\r\n    }\r\n\r\n    /**\r\n     * Gets the definition of a specific row\r\n     * @param index defines the index of the row\r\n     * @returns the row definition\r\n     */\r\n    public getRowDefinition(index: number): Nullable<ValueAndUnit> {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return null;\r\n        }\r\n\r\n        return this._rowDefinitions[index];\r\n    }\r\n\r\n    /**\r\n     * Gets the definition of a specific column\r\n     * @param index defines the index of the column\r\n     * @returns the column definition\r\n     */\r\n    public getColumnDefinition(index: number): Nullable<ValueAndUnit> {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return null;\r\n        }\r\n\r\n        return this._columnDefinitions[index];\r\n    }\r\n\r\n    /**\r\n     * Adds a new row to the grid\r\n     * @param height defines the height of the row (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the height is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public addRowDefinition(height: number, isPixel = false): Grid {\r\n        this._rowDefinitions.push(new ValueAndUnit(height, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE));\r\n        this._rowDefinitionObservers.push(this._rowDefinitions[this.rowCount - 1].onChangedObservable.add(() => this._markAsDirty())!);\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a new column to the grid\r\n     * @param width defines the width of the column (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the width is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public addColumnDefinition(width: number, isPixel = false): Grid {\r\n        this._columnDefinitions.push(new ValueAndUnit(width, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE));\r\n        this._columnDefinitionObservers.push(this._columnDefinitions[this.columnCount - 1].onChangedObservable.add(() => this._markAsDirty())!);\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update a row definition\r\n     * @param index defines the index of the row to update\r\n     * @param height defines the height of the row (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the weight is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public setRowDefinition(index: number, height: number, isPixel = false): Grid {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        const current = this._rowDefinitions[index];\r\n        if (current && current.isPixel === isPixel && current.value === height) {\r\n            return this;\r\n        }\r\n\r\n        this._rowDefinitions[index].onChangedObservable.remove(this._rowDefinitionObservers[index]);\r\n        this._rowDefinitions[index] = new ValueAndUnit(height, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE);\r\n        this._rowDefinitionObservers[index] = this._rowDefinitions[index].onChangedObservable.add(() => this._markAsDirty())!;\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update a column definition\r\n     * @param index defines the index of the column to update\r\n     * @param width defines the width of the column (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the width is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public setColumnDefinition(index: number, width: number, isPixel = false): Grid {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        const current = this._columnDefinitions[index];\r\n        if (current && current.isPixel === isPixel && current.value === width) {\r\n            return this;\r\n        }\r\n\r\n        this._columnDefinitions[index].onChangedObservable.remove(this._columnDefinitionObservers[index]);\r\n        this._columnDefinitions[index] = new ValueAndUnit(width, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE);\r\n        this._columnDefinitionObservers[index] = this._columnDefinitions[index].onChangedObservable.add(() => this._markAsDirty())!;\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets the list of children stored in a specific cell\r\n     * @param row defines the row to check\r\n     * @param column defines the column to check\r\n     * @returns the list of controls\r\n     */\r\n    public getChildrenAt(row: number, column: number): Nullable<Array<Control>> {\r\n        const cell = this._cells[`${row}:${column}`];\r\n\r\n        if (!cell) {\r\n            return null;\r\n        }\r\n\r\n        return cell.children;\r\n    }\r\n\r\n    /**\r\n     * Gets a string representing the child cell info (row x column)\r\n     * @param child defines the control to get info from\r\n     * @returns a string containing the child cell info (row x column)\r\n     */\r\n    public getChildCellInfo(child: Control): string {\r\n        return child._tag;\r\n    }\r\n\r\n    private _removeCell(cell: Container, key: string) {\r\n        if (!cell) {\r\n            return;\r\n        }\r\n\r\n        super.removeControl(cell);\r\n\r\n        for (const control of cell.children) {\r\n            const childIndex = this._childControls.indexOf(control);\r\n\r\n            if (childIndex !== -1) {\r\n                this._childControls.splice(childIndex, 1);\r\n            }\r\n        }\r\n\r\n        delete this._cells[key];\r\n    }\r\n\r\n    private _offsetCell(previousKey: string, key: string) {\r\n        if (!this._cells[key]) {\r\n            return;\r\n        }\r\n\r\n        this._cells[previousKey] = this._cells[key];\r\n\r\n        for (const control of this._cells[previousKey].children) {\r\n            control._tag = previousKey;\r\n        }\r\n\r\n        delete this._cells[key];\r\n    }\r\n\r\n    /**\r\n     * Remove a column definition at specified index\r\n     * @param index defines the index of the column to remove\r\n     * @returns the current grid\r\n     */\r\n    public removeColumnDefinition(index: number): Grid {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        for (let x = 0; x < this._rowDefinitions.length; x++) {\r\n            const key = `${x}:${index}`;\r\n            const cell = this._cells[key];\r\n\r\n            this._removeCell(cell, key);\r\n        }\r\n\r\n        for (let x = 0; x < this._rowDefinitions.length; x++) {\r\n            for (let y = index + 1; y < this._columnDefinitions.length; y++) {\r\n                const previousKey = `${x}:${y - 1}`;\r\n                const key = `${x}:${y}`;\r\n\r\n                this._offsetCell(previousKey, key);\r\n            }\r\n        }\r\n\r\n        this._columnDefinitions[index].onChangedObservable.remove(this._columnDefinitionObservers[index]);\r\n        this._columnDefinitions.splice(index, 1);\r\n        this._columnDefinitionObservers.splice(index, 1);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a row definition at specified index\r\n     * @param index defines the index of the row to remove\r\n     * @returns the current grid\r\n     */\r\n    public removeRowDefinition(index: number): Grid {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        for (let y = 0; y < this._columnDefinitions.length; y++) {\r\n            const key = `${index}:${y}`;\r\n            const cell = this._cells[key];\r\n\r\n            this._removeCell(cell, key);\r\n        }\r\n\r\n        for (let y = 0; y < this._columnDefinitions.length; y++) {\r\n            for (let x = index + 1; x < this._rowDefinitions.length; x++) {\r\n                const previousKey = `${x - 1}:${y}`;\r\n                const key = `${x}:${y}`;\r\n\r\n                this._offsetCell(previousKey, key);\r\n            }\r\n        }\r\n\r\n        this._rowDefinitions[index].onChangedObservable.remove(this._rowDefinitionObservers[index]);\r\n        this._rowDefinitions.splice(index, 1);\r\n        this._rowDefinitionObservers.splice(index, 1);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current grid\r\n     * @param control defines the control to add\r\n     * @param row defines the row where to add the control (0 by default)\r\n     * @param column defines the column where to add the control (0 by default)\r\n     * @returns the current grid\r\n     */\r\n    public addControl(control: Control, row: number = 0, column: number = 0): Grid {\r\n        if (this._rowDefinitions.length === 0) {\r\n            // Add default row definition\r\n            this.addRowDefinition(1, false);\r\n        }\r\n\r\n        if (this._columnDefinitions.length === 0) {\r\n            // Add default column definition\r\n            this.addColumnDefinition(1, false);\r\n        }\r\n\r\n        if (this._childControls.indexOf(control) !== -1) {\r\n            Tools.Warn(`Control (Name:${control.name}, UniqueId:${control.uniqueId}) is already associated with this grid. You must remove it before reattaching it`);\r\n            return this;\r\n        }\r\n\r\n        const x = Math.min(row, this._rowDefinitions.length - 1);\r\n        const y = Math.min(column, this._columnDefinitions.length - 1);\r\n        const key = `${x}:${y}`;\r\n        let goodContainer = this._cells[key];\r\n\r\n        if (!goodContainer) {\r\n            goodContainer = new Container(key);\r\n            this._cells[key] = goodContainer;\r\n            goodContainer.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            goodContainer.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n            goodContainer.clipContent = this.clipContent;\r\n            goodContainer.clipChildren = this.clipChildren;\r\n            super.addControl(goodContainer);\r\n        }\r\n\r\n        goodContainer.addControl(control);\r\n        this._childControls.push(control);\r\n        control._tag = key;\r\n        control.parent = this;\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        const index = this._childControls.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._childControls.splice(index, 1);\r\n        }\r\n\r\n        const cell = this._cells[control._tag];\r\n\r\n        if (cell) {\r\n            cell.removeControl(control);\r\n            control._tag = null;\r\n        }\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Grid\r\n     * @param name defines control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Grid\";\r\n    }\r\n\r\n    protected _getGridDefinitions(definitionCallback: (lefts: number[], tops: number[], widths: number[], heights: number[]) => void) {\r\n        const widths = [];\r\n        const heights = [];\r\n        const lefts = [];\r\n        const tops = [];\r\n\r\n        let availableWidth = this._currentMeasure.width;\r\n        let globalWidthPercentage = 0;\r\n        let availableHeight = this._currentMeasure.height;\r\n        let globalHeightPercentage = 0;\r\n\r\n        // Heights\r\n        let index = 0;\r\n        for (const rowDefinition of this._rowDefinitions) {\r\n            if (rowDefinition.isPixel) {\r\n                const height = rowDefinition.getValue(this._host);\r\n                availableHeight -= height;\r\n                heights[index] = height;\r\n            } else {\r\n                globalHeightPercentage += rowDefinition.value;\r\n            }\r\n            index++;\r\n        }\r\n\r\n        let top = 0;\r\n        index = 0;\r\n        for (const rowDefinition of this._rowDefinitions) {\r\n            tops.push(top);\r\n\r\n            if (!rowDefinition.isPixel) {\r\n                const height = Math.round((rowDefinition.value / globalHeightPercentage) * availableHeight);\r\n                top += height;\r\n                heights[index] = height;\r\n            } else {\r\n                top += rowDefinition.getValue(this._host);\r\n            }\r\n            index++;\r\n        }\r\n\r\n        // Widths\r\n        index = 0;\r\n        for (const columnDefinition of this._columnDefinitions) {\r\n            if (columnDefinition.isPixel) {\r\n                const width = columnDefinition.getValue(this._host);\r\n                availableWidth -= width;\r\n                widths[index] = width;\r\n            } else {\r\n                globalWidthPercentage += columnDefinition.value;\r\n            }\r\n            index++;\r\n        }\r\n\r\n        let left = 0;\r\n        index = 0;\r\n        for (const columnDefinition of this._columnDefinitions) {\r\n            lefts.push(left);\r\n            if (!columnDefinition.isPixel) {\r\n                const width = Math.round((columnDefinition.value / globalWidthPercentage) * availableWidth);\r\n                left += width;\r\n                widths[index] = width;\r\n            } else {\r\n                left += columnDefinition.getValue(this._host);\r\n            }\r\n            index++;\r\n        }\r\n\r\n        definitionCallback(lefts, tops, widths, heights);\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        this._getGridDefinitions((lefts: number[], tops: number[], widths: number[], heights: number[]) => {\r\n            // Setting child sizes\r\n            for (const key in this._cells) {\r\n                if (!Object.prototype.hasOwnProperty.call(this._cells, key)) {\r\n                    continue;\r\n                }\r\n                const split = key.split(\":\");\r\n                const x = parseInt(split[0]);\r\n                const y = parseInt(split[1]);\r\n                const cell = this._cells[key];\r\n\r\n                cell.leftInPixels = lefts[y];\r\n                cell.topInPixels = tops[x];\r\n                cell.widthInPixels = widths[y];\r\n                cell.heightInPixels = heights[x];\r\n                cell._left.ignoreAdaptiveScaling = true;\r\n                cell._top.ignoreAdaptiveScaling = true;\r\n                cell._width.ignoreAdaptiveScaling = true;\r\n                cell._height.ignoreAdaptiveScaling = true;\r\n            }\r\n        });\r\n\r\n        super._additionalProcessing(parentMeasure, context);\r\n    }\r\n\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        for (const key in this._cells) {\r\n            if (!Object.prototype.hasOwnProperty.call(this._cells, key)) {\r\n                continue;\r\n            }\r\n\r\n            const child = this._cells[key];\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    public _renderHighlightSpecific(context: ICanvasRenderingContext): void {\r\n        super._renderHighlightSpecific(context);\r\n\r\n        this._getGridDefinitions((lefts: number[], tops: number[], widths: number[], heights: number[]) => {\r\n            // Columns\r\n            for (let index = 0; index < lefts.length; index++) {\r\n                const left = this._currentMeasure.left + lefts[index] + widths[index];\r\n                context.beginPath();\r\n                context.moveTo(left, this._currentMeasure.top);\r\n                context.lineTo(left, this._currentMeasure.top + this._currentMeasure.height);\r\n                context.stroke();\r\n            }\r\n\r\n            // Rows\r\n            for (let index = 0; index < tops.length; index++) {\r\n                const top = this._currentMeasure.top + tops[index] + heights[index];\r\n                context.beginPath();\r\n                context.moveTo(this._currentMeasure.left, top);\r\n                context.lineTo(this._currentMeasure.left + this._currentMeasure.width, top);\r\n                context.stroke();\r\n            }\r\n        });\r\n\r\n        context.restore();\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        for (const control of this._childControls) {\r\n            control.dispose();\r\n        }\r\n        for (let index = 0; index < this._rowDefinitions.length; index++) {\r\n            this._rowDefinitions[index].onChangedObservable.remove(this._rowDefinitionObservers[index]);\r\n        }\r\n        for (let index = 0; index < this._columnDefinitions.length; index++) {\r\n            this._columnDefinitions[index].onChangedObservable.remove(this._columnDefinitionObservers[index]);\r\n        }\r\n        this._rowDefinitionObservers.length = 0;\r\n        this._rowDefinitions.length = 0;\r\n        this._columnDefinitionObservers.length = 0;\r\n        this._columnDefinitions.length = 0;\r\n        this._cells = {};\r\n        this._childControls.length = 0;\r\n    }\r\n\r\n    /**\r\n     * Serializes the current control\r\n     * @param serializationObject defined the JSON serialized object\r\n     * @param force force serialization even if isSerializable === false\r\n     */\r\n    public serialize(serializationObject: any, force: boolean) {\r\n        super.serialize(serializationObject, force);\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n        serializationObject.columnCount = this.columnCount;\r\n        serializationObject.rowCount = this.rowCount;\r\n        serializationObject.columns = [];\r\n        serializationObject.rows = [];\r\n        serializationObject.tags = [];\r\n        for (let i = 0; i < this.columnCount; ++i) {\r\n            const cd = this.getColumnDefinition(i);\r\n            const childSerializationObject = { value: cd?.getValue(this.host), unit: cd?.unit };\r\n            serializationObject.columns.push(childSerializationObject);\r\n        }\r\n        for (let i = 0; i < this.rowCount; ++i) {\r\n            const rd = this.getRowDefinition(i);\r\n            const childSerializationObject = { value: rd?.getValue(this.host), unit: rd?.unit };\r\n            serializationObject.rows.push(childSerializationObject);\r\n        }\r\n        this.children.forEach((child) => {\r\n            serializationObject.tags.push(child._tag);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n        const children: Control[] = [];\r\n        this.children.forEach((child) => {\r\n            children.push(child);\r\n        });\r\n        this.removeRowDefinition(0);\r\n        this.removeColumnDefinition(0);\r\n        for (let i = 0; i < serializedObject.columnCount; ++i) {\r\n            const columnValue = serializedObject.columns[i].value;\r\n            const unit = serializedObject.columns[i].unit;\r\n            this.addColumnDefinition(columnValue, unit === 1 ? true : false);\r\n        }\r\n        for (let i = 0; i < serializedObject.rowCount; ++i) {\r\n            const rowValue = serializedObject.rows[i].value;\r\n            const unit = serializedObject.rows[i].unit;\r\n            this.addRowDefinition(rowValue, unit === 1 ? true : false);\r\n        }\r\n\r\n        for (let i = 0; i < children.length; ++i) {\r\n            const cellInfo = serializedObject.tags[i];\r\n            let rowNumber = parseInt(cellInfo.substring(0, cellInfo.search(\":\")));\r\n            if (isNaN(rowNumber)) {\r\n                rowNumber = 0;\r\n            }\r\n            let columnNumber = parseInt(cellInfo.substring(cellInfo.search(\":\") + 1));\r\n            if (isNaN(columnNumber)) {\r\n                columnNumber = 0;\r\n            }\r\n            this.addControl(children[i], rowNumber, columnNumber);\r\n        }\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Grid\", Grid);\r\n", "import { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Control } from \"./control\";\r\nimport type { Measure } from \"../measure\";\r\nimport { InputText } from \"./inputText\";\r\nimport { Rectangle } from \"./rectangle\";\r\nimport { Button } from \"./button\";\r\nimport { Grid } from \"./grid\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { TextBlock } from \"../controls/textBlock\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvas, ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\n\r\n/** Class used to create color pickers */\r\nexport class ColorPicker extends Control {\r\n    private static _Epsilon = 0.000001;\r\n    private _colorWheelCanvas: ICanvas;\r\n\r\n    private _value: Color3 = Color3.Red();\r\n    private _tmpColor = new Color3();\r\n\r\n    private _pointerStartedOnSquare = false;\r\n    private _pointerStartedOnWheel = false;\r\n\r\n    private _squareLeft = 0;\r\n    private _squareTop = 0;\r\n    private _squareSize = 0;\r\n\r\n    private _h = 360;\r\n    private _s = 1;\r\n    private _v = 1;\r\n\r\n    private _lastPointerDownId = -1;\r\n\r\n    /**\r\n     * Observable raised when the value changes\r\n     */\r\n    public onValueChangedObservable = new Observable<Color3>();\r\n\r\n    /** Gets or sets the color of the color picker */\r\n    @serialize()\r\n    public get value(): Color3 {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(value: Color3) {\r\n        if (this._value.equals(value)) {\r\n            return;\r\n        }\r\n\r\n        this._value.copyFrom(value);\r\n\r\n        this._value.toHSVToRef(this._tmpColor);\r\n\r\n        this._h = this._tmpColor.r;\r\n        this._s = Math.max(this._tmpColor.g, 0.00001);\r\n        this._v = Math.max(this._tmpColor.b, 0.00001);\r\n\r\n        this._markAsDirty();\r\n\r\n        if (this._value.r <= ColorPicker._Epsilon) {\r\n            this._value.r = 0;\r\n        }\r\n\r\n        if (this._value.g <= ColorPicker._Epsilon) {\r\n            this._value.g = 0;\r\n        }\r\n\r\n        if (this._value.b <= ColorPicker._Epsilon) {\r\n            this._value.b = 0;\r\n        }\r\n\r\n        if (this._value.r >= 1.0 - ColorPicker._Epsilon) {\r\n            this._value.r = 1.0;\r\n        }\r\n\r\n        if (this._value.g >= 1.0 - ColorPicker._Epsilon) {\r\n            this._value.g = 1.0;\r\n        }\r\n\r\n        if (this._value.b >= 1.0 - ColorPicker._Epsilon) {\r\n            this._value.b = 1.0;\r\n        }\r\n\r\n        this.onValueChangedObservable.notifyObservers(this._value);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets control width\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    public set width(value: string | number) {\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            if (this._width.getValue(this._host) === 0) {\r\n                value = \"1px\";\r\n                this._width.fromString(value);\r\n            }\r\n            this._height.fromString(value);\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets control height\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#position-and-size\r\n     */\r\n    @serialize()\r\n    public get height(): string | number {\r\n        return this._height.toString(this._host);\r\n    }\r\n\r\n    /** Gets or sets control height */\r\n    public set height(value: string | number) {\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            if (this._height.getValue(this._host) === 0) {\r\n                value = \"1px\";\r\n                this._height.fromString(value);\r\n            }\r\n            this._width.fromString(value);\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets control size */\r\n    @serialize()\r\n    public get size(): string | number {\r\n        return this.width;\r\n    }\r\n\r\n    public set size(value: string | number) {\r\n        this.width = value;\r\n    }\r\n\r\n    /**\r\n     * Creates a new ColorPicker\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n        this.value = new Color3(0.88, 0.1, 0.1);\r\n        this.size = \"200px\";\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ColorPicker\";\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _preMeasure(parentMeasure: Measure): void {\r\n        if (parentMeasure.width < parentMeasure.height) {\r\n            this._currentMeasure.height = parentMeasure.width;\r\n        } else {\r\n            this._currentMeasure.width = parentMeasure.height;\r\n        }\r\n    }\r\n\r\n    private _updateSquareProps(): void {\r\n        const radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * 0.5;\r\n        const wheelThickness = radius * 0.2;\r\n        const innerDiameter = (radius - wheelThickness) * 2;\r\n        const squareSize = innerDiameter / Math.sqrt(2);\r\n        const offset = radius - squareSize * 0.5;\r\n\r\n        this._squareLeft = this._currentMeasure.left + offset;\r\n        this._squareTop = this._currentMeasure.top + offset;\r\n        this._squareSize = squareSize;\r\n    }\r\n\r\n    private _drawGradientSquare(hueValue: number, left: number, top: number, width: number, height: number, context: ICanvasRenderingContext) {\r\n        const lgh = context.createLinearGradient(left, top, width + left, top);\r\n        lgh.addColorStop(0, \"#fff\");\r\n        lgh.addColorStop(1, \"hsl(\" + hueValue + \", 100%, 50%)\");\r\n\r\n        context.fillStyle = lgh;\r\n        context.fillRect(left, top, width, height);\r\n\r\n        const lgv = context.createLinearGradient(left, top, left, height + top);\r\n        lgv.addColorStop(0, \"rgba(0,0,0,0)\");\r\n        lgv.addColorStop(1, \"#000\");\r\n\r\n        context.fillStyle = lgv;\r\n        context.fillRect(left, top, width, height);\r\n    }\r\n\r\n    private _drawCircle(centerX: number, centerY: number, radius: number, context: ICanvasRenderingContext) {\r\n        context.beginPath();\r\n        context.arc(centerX, centerY, radius + 1, 0, 2 * Math.PI, false);\r\n        context.lineWidth = 3;\r\n        context.strokeStyle = \"#333333\";\r\n        context.stroke();\r\n        context.beginPath();\r\n        context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);\r\n        context.lineWidth = 3;\r\n        context.strokeStyle = \"#ffffff\";\r\n        context.stroke();\r\n    }\r\n\r\n    private _createColorWheelCanvas(radius: number, thickness: number): ICanvas {\r\n        // Shoudl abstract platform instead of using LastCreatedEngine\r\n        const engine = EngineStore.LastCreatedEngine;\r\n        if (!engine) {\r\n            throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n        }\r\n        const canvas = engine.createCanvas(radius * 2, radius * 2);\r\n        const context = canvas.getContext(\"2d\");\r\n        const image = context.getImageData(0, 0, radius * 2, radius * 2);\r\n        const data = image.data;\r\n\r\n        const color = this._tmpColor;\r\n        const maxDistSq = radius * radius;\r\n        const innerRadius = radius - thickness;\r\n        const minDistSq = innerRadius * innerRadius;\r\n\r\n        for (let x = -radius; x < radius; x++) {\r\n            for (let y = -radius; y < radius; y++) {\r\n                const distSq = x * x + y * y;\r\n\r\n                if (distSq > maxDistSq || distSq < minDistSq) {\r\n                    continue;\r\n                }\r\n\r\n                const dist = Math.sqrt(distSq);\r\n                const ang = Math.atan2(y, x);\r\n\r\n                Color3.HSVtoRGBToRef((ang * 180) / Math.PI + 180, dist / radius, 1, color);\r\n\r\n                const index = (x + radius + (y + radius) * 2 * radius) * 4;\r\n\r\n                data[index] = color.r * 255;\r\n                data[index + 1] = color.g * 255;\r\n                data[index + 2] = color.b * 255;\r\n                let alphaRatio = (dist - innerRadius) / (radius - innerRadius);\r\n\r\n                //apply less alpha to bigger color pickers\r\n                let alphaAmount = 0.2;\r\n                const maxAlpha = 0.2;\r\n                const minAlpha = 0.04;\r\n                const lowerRadius = 50;\r\n                const upperRadius = 150;\r\n\r\n                if (radius < lowerRadius) {\r\n                    alphaAmount = maxAlpha;\r\n                } else if (radius > upperRadius) {\r\n                    alphaAmount = minAlpha;\r\n                } else {\r\n                    alphaAmount = ((minAlpha - maxAlpha) * (radius - lowerRadius)) / (upperRadius - lowerRadius) + maxAlpha;\r\n                }\r\n\r\n                alphaRatio = (dist - innerRadius) / (radius - innerRadius);\r\n\r\n                if (alphaRatio < alphaAmount) {\r\n                    data[index + 3] = 255 * (alphaRatio / alphaAmount);\r\n                } else if (alphaRatio > 1 - alphaAmount) {\r\n                    data[index + 3] = 255 * (1.0 - (alphaRatio - (1 - alphaAmount)) / alphaAmount);\r\n                } else {\r\n                    data[index + 3] = 255;\r\n                }\r\n            }\r\n        }\r\n\r\n        context.putImageData(image, 0, 0);\r\n\r\n        return canvas;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        const radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * 0.5;\r\n        const wheelThickness = radius * 0.2;\r\n        const left = this._currentMeasure.left;\r\n        const top = this._currentMeasure.top;\r\n\r\n        if (!this._colorWheelCanvas || this._colorWheelCanvas.width != radius * 2) {\r\n            this._colorWheelCanvas = this._createColorWheelCanvas(radius, wheelThickness);\r\n        }\r\n\r\n        this._updateSquareProps();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n\r\n            context.fillRect(this._squareLeft, this._squareTop, this._squareSize, this._squareSize);\r\n        }\r\n\r\n        context.drawImage(this._colorWheelCanvas, left, top);\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        this._drawGradientSquare(this._h, this._squareLeft, this._squareTop, this._squareSize, this._squareSize, context);\r\n\r\n        let cx = this._squareLeft + this._squareSize * this._s;\r\n        let cy = this._squareTop + this._squareSize * (1 - this._v);\r\n\r\n        this._drawCircle(cx, cy, radius * 0.04, context);\r\n\r\n        const dist = radius - wheelThickness * 0.5;\r\n        cx = left + radius + Math.cos(((this._h - 180) * Math.PI) / 180) * dist;\r\n        cy = top + radius + Math.sin(((this._h - 180) * Math.PI) / 180) * dist;\r\n        this._drawCircle(cx, cy, wheelThickness * 0.35, context);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n    private _pointerIsDown = false;\r\n\r\n    private _updateValueFromPointer(x: number, y: number): void {\r\n        if (this._pointerStartedOnWheel) {\r\n            const radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * 0.5;\r\n            const centerX = radius + this._currentMeasure.left;\r\n            const centerY = radius + this._currentMeasure.top;\r\n            this._h = (Math.atan2(y - centerY, x - centerX) * 180) / Math.PI + 180;\r\n        } else if (this._pointerStartedOnSquare) {\r\n            this._updateSquareProps();\r\n            this._s = (x - this._squareLeft) / this._squareSize;\r\n            this._v = 1 - (y - this._squareTop) / this._squareSize;\r\n            this._s = Math.min(this._s, 1);\r\n            this._s = Math.max(this._s, ColorPicker._Epsilon);\r\n            this._v = Math.min(this._v, 1);\r\n            this._v = Math.max(this._v, ColorPicker._Epsilon);\r\n        }\r\n\r\n        Color3.HSVtoRGBToRef(this._h, this._s, this._v, this._tmpColor);\r\n\r\n        this.value = this._tmpColor;\r\n    }\r\n\r\n    private _isPointOnSquare(x: number, y: number): boolean {\r\n        this._updateSquareProps();\r\n\r\n        const left = this._squareLeft;\r\n        const top = this._squareTop;\r\n        const size = this._squareSize;\r\n\r\n        if (x >= left && x <= left + size && y >= top && y <= top + size) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isPointOnWheel(x: number, y: number): boolean {\r\n        const radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * 0.5;\r\n        const centerX = radius + this._currentMeasure.left;\r\n        const centerY = radius + this._currentMeasure.top;\r\n        const wheelThickness = radius * 0.2;\r\n        const innerRadius = radius - wheelThickness;\r\n        const radiusSq = radius * radius;\r\n        const innerRadiusSq = innerRadius * innerRadius;\r\n\r\n        const dx = x - centerX;\r\n        const dy = y - centerY;\r\n\r\n        const distSq = dx * dx + dy * dy;\r\n\r\n        if (distSq <= radiusSq && distSq >= innerRadiusSq) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        this._pointerIsDown = true;\r\n\r\n        this._pointerStartedOnSquare = false;\r\n        this._pointerStartedOnWheel = false;\r\n\r\n        // Invert transform\r\n        this._invertTransformMatrix.transformCoordinates(coordinates.x, coordinates.y, this._transformedPosition);\r\n\r\n        const x = this._transformedPosition.x;\r\n        const y = this._transformedPosition.y;\r\n\r\n        if (this._isPointOnSquare(x, y)) {\r\n            this._pointerStartedOnSquare = true;\r\n        } else if (this._isPointOnWheel(x, y)) {\r\n            this._pointerStartedOnWheel = true;\r\n        }\r\n\r\n        this._updateValueFromPointer(x, y);\r\n        this._host._capturingControl[pointerId] = this;\r\n        this._lastPointerDownId = pointerId;\r\n        return true;\r\n    }\r\n\r\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\r\n        // Only listen to pointer move events coming from the last pointer to click on the element (To support dual vr controller interaction)\r\n        if (pointerId != this._lastPointerDownId) {\r\n            return;\r\n        }\r\n\r\n        if (!this.isReadOnly) {\r\n            // Invert transform\r\n            this._invertTransformMatrix.transformCoordinates(coordinates.x, coordinates.y, this._transformedPosition);\r\n\r\n            const x = this._transformedPosition.x;\r\n            const y = this._transformedPosition.y;\r\n\r\n            if (this._pointerIsDown) {\r\n                this._updateValueFromPointer(x, y);\r\n            }\r\n        }\r\n\r\n        super._onPointerMove(target, coordinates, pointerId, pi);\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi: PointerInfoBase): void {\r\n        this._pointerIsDown = false;\r\n\r\n        delete this._host._capturingControl[pointerId];\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick, pi);\r\n    }\r\n\r\n    public _onCanvasBlur() {\r\n        this._forcePointerUp();\r\n        super._onCanvasBlur();\r\n    }\r\n\r\n    /**\r\n     * This function expands the color picker by creating a color picker dialog with manual\r\n     * color value input and the ability to save colors into an array to be used later in\r\n     * subsequent launches of the dialogue.\r\n     * @param advancedTexture defines the AdvancedDynamicTexture the dialog is assigned to\r\n     * @param options defines size for dialog and options for saved colors. Also accepts last color picked as hex string and saved colors array as hex strings.\r\n     * @param options.pickerWidth\r\n     * @param options.pickerHeight\r\n     * @param options.headerHeight\r\n     * @param options.lastColor\r\n     * @param options.swatchLimit\r\n     * @param options.numSwatchesPerLine\r\n     * @param options.savedColors\r\n     * @returns picked color as a hex string and the saved colors array as hex strings.\r\n     */\r\n    public static ShowPickerDialogAsync(\r\n        advancedTexture: AdvancedDynamicTexture,\r\n        options: {\r\n            pickerWidth?: string;\r\n            pickerHeight?: string;\r\n            headerHeight?: string;\r\n            lastColor?: string;\r\n            swatchLimit?: number;\r\n            numSwatchesPerLine?: number;\r\n            savedColors?: Array<string>;\r\n        }\r\n    ): Promise<{\r\n        savedColors?: string[];\r\n        pickedColor: string;\r\n    }> {\r\n        return new Promise((resolve) => {\r\n            // Default options\r\n            options.pickerWidth = options.pickerWidth || \"640px\";\r\n            options.pickerHeight = options.pickerHeight || \"400px\";\r\n            options.headerHeight = options.headerHeight || \"35px\";\r\n            options.lastColor = options.lastColor || \"#000000\";\r\n            options.swatchLimit = options.swatchLimit || 20;\r\n            options.numSwatchesPerLine = options.numSwatchesPerLine || 10;\r\n\r\n            // Window size settings\r\n            const drawerMaxRows: number = options.swatchLimit / options.numSwatchesPerLine;\r\n            const rawSwatchSize: number = parseFloat(<string>options.pickerWidth) / options.numSwatchesPerLine;\r\n            const gutterSize: number = Math.floor(rawSwatchSize * 0.25);\r\n            const colGutters: number = gutterSize * (options.numSwatchesPerLine + 1);\r\n            const swatchSize: number = Math.floor((parseFloat(<string>options.pickerWidth) - colGutters) / options.numSwatchesPerLine);\r\n            const drawerMaxSize: number = swatchSize * drawerMaxRows + gutterSize * (drawerMaxRows + 1);\r\n            const containerSize: string = (parseInt(options.pickerHeight) + drawerMaxSize + Math.floor(swatchSize * 0.25)).toString() + \"px\";\r\n\r\n            // Button Colors\r\n            const buttonColor: string = \"#c0c0c0\";\r\n            const buttonBackgroundColor: string = \"#535353\";\r\n            const buttonBackgroundHoverColor: string = \"#414141\";\r\n            const buttonBackgroundClickColor: string = \"515151\";\r\n            const buttonDisabledColor: string = \"#555555\";\r\n            const buttonDisabledBackgroundColor: string = \"#454545\";\r\n            const currentSwatchesOutlineColor: string = \"#404040\";\r\n            const luminanceLimitColor: Color3 = Color3.FromHexString(\"#dddddd\");\r\n            const luminanceLimit: number = luminanceLimitColor.r + luminanceLimitColor.g + luminanceLimitColor.b;\r\n            const iconColorDark: string = \"#aaaaaa\";\r\n            const iconColorLight: string = \"#ffffff\";\r\n\r\n            // Button settings\r\n            let buttonFontSize: number;\r\n            let butEdit: Button;\r\n\r\n            // Input Text Colors\r\n            const inputFieldLabels: string[] = [\"R\", \"G\", \"B\"];\r\n            const inputTextBackgroundColor: string = \"#454545\";\r\n            const inputTextColor: string = \"#f0f0f0\";\r\n\r\n            // This int is used for naming swatches and serves as the index for calling them from the list\r\n            let swatchNumber: number;\r\n\r\n            // Menu Panel options. We need to know if the swatchDrawer exists so we can create it if needed.\r\n            let swatchDrawer: Grid;\r\n            let editSwatchMode: boolean = false;\r\n\r\n            // Color InputText fields that will be updated upon value change\r\n            let butSave: Button;\r\n            let lastVal: string;\r\n            let activeField: string;\r\n\r\n            // Dialog menu container which will contain both the main dialogue window and the swatch drawer which opens once a color is saved.\r\n            const dialogContainer: Grid = new Grid();\r\n            dialogContainer.name = \"Dialog Container\";\r\n            dialogContainer.width = options.pickerWidth;\r\n            if (options.savedColors) {\r\n                dialogContainer.height = containerSize;\r\n                const topRow: number = parseInt(options.pickerHeight) / parseInt(containerSize);\r\n                dialogContainer.addRowDefinition(topRow, false);\r\n                dialogContainer.addRowDefinition(1.0 - topRow, false);\r\n            } else {\r\n                dialogContainer.height = options.pickerHeight;\r\n                dialogContainer.addRowDefinition(1.0, false);\r\n            }\r\n            advancedTexture.addControl(dialogContainer);\r\n\r\n            // Swatch drawer which contains all saved color buttons\r\n            if (options.savedColors) {\r\n                swatchDrawer = new Grid();\r\n                swatchDrawer.name = \"Swatch Drawer\";\r\n                swatchDrawer.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n                swatchDrawer.background = buttonBackgroundColor;\r\n                swatchDrawer.width = options.pickerWidth!;\r\n                const initialRows: number = options.savedColors.length / options.numSwatchesPerLine;\r\n                let gutterCount: number;\r\n                if (initialRows == 0) {\r\n                    gutterCount = 0;\r\n                } else {\r\n                    gutterCount = initialRows + 1;\r\n                }\r\n                swatchDrawer.height = (swatchSize * initialRows + gutterCount * gutterSize).toString() + \"px\";\r\n                swatchDrawer.top = Math.floor(swatchSize * 0.25).toString() + \"px\";\r\n                for (let i = 0; i < Math.ceil(options.savedColors.length / options.numSwatchesPerLine) * 2 + 1; i++) {\r\n                    if (i % 2 != 0) {\r\n                        swatchDrawer.addRowDefinition(swatchSize, true);\r\n                    } else {\r\n                        swatchDrawer.addRowDefinition(gutterSize, true);\r\n                    }\r\n                }\r\n                for (let i = 0; i < options.numSwatchesPerLine! * 2 + 1; i++) {\r\n                    if (i % 2 != 0) {\r\n                        swatchDrawer.addColumnDefinition(swatchSize, true);\r\n                    } else {\r\n                        swatchDrawer.addColumnDefinition(gutterSize, true);\r\n                    }\r\n                }\r\n                dialogContainer.addControl(swatchDrawer, 1, 0);\r\n            }\r\n\r\n            // Picker container\r\n            const pickerPanel: Grid = new Grid();\r\n            pickerPanel.name = \"Picker Panel\";\r\n            pickerPanel.height = options.pickerHeight;\r\n            const panelHead: number = parseInt(options.headerHeight) / parseInt(options.pickerHeight);\r\n            const pickerPanelRows: number[] = [panelHead, 1.0 - panelHead];\r\n            pickerPanel.addRowDefinition(pickerPanelRows[0], false);\r\n            pickerPanel.addRowDefinition(pickerPanelRows[1], false);\r\n            dialogContainer.addControl(pickerPanel, 0, 0);\r\n\r\n            // Picker container header\r\n            const header: Rectangle = new Rectangle();\r\n            header.name = \"Dialogue Header Bar\";\r\n            header.background = \"#cccccc\";\r\n            header.thickness = 0;\r\n            pickerPanel.addControl(header, 0, 0);\r\n\r\n            // Header close button\r\n            const closeButton: Button = Button.CreateSimpleButton(\"closeButton\", \"a\");\r\n            closeButton.fontFamily = \"coreglyphs\";\r\n            const headerColor3: Color3 = Color3.FromHexString(header.background);\r\n            const closeIconColor = new Color3(1.0 - headerColor3.r, 1.0 - headerColor3.g, 1.0 - headerColor3.b);\r\n            closeButton.color = closeIconColor.toHexString();\r\n            closeButton.fontSize = Math.floor(parseInt(options.headerHeight!) * 0.6);\r\n            closeButton.textBlock!.textVerticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n            closeButton.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_RIGHT;\r\n            closeButton.height = closeButton.width = options.headerHeight;\r\n            closeButton.background = header.background;\r\n            closeButton.thickness = 0;\r\n            closeButton.pointerDownAnimation = () => {};\r\n            closeButton.pointerUpAnimation = () => {\r\n                closeButton.background = header.background;\r\n            };\r\n            closeButton.pointerEnterAnimation = () => {\r\n                closeButton.color = header.background;\r\n                closeButton.background = \"red\";\r\n            };\r\n            closeButton.pointerOutAnimation = () => {\r\n                closeButton.color = closeIconColor.toHexString();\r\n                closeButton.background = header.background;\r\n            };\r\n            closeButton.onPointerClickObservable.add(() => {\r\n                closePicker(currentSwatch.background);\r\n            });\r\n            pickerPanel.addControl(closeButton, 0, 0);\r\n\r\n            // Dialog container body\r\n            const dialogBody: Grid = new Grid();\r\n            dialogBody.name = \"Dialogue Body\";\r\n            dialogBody.background = buttonBackgroundColor;\r\n            const dialogBodyCols: number[] = [0.4375, 0.5625];\r\n            dialogBody.addRowDefinition(1.0, false);\r\n            dialogBody.addColumnDefinition(dialogBodyCols[0], false);\r\n            dialogBody.addColumnDefinition(dialogBodyCols[1], false);\r\n            pickerPanel.addControl(dialogBody, 1, 0);\r\n\r\n            // Picker grid\r\n            const pickerGrid: Grid = new Grid();\r\n            pickerGrid.name = \"Picker Grid\";\r\n            pickerGrid.addRowDefinition(0.85, false);\r\n            pickerGrid.addRowDefinition(0.15, false);\r\n            dialogBody.addControl(pickerGrid, 0, 0);\r\n\r\n            //  Picker control\r\n            const picker = new ColorPicker();\r\n            picker.name = \"GUI Color Picker\";\r\n            if (options.pickerHeight < options.pickerWidth) {\r\n                picker.width = 0.89;\r\n            } else {\r\n                picker.height = 0.89;\r\n            }\r\n            picker.value = Color3.FromHexString(options.lastColor);\r\n            picker.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n            picker.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n            picker.onPointerDownObservable.add(() => {\r\n                activeField = picker.name!;\r\n                lastVal = \"\";\r\n                editSwatches(false);\r\n            });\r\n            picker.onValueChangedObservable.add(function (value) {\r\n                // value is a color3\r\n                if (activeField == picker.name) {\r\n                    updateValues(value, picker.name);\r\n                }\r\n            });\r\n            pickerGrid.addControl(picker, 0, 0);\r\n\r\n            // Picker body right quarant\r\n            const pickerBodyRight: Grid = new Grid();\r\n            pickerBodyRight.name = \"Dialogue Right Half\";\r\n            pickerBodyRight.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            const pickerBodyRightRows: number[] = [0.514, 0.486];\r\n            pickerBodyRight.addRowDefinition(pickerBodyRightRows[0], false);\r\n            pickerBodyRight.addRowDefinition(pickerBodyRightRows[1], false);\r\n            dialogBody.addControl(pickerBodyRight, 1, 1);\r\n\r\n            // Picker container swatches and buttons\r\n            const pickerSwatchesButtons: Grid = new Grid();\r\n            pickerSwatchesButtons.name = \"Swatches and Buttons\";\r\n            const pickerButtonsCol: number[] = [0.417, 0.583];\r\n            pickerSwatchesButtons.addRowDefinition(1.0, false);\r\n            pickerSwatchesButtons.addColumnDefinition(pickerButtonsCol[0], false);\r\n            pickerSwatchesButtons.addColumnDefinition(pickerButtonsCol[1], false);\r\n            pickerBodyRight.addControl(pickerSwatchesButtons, 0, 0);\r\n\r\n            // Picker Swatches quadrant\r\n            const pickerSwatches: Grid = new Grid();\r\n            pickerSwatches.name = \"New and Current Swatches\";\r\n            const pickeSwatchesRows: number[] = [0.04, 0.16, 0.64, 0.16];\r\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[0], false);\r\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[1], false);\r\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[2], false);\r\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[3], false);\r\n            pickerSwatchesButtons.addControl(pickerSwatches, 0, 0);\r\n\r\n            // Active swatches\r\n            const activeSwatches: Grid = new Grid();\r\n            activeSwatches.name = \"Active Swatches\";\r\n            activeSwatches.width = 0.67;\r\n            activeSwatches.addRowDefinition(0.5, false);\r\n            activeSwatches.addRowDefinition(0.5, false);\r\n            pickerSwatches.addControl(activeSwatches, 2, 0);\r\n\r\n            const labelWidth: number = Math.floor(parseInt(options.pickerWidth) * dialogBodyCols[1] * pickerButtonsCol[0] * 0.11);\r\n            const labelHeight: number = Math.floor(parseInt(options.pickerHeight) * pickerPanelRows[1] * pickerBodyRightRows[0] * pickeSwatchesRows[1] * 0.5);\r\n\r\n            let labelTextSize: number;\r\n            if (options.pickerWidth > options.pickerHeight) {\r\n                labelTextSize = labelHeight;\r\n            } else {\r\n                labelTextSize = labelWidth;\r\n            }\r\n            // New color swatch and previous color button\r\n            const newText: TextBlock = new TextBlock();\r\n            newText.text = \"new\";\r\n            newText.name = \"New Color Label\";\r\n            newText.color = buttonColor;\r\n            newText.fontSize = labelTextSize;\r\n            pickerSwatches.addControl(newText, 1, 0);\r\n\r\n            const newSwatch = new Rectangle();\r\n            newSwatch.name = \"New Color Swatch\";\r\n            newSwatch.background = options.lastColor;\r\n            newSwatch.thickness = 0;\r\n            activeSwatches.addControl(newSwatch, 0, 0);\r\n\r\n            const currentSwatch: Button = Button.CreateSimpleButton(\"currentSwatch\", \"\");\r\n            currentSwatch.background = options.lastColor;\r\n            currentSwatch.thickness = 0;\r\n            currentSwatch.onPointerClickObservable.add(() => {\r\n                const revertColor = Color3.FromHexString(currentSwatch.background);\r\n                updateValues(revertColor, currentSwatch.name!);\r\n                editSwatches(false);\r\n            });\r\n            currentSwatch.pointerDownAnimation = () => {};\r\n            currentSwatch.pointerUpAnimation = () => {};\r\n            currentSwatch.pointerEnterAnimation = () => {};\r\n            currentSwatch.pointerOutAnimation = () => {};\r\n            activeSwatches.addControl(currentSwatch, 1, 0);\r\n\r\n            const swatchOutline: Rectangle = new Rectangle();\r\n            swatchOutline.name = \"Swatch Outline\";\r\n            swatchOutline.width = 0.67;\r\n            swatchOutline.thickness = 2;\r\n            swatchOutline.color = currentSwatchesOutlineColor;\r\n            swatchOutline.isHitTestVisible = false;\r\n            pickerSwatches.addControl(swatchOutline, 2, 0);\r\n\r\n            const currentText: TextBlock = new TextBlock();\r\n            currentText.name = \"Current Color Label\";\r\n            currentText.text = \"current\";\r\n            currentText.color = buttonColor;\r\n            currentText.fontSize = labelTextSize;\r\n            pickerSwatches.addControl(currentText, 3, 0);\r\n\r\n            // Buttons grid\r\n            const buttonGrid: Grid = new Grid();\r\n            buttonGrid.name = \"Button Grid\";\r\n            buttonGrid.height = 0.8;\r\n            const buttonGridRows: number = 1 / 3;\r\n            buttonGrid.addRowDefinition(buttonGridRows, false);\r\n            buttonGrid.addRowDefinition(buttonGridRows, false);\r\n            buttonGrid.addRowDefinition(buttonGridRows, false);\r\n            pickerSwatchesButtons.addControl(buttonGrid, 0, 1);\r\n\r\n            // Determine pixel width and height for all buttons from overall panel dimensions\r\n            const buttonWidth = Math.floor(parseInt(options.pickerWidth) * dialogBodyCols[1] * pickerButtonsCol[1] * 0.67).toString() + \"px\";\r\n            const buttonHeight =\r\n                Math.floor(\r\n                    parseInt(options.pickerHeight) * pickerPanelRows[1] * pickerBodyRightRows[0] * (parseFloat(buttonGrid.height.toString()) / 100) * buttonGridRows * 0.7\r\n                ).toString() + \"px\";\r\n\r\n            // Determine button type size\r\n            if (parseFloat(buttonWidth) > parseFloat(buttonHeight)) {\r\n                buttonFontSize = Math.floor(parseFloat(buttonHeight) * 0.45);\r\n            } else {\r\n                buttonFontSize = Math.floor(parseFloat(buttonWidth) * 0.11);\r\n            }\r\n\r\n            // Panel Buttons\r\n            const butOK: Button = Button.CreateSimpleButton(\"butOK\", \"OK\");\r\n            butOK.width = buttonWidth;\r\n            butOK.height = buttonHeight;\r\n            butOK.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n            butOK.thickness = 2;\r\n            butOK.color = buttonColor;\r\n            butOK.fontSize = buttonFontSize;\r\n            butOK.background = buttonBackgroundColor;\r\n            butOK.onPointerEnterObservable.add(() => {\r\n                butOK.background = buttonBackgroundHoverColor;\r\n            });\r\n            butOK.onPointerOutObservable.add(() => {\r\n                butOK.background = buttonBackgroundColor;\r\n            });\r\n            butOK.pointerDownAnimation = () => {\r\n                butOK.background = buttonBackgroundClickColor;\r\n            };\r\n            butOK.pointerUpAnimation = () => {\r\n                butOK.background = buttonBackgroundHoverColor;\r\n            };\r\n            butOK.onPointerClickObservable.add(() => {\r\n                editSwatches(false);\r\n                closePicker(newSwatch.background);\r\n            });\r\n            buttonGrid.addControl(butOK, 0, 0);\r\n\r\n            const butCancel: Button = Button.CreateSimpleButton(\"butCancel\", \"Cancel\");\r\n            butCancel.width = buttonWidth;\r\n            butCancel.height = buttonHeight;\r\n            butCancel.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n            butCancel.thickness = 2;\r\n            butCancel.color = buttonColor;\r\n            butCancel.fontSize = buttonFontSize;\r\n            butCancel.background = buttonBackgroundColor;\r\n            butCancel.onPointerEnterObservable.add(() => {\r\n                butCancel.background = buttonBackgroundHoverColor;\r\n            });\r\n            butCancel.onPointerOutObservable.add(() => {\r\n                butCancel.background = buttonBackgroundColor;\r\n            });\r\n            butCancel.pointerDownAnimation = () => {\r\n                butCancel.background = buttonBackgroundClickColor;\r\n            };\r\n            butCancel.pointerUpAnimation = () => {\r\n                butCancel.background = buttonBackgroundHoverColor;\r\n            };\r\n            butCancel.onPointerClickObservable.add(() => {\r\n                editSwatches(false);\r\n                closePicker(currentSwatch.background);\r\n            });\r\n            buttonGrid.addControl(butCancel, 1, 0);\r\n\r\n            if (options.savedColors) {\r\n                butSave = Button.CreateSimpleButton(\"butSave\", \"Save\");\r\n                butSave.width = buttonWidth;\r\n                butSave.height = buttonHeight;\r\n                butSave.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n                butSave.thickness = 2;\r\n                butSave.fontSize = buttonFontSize;\r\n                if (options.savedColors.length < options.swatchLimit!) {\r\n                    butSave.color = buttonColor;\r\n                    butSave.background = buttonBackgroundColor;\r\n                } else {\r\n                    disableButton(butSave, true);\r\n                }\r\n                butSave.onPointerEnterObservable.add(() => {\r\n                    if (options.savedColors) {\r\n                        if (options.savedColors.length < options.swatchLimit!) {\r\n                            butSave.background = buttonBackgroundHoverColor;\r\n                        }\r\n                    }\r\n                });\r\n                butSave.onPointerOutObservable.add(() => {\r\n                    if (options.savedColors) {\r\n                        if (options.savedColors.length < options.swatchLimit!) {\r\n                            butSave.background = buttonBackgroundColor;\r\n                        }\r\n                    }\r\n                });\r\n                butSave.pointerDownAnimation = () => {\r\n                    if (options.savedColors) {\r\n                        if (options.savedColors.length < options.swatchLimit!) {\r\n                            butSave.background = buttonBackgroundClickColor;\r\n                        }\r\n                    }\r\n                };\r\n                butSave.pointerUpAnimation = () => {\r\n                    if (options.savedColors) {\r\n                        if (options.savedColors.length < options.swatchLimit!) {\r\n                            butSave.background = buttonBackgroundHoverColor;\r\n                        }\r\n                    }\r\n                };\r\n                butSave.onPointerClickObservable.add(() => {\r\n                    if (options.savedColors) {\r\n                        if (options.savedColors.length == 0) {\r\n                            setEditButtonVisibility(true);\r\n                        }\r\n                        if (options.savedColors.length < options.swatchLimit!) {\r\n                            updateSwatches(newSwatch.background, butSave);\r\n                        }\r\n                        editSwatches(false);\r\n                    }\r\n                });\r\n                if (options.savedColors.length > 0) {\r\n                    setEditButtonVisibility(true);\r\n                }\r\n                buttonGrid.addControl(butSave, 2, 0);\r\n            }\r\n\r\n            // Picker color values input\r\n            const pickerColorValues: Grid = new Grid();\r\n            pickerColorValues.name = \"Dialog Lower Right\";\r\n            pickerColorValues.addRowDefinition(0.02, false);\r\n            pickerColorValues.addRowDefinition(0.63, false);\r\n            pickerColorValues.addRowDefinition(0.21, false);\r\n            pickerColorValues.addRowDefinition(0.14, false);\r\n            pickerBodyRight.addControl(pickerColorValues, 1, 0);\r\n\r\n            // RGB values text boxes\r\n            const currentColor = Color3.FromHexString(options.lastColor);\r\n            const rgbValuesQuadrant: Grid = new Grid();\r\n            rgbValuesQuadrant.name = \"RGB Values\";\r\n            rgbValuesQuadrant.width = 0.82;\r\n            rgbValuesQuadrant.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n            rgbValuesQuadrant.addRowDefinition(1 / 3, false);\r\n            rgbValuesQuadrant.addRowDefinition(1 / 3, false);\r\n            rgbValuesQuadrant.addRowDefinition(1 / 3, false);\r\n            rgbValuesQuadrant.addColumnDefinition(0.1, false);\r\n            rgbValuesQuadrant.addColumnDefinition(0.2, false);\r\n            rgbValuesQuadrant.addColumnDefinition(0.7, false);\r\n            pickerColorValues.addControl(rgbValuesQuadrant, 1, 0);\r\n\r\n            for (let i = 0; i < inputFieldLabels.length; i++) {\r\n                const labelText: TextBlock = new TextBlock();\r\n                labelText.text = inputFieldLabels[i];\r\n                labelText.color = buttonColor;\r\n                labelText.fontSize = buttonFontSize;\r\n                rgbValuesQuadrant.addControl(labelText, i, 0);\r\n            }\r\n\r\n            // Input fields for RGB values\r\n            const rValInt = new InputText();\r\n            rValInt.width = 0.83;\r\n            rValInt.height = 0.72;\r\n            rValInt.name = \"rIntField\";\r\n            rValInt.fontSize = buttonFontSize;\r\n            rValInt.text = (currentColor.r * 255).toString();\r\n            rValInt.color = inputTextColor;\r\n            rValInt.background = inputTextBackgroundColor;\r\n            rValInt.onFocusObservable.add(() => {\r\n                activeField = rValInt.name!;\r\n                lastVal = rValInt.text;\r\n                editSwatches(false);\r\n            });\r\n            rValInt.onBlurObservable.add(() => {\r\n                if (rValInt.text == \"\") {\r\n                    rValInt.text = \"0\";\r\n                }\r\n                updateInt(rValInt, \"r\");\r\n                if (activeField == rValInt.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            rValInt.onTextChangedObservable.add(() => {\r\n                if (activeField == rValInt.name) {\r\n                    updateInt(rValInt, \"r\");\r\n                }\r\n            });\r\n            rgbValuesQuadrant.addControl(rValInt, 0, 1);\r\n\r\n            const gValInt = new InputText();\r\n            gValInt.width = 0.83;\r\n            gValInt.height = 0.72;\r\n            gValInt.name = \"gIntField\";\r\n            gValInt.fontSize = buttonFontSize;\r\n            gValInt.text = (currentColor.g * 255).toString();\r\n            gValInt.color = inputTextColor;\r\n            gValInt.background = inputTextBackgroundColor;\r\n            gValInt.onFocusObservable.add(() => {\r\n                activeField = gValInt.name!;\r\n                lastVal = gValInt.text;\r\n                editSwatches(false);\r\n            });\r\n            gValInt.onBlurObservable.add(() => {\r\n                if (gValInt.text == \"\") {\r\n                    gValInt.text = \"0\";\r\n                }\r\n                updateInt(gValInt, \"g\");\r\n                if (activeField == gValInt.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            gValInt.onTextChangedObservable.add(() => {\r\n                if (activeField == gValInt.name) {\r\n                    updateInt(gValInt, \"g\");\r\n                }\r\n            });\r\n            rgbValuesQuadrant.addControl(gValInt, 1, 1);\r\n\r\n            const bValInt = new InputText();\r\n            bValInt.width = 0.83;\r\n            bValInt.height = 0.72;\r\n            bValInt.name = \"bIntField\";\r\n            bValInt.fontSize = buttonFontSize;\r\n            bValInt.text = (currentColor.b * 255).toString();\r\n            bValInt.color = inputTextColor;\r\n            bValInt.background = inputTextBackgroundColor;\r\n            bValInt.onFocusObservable.add(() => {\r\n                activeField = bValInt.name!;\r\n                lastVal = bValInt.text;\r\n                editSwatches(false);\r\n            });\r\n            bValInt.onBlurObservable.add(() => {\r\n                if (bValInt.text == \"\") {\r\n                    bValInt.text = \"0\";\r\n                }\r\n                updateInt(bValInt, \"b\");\r\n                if (activeField == bValInt.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            bValInt.onTextChangedObservable.add(() => {\r\n                if (activeField == bValInt.name) {\r\n                    updateInt(bValInt, \"b\");\r\n                }\r\n            });\r\n            rgbValuesQuadrant.addControl(bValInt, 2, 1);\r\n\r\n            const rValDec = new InputText();\r\n            rValDec.width = 0.95;\r\n            rValDec.height = 0.72;\r\n            rValDec.name = \"rDecField\";\r\n            rValDec.fontSize = buttonFontSize;\r\n            rValDec.text = currentColor.r.toString();\r\n            rValDec.color = inputTextColor;\r\n            rValDec.background = inputTextBackgroundColor;\r\n            rValDec.onFocusObservable.add(() => {\r\n                activeField = rValDec.name!;\r\n                lastVal = rValDec.text;\r\n                editSwatches(false);\r\n            });\r\n            rValDec.onBlurObservable.add(() => {\r\n                if (parseFloat(rValDec.text) == 0 || rValDec.text == \"\") {\r\n                    rValDec.text = \"0\";\r\n                    updateFloat(rValDec, \"r\");\r\n                }\r\n                if (activeField == rValDec.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            rValDec.onTextChangedObservable.add(() => {\r\n                if (activeField == rValDec.name) {\r\n                    updateFloat(rValDec, \"r\");\r\n                }\r\n            });\r\n            rgbValuesQuadrant.addControl(rValDec, 0, 2);\r\n\r\n            const gValDec = new InputText();\r\n            gValDec.width = 0.95;\r\n            gValDec.height = 0.72;\r\n            gValDec.name = \"gDecField\";\r\n            gValDec.fontSize = buttonFontSize;\r\n            gValDec.text = currentColor.g.toString();\r\n            gValDec.color = inputTextColor;\r\n            gValDec.background = inputTextBackgroundColor;\r\n            gValDec.onFocusObservable.add(() => {\r\n                activeField = gValDec.name!;\r\n                lastVal = gValDec.text;\r\n                editSwatches(false);\r\n            });\r\n            gValDec.onBlurObservable.add(() => {\r\n                if (parseFloat(gValDec.text) == 0 || gValDec.text == \"\") {\r\n                    gValDec.text = \"0\";\r\n                    updateFloat(gValDec, \"g\");\r\n                }\r\n                if (activeField == gValDec.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            gValDec.onTextChangedObservable.add(() => {\r\n                if (activeField == gValDec.name) {\r\n                    updateFloat(gValDec, \"g\");\r\n                }\r\n            });\r\n            rgbValuesQuadrant.addControl(gValDec, 1, 2);\r\n\r\n            const bValDec = new InputText();\r\n            bValDec.width = 0.95;\r\n            bValDec.height = 0.72;\r\n            bValDec.name = \"bDecField\";\r\n            bValDec.fontSize = buttonFontSize;\r\n            bValDec.text = currentColor.b.toString();\r\n            bValDec.color = inputTextColor;\r\n            bValDec.background = inputTextBackgroundColor;\r\n            bValDec.onFocusObservable.add(() => {\r\n                activeField = bValDec.name!;\r\n                lastVal = bValDec.text;\r\n                editSwatches(false);\r\n            });\r\n            bValDec.onBlurObservable.add(() => {\r\n                if (parseFloat(bValDec.text) == 0 || bValDec.text == \"\") {\r\n                    bValDec.text = \"0\";\r\n                    updateFloat(bValDec, \"b\");\r\n                }\r\n                if (activeField == bValDec.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            bValDec.onTextChangedObservable.add(() => {\r\n                if (activeField == bValDec.name) {\r\n                    updateFloat(bValDec, \"b\");\r\n                }\r\n            });\r\n            rgbValuesQuadrant.addControl(bValDec, 2, 2);\r\n\r\n            // Hex value input\r\n            const hexValueQuadrant: Grid = new Grid();\r\n            hexValueQuadrant.name = \"Hex Value\";\r\n            hexValueQuadrant.width = 0.82;\r\n            hexValueQuadrant.addRowDefinition(1.0, false);\r\n            hexValueQuadrant.addColumnDefinition(0.1, false);\r\n            hexValueQuadrant.addColumnDefinition(0.9, false);\r\n            pickerColorValues.addControl(hexValueQuadrant, 2, 0);\r\n\r\n            const labelText: TextBlock = new TextBlock();\r\n            labelText.text = \"#\";\r\n            labelText.color = buttonColor;\r\n            labelText.fontSize = buttonFontSize;\r\n            hexValueQuadrant.addControl(labelText, 0, 0);\r\n\r\n            const hexVal = new InputText();\r\n            hexVal.width = 0.96;\r\n            hexVal.height = 0.72;\r\n            hexVal.name = \"hexField\";\r\n            hexVal.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n            hexVal.fontSize = buttonFontSize;\r\n            const minusPound = options.lastColor.split(\"#\");\r\n            hexVal.text = minusPound[1];\r\n            hexVal.color = inputTextColor;\r\n            hexVal.background = inputTextBackgroundColor;\r\n            hexVal.onFocusObservable.add(() => {\r\n                activeField = hexVal.name!;\r\n                lastVal = hexVal.text;\r\n                editSwatches(false);\r\n            });\r\n            hexVal.onBlurObservable.add(() => {\r\n                if (hexVal.text.length == 3) {\r\n                    const val = hexVal.text.split(\"\");\r\n                    hexVal.text = val[0] + val[0] + val[1] + val[1] + val[2] + val[2];\r\n                }\r\n                if (hexVal.text == \"\") {\r\n                    hexVal.text = \"000000\";\r\n                    updateValues(Color3.FromHexString(hexVal.text), \"b\");\r\n                }\r\n                if (activeField == hexVal.name) {\r\n                    activeField = \"\";\r\n                }\r\n            });\r\n            hexVal.onTextChangedObservable.add(() => {\r\n                let newHexValue: string = hexVal.text;\r\n                const checkHex: boolean = /[^0-9A-F]/i.test(newHexValue);\r\n                if ((hexVal.text.length > 6 || checkHex) && activeField == hexVal.name) {\r\n                    hexVal.text = lastVal;\r\n                } else {\r\n                    if (hexVal.text.length < 6) {\r\n                        const leadingZero: number = 6 - hexVal.text.length;\r\n                        for (let i = 0; i < leadingZero; i++) {\r\n                            newHexValue = \"0\" + newHexValue;\r\n                        }\r\n                    }\r\n                    if (hexVal.text.length == 3) {\r\n                        const val: string[] = hexVal.text.split(\"\");\r\n                        newHexValue = val[0] + val[0] + val[1] + val[1] + val[2] + val[2];\r\n                    }\r\n                    newHexValue = \"#\" + newHexValue;\r\n                    if (activeField == hexVal.name) {\r\n                        lastVal = hexVal.text;\r\n                        updateValues(Color3.FromHexString(newHexValue), hexVal.name);\r\n                    }\r\n                }\r\n            });\r\n            hexValueQuadrant.addControl(hexVal, 0, 1);\r\n\r\n            if (options.savedColors && options.savedColors.length > 0) {\r\n                updateSwatches(\"\", butSave!);\r\n            }\r\n\r\n            /**\r\n             * Will update all values for InputText and ColorPicker controls based on the BABYLON.Color3 passed to this function.\r\n             * Each InputText control and the ColorPicker control will be tested to see if they are the activeField and if they\r\n             * are will receive no update. This is to prevent the input from the user being overwritten.\r\n             * @param value\r\n             * @param inputField\r\n             */\r\n            function updateValues(value: Color3, inputField: string) {\r\n                activeField = inputField;\r\n                const pickedColor: string = value.toHexString();\r\n                newSwatch.background = pickedColor;\r\n                if (rValInt.name != activeField) {\r\n                    rValInt.text = Math.floor(value.r * 255).toString();\r\n                }\r\n                if (gValInt.name != activeField) {\r\n                    gValInt.text = Math.floor(value.g * 255).toString();\r\n                }\r\n                if (bValInt.name != activeField) {\r\n                    bValInt.text = Math.floor(value.b * 255).toString();\r\n                }\r\n                if (rValDec.name != activeField) {\r\n                    rValDec.text = value.r.toString();\r\n                }\r\n                if (gValDec.name != activeField) {\r\n                    gValDec.text = value.g.toString();\r\n                }\r\n                if (bValDec.name != activeField) {\r\n                    bValDec.text = value.b.toString();\r\n                }\r\n                if (hexVal.name != activeField) {\r\n                    const minusPound: string[] = pickedColor.split(\"#\");\r\n                    hexVal.text = minusPound[1];\r\n                }\r\n                if (picker.name != activeField) {\r\n                    picker.value = value;\r\n                }\r\n            }\r\n\r\n            // When the user enters an integer for R, G, or B we check to make sure it is a valid number and replace if not.\r\n            function updateInt(field: InputText, channel: string) {\r\n                let newValue: string = field.text;\r\n                const checkVal: boolean = /[^0-9]/g.test(newValue);\r\n                if (checkVal) {\r\n                    field.text = lastVal;\r\n                    return;\r\n                } else {\r\n                    if (newValue != \"\") {\r\n                        if (Math.floor(parseInt(newValue)) < 0) {\r\n                            newValue = \"0\";\r\n                        } else if (Math.floor(parseInt(newValue)) > 255) {\r\n                            newValue = \"255\";\r\n                        } else if (isNaN(parseInt(newValue))) {\r\n                            newValue = \"0\";\r\n                        }\r\n                    }\r\n                    if (activeField == field.name) {\r\n                        lastVal = newValue;\r\n                    }\r\n                }\r\n                if (newValue != \"\") {\r\n                    newValue = parseInt(newValue).toString();\r\n                    field.text = newValue;\r\n                    const newSwatchRGB: Color3 = Color3.FromHexString(newSwatch.background);\r\n                    if (activeField == field.name) {\r\n                        if (channel == \"r\") {\r\n                            updateValues(new Color3(parseInt(newValue) / 255, newSwatchRGB.g, newSwatchRGB.b), field.name);\r\n                        } else if (channel == \"g\") {\r\n                            updateValues(new Color3(newSwatchRGB.r, parseInt(newValue) / 255, newSwatchRGB.b), field.name);\r\n                        } else {\r\n                            updateValues(new Color3(newSwatchRGB.r, newSwatchRGB.g, parseInt(newValue) / 255), field.name);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // When the user enters a float for R, G, or B we check to make sure it is a valid number and replace if not.\r\n            function updateFloat(field: InputText, channel: string) {\r\n                let newValue: string = field.text;\r\n                const checkVal: boolean = /[^0-9.]/g.test(newValue);\r\n                if (checkVal) {\r\n                    field.text = lastVal;\r\n                    return;\r\n                } else {\r\n                    if (newValue != \"\" && newValue != \".\" && parseFloat(newValue) != 0) {\r\n                        if (parseFloat(newValue) < 0.0) {\r\n                            newValue = \"0.0\";\r\n                        } else if (parseFloat(newValue) > 1.0) {\r\n                            newValue = \"1.0\";\r\n                        } else if (isNaN(parseFloat(newValue))) {\r\n                            newValue = \"0.0\";\r\n                        }\r\n                    }\r\n                    if (activeField == field.name) {\r\n                        lastVal = newValue;\r\n                    }\r\n                }\r\n                if (newValue != \"\" && newValue != \".\" && parseFloat(newValue) != 0) {\r\n                    newValue = parseFloat(newValue).toString();\r\n                    field.text = newValue;\r\n                } else {\r\n                    newValue = \"0.0\";\r\n                }\r\n                const newSwatchRGB = Color3.FromHexString(newSwatch.background);\r\n                if (activeField == field.name) {\r\n                    if (channel == \"r\") {\r\n                        updateValues(new Color3(parseFloat(newValue), newSwatchRGB.g, newSwatchRGB.b), field.name);\r\n                    } else if (channel == \"g\") {\r\n                        updateValues(new Color3(newSwatchRGB.r, parseFloat(newValue), newSwatchRGB.b), field.name);\r\n                    } else {\r\n                        updateValues(new Color3(newSwatchRGB.r, newSwatchRGB.g, parseFloat(newValue)), field.name);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Removes the current index from the savedColors array. Drawer can then be regenerated.\r\n            function deleteSwatch(index: number) {\r\n                if (options.savedColors) {\r\n                    options.savedColors.splice(index, 1);\r\n                }\r\n                if (options.savedColors && options.savedColors.length == 0) {\r\n                    setEditButtonVisibility(false);\r\n                    editSwatchMode = false;\r\n                }\r\n            }\r\n\r\n            // Creates and styles an individual swatch when updateSwatches is called.\r\n            function createSwatch() {\r\n                if (options.savedColors && options.savedColors[swatchNumber]) {\r\n                    let icon: string;\r\n                    if (editSwatchMode) {\r\n                        icon = \"b\";\r\n                    } else {\r\n                        icon = \"\";\r\n                    }\r\n                    const swatch: Button = Button.CreateSimpleButton(\"Swatch_\" + swatchNumber, icon);\r\n                    swatch.fontFamily = \"coreglyphs\";\r\n                    const swatchColor: Color3 = Color3.FromHexString(options.savedColors[swatchNumber]);\r\n                    const swatchLuminence: number = swatchColor.r + swatchColor.g + swatchColor.b;\r\n\r\n                    // Set color of outline and textBlock based on luminance of the color swatch so feedback always visible\r\n                    if (swatchLuminence > luminanceLimit) {\r\n                        swatch.color = iconColorDark;\r\n                    } else {\r\n                        swatch.color = iconColorLight;\r\n                    }\r\n                    swatch.fontSize = Math.floor(swatchSize * 0.7);\r\n                    swatch.textBlock!.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n                    swatch.height = swatch.width = swatchSize.toString() + \"px\";\r\n                    swatch.background = options.savedColors[swatchNumber];\r\n                    swatch.thickness = 2;\r\n                    const metadata = swatchNumber;\r\n                    swatch.pointerDownAnimation = () => {\r\n                        swatch.thickness = 4;\r\n                    };\r\n                    swatch.pointerUpAnimation = () => {\r\n                        swatch.thickness = 3;\r\n                    };\r\n                    swatch.pointerEnterAnimation = () => {\r\n                        swatch.thickness = 3;\r\n                    };\r\n                    swatch.pointerOutAnimation = () => {\r\n                        swatch.thickness = 2;\r\n                    };\r\n                    swatch.onPointerClickObservable.add(() => {\r\n                        if (!editSwatchMode) {\r\n                            if (options.savedColors) {\r\n                                updateValues(Color3.FromHexString(options.savedColors[metadata]), swatch.name!);\r\n                            }\r\n                        } else {\r\n                            deleteSwatch(metadata);\r\n                            updateSwatches(\"\", butSave);\r\n                        }\r\n                    });\r\n                    return swatch;\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            // Mode switch to render button text and close symbols on swatch controls\r\n            function editSwatches(mode?: boolean) {\r\n                if (mode !== undefined) {\r\n                    editSwatchMode = mode;\r\n                }\r\n                let thisButton: Button;\r\n                if (editSwatchMode) {\r\n                    for (let i = 0; i < swatchDrawer.children.length; i++) {\r\n                        thisButton = swatchDrawer.children[i] as Button;\r\n                        thisButton.textBlock!.text = \"b\";\r\n                    }\r\n                    if (butEdit !== undefined) {\r\n                        butEdit.textBlock!.text = \"Done\";\r\n                    }\r\n                } else {\r\n                    for (let i = 0; i < swatchDrawer.children.length; i++) {\r\n                        thisButton = swatchDrawer.children[i] as Button;\r\n                        thisButton.textBlock!.text = \"\";\r\n                    }\r\n                    if (butEdit !== undefined) {\r\n                        butEdit.textBlock!.text = \"Edit\";\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n             * When Save Color button is pressed this function will first create a swatch drawer if one is not already\r\n             * made. Then all controls are removed from the drawer and we step through the savedColors array and\r\n             * creates one swatch per color. It will also set the height of the drawer control based on how many\r\n             * saved colors there are and how many can be stored per row.\r\n             * @param color\r\n             * @param button\r\n             */\r\n            function updateSwatches(color: string, button: Button) {\r\n                if (options.savedColors) {\r\n                    if (color != \"\") {\r\n                        options.savedColors.push(color);\r\n                    }\r\n                    swatchNumber = 0;\r\n                    swatchDrawer.clearControls();\r\n                    const rowCount: number = Math.ceil(options.savedColors.length / options.numSwatchesPerLine!);\r\n                    let gutterCount: number;\r\n                    if (rowCount == 0) {\r\n                        gutterCount = 0;\r\n                    } else {\r\n                        gutterCount = rowCount + 1;\r\n                    }\r\n                    if (swatchDrawer.rowCount != rowCount + gutterCount) {\r\n                        const currentRows: number = swatchDrawer.rowCount;\r\n                        for (let i = 0; i < currentRows; i++) {\r\n                            swatchDrawer.removeRowDefinition(0);\r\n                        }\r\n                        for (let i = 0; i < rowCount + gutterCount; i++) {\r\n                            if (i % 2) {\r\n                                swatchDrawer.addRowDefinition(swatchSize, true);\r\n                            } else {\r\n                                swatchDrawer.addRowDefinition(gutterSize, true);\r\n                            }\r\n                        }\r\n                    }\r\n                    swatchDrawer.height = (swatchSize * rowCount + gutterCount * gutterSize).toString() + \"px\";\r\n\r\n                    for (let y = 1, thisRow = 1; y < rowCount + gutterCount; y += 2, thisRow++) {\r\n                        // Determine number of buttons to create per row based on the button limit per row and number of saved colors\r\n                        let totalButtonsThisRow: number;\r\n                        if (options.savedColors.length > thisRow * options.numSwatchesPerLine!) {\r\n                            totalButtonsThisRow = options.numSwatchesPerLine!;\r\n                        } else {\r\n                            totalButtonsThisRow = options.savedColors.length - (thisRow - 1) * options.numSwatchesPerLine!;\r\n                        }\r\n                        const buttonIterations: number = Math.min(Math.max(totalButtonsThisRow, 0), options.numSwatchesPerLine!);\r\n                        for (let x = 0, w = 1; x < buttonIterations; x++) {\r\n                            if (x > options.numSwatchesPerLine!) {\r\n                                continue;\r\n                            }\r\n                            const swatch: Button | null = createSwatch();\r\n                            if (swatch != null) {\r\n                                swatchDrawer.addControl(swatch, y, w);\r\n                                w += 2;\r\n                                swatchNumber++;\r\n                            } else {\r\n                                continue;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (options.savedColors.length >= options.swatchLimit!) {\r\n                        disableButton(button, true);\r\n                    } else {\r\n                        disableButton(button, false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Shows or hides edit swatches button depending on if there are saved swatches\r\n            function setEditButtonVisibility(enableButton: boolean) {\r\n                if (enableButton) {\r\n                    butEdit = Button.CreateSimpleButton(\"butEdit\", \"Edit\");\r\n                    butEdit.width = buttonWidth;\r\n                    butEdit.height = buttonHeight;\r\n                    butEdit.left = Math.floor(parseInt(buttonWidth) * 0.1).toString() + \"px\";\r\n                    butEdit.top = (parseFloat(butEdit.left) * -1).toString() + \"px\";\r\n                    butEdit.verticalAlignment = Control.VERTICAL_ALIGNMENT_BOTTOM;\r\n                    butEdit.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n                    butEdit.thickness = 2;\r\n                    butEdit.color = buttonColor;\r\n                    butEdit.fontSize = buttonFontSize;\r\n                    butEdit.background = buttonBackgroundColor;\r\n                    butEdit.onPointerEnterObservable.add(() => {\r\n                        butEdit.background = buttonBackgroundHoverColor;\r\n                    });\r\n                    butEdit.onPointerOutObservable.add(() => {\r\n                        butEdit.background = buttonBackgroundColor;\r\n                    });\r\n                    butEdit.pointerDownAnimation = () => {\r\n                        butEdit.background = buttonBackgroundClickColor;\r\n                    };\r\n                    butEdit.pointerUpAnimation = () => {\r\n                        butEdit.background = buttonBackgroundHoverColor;\r\n                    };\r\n                    butEdit.onPointerClickObservable.add(() => {\r\n                        if (editSwatchMode) {\r\n                            editSwatchMode = false;\r\n                        } else {\r\n                            editSwatchMode = true;\r\n                        }\r\n                        editSwatches();\r\n                    });\r\n                    pickerGrid.addControl(butEdit, 1, 0);\r\n                } else {\r\n                    pickerGrid.removeControl(butEdit);\r\n                }\r\n            }\r\n\r\n            // Called when the user hits the limit of saved colors in the drawer.\r\n            function disableButton(button: Button, disabled: boolean) {\r\n                if (disabled) {\r\n                    button.color = buttonDisabledColor;\r\n                    button.background = buttonDisabledBackgroundColor;\r\n                } else {\r\n                    button.color = buttonColor;\r\n                    button.background = buttonBackgroundColor;\r\n                }\r\n            }\r\n\r\n            // Passes last chosen color back to scene and kills dialog by removing from AdvancedDynamicTexture\r\n            function closePicker(color: string) {\r\n                if (options.savedColors && options.savedColors.length > 0) {\r\n                    resolve({\r\n                        savedColors: options.savedColors,\r\n                        pickedColor: color,\r\n                    });\r\n                } else {\r\n                    resolve({\r\n                        pickedColor: color,\r\n                    });\r\n                }\r\n                advancedTexture.removeControl(dialogContainer);\r\n            }\r\n        });\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.ColorPicker\", ColorPicker);\r\n", "import { Container } from \"./container\";\r\nimport { Control } from \"./control\";\r\nimport type { Measure } from \"../measure\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/** Class used to create 2D ellipse containers */\r\nexport class Ellipse extends Container {\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness */\r\n    @serialize()\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Ellipse\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Ellipse\";\r\n    }\r\n\r\n    protected _localDraw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        Control.drawEllipse(\r\n            this._currentMeasure.left + this._currentMeasure.width / 2,\r\n            this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2 - this._thickness / 2,\r\n            this._currentMeasure.height / 2 - this._thickness / 2,\r\n            context\r\n        );\r\n\r\n        if (this._backgroundGradient || this._background) {\r\n            context.fillStyle = this._getBackgroundColor(context);\r\n\r\n            context.fill();\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        if (this._thickness) {\r\n            if (this.color) {\r\n                context.strokeStyle = this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.stroke();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    protected _clipForChildren(context: ICanvasRenderingContext) {\r\n        Control.drawEllipse(\r\n            this._currentMeasure.left + this._currentMeasure.width / 2,\r\n            this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2,\r\n            this._currentMeasure.height / 2,\r\n            context\r\n        );\r\n\r\n        context.clip();\r\n    }\r\n\r\n    public _renderHighlightSpecific(context: ICanvasRenderingContext): void {\r\n        Control.drawEllipse(\r\n            this._currentMeasure.left + this._currentMeasure.width / 2,\r\n            this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2 - this._highlightLineWidth / 2,\r\n            this._currentMeasure.height / 2 - this._highlightLineWidth / 2,\r\n            context\r\n        );\r\n        context.stroke();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Ellipse\", Ellipse);\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Button } from \"./button\";\r\nimport type { Control } from \"./control\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport type { IFocusableControl } from \"./focusableControl\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { IKeyboardEvent } from \"core/Events/deviceInputEvents\";\r\n\r\n/**\r\n * Class used to create a focusable button that can easily handle keyboard events\r\n * @since 5.0.0\r\n */\r\nexport class FocusableButton extends Button implements IFocusableControl {\r\n    /** Highlight color when button is focused */\r\n    public focusedColor: Nullable<string> = null;\r\n    private _isFocused = false;\r\n    private _unfocusedColor: Nullable<string> = null;\r\n\r\n    /** Observable raised when the control gets the focus */\r\n    public onFocusObservable = new Observable<Button>();\r\n    /** Observable raised when the control loses the focus */\r\n    public onBlurObservable = new Observable<Button>();\r\n    /** Observable raised when a key event was processed */\r\n    public onKeyboardEventProcessedObservable = new Observable<IKeyboardEvent>();\r\n\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this._unfocusedColor = this.color;\r\n    }\r\n\r\n    /** @internal */\r\n    public onBlur(): void {\r\n        if (this._isFocused) {\r\n            this._isFocused = false;\r\n            if (this.focusedColor && this._unfocusedColor != null) {\r\n                // Set color back to saved unfocused color\r\n                this.color = this._unfocusedColor;\r\n            }\r\n            this.onBlurObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public onFocus(): void {\r\n        this._isFocused = true;\r\n\r\n        if (this.focusedColor) {\r\n            // Save the unfocused color\r\n            this._unfocusedColor = this.color;\r\n            this.color = this.focusedColor;\r\n        }\r\n        this.onFocusObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Function called to get the list of controls that should not steal the focus from this control\r\n     * @returns an array of controls\r\n     */\r\n    public keepsFocusWith(): Nullable<Control[]> {\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Function to focus a button programmatically\r\n     */\r\n    public focus() {\r\n        this._host.moveFocusToControl(this);\r\n    }\r\n\r\n    /**\r\n     * Function to unfocus a button programmatically\r\n     */\r\n    public blur() {\r\n        this._host.focusedControl = null;\r\n    }\r\n\r\n    /**\r\n     * Handles the keyboard event\r\n     * @param evt Defines the KeyboardEvent\r\n     */\r\n    public processKeyboard(evt: IKeyboardEvent): void {\r\n        this.onKeyboardEventProcessedObservable.notifyObservers(evt, -1, this);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!this.isReadOnly) {\r\n            // Clicking on button should focus\r\n            this.focus();\r\n        }\r\n\r\n        return super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi);\r\n    }\r\n\r\n    /** @internal */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this.onBlurObservable.clear();\r\n        this.onFocusObservable.clear();\r\n        this.onKeyboardEventProcessedObservable.clear();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.FocusableButton\", FocusableButton);\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport type { VirtualKeyboard } from \"./virtualKeyboard\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { Measure } from \"../measure\";\r\nimport { InputText } from \"./inputText\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport type { PointerInfo, PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport type { IKeyboardEvent } from \"core/Events/deviceInputEvents\";\r\n\r\nimport { serialize } from \"core/Misc/decorators\";\r\n\r\n/**\r\n * Class used to create input text control\r\n */\r\nexport class InputTextArea extends InputText {\r\n    private _textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n    private _textVerticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n    private _prevText: string = this.text;\r\n\r\n    private _lines: any[];\r\n    private _lineSpacing: ValueAndUnit = new ValueAndUnit(0);\r\n    private _maxHeight = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n\r\n    private _clipTextTop: number;\r\n    private _clipTextLeft: number;\r\n\r\n    private _cursorInfo: { globalStartIndex: number; globalEndIndex: number; relativeStartIndex: number; relativeEndIndex: number; currentLineIndex: number };\r\n    private _highlightCursorInfo: { initialStartIndex: number; initialRelativeStartIndex: number; initialLineIndex: number };\r\n\r\n    /**\r\n     * An event triggered after the text was broken up into lines\r\n     */\r\n    public onLinesReadyObservable = new Observable<InputTextArea>();\r\n\r\n    /** @internal */\r\n    public _connectedVirtualKeyboard: Nullable<VirtualKeyboard>;\r\n    private _contextForBreakLines: ICanvasRenderingContext;\r\n    private _clickedCoordinateX: Nullable<number>;\r\n    private _clickedCoordinateY: Nullable<number>;\r\n\r\n    private _availableWidth: number;\r\n    private _availableHeight: number;\r\n\r\n    private _scrollTop: Nullable<number>;\r\n\r\n    private _autoStretchHeight: boolean;\r\n\r\n    /** Gets or sets a boolean indicating if the control can auto stretch its height to adapt to the text */\r\n    @serialize()\r\n    public get autoStretchHeight(): boolean {\r\n        return this._autoStretchHeight;\r\n    }\r\n\r\n    public set autoStretchHeight(value: boolean) {\r\n        if (this._autoStretchHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoStretchHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    public set height(value: string | number) {\r\n        this.fixedRatioMasterIsWidth = false;\r\n\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n\r\n        this._autoStretchHeight = false;\r\n    }\r\n\r\n    @serialize()\r\n    public get maxHeight(): string | number {\r\n        return this._maxHeight.toString(this._host);\r\n    }\r\n\r\n    /** Gets the maximum width allowed by the control in pixels */\r\n    public get maxHeightInPixels(): number {\r\n        return this._maxHeight.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set maxHeight(value: string | number) {\r\n        if (this._maxHeight.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._maxHeight.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new InputTextArea\r\n     * @param name defines the control name\r\n     * @param text defines the text of the control\r\n     */\r\n    constructor(\r\n        public name?: string,\r\n        text: string = \"\"\r\n    ) {\r\n        super(name);\r\n\r\n        this.text = text;\r\n\r\n        this.isPointerBlocker = true;\r\n\r\n        this.onLinesReadyObservable.add(() => this._updateCursorPosition());\r\n\r\n        this._highlightCursorInfo = {\r\n            initialStartIndex: -1,\r\n            initialRelativeStartIndex: -1,\r\n            initialLineIndex: -1,\r\n        };\r\n\r\n        this._cursorInfo = {\r\n            globalStartIndex: 0,\r\n            globalEndIndex: 0,\r\n            relativeEndIndex: 0,\r\n            relativeStartIndex: 0,\r\n            currentLineIndex: 0,\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"InputTextArea\";\r\n    }\r\n\r\n    /**\r\n     * Handles the keyboard event\r\n     * @param evt Defines the KeyboardEvent\r\n     */\r\n    public processKeyboard(evt: IKeyboardEvent): void {\r\n        if (this.isReadOnly) {\r\n            return;\r\n        }\r\n\r\n        // process pressed key\r\n        this.alternativeProcessKey(evt.code, evt.key, evt);\r\n\r\n        this.onKeyboardEventProcessedObservable.notifyObservers(evt);\r\n    }\r\n\r\n    /**\r\n     * Process the last keyboard input\r\n     *\r\n     * @param code The ascii input number\r\n     * @param key The key string representation\r\n     * @param evt The keyboard event emits with input\r\n     * @internal\r\n     */\r\n    public alternativeProcessKey(code: string, key?: string, evt?: IKeyboardEvent) {\r\n        //return if clipboard event keys (i.e -ctr/cmd + c,v,x)\r\n        if (evt && (evt.ctrlKey || evt.metaKey) && (code === \"KeyC\" || code === \"KeyV\" || code === \"KeyX\")) {\r\n            return;\r\n        }\r\n\r\n        // Specific cases\r\n        switch (code) {\r\n            case \"KeyA\": // A - select all\r\n                if (evt && (evt.ctrlKey || evt.metaKey)) {\r\n                    this._selectAllText();\r\n                    evt.preventDefault();\r\n                    return;\r\n                }\r\n                break;\r\n            case \"Period\": //SLASH\r\n                if (evt && evt.shiftKey) {\r\n                    evt.preventDefault();\r\n                }\r\n                break;\r\n            case \"Backspace\": // BACKSPACE\r\n                if (!this._isTextHighlightOn && this._cursorInfo.globalStartIndex > 0) {\r\n                    this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n                    this._cursorInfo.globalStartIndex--;\r\n                }\r\n                this._prevText = this._textWrapper.text;\r\n                this._textWrapper.removePart(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex);\r\n\r\n                this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n\r\n                if (evt) {\r\n                    evt.preventDefault();\r\n                }\r\n\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n\r\n                this._textHasChanged();\r\n                break;\r\n            case \"Delete\": // DELETE\r\n                if (!this._isTextHighlightOn && this._cursorInfo.globalEndIndex < this.text.length) {\r\n                    this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex + 1;\r\n                }\r\n                this._prevText = this._textWrapper.text;\r\n                this._textWrapper.removePart(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex);\r\n\r\n                this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n\r\n                if (evt) {\r\n                    evt.preventDefault();\r\n                }\r\n\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n\r\n                this._textHasChanged();\r\n                break;\r\n            case \"Enter\": // RETURN\r\n                this._prevText = this._textWrapper.text;\r\n                this._textWrapper.removePart(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex, \"\\n\");\r\n                this._cursorInfo.globalStartIndex++;\r\n                this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n\r\n                this._textHasChanged();\r\n                return;\r\n            case \"End\": // END\r\n                this._cursorInfo.globalStartIndex = this.text.length;\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case \"Home\": // HOME\r\n                this._cursorInfo.globalStartIndex = 0;\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case \"ArrowLeft\": // LEFT\r\n                this._markAsDirty();\r\n\r\n                if (evt && evt.shiftKey) {\r\n                    // shift + ctrl/cmd + <-\r\n                    if (evt.ctrlKey || evt.metaKey) {\r\n                        // Go to line's start by substract the relativeStartIndex to the globalStartIndex\r\n                        this._cursorInfo.globalStartIndex -= this._cursorInfo.relativeStartIndex;\r\n                        this._cursorInfo.globalEndIndex = this._highlightCursorInfo.initialStartIndex;\r\n                    }\r\n                    // store the starting point\r\n                    if (!this._isTextHighlightOn) {\r\n                        this._highlightCursorInfo.initialLineIndex = this._cursorInfo.currentLineIndex;\r\n                        this._highlightCursorInfo.initialStartIndex = this._cursorInfo.globalStartIndex;\r\n                        this._highlightCursorInfo.initialRelativeStartIndex = this._cursorInfo.relativeStartIndex;\r\n\r\n                        this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n                        this._cursorInfo.globalStartIndex--;\r\n                        this._isTextHighlightOn = true;\r\n                    } else {\r\n                        if (this._cursorInfo.globalEndIndex > this._highlightCursorInfo.initialStartIndex) {\r\n                            this._cursorInfo.globalEndIndex--;\r\n                        } else {\r\n                            this._cursorInfo.globalStartIndex--;\r\n                        }\r\n                    }\r\n                    this._blinkIsEven = true;\r\n                    evt.preventDefault();\r\n                    return;\r\n                }\r\n\r\n                if (this._isTextHighlightOn) {\r\n                    this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n                } else if (evt && (evt.ctrlKey || evt.metaKey)) {\r\n                    // ctr + <-\r\n                    this._cursorInfo.globalStartIndex -= this._cursorInfo.relativeStartIndex;\r\n                    evt.preventDefault();\r\n                } else if (this._cursorInfo.globalStartIndex > 0) {\r\n                    this._cursorInfo.globalStartIndex--;\r\n                }\r\n\r\n                // update the cursor\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n                return;\r\n            case \"ArrowRight\": // RIGHT\r\n                this._markAsDirty();\r\n\r\n                if (evt && evt.shiftKey) {\r\n                    // shift + ctrl/cmd + ->\r\n                    if (evt.ctrlKey || evt.metaKey) {\r\n                        const rightDelta = this._lines[this._cursorInfo.currentLineIndex].text.length - this._cursorInfo.relativeEndIndex - 1;\r\n                        this._cursorInfo.globalEndIndex += rightDelta;\r\n                        this._cursorInfo.globalStartIndex = this._highlightCursorInfo.initialStartIndex;\r\n                    }\r\n                    // store the starting point\r\n                    if (!this._isTextHighlightOn) {\r\n                        this._highlightCursorInfo.initialLineIndex = this._cursorInfo.currentLineIndex;\r\n                        this._highlightCursorInfo.initialStartIndex = this._cursorInfo.globalStartIndex;\r\n                        this._highlightCursorInfo.initialRelativeStartIndex = this._cursorInfo.relativeStartIndex;\r\n\r\n                        this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n                        this._cursorInfo.globalEndIndex++;\r\n                        this._isTextHighlightOn = true;\r\n                    } else {\r\n                        if (this._cursorInfo.globalStartIndex < this._highlightCursorInfo.initialStartIndex) {\r\n                            this._cursorInfo.globalStartIndex++;\r\n                        } else {\r\n                            this._cursorInfo.globalEndIndex++;\r\n                        }\r\n                    }\r\n                    this._blinkIsEven = true;\r\n                    evt.preventDefault();\r\n                    return;\r\n                }\r\n                if (this._isTextHighlightOn) {\r\n                    this._cursorInfo.globalStartIndex = this._cursorInfo.globalEndIndex;\r\n                } else if (evt && (evt.ctrlKey || evt.metaKey)) {\r\n                    //ctr + ->\r\n                    const rightDelta = this._lines[this._cursorInfo.currentLineIndex].text.length - this._cursorInfo.relativeEndIndex;\r\n                    this._cursorInfo.globalStartIndex += rightDelta;\r\n                } else if (this._cursorInfo.globalStartIndex < this.text.length) {\r\n                    this._cursorInfo.globalStartIndex++;\r\n                }\r\n\r\n                // update the cursor\r\n                this._blinkIsEven = false;\r\n                this._isTextHighlightOn = false;\r\n                return;\r\n            case \"ArrowUp\": // UP\r\n                // update the cursor\r\n                this._blinkIsEven = false;\r\n\r\n                if (evt) {\r\n                    if (evt.shiftKey) {\r\n                        if (!this._isTextHighlightOn) {\r\n                            this._highlightCursorInfo.initialLineIndex = this._cursorInfo.currentLineIndex;\r\n                            this._highlightCursorInfo.initialStartIndex = this._cursorInfo.globalStartIndex;\r\n                            this._highlightCursorInfo.initialRelativeStartIndex = this._cursorInfo.relativeStartIndex;\r\n                        }\r\n                        this._isTextHighlightOn = true;\r\n                        this._blinkIsEven = true;\r\n                    } else {\r\n                        this._isTextHighlightOn = false;\r\n                    }\r\n                    evt.preventDefault();\r\n                }\r\n\r\n                if (this._cursorInfo.currentLineIndex === 0) {\r\n                    // First line\r\n                    this._cursorInfo.globalStartIndex = 0;\r\n                } else {\r\n                    const currentLine = this._lines[this._cursorInfo.currentLineIndex];\r\n                    const upperLine = this._lines[this._cursorInfo.currentLineIndex - 1];\r\n\r\n                    let tmpIndex = 0;\r\n                    let relativeIndex = 0;\r\n                    if (!this._isTextHighlightOn || this._cursorInfo.currentLineIndex < this._highlightCursorInfo.initialLineIndex) {\r\n                        tmpIndex = this._cursorInfo.globalStartIndex;\r\n                        relativeIndex = this._cursorInfo.relativeStartIndex;\r\n                    } else {\r\n                        tmpIndex = this._cursorInfo.globalEndIndex;\r\n                        relativeIndex = this._cursorInfo.relativeEndIndex;\r\n                    }\r\n\r\n                    const currentText = currentLine.text.substr(0, relativeIndex);\r\n                    const currentWidth = this._contextForBreakLines.measureText(currentText).width;\r\n\r\n                    let upperWidth = 0;\r\n                    let previousWidth = 0;\r\n\r\n                    tmpIndex -= relativeIndex; // Start of current line\r\n                    tmpIndex -= upperLine.text.length + upperLine.lineEnding.length; // Start of upper line\r\n                    let upperLineRelativeIndex = 0;\r\n\r\n                    while (upperWidth < currentWidth && upperLineRelativeIndex < upperLine.text.length) {\r\n                        tmpIndex++;\r\n                        upperLineRelativeIndex++;\r\n                        previousWidth = Math.abs(currentWidth - upperWidth);\r\n                        upperWidth = this._contextForBreakLines.measureText(upperLine.text.substr(0, upperLineRelativeIndex)).width;\r\n                    }\r\n\r\n                    // Find closest move\r\n                    if (Math.abs(currentWidth - upperWidth) > previousWidth && upperLineRelativeIndex > 0) {\r\n                        tmpIndex--;\r\n                    }\r\n\r\n                    if (!this._isTextHighlightOn) {\r\n                        this._cursorInfo.globalStartIndex = tmpIndex;\r\n                    } else if (this._cursorInfo.currentLineIndex <= this._highlightCursorInfo.initialLineIndex) {\r\n                        this._cursorInfo.globalStartIndex = tmpIndex;\r\n                        this._cursorInfo.globalEndIndex = this._highlightCursorInfo.initialStartIndex;\r\n                        this._cursorInfo.relativeEndIndex = this._highlightCursorInfo.initialRelativeStartIndex;\r\n                    } else {\r\n                        this._cursorInfo.globalEndIndex = tmpIndex;\r\n                    }\r\n                }\r\n\r\n                this._markAsDirty();\r\n                return;\r\n            case \"ArrowDown\": // DOWN\r\n                // update the cursor\r\n                this._blinkIsEven = false;\r\n\r\n                if (evt) {\r\n                    if (evt.shiftKey) {\r\n                        if (!this._isTextHighlightOn) {\r\n                            this._highlightCursorInfo.initialLineIndex = this._cursorInfo.currentLineIndex;\r\n                            this._highlightCursorInfo.initialStartIndex = this._cursorInfo.globalStartIndex;\r\n                            this._highlightCursorInfo.initialRelativeStartIndex = this._cursorInfo.relativeStartIndex;\r\n                        }\r\n\r\n                        this._isTextHighlightOn = true;\r\n                        this._blinkIsEven = true;\r\n                    } else {\r\n                        this._isTextHighlightOn = false;\r\n                    }\r\n                    evt.preventDefault();\r\n                }\r\n\r\n                if (this._cursorInfo.currentLineIndex === this._lines.length - 1) {\r\n                    // Last line\r\n                    this._cursorInfo.globalStartIndex = this.text.length;\r\n                } else {\r\n                    const currentLine = this._lines[this._cursorInfo.currentLineIndex];\r\n                    const underLine = this._lines[this._cursorInfo.currentLineIndex + 1];\r\n\r\n                    let tmpIndex = 0;\r\n                    let relativeIndex = 0;\r\n                    if (!this._isTextHighlightOn || this._cursorInfo.currentLineIndex < this._highlightCursorInfo.initialLineIndex) {\r\n                        tmpIndex = this._cursorInfo.globalStartIndex;\r\n                        relativeIndex = this._cursorInfo.relativeStartIndex;\r\n                    } else {\r\n                        tmpIndex = this._cursorInfo.globalEndIndex;\r\n                        relativeIndex = this._cursorInfo.relativeEndIndex;\r\n                    }\r\n\r\n                    const currentText = currentLine.text.substr(0, relativeIndex);\r\n                    const currentWidth = this._contextForBreakLines.measureText(currentText).width;\r\n\r\n                    let underWidth = 0;\r\n                    let previousWidth = 0;\r\n\r\n                    tmpIndex += currentLine.text.length - relativeIndex + currentLine.lineEnding.length; // Start of current line\r\n                    let underLineRelativeIndex = 0;\r\n\r\n                    while (underWidth < currentWidth && underLineRelativeIndex < underLine.text.length) {\r\n                        tmpIndex++;\r\n                        underLineRelativeIndex++;\r\n                        previousWidth = Math.abs(currentWidth - underWidth);\r\n                        underWidth = this._contextForBreakLines.measureText(underLine.text.substr(0, underLineRelativeIndex)).width;\r\n                    }\r\n\r\n                    // Find closest move\r\n                    if (Math.abs(currentWidth - underWidth) > previousWidth && underLineRelativeIndex > 0) {\r\n                        tmpIndex--;\r\n                    }\r\n\r\n                    if (!this._isTextHighlightOn) {\r\n                        this._cursorInfo.globalStartIndex = tmpIndex;\r\n                    } else if (this._cursorInfo.currentLineIndex < this._highlightCursorInfo.initialLineIndex) {\r\n                        this._cursorInfo.globalStartIndex = tmpIndex;\r\n                        if (this._cursorInfo.globalStartIndex > this._cursorInfo.globalEndIndex) {\r\n                            this._cursorInfo.globalEndIndex += this._cursorInfo.globalStartIndex;\r\n                            this._cursorInfo.globalStartIndex = this._cursorInfo.globalEndIndex - this._cursorInfo.globalStartIndex;\r\n                            this._cursorInfo.globalEndIndex -= this._cursorInfo.globalStartIndex;\r\n                        }\r\n                    } else {\r\n                        this._cursorInfo.globalEndIndex = tmpIndex;\r\n                        this._cursorInfo.globalStartIndex = this._highlightCursorInfo.initialStartIndex;\r\n                    }\r\n                }\r\n\r\n                this._markAsDirty();\r\n                return;\r\n        }\r\n\r\n        // Printable characters\r\n        if (key?.length === 1) {\r\n            evt?.preventDefault();\r\n            this._currentKey = key;\r\n            this.onBeforeKeyAddObservable.notifyObservers(this);\r\n            key = this._currentKey;\r\n            if (this._addKey) {\r\n                this._isTextHighlightOn = false;\r\n                this._blinkIsEven = false;\r\n                this._prevText = this._textWrapper.text;\r\n                this._textWrapper.removePart(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex, key);\r\n                this._cursorInfo.globalStartIndex += key.length;\r\n                this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n\r\n                this._textHasChanged();\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _parseLineWordWrap(line: string = \"\", width: number, context: ICanvasRenderingContext): { text: string; width: number; lineEnding: string }[] {\r\n        const lines = [];\r\n        const words = line.split(\" \");\r\n        let lineWidth = 0;\r\n\r\n        for (let n = 0; n < words.length; n++) {\r\n            const testLine = n > 0 ? line + \" \" + words[n] : words[0];\r\n            const metrics = context.measureText(testLine);\r\n            const testWidth = metrics.width;\r\n            if (testWidth > width) {\r\n                if (n > 0) {\r\n                    // Avoid first word duplication if of too long\r\n                    lineWidth = context.measureText(line).width;\r\n                    lines.push({ text: line, width: lineWidth, lineEnding: \" \" });\r\n                }\r\n\r\n                line = words[n];\r\n\r\n                let flushedLine = \"\";\r\n\r\n                line.split(\"\").map((char) => {\r\n                    if (context.measureText(flushedLine + char).width > width) {\r\n                        lines.push({ text: flushedLine, width: context.measureText(flushedLine).width, lineEnding: \"\" });\r\n                        flushedLine = \"\";\r\n                    }\r\n                    flushedLine += char;\r\n                });\r\n\r\n                line = flushedLine;\r\n                // Measure remaining characters\r\n                lineWidth = context.measureText(line).width;\r\n            } else {\r\n                lineWidth = testWidth;\r\n                line = testLine;\r\n            }\r\n        }\r\n        lines.push({ text: line, width: lineWidth, lineEnding: \" \" });\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _breakLines(refWidth: number, context: ICanvasRenderingContext): object[] {\r\n        const lines: { text: string; width: number; lineEnding: string }[] = [];\r\n        const _lines = (this.text || this.placeholderText).split(\"\\n\");\r\n\r\n        if (this.clipContent) {\r\n            for (const _line of _lines) {\r\n                lines.push(...this._parseLineWordWrap(_line, refWidth, context));\r\n            }\r\n        } else {\r\n            for (const _line of _lines) {\r\n                lines.push(this._parseLine(_line, context));\r\n            }\r\n        }\r\n\r\n        lines[lines.length - 1].lineEnding = \"\\n\";\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _parseLine(line: string = \"\", context: ICanvasRenderingContext): { text: string; width: number; lineEnding: string } {\r\n        return { text: line, width: context.measureText(line).width, lineEnding: \" \" };\r\n    }\r\n\r\n    /**\r\n     * Processing of child right before the parent measurement update\r\n     *\r\n     * @param parentMeasure The parent measure\r\n     * @param context The rendering canvas\r\n     * @internal\r\n     */\r\n    protected _preMeasure(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        if (!this._fontOffset || this._wasDirty) {\r\n            this._fontOffset = Control._GetFontOffset(context.font);\r\n        }\r\n\r\n        let text = this._beforeRenderText(this._textWrapper).text;\r\n\r\n        // placeholder conditions and color setting\r\n        if (!this.text && this._placeholderText) {\r\n            text = this._placeholderText;\r\n        }\r\n\r\n        // measures the textlength -> this.measure.width\r\n        this._textWidth = context.measureText(text).width;\r\n        // we double up the margin width\r\n        const marginWidth = this._margin.getValueInPixel(this._host, parentMeasure.width) * 2;\r\n\r\n        if (this._autoStretchWidth) {\r\n            const tmpLines = text.split(\"\\n\");\r\n            const longerString = tmpLines.reduce((acc: string, val: string) => {\r\n                const valueLength = context.measureText(val).width;\r\n                const accLength = context.measureText(acc).width;\r\n                return valueLength > accLength ? val : acc;\r\n            }, \"\");\r\n\r\n            const longerStringWidth = context.measureText(longerString).width;\r\n            this.width = Math.min(this._maxWidth.getValueInPixel(this._host, parentMeasure.width), longerStringWidth + marginWidth) + \"px\";\r\n\r\n            this.autoStretchWidth = true;\r\n        }\r\n\r\n        this._availableWidth = this._width.getValueInPixel(this._host, parentMeasure.width) - marginWidth;\r\n\r\n        // Prepare lines\r\n        this._lines = this._breakLines(this._availableWidth, context);\r\n        // can we find a cleaner implementation here?\r\n        this._contextForBreakLines = context;\r\n\r\n        if (this._autoStretchHeight) {\r\n            const textHeight = this._lines.length * this._fontOffset.height;\r\n            const totalHeight = textHeight + this._margin.getValueInPixel(this._host, parentMeasure.height) * 2;\r\n            this.height = Math.min(this._maxHeight.getValueInPixel(this._host, parentMeasure.height), totalHeight) + \"px\";\r\n\r\n            this._autoStretchHeight = true;\r\n        }\r\n\r\n        this._availableHeight = this._height.getValueInPixel(this._host, parentMeasure.height) - marginWidth;\r\n\r\n        if (this._isFocused) {\r\n            this._cursorInfo.currentLineIndex = 0;\r\n\r\n            let lineLength = this._lines[this._cursorInfo.currentLineIndex].text.length + this._lines[this._cursorInfo.currentLineIndex].lineEnding.length;\r\n            let tmpLength = 0;\r\n\r\n            while (tmpLength + lineLength <= this._cursorInfo.globalStartIndex) {\r\n                tmpLength += lineLength;\r\n\r\n                if (this._cursorInfo.currentLineIndex < this._lines.length - 1) {\r\n                    this._cursorInfo.currentLineIndex++;\r\n                    lineLength = this._lines[this._cursorInfo.currentLineIndex].text.length + this._lines[this._cursorInfo.currentLineIndex].lineEnding.length;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _textHasChanged() {\r\n        if (!this._prevText && this._textWrapper.text && this.placeholderText) {\r\n            this._cursorInfo.currentLineIndex = 0;\r\n            this._cursorInfo.globalStartIndex = 1;\r\n            this._cursorInfo.globalEndIndex = 1;\r\n            this._cursorInfo.relativeStartIndex = 1;\r\n            this._cursorInfo.relativeEndIndex = 1;\r\n        }\r\n        super._textHasChanged();\r\n    }\r\n\r\n    private _computeScroll() {\r\n        this._clipTextLeft = this._currentMeasure.left + this._margin.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n        this._clipTextTop = this._currentMeasure.top + this._margin.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n\r\n        if (this._isFocused && this._lines[this._cursorInfo.currentLineIndex].width > this._availableWidth) {\r\n            const textLeft = this._clipTextLeft - this._lines[this._cursorInfo.currentLineIndex].width + this._availableWidth;\r\n\r\n            if (!this._scrollLeft) {\r\n                this._scrollLeft = textLeft;\r\n            }\r\n        } else {\r\n            this._scrollLeft = this._clipTextLeft;\r\n        }\r\n\r\n        if (this._isFocused && !this._autoStretchHeight) {\r\n            const selectedHeight = (this._cursorInfo.currentLineIndex + 1) * this._fontOffset.height;\r\n            const textTop = this._clipTextTop - selectedHeight;\r\n\r\n            if (!this._scrollTop) {\r\n                this._scrollTop = textTop;\r\n            }\r\n        } else {\r\n            this._scrollTop = this._clipTextTop;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Processing of child after the parent measurement update\r\n     *\r\n     * @internal\r\n     */\r\n    protected _additionalProcessing(): void {\r\n        // Flush the highlighted text each frame\r\n        this.highlightedText = \"\";\r\n\r\n        this.onLinesReadyObservable.notifyObservers(this);\r\n    }\r\n\r\n    private _drawText(text: string, textWidth: number, y: number, context: ICanvasRenderingContext): void {\r\n        const width = this._currentMeasure.width;\r\n        let x = this._scrollLeft as number;\r\n        switch (this._textHorizontalAlignment) {\r\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                x += 0;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                x += width - textWidth;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                x += (width - textWidth) / 2;\r\n                break;\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this.outlineWidth) {\r\n            context.strokeText(text, this._currentMeasure.left + x, y);\r\n        }\r\n        context.fillText(text, x, y);\r\n    }\r\n\r\n    /**\r\n     * Copy the text in the clipboard\r\n     *\r\n     * @param ev The clipboard event\r\n     * @internal\r\n     */\r\n    protected _onCopyText(ev: ClipboardEvent): void {\r\n        this._isTextHighlightOn = false;\r\n        //when write permission to clipbaord data is denied\r\n        try {\r\n            ev.clipboardData && ev.clipboardData.setData(\"text/plain\", this._highlightedText);\r\n        } catch {} //pass\r\n        this._host.clipboardData = this._highlightedText;\r\n    }\r\n\r\n    /**\r\n     * Cut the text and copy it in the clipboard\r\n     *\r\n     * @param ev The clipboard event\r\n     * @internal\r\n     */\r\n    protected _onCutText(ev: ClipboardEvent): void {\r\n        if (!this._highlightedText) {\r\n            return;\r\n        }\r\n        //when write permission to clipbaord data is denied\r\n        try {\r\n            ev.clipboardData && ev.clipboardData.setData(\"text/plain\", this._highlightedText);\r\n        } catch {} //pass\r\n\r\n        this._host.clipboardData = this._highlightedText;\r\n        this._prevText = this._textWrapper.text;\r\n        this._textWrapper.removePart(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex);\r\n\r\n        this._textHasChanged();\r\n    }\r\n\r\n    /**\r\n     * Paste the copied text from the clipboard\r\n     *\r\n     * @param ev The clipboard event\r\n     * @internal\r\n     */\r\n    protected _onPasteText(ev: ClipboardEvent): void {\r\n        let data: string = \"\";\r\n        if (ev.clipboardData && ev.clipboardData.types.indexOf(\"text/plain\") !== -1) {\r\n            data = ev.clipboardData.getData(\"text/plain\");\r\n        } else {\r\n            //get the cached data; returns blank string by default\r\n            data = this._host.clipboardData;\r\n        }\r\n\r\n        this._isTextHighlightOn = false;\r\n        this._prevText = this._textWrapper.text;\r\n        this._textWrapper.removePart(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex, data);\r\n\r\n        const deltaIndex = data.length - (this._cursorInfo.globalEndIndex - this._cursorInfo.globalStartIndex);\r\n\r\n        this._cursorInfo.globalStartIndex += deltaIndex;\r\n        this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n\r\n        this._textHasChanged();\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        this._computeScroll();\r\n\r\n        this._scrollLeft = this._scrollLeft ?? 0;\r\n        this._scrollTop = this._scrollTop ?? 0;\r\n\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        // Background\r\n        if (this._isFocused) {\r\n            if (this._focusedBackground) {\r\n                context.fillStyle = this._isEnabled ? this._focusedBackground : this._disabledColor;\r\n\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        } else if (this._background) {\r\n            context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\r\n\r\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        // sets the color of the rectangle (border if background available)\r\n        if (this.color) {\r\n            context.fillStyle = this.color;\r\n        }\r\n\r\n        const height = this._currentMeasure.height;\r\n        const width = this._currentMeasure.width;\r\n        let rootY = 0;\r\n\r\n        switch (this._textVerticalAlignment) {\r\n            case Control.VERTICAL_ALIGNMENT_TOP:\r\n                rootY = this._fontOffset.ascent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\r\n                rootY = height - this._fontOffset.height * (this._lines.length - 1) - this._fontOffset.descent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_CENTER:\r\n                rootY = this._fontOffset.ascent + (height - this._fontOffset.height * this._lines.length) / 2;\r\n                break;\r\n        }\r\n\r\n        context.save();\r\n        context.beginPath();\r\n        context.fillStyle = this.fontStyle;\r\n        if (!this._textWrapper.text && this.placeholderText) {\r\n            context.fillStyle = this._placeholderColor;\r\n        }\r\n        // here we define the visible reactangle to clip it in next line\r\n        context.rect(this._clipTextLeft, this._clipTextTop, this._availableWidth + 2, this._availableHeight + 2);\r\n        context.clip();\r\n\r\n        // Text\r\n        rootY += this._scrollTop;\r\n\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n\r\n            if (i !== 0 && this._lineSpacing.internalValue !== 0) {\r\n                if (this._lineSpacing.isPixel) {\r\n                    rootY += this._lineSpacing.getValue(this._host);\r\n                } else {\r\n                    rootY = rootY + this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n                }\r\n            }\r\n\r\n            this._drawText(line.text, line.width, rootY, context);\r\n            rootY += this._fontOffset.height;\r\n        }\r\n\r\n        context.restore();\r\n\r\n        // Cursor\r\n        if (this._isFocused) {\r\n            // Render cursor\r\n            if (!this._blinkIsEven || this._isTextHighlightOn) {\r\n                let cursorLeft = this._scrollLeft + context.measureText(this._lines[this._cursorInfo.currentLineIndex].text.substr(0, this._cursorInfo.relativeStartIndex)).width;\r\n\r\n                if (cursorLeft < this._clipTextLeft) {\r\n                    this._scrollLeft += this._clipTextLeft - cursorLeft;\r\n                    cursorLeft = this._clipTextLeft;\r\n                    this._markAsDirty();\r\n                } else if (cursorLeft > this._clipTextLeft + this._availableWidth) {\r\n                    this._scrollLeft += this._clipTextLeft + this._availableWidth - cursorLeft;\r\n                    cursorLeft = this._clipTextLeft + this._availableWidth;\r\n                    this._markAsDirty();\r\n                }\r\n\r\n                let cursorTop = this._scrollTop + this._cursorInfo.currentLineIndex * this._fontOffset.height; //cursorTop distance from top to cursor start\r\n\r\n                if (cursorTop < this._clipTextTop) {\r\n                    this._scrollTop += this._clipTextTop - cursorTop;\r\n                    cursorTop = this._clipTextTop;\r\n                    this._markAsDirty();\r\n                } else if (cursorTop + this._fontOffset.height > this._clipTextTop + this._availableHeight) {\r\n                    this._scrollTop += this._clipTextTop + this._availableHeight - cursorTop - this._fontOffset.height;\r\n                    cursorTop = this._clipTextTop + this._availableHeight - this._fontOffset.height;\r\n                    this._markAsDirty();\r\n                }\r\n\r\n                if (!this._isTextHighlightOn) {\r\n                    context.fillRect(cursorLeft, cursorTop, 2, this._fontOffset.height);\r\n                }\r\n            }\r\n\r\n            this._resetBlinking();\r\n\r\n            //show the highlighted text\r\n            if (this._isTextHighlightOn) {\r\n                clearTimeout(this._blinkTimeout);\r\n\r\n                this._highlightedText = this.text.substring(this._cursorInfo.globalStartIndex, this._cursorInfo.globalEndIndex);\r\n\r\n                context.globalAlpha = this._highligherOpacity;\r\n                context.fillStyle = this._textHighlightColor;\r\n\r\n                const startLineIndex = Math.min(this._cursorInfo.currentLineIndex, this._highlightCursorInfo.initialLineIndex);\r\n                const endLineIndex = Math.max(this._cursorInfo.currentLineIndex, this._highlightCursorInfo.initialLineIndex);\r\n\r\n                let highlightRootY = this._scrollTop + startLineIndex * this._fontOffset.height;\r\n\r\n                for (let i = startLineIndex; i <= endLineIndex; i++) {\r\n                    const line = this._lines[i];\r\n\r\n                    let highlightRootX = this._scrollLeft as number;\r\n                    switch (this._textHorizontalAlignment) {\r\n                        case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                            highlightRootX += 0;\r\n                            break;\r\n                        case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                            highlightRootX += width - line.width;\r\n                            break;\r\n                        case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                            highlightRootX += (width - line.width) / 2;\r\n                            break;\r\n                    }\r\n\r\n                    const begin = i === startLineIndex ? this._cursorInfo.relativeStartIndex : 0;\r\n                    const end = i === endLineIndex ? this._cursorInfo.relativeEndIndex : line.text.length;\r\n\r\n                    const leftOffsetWidth = context.measureText(line.text.substr(0, begin)).width;\r\n                    const selectedText = line.text.substring(begin, end);\r\n                    const hightlightWidth = context.measureText(selectedText).width;\r\n\r\n                    context.fillRect(highlightRootX + leftOffsetWidth, highlightRootY, hightlightWidth, this._fontOffset.height);\r\n\r\n                    highlightRootY += this._fontOffset.height;\r\n                }\r\n\r\n                if (this._cursorInfo.globalEndIndex === this._cursorInfo.globalStartIndex) {\r\n                    this._resetBlinking();\r\n                }\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n\r\n        // Border\r\n        if (this._thickness) {\r\n            if (this._isFocused) {\r\n                if (this.focusedColor) {\r\n                    context.strokeStyle = this.focusedColor;\r\n                }\r\n            } else {\r\n                if (this.color) {\r\n                    context.strokeStyle = this.color;\r\n                }\r\n            }\r\n\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.strokeRect(\r\n                this._currentMeasure.left + this._thickness / 2,\r\n                this._currentMeasure.top + this._thickness / 2,\r\n                this._currentMeasure.width - this._thickness,\r\n                this._currentMeasure.height - this._thickness\r\n            );\r\n        }\r\n    }\r\n\r\n    private _resetBlinking() {\r\n        clearTimeout(this._blinkTimeout);\r\n        this._blinkTimeout = <any>setTimeout(() => {\r\n            this._blinkIsEven = !this._blinkIsEven;\r\n            this._markAsDirty();\r\n        }, 500);\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        this._clickedCoordinateX = coordinates.x;\r\n        this._clickedCoordinateY = coordinates.y;\r\n\r\n        this._isTextHighlightOn = false;\r\n        this._highlightedText = \"\";\r\n        this._isPointerDown = true;\r\n        this._host._capturingControl[pointerId] = this;\r\n        if (this._host.focusedControl === this) {\r\n            // Move cursor\r\n            clearTimeout(this._blinkTimeout);\r\n            this._markAsDirty();\r\n            return true;\r\n        }\r\n        if (!this._isEnabled) {\r\n            return false;\r\n        }\r\n        this._host.focusedControl = this;\r\n\r\n        return true;\r\n    }\r\n\r\n    // for textselection\r\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\r\n        // Avoid Chromium-like beahavior when this event is fired right after onPointerDown\r\n        if (pi.event.movementX === 0 && pi.event.movementY === 0) {\r\n            return;\r\n        }\r\n\r\n        if (this._host.focusedControl === this && this._isPointerDown && !this.isReadOnly) {\r\n            this._clickedCoordinateX = coordinates.x;\r\n            this._clickedCoordinateY = coordinates.y;\r\n\r\n            if (!this._isTextHighlightOn) {\r\n                this._highlightCursorInfo.initialLineIndex = this._cursorInfo.currentLineIndex;\r\n                this._highlightCursorInfo.initialStartIndex = this._cursorInfo.globalStartIndex;\r\n                this._highlightCursorInfo.initialRelativeStartIndex = this._cursorInfo.relativeStartIndex;\r\n\r\n                this._isTextHighlightOn = true;\r\n            }\r\n\r\n            this._markAsDirty();\r\n        }\r\n        super._onPointerMove(target, coordinates, pointerId, pi);\r\n    }\r\n\r\n    /**\r\n     * Apply the correct position of cursor according to current modification\r\n     */\r\n    private _updateCursorPosition() {\r\n        if (!this._isFocused) {\r\n            return;\r\n        }\r\n\r\n        if (!this._textWrapper.text && this.placeholderText) {\r\n            this._cursorInfo.currentLineIndex = 0;\r\n            this._cursorInfo.globalStartIndex = 0;\r\n            this._cursorInfo.globalEndIndex = 0;\r\n            this._cursorInfo.relativeStartIndex = 0;\r\n            this._cursorInfo.relativeEndIndex = 0;\r\n        } else {\r\n            if (this._clickedCoordinateX && this._clickedCoordinateY) {\r\n                if (!this._isTextHighlightOn) {\r\n                    this._cursorInfo = {\r\n                        globalStartIndex: 0,\r\n                        globalEndIndex: 0,\r\n                        relativeStartIndex: 0,\r\n                        relativeEndIndex: 0,\r\n                        currentLineIndex: 0,\r\n                    };\r\n                }\r\n\r\n                let globalIndex = 0;\r\n                let relativeIndex = 0;\r\n\r\n                const lastClickedCoordinateY = this._clickedCoordinateY - (this._scrollTop as number);\r\n\r\n                const relativeCoordinateY = Math.floor(lastClickedCoordinateY / this._fontOffset.height);\r\n                this._cursorInfo.currentLineIndex = Math.min(Math.max(relativeCoordinateY, 0), this._lines.length - 1);\r\n\r\n                let currentSize = 0;\r\n\r\n                const relativeXPosition = this._clickedCoordinateX - (this._scrollLeft ?? 0);\r\n\r\n                let previousDist = 0;\r\n\r\n                for (let index = 0; index < this._cursorInfo.currentLineIndex; index++) {\r\n                    const line = this._lines[index];\r\n                    globalIndex += line.text.length + line.lineEnding.length;\r\n                }\r\n\r\n                while (currentSize < relativeXPosition && this._lines[this._cursorInfo.currentLineIndex].text.length > relativeIndex) {\r\n                    relativeIndex++;\r\n                    previousDist = Math.abs(relativeXPosition - currentSize);\r\n                    currentSize = this._contextForBreakLines.measureText(this._lines[this._cursorInfo.currentLineIndex].text.substr(0, relativeIndex)).width;\r\n                }\r\n\r\n                // Find closest move\r\n                if (Math.abs(relativeXPosition - currentSize) > previousDist && relativeIndex > 0) {\r\n                    relativeIndex--;\r\n                }\r\n\r\n                globalIndex += relativeIndex;\r\n\r\n                if (!this._isTextHighlightOn) {\r\n                    this._cursorInfo.globalStartIndex = globalIndex;\r\n                    this._cursorInfo.relativeStartIndex = relativeIndex;\r\n                    this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n                    this._cursorInfo.relativeEndIndex = this._cursorInfo.relativeStartIndex;\r\n                } else {\r\n                    if (globalIndex < this._highlightCursorInfo.initialStartIndex) {\r\n                        this._cursorInfo.globalStartIndex = globalIndex;\r\n                        this._cursorInfo.relativeStartIndex = relativeIndex;\r\n                        this._cursorInfo.globalEndIndex = this._highlightCursorInfo.initialStartIndex;\r\n                        this._cursorInfo.relativeEndIndex = this._highlightCursorInfo.initialRelativeStartIndex;\r\n                    } else {\r\n                        this._cursorInfo.globalStartIndex = this._highlightCursorInfo.initialStartIndex;\r\n                        this._cursorInfo.relativeStartIndex = this._highlightCursorInfo.initialRelativeStartIndex;\r\n                        this._cursorInfo.globalEndIndex = globalIndex;\r\n                        this._cursorInfo.relativeEndIndex = relativeIndex;\r\n                    }\r\n                }\r\n\r\n                // Avoid the caret during highlighting\r\n                this._blinkIsEven = this._isTextHighlightOn;\r\n                this._clickedCoordinateX = null;\r\n                this._clickedCoordinateY = null;\r\n            } else {\r\n                // Standard behavior same as Current line is at least above the initial highlight index\r\n                this._cursorInfo.relativeStartIndex = 0;\r\n                this._cursorInfo.currentLineIndex = 0;\r\n\r\n                let lineLength = this._lines[this._cursorInfo.currentLineIndex].text.length + this._lines[this._cursorInfo.currentLineIndex].lineEnding.length;\r\n                let tmpLength = 0;\r\n\r\n                while (tmpLength + lineLength <= this._cursorInfo.globalStartIndex) {\r\n                    tmpLength += lineLength;\r\n\r\n                    if (this._cursorInfo.currentLineIndex < this._lines.length - 1) {\r\n                        this._cursorInfo.currentLineIndex++;\r\n                        lineLength = this._lines[this._cursorInfo.currentLineIndex].text.length + this._lines[this._cursorInfo.currentLineIndex].lineEnding.length;\r\n                    }\r\n                }\r\n\r\n                this._cursorInfo.relativeStartIndex = this._cursorInfo.globalStartIndex - tmpLength;\r\n\r\n                if (this._highlightCursorInfo.initialStartIndex !== -1 && this._cursorInfo.globalStartIndex >= this._highlightCursorInfo.initialStartIndex) {\r\n                    // Current line is at least below the initial highlight index\r\n                    while (tmpLength + lineLength <= this._cursorInfo.globalEndIndex) {\r\n                        tmpLength += lineLength;\r\n\r\n                        if (this._cursorInfo.currentLineIndex < this._lines.length - 1) {\r\n                            this._cursorInfo.currentLineIndex++;\r\n                            lineLength = this._lines[this._cursorInfo.currentLineIndex].text.length + this._lines[this._cursorInfo.currentLineIndex].lineEnding.length;\r\n                        }\r\n                    }\r\n\r\n                    this._cursorInfo.relativeEndIndex = this._cursorInfo.globalEndIndex - tmpLength;\r\n                } else if (!this._isTextHighlightOn) {\r\n                    this._cursorInfo.relativeEndIndex = this._cursorInfo.relativeStartIndex;\r\n                    this._cursorInfo.globalEndIndex = this._cursorInfo.globalStartIndex;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update all values of cursor information based on cursorIndex value\r\n     *\r\n     * @param offset The index to take care of\r\n     * @internal\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _updateValueFromCursorIndex(offset: number) {\r\n        // Override to avoid parent behavior during _onPointerMove\r\n    }\r\n\r\n    /**\r\n     * Select the word immediatly under the cursor on double click\r\n     *\r\n     * @param _evt Pointer informations of double click\r\n     * @internal\r\n     */\r\n    protected _processDblClick(_evt: PointerInfo) {\r\n        //pre-find the start and end index of the word under cursor, speeds up the rendering\r\n        let moveLeft, moveRight;\r\n        do {\r\n            moveLeft = this._cursorInfo.globalStartIndex > 0 && this._textWrapper.isWord(this._cursorInfo.globalStartIndex - 1) ? --this._cursorInfo.globalStartIndex : 0;\r\n            moveRight =\r\n                this._cursorInfo.globalEndIndex < this._textWrapper.length && this._textWrapper.isWord(this._cursorInfo.globalEndIndex) ? ++this._cursorInfo.globalEndIndex : 0;\r\n        } while (moveLeft || moveRight);\r\n\r\n        this._highlightCursorInfo.initialLineIndex = this._cursorInfo.currentLineIndex;\r\n        this._highlightCursorInfo.initialStartIndex = this._cursorInfo.globalStartIndex;\r\n\r\n        this.onTextHighlightObservable.notifyObservers(this);\r\n\r\n        this._isTextHighlightOn = true;\r\n        this._blinkIsEven = true;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** @internal */\r\n    protected _selectAllText() {\r\n        this._isTextHighlightOn = true;\r\n        this._blinkIsEven = true;\r\n\r\n        this._highlightCursorInfo = {\r\n            initialStartIndex: 0,\r\n            initialRelativeStartIndex: 0,\r\n            initialLineIndex: 0,\r\n        };\r\n\r\n        this._cursorInfo = {\r\n            globalStartIndex: 0,\r\n            globalEndIndex: this._textWrapper.length,\r\n            relativeEndIndex: this._lines[this._lines.length - 1].text.length,\r\n            relativeStartIndex: 0,\r\n            currentLineIndex: this._lines.length - 1,\r\n        };\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this.onLinesReadyObservable.clear();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.InputTextArea\", InputTextArea);\r\n", "import { InputText } from \"./inputText\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { TextWrapper } from \"./textWrapper\";\r\n\r\n/**\r\n * Class used to create a password control\r\n */\r\nexport class InputPassword extends InputText {\r\n    protected _getTypeName(): string {\r\n        return \"InputPassword\";\r\n    }\r\n\r\n    protected _beforeRenderText(textWrapper: TextWrapper): TextWrapper {\r\n        const pwdTextWrapper = new TextWrapper();\r\n        let txt = \"\";\r\n        for (let i = 0; i < textWrapper.length; i++) {\r\n            txt += \"\\u2022\";\r\n        }\r\n        pwdTextWrapper.text = txt;\r\n        return pwdTextWrapper;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.InputPassword\", InputPassword);\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Vector3, Matrix } from \"core/Maths/math.vector\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport type { Measure } from \"../measure\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/** Class used to render 2D lines */\r\nexport class Line extends Control {\r\n    private _lineWidth = 1;\r\n    /** @internal */\r\n    public _x1 = new ValueAndUnit(0);\r\n    /** @internal */\r\n    public _y1 = new ValueAndUnit(0);\r\n    /** @internal */\r\n    public _x2 = new ValueAndUnit(0);\r\n    /** @internal */\r\n    public _y2 = new ValueAndUnit(0);\r\n    private _dash = new Array<number>();\r\n    private _connectedControl: Control;\r\n    private _connectedControlDirtyObserver: Nullable<Observer<Control>>;\r\n\r\n    /** Gets or sets the dash pattern */\r\n    @serialize()\r\n    public get dash(): Array<number> {\r\n        return this._dash;\r\n    }\r\n\r\n    public set dash(value: Array<number>) {\r\n        if (this._dash === value) {\r\n            return;\r\n        }\r\n\r\n        this._dash = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the control connected with the line end */\r\n    public get connectedControl(): Control {\r\n        return this._connectedControl;\r\n    }\r\n\r\n    public set connectedControl(value: Control) {\r\n        if (this._connectedControl === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._connectedControlDirtyObserver && this._connectedControl) {\r\n            this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver);\r\n            this._connectedControlDirtyObserver = null;\r\n        }\r\n\r\n        if (value) {\r\n            this._connectedControlDirtyObserver = value.onDirtyObservable.add(() => this._markAsDirty());\r\n        }\r\n\r\n        this._connectedControl = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets start coordinates on X axis */\r\n    @serialize()\r\n    public get x1(): string | number {\r\n        return this._x1.toString(this._host);\r\n    }\r\n\r\n    public set x1(value: string | number) {\r\n        if (this._x1.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x1.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets start coordinates on Y axis */\r\n    @serialize()\r\n    public get y1(): string | number {\r\n        return this._y1.toString(this._host);\r\n    }\r\n\r\n    public set y1(value: string | number) {\r\n        if (this._y1.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y1.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets end coordinates on X axis */\r\n    @serialize()\r\n    public get x2(): string | number {\r\n        return this._x2.toString(this._host);\r\n    }\r\n\r\n    public set x2(value: string | number) {\r\n        if (this._x2.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x2.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets end coordinates on Y axis */\r\n    @serialize()\r\n    public get y2(): string | number {\r\n        return this._y2.toString(this._host);\r\n    }\r\n\r\n    public set y2(value: string | number) {\r\n        if (this._y2.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y2.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets line width */\r\n    @serialize()\r\n    public get lineWidth(): number {\r\n        return this._lineWidth;\r\n    }\r\n\r\n    public set lineWidth(value: number) {\r\n        if (this._lineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._lineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets horizontal alignment */\r\n    public set horizontalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    /** Gets or sets vertical alignment */\r\n    public set verticalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    /** @internal */\r\n    public get _effectiveX2(): number {\r\n        return (this._connectedControl ? this._connectedControl.centerX : 0) + this._x2.getValue(this._host);\r\n    }\r\n\r\n    /** @internal */\r\n    public get _effectiveY2(): number {\r\n        return (this._connectedControl ? this._connectedControl.centerY : 0) + this._y2.getValue(this._host);\r\n    }\r\n\r\n    /**\r\n     * Creates a new Line\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this._automaticSize = true;\r\n\r\n        this.isHitTestVisible = false;\r\n        this._horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Line\";\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        this._applyStates(context);\r\n        context.strokeStyle = this._getColor(context);\r\n        context.lineWidth = this._lineWidth;\r\n        context.setLineDash(this._dash);\r\n\r\n        context.beginPath();\r\n        context.moveTo(this._cachedParentMeasure.left + this._x1.getValue(this._host), this._cachedParentMeasure.top + this._y1.getValue(this._host));\r\n\r\n        context.lineTo(this._cachedParentMeasure.left + this._effectiveX2, this._cachedParentMeasure.top + this._effectiveY2);\r\n        context.stroke();\r\n\r\n        context.restore();\r\n    }\r\n\r\n    public _measure(): void {\r\n        // Width / Height\r\n        this._currentMeasure.width = Math.abs(this._x1.getValue(this._host) - this._effectiveX2) + this._lineWidth;\r\n        this._currentMeasure.height = Math.abs(this._y1.getValue(this._host) - this._effectiveY2) + this._lineWidth;\r\n    }\r\n\r\n    protected _computeAlignment(parentMeasure: Measure): void {\r\n        this._currentMeasure.left = parentMeasure.left + Math.min(this._x1.getValue(this._host), this._effectiveX2) - this._lineWidth / 2;\r\n        this._currentMeasure.top = parentMeasure.top + Math.min(this._y1.getValue(this._host), this._effectiveY2) - this._lineWidth / 2;\r\n    }\r\n\r\n    /**\r\n     * Move one end of the line given 3D cartesian coordinates.\r\n     * @param position Targeted world position\r\n     * @param scene Scene\r\n     * @param end (opt) Set to true to assign x2 and y2 coordinates of the line. Default assign to x1 and y1.\r\n     */\r\n    public moveToVector3(position: Vector3, scene: Scene, end: boolean = false): void {\r\n        if (!this._host || this.parent !== this._host._rootContainer) {\r\n            Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\r\n            return;\r\n        }\r\n\r\n        const globalViewport = this._host._getGlobalViewport();\r\n        const projectedPosition = Vector3.Project(position, Matrix.IdentityReadOnly, scene.getTransformMatrix(), globalViewport);\r\n\r\n        this._moveToProjectedPosition(projectedPosition, end);\r\n\r\n        if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n            this.notRenderable = true;\r\n            return;\r\n        }\r\n        this.notRenderable = false;\r\n    }\r\n\r\n    /**\r\n     * Move one end of the line to a position in screen absolute space.\r\n     * @param projectedPosition Position in screen absolute space (X, Y)\r\n     * @param end (opt) Set to true to assign x2 and y2 coordinates of the line. Default assign to x1 and y1.\r\n     */\r\n    public _moveToProjectedPosition(projectedPosition: Vector3, end: boolean = false): void {\r\n        const x: string = projectedPosition.x + this._linkOffsetX.getValue(this._host) + \"px\";\r\n        const y: string = projectedPosition.y + this._linkOffsetY.getValue(this._host) + \"px\";\r\n\r\n        if (end) {\r\n            this.x2 = x;\r\n            this.y2 = y;\r\n            this._x2.ignoreAdaptiveScaling = true;\r\n            this._y2.ignoreAdaptiveScaling = true;\r\n        } else {\r\n            this.x1 = x;\r\n            this.y1 = y;\r\n            this._x1.ignoreAdaptiveScaling = true;\r\n            this._y1.ignoreAdaptiveScaling = true;\r\n        }\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Line\", Line);\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { Epsilon } from \"core/Maths/math.constants\";\r\nimport type { Camera } from \"core/Cameras/camera\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\n\r\nimport type { MultiLine } from \"./controls/multiLine\";\r\nimport { ValueAndUnit } from \"./valueAndUnit\";\r\nimport type { Control } from \"./controls/control\";\r\n\r\n/**\r\n * Class used to store a point for a MultiLine object.\r\n * The point can be pure 2D coordinates, a mesh or a control\r\n */\r\nexport class MultiLinePoint {\r\n    private _multiLine: MultiLine;\r\n\r\n    private _x: ValueAndUnit;\r\n    private _y: ValueAndUnit;\r\n    private _control: Nullable<Control>;\r\n    private _mesh: Nullable<AbstractMesh>;\r\n\r\n    private _controlObserver: Nullable<Observer<Control>>;\r\n    private _meshObserver: Nullable<Observer<Camera>>;\r\n\r\n    /** @internal */\r\n    public _point: Vector3;\r\n\r\n    /**\r\n     * Creates a new MultiLinePoint\r\n     * @param multiLine defines the source MultiLine object\r\n     */\r\n    constructor(multiLine: MultiLine) {\r\n        this._multiLine = multiLine;\r\n\r\n        this._x = new ValueAndUnit(0);\r\n        this._y = new ValueAndUnit(0);\r\n\r\n        this._point = new Vector3(0, 0, 0);\r\n    }\r\n\r\n    /** Gets or sets x coordinate */\r\n    public get x(): string | number {\r\n        return this._x.toString(this._multiLine._host);\r\n    }\r\n\r\n    public set x(value: string | number) {\r\n        if (this._x.toString(this._multiLine._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x.fromString(value)) {\r\n            this._multiLine._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets y coordinate */\r\n    public get y(): string | number {\r\n        return this._y.toString(this._multiLine._host);\r\n    }\r\n\r\n    public set y(value: string | number) {\r\n        if (this._y.toString(this._multiLine._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y.fromString(value)) {\r\n            this._multiLine._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the control associated with this point */\r\n    public get control(): Nullable<Control> {\r\n        return this._control;\r\n    }\r\n\r\n    public set control(value: Nullable<Control>) {\r\n        if (this._control === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._control && this._controlObserver) {\r\n            this._control.onDirtyObservable.remove(this._controlObserver);\r\n\r\n            this._controlObserver = null;\r\n        }\r\n\r\n        this._control = value;\r\n\r\n        if (this._control) {\r\n            this._controlObserver = this._control.onDirtyObservable.add(this._multiLine.onPointUpdate);\r\n        }\r\n\r\n        this._multiLine._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the mesh associated with this point */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        return this._mesh;\r\n    }\r\n\r\n    public set mesh(value: Nullable<AbstractMesh>) {\r\n        if (this._mesh === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._mesh && this._meshObserver) {\r\n            this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver);\r\n        }\r\n\r\n        this._mesh = value;\r\n\r\n        if (this._mesh) {\r\n            this._meshObserver = this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate);\r\n        }\r\n\r\n        this._multiLine._markAsDirty();\r\n    }\r\n\r\n    /** Resets links */\r\n    public resetLinks(): void {\r\n        this.control = null;\r\n        this.mesh = null;\r\n    }\r\n\r\n    /**\r\n     * Gets a translation vector with Z component\r\n     * @returns the translation vector\r\n     */\r\n    public translate(): Vector3 {\r\n        this._point = this._translatePoint();\r\n\r\n        return this._point;\r\n    }\r\n\r\n    private _translatePoint(): Vector3 {\r\n        if (this._mesh != null) {\r\n            return this._multiLine._host.getProjectedPositionWithZ(this._mesh.getBoundingInfo().boundingSphere.center, this._mesh.getWorldMatrix());\r\n        } else if (this._control != null) {\r\n            return new Vector3(this._control.centerX, this._control.centerY, 1 - Epsilon);\r\n        } else {\r\n            const host: any = this._multiLine._host as any;\r\n\r\n            const xValue: number = this._x.getValueInPixel(host, Number(host._canvas.width));\r\n            const yValue: number = this._y.getValueInPixel(host, Number(host._canvas.height));\r\n\r\n            return new Vector3(xValue, yValue, 1 - Epsilon);\r\n        }\r\n    }\r\n\r\n    /** Release associated resources */\r\n    public dispose(): void {\r\n        this.resetLinks();\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { MultiLinePoint } from \"../multiLinePoint\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to create multi line control\r\n */\r\nexport class MultiLine extends Control {\r\n    private _lineWidth: number = 1;\r\n    private _dash: number[];\r\n    private _points: Nullable<MultiLinePoint>[];\r\n\r\n    private _minX: Nullable<number>;\r\n    private _minY: Nullable<number>;\r\n    private _maxX: Nullable<number>;\r\n    private _maxY: Nullable<number>;\r\n\r\n    /**\r\n     * Creates a new MultiLine\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this._automaticSize = true;\r\n        this.isHitTestVisible = false;\r\n        this._horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        this._dash = [];\r\n        this._points = [];\r\n    }\r\n\r\n    /** Gets or sets dash pattern */\r\n    @serialize()\r\n    public get dash(): Array<number> {\r\n        return this._dash;\r\n    }\r\n\r\n    public set dash(value: Array<number>) {\r\n        if (this._dash === value) {\r\n            return;\r\n        }\r\n\r\n        this._dash = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets point stored at specified index\r\n     * @param index defines the index to look for\r\n     * @returns the requested point if found\r\n     */\r\n    public getAt(index: number): MultiLinePoint {\r\n        if (!this._points[index]) {\r\n            this._points[index] = new MultiLinePoint(this);\r\n        }\r\n\r\n        return this._points[index] as MultiLinePoint;\r\n    }\r\n\r\n    /** Function called when a point is updated */\r\n    public onPointUpdate = (): void => {\r\n        this._markAsDirty();\r\n    };\r\n\r\n    /**\r\n     * Adds new points to the point collection\r\n     * @param items defines the list of items (mesh, control or 2d coordinates) to add\r\n     * @returns the list of created MultiLinePoint\r\n     */\r\n    public add(...items: (AbstractMesh | Control | { x: string | number; y: string | number })[]): MultiLinePoint[] {\r\n        return items.map((item) => this.push(item));\r\n    }\r\n\r\n    /**\r\n     * Adds a new point to the point collection\r\n     * @param item defines the item (mesh, control or 2d coordinates) to add\r\n     * @returns the created MultiLinePoint\r\n     */\r\n    public push(item?: AbstractMesh | Control | { x: string | number; y: string | number }): MultiLinePoint {\r\n        const point: MultiLinePoint = this.getAt(this._points.length);\r\n\r\n        if (item == null) {\r\n            return point;\r\n        }\r\n\r\n        if (item instanceof AbstractMesh) {\r\n            point.mesh = item;\r\n        } else if (item instanceof Control) {\r\n            point.control = item;\r\n        } else if (item.x != null && item.y != null) {\r\n            point.x = item.x;\r\n            point.y = item.y;\r\n        }\r\n\r\n        return point;\r\n    }\r\n\r\n    /**\r\n     * Remove a specific value or point from the active point collection\r\n     * @param value defines the value or point to remove\r\n     */\r\n    public remove(value: number | MultiLinePoint): void {\r\n        let index: number;\r\n\r\n        if (value instanceof MultiLinePoint) {\r\n            index = this._points.indexOf(value);\r\n\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n        } else {\r\n            index = value;\r\n        }\r\n\r\n        const point: Nullable<MultiLinePoint> = this._points[index];\r\n\r\n        if (!point) {\r\n            return;\r\n        }\r\n\r\n        point.dispose();\r\n\r\n        this._points.splice(index, 1);\r\n    }\r\n\r\n    /**\r\n     * Resets this object to initial state (no point)\r\n     */\r\n    public reset(): void {\r\n        while (this._points.length > 0) {\r\n            this.remove(this._points.length - 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Resets all links\r\n     */\r\n    public resetLinks(): void {\r\n        this._points.forEach((point) => {\r\n            if (point != null) {\r\n                point.resetLinks();\r\n            }\r\n        });\r\n    }\r\n\r\n    /** Gets or sets line width */\r\n    public get lineWidth(): number {\r\n        return this._lineWidth;\r\n    }\r\n\r\n    public set lineWidth(value: number) {\r\n        if (this._lineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._lineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    public set horizontalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    public set verticalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"MultiLine\";\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        this._applyStates(context);\r\n\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._lineWidth;\r\n        context.setLineDash(this._dash);\r\n\r\n        context.beginPath();\r\n\r\n        let first: boolean = true; //first index is not necessarily 0\r\n        let previousPoint: Vector3;\r\n\r\n        this._points.forEach((point) => {\r\n            if (!point) {\r\n                return;\r\n            }\r\n\r\n            if (first) {\r\n                context.moveTo(point._point.x, point._point.y);\r\n\r\n                first = false;\r\n            } else {\r\n                if (point._point.z < 1 && previousPoint.z < 1) {\r\n                    context.lineTo(point._point.x, point._point.y);\r\n                } else {\r\n                    context.moveTo(point._point.x, point._point.y);\r\n                }\r\n            }\r\n            previousPoint = point._point;\r\n        });\r\n\r\n        context.stroke();\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(): void {\r\n        this._minX = null;\r\n        this._minY = null;\r\n        this._maxX = null;\r\n        this._maxY = null;\r\n\r\n        this._points.forEach((point) => {\r\n            if (!point) {\r\n                return;\r\n            }\r\n\r\n            point.translate();\r\n\r\n            if (this._minX == null || point._point.x < this._minX) {\r\n                this._minX = point._point.x;\r\n            }\r\n            if (this._minY == null || point._point.y < this._minY) {\r\n                this._minY = point._point.y;\r\n            }\r\n            if (this._maxX == null || point._point.x > this._maxX) {\r\n                this._maxX = point._point.x;\r\n            }\r\n            if (this._maxY == null || point._point.y > this._maxY) {\r\n                this._maxY = point._point.y;\r\n            }\r\n        });\r\n\r\n        if (this._minX == null) {\r\n            this._minX = 0;\r\n        }\r\n        if (this._minY == null) {\r\n            this._minY = 0;\r\n        }\r\n        if (this._maxX == null) {\r\n            this._maxX = 0;\r\n        }\r\n        if (this._maxY == null) {\r\n            this._maxY = 0;\r\n        }\r\n    }\r\n\r\n    public _measure(): void {\r\n        if (this._minX == null || this._maxX == null || this._minY == null || this._maxY == null) {\r\n            return;\r\n        }\r\n\r\n        this._currentMeasure.width = Math.abs(this._maxX - this._minX) + this._lineWidth;\r\n        this._currentMeasure.height = Math.abs(this._maxY - this._minY) + this._lineWidth;\r\n    }\r\n\r\n    protected _computeAlignment(): void {\r\n        if (this._minX == null || this._minY == null) {\r\n            return;\r\n        }\r\n\r\n        this._currentMeasure.left = this._minX - this._lineWidth / 2;\r\n        this._currentMeasure.top = this._minY - this._lineWidth / 2;\r\n    }\r\n\r\n    public dispose(): void {\r\n        this.reset();\r\n\r\n        super.dispose();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.MultiLine\", MultiLine);\r\n", "import { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to create radio button controls\r\n */\r\nexport class RadioButton extends Control {\r\n    private _isChecked = false;\r\n    private _background = \"black\";\r\n    private _checkSizeRatio = 0.8;\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness */\r\n    @serialize()\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets group name */\r\n    @serialize()\r\n    public group = \"\";\r\n\r\n    /** Observable raised when isChecked is changed */\r\n    public onIsCheckedChangedObservable = new Observable<boolean>();\r\n\r\n    /** Gets or sets a value indicating the ratio between overall size and check size */\r\n    @serialize()\r\n    public get checkSizeRatio(): number {\r\n        return this._checkSizeRatio;\r\n    }\r\n\r\n    public set checkSizeRatio(value: number) {\r\n        value = Math.max(Math.min(1, value), 0);\r\n\r\n        if (this._checkSizeRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._checkSizeRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the checkbox is checked or not */\r\n    @serialize()\r\n    public get isChecked(): boolean {\r\n        return this._isChecked;\r\n    }\r\n\r\n    public set isChecked(value: boolean) {\r\n        if (this._isChecked === value) {\r\n            return;\r\n        }\r\n\r\n        this._isChecked = value;\r\n        this._markAsDirty();\r\n\r\n        this.onIsCheckedChangedObservable.notifyObservers(value);\r\n\r\n        if (this._isChecked && this._host) {\r\n            // Update all controls from same group\r\n            this._host.executeOnAllControls((control) => {\r\n                if (control === this) {\r\n                    return;\r\n                }\r\n\r\n                if ((<any>control).group === undefined) {\r\n                    return;\r\n                }\r\n                const childRadio = <RadioButton>control;\r\n                if (childRadio.group === this.group) {\r\n                    childRadio.isChecked = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new RadioButton\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"RadioButton\";\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        const actualWidth = this._currentMeasure.width - this._thickness;\r\n        const actualHeight = this._currentMeasure.height - this._thickness;\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        // Outer\r\n        Control.drawEllipse(\r\n            this._currentMeasure.left + this._currentMeasure.width / 2,\r\n            this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2 - this._thickness / 2,\r\n            this._currentMeasure.height / 2 - this._thickness / 2,\r\n            context\r\n        );\r\n\r\n        context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\r\n        context.fill();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._thickness;\r\n\r\n        context.stroke();\r\n\r\n        // Inner\r\n        if (this._isChecked) {\r\n            context.fillStyle = this._isEnabled ? this.color : this._disabledColor;\r\n            const offsetWidth = actualWidth * this._checkSizeRatio;\r\n            const offseHeight = actualHeight * this._checkSizeRatio;\r\n\r\n            Control.drawEllipse(\r\n                this._currentMeasure.left + this._currentMeasure.width / 2,\r\n                this._currentMeasure.top + this._currentMeasure.height / 2,\r\n                offsetWidth / 2 - this._thickness / 2,\r\n                offseHeight / 2 - this._thickness / 2,\r\n                context\r\n            );\r\n\r\n            context.fill();\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        if (!this.isChecked) {\r\n            this.isChecked = true;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Utility function to easily create a radio button with a header\r\n     * @param title defines the label to use for the header\r\n     * @param group defines the group to use for the radio button\r\n     * @param isChecked defines the initial state of the radio button\r\n     * @param onValueChanged defines the callback to call when value changes\r\n     * @returns a StackPanel containing the radio button and a textBlock\r\n     */\r\n    public static AddRadioButtonWithHeader(title: string, group: string, isChecked: boolean, onValueChanged: (button: RadioButton, value: boolean) => void): StackPanel {\r\n        const panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.height = \"30px\";\r\n\r\n        const radio = new RadioButton();\r\n        radio.width = \"20px\";\r\n        radio.height = \"20px\";\r\n        radio.isChecked = isChecked;\r\n        radio.color = \"green\";\r\n        radio.group = group;\r\n        radio.onIsCheckedChangedObservable.add((value) => onValueChanged(radio, value));\r\n        panel.addControl(radio);\r\n\r\n        const header = new TextBlock();\r\n        header.text = title;\r\n        header.width = \"180px\";\r\n        header.paddingLeft = \"5px\";\r\n        header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        header.color = \"white\";\r\n        panel.addControl(header);\r\n\r\n        return panel;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.RadioButton\", RadioButton);\r\n", "import { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Control } from \"../control\";\r\nimport { ValueAndUnit } from \"../../valueAndUnit\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class BaseSlider extends Control {\r\n    protected _thumbWidth = new ValueAndUnit(20, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _minimum = 0;\r\n    private _maximum = 100;\r\n    private _value = 50;\r\n    private _isVertical = false;\r\n    protected _barOffset = new ValueAndUnit(5, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _isThumbClamped = false;\r\n    protected _displayThumb = true;\r\n    private _step = 0;\r\n\r\n    private _lastPointerDownId = -1;\r\n\r\n    // Shared rendering info\r\n    protected _effectiveBarOffset = 0;\r\n    protected _renderLeft: number;\r\n    protected _renderTop: number;\r\n    protected _renderWidth: number;\r\n    protected _renderHeight: number;\r\n    protected _backgroundBoxLength: number;\r\n    protected _backgroundBoxThickness: number;\r\n    protected _effectiveThumbThickness: number;\r\n\r\n    /** Observable raised when the slider value changes */\r\n    public onValueChangedObservable = new Observable<number>();\r\n\r\n    /** Gets or sets a boolean indicating if the thumb must be rendered */\r\n    @serialize()\r\n    public get displayThumb(): boolean {\r\n        return this._displayThumb;\r\n    }\r\n\r\n    public set displayThumb(value: boolean) {\r\n        if (this._displayThumb === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayThumb = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a step to apply to values (0 by default) */\r\n    @serialize()\r\n    public get step(): number {\r\n        return this._step;\r\n    }\r\n\r\n    public set step(value: number) {\r\n        if (this._step === value) {\r\n            return;\r\n        }\r\n\r\n        this._step = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets main bar offset (ie. the margin applied to the value bar) */\r\n    @serialize()\r\n    public get barOffset(): string | number {\r\n        return this._barOffset.toString(this._host);\r\n    }\r\n\r\n    /** Gets main bar offset in pixels*/\r\n    public get barOffsetInPixels(): number {\r\n        return this._barOffset.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set barOffset(value: string | number) {\r\n        if (this._barOffset.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._barOffset.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets thumb width */\r\n    @serialize()\r\n    public get thumbWidth(): string | number {\r\n        return this._thumbWidth.toString(this._host);\r\n    }\r\n\r\n    /** Gets thumb width in pixels */\r\n    public get thumbWidthInPixels(): number {\r\n        return this._thumbWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set thumbWidth(value: string | number) {\r\n        if (this._thumbWidth.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._thumbWidth.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets minimum value */\r\n    @serialize()\r\n    public get minimum(): number {\r\n        return this._minimum;\r\n    }\r\n\r\n    public set minimum(value: number) {\r\n        if (this._minimum === value) {\r\n            return;\r\n        }\r\n\r\n        this._minimum = value;\r\n        this._markAsDirty();\r\n\r\n        this.value = Math.max(Math.min(this.value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets maximum value */\r\n    @serialize()\r\n    public get maximum(): number {\r\n        return this._maximum;\r\n    }\r\n\r\n    public set maximum(value: number) {\r\n        if (this._maximum === value) {\r\n            return;\r\n        }\r\n\r\n        this._maximum = value;\r\n        this._markAsDirty();\r\n\r\n        this.value = Math.max(Math.min(this.value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets current value */\r\n    @serialize()\r\n    public get value(): number {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(value: number) {\r\n        value = Math.max(Math.min(value, this._maximum), this._minimum);\r\n\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n\r\n        this._value = value;\r\n        this._markAsDirty();\r\n        this.onValueChangedObservable.notifyObservers(this._value);\r\n    }\r\n\r\n    /**Gets or sets a boolean indicating if the slider should be vertical or horizontal */\r\n    @serialize()\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating if the thumb can go over main bar extends */\r\n    @serialize()\r\n    public get isThumbClamped(): boolean {\r\n        return this._isThumbClamped;\r\n    }\r\n\r\n    public set isThumbClamped(value: boolean) {\r\n        if (this._isThumbClamped === value) {\r\n            return;\r\n        }\r\n\r\n        this._isThumbClamped = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new BaseSlider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"BaseSlider\";\r\n    }\r\n\r\n    protected _getThumbPosition() {\r\n        if (this.isVertical) {\r\n            return ((this.maximum - this.value) / (this.maximum - this.minimum)) * this._backgroundBoxLength;\r\n        }\r\n\r\n        return ((this.value - this.minimum) / (this.maximum - this.minimum)) * this._backgroundBoxLength;\r\n    }\r\n\r\n    protected _getThumbThickness(type: string): number {\r\n        let thumbThickness = 0;\r\n        switch (type) {\r\n            case \"circle\":\r\n                if (this._thumbWidth.isPixel) {\r\n                    thumbThickness = Math.max(this._thumbWidth.getValue(this._host), this._backgroundBoxThickness);\r\n                } else {\r\n                    thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n                }\r\n                break;\r\n            case \"rectangle\":\r\n                if (this._thumbWidth.isPixel) {\r\n                    thumbThickness = Math.min(this._thumbWidth.getValue(this._host), this._backgroundBoxThickness);\r\n                } else {\r\n                    thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n                }\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n    protected _prepareRenderingData(type: string) {\r\n        // Main bar\r\n        this._effectiveBarOffset = 0;\r\n        this._renderLeft = this._currentMeasure.left;\r\n        this._renderTop = this._currentMeasure.top;\r\n        this._renderWidth = this._currentMeasure.width;\r\n        this._renderHeight = this._currentMeasure.height;\r\n\r\n        this._backgroundBoxLength = Math.max(this._currentMeasure.width, this._currentMeasure.height);\r\n        this._backgroundBoxThickness = Math.min(this._currentMeasure.width, this._currentMeasure.height);\r\n        this._effectiveThumbThickness = this._getThumbThickness(type);\r\n\r\n        if (this.displayThumb) {\r\n            this._backgroundBoxLength -= this._effectiveThumbThickness;\r\n        }\r\n        //throw error when height is less than width for vertical slider\r\n        if (this.isVertical && this._currentMeasure.height < this._currentMeasure.width) {\r\n            Logger.Error(\"Height should be greater than width\");\r\n            return;\r\n        }\r\n        if (this._barOffset.isPixel) {\r\n            this._effectiveBarOffset = Math.min(this._barOffset.getValue(this._host), this._backgroundBoxThickness);\r\n        } else {\r\n            this._effectiveBarOffset = this._backgroundBoxThickness * this._barOffset.getValue(this._host);\r\n        }\r\n\r\n        this._backgroundBoxThickness -= this._effectiveBarOffset * 2;\r\n\r\n        if (this.isVertical) {\r\n            this._renderLeft += this._effectiveBarOffset;\r\n            if (!this.isThumbClamped && this.displayThumb) {\r\n                this._renderTop += this._effectiveThumbThickness / 2;\r\n            }\r\n\r\n            this._renderHeight = this._backgroundBoxLength;\r\n            this._renderWidth = this._backgroundBoxThickness;\r\n        } else {\r\n            this._renderTop += this._effectiveBarOffset;\r\n            if (!this.isThumbClamped && this.displayThumb) {\r\n                this._renderLeft += this._effectiveThumbThickness / 2;\r\n            }\r\n            this._renderHeight = this._backgroundBoxThickness;\r\n            this._renderWidth = this._backgroundBoxLength;\r\n        }\r\n    }\r\n\r\n    // Events\r\n    private _pointerIsDown = false;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        let value: number;\r\n        if (this._isVertical) {\r\n            value = this._minimum + (1 - (y - this._currentMeasure.top) / this._currentMeasure.height) * (this._maximum - this._minimum);\r\n        } else {\r\n            value = this._minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this._maximum - this._minimum);\r\n        }\r\n        this.value = this._step ? Math.round(value / this._step) * this._step : value;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        this._pointerIsDown = true;\r\n\r\n        this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        this._host._capturingControl[pointerId] = this;\r\n        this._lastPointerDownId = pointerId;\r\n        return true;\r\n    }\r\n\r\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\r\n        // Only listen to pointer move events coming from the last pointer to click on the element (To support dual vr controller interaction)\r\n        if (pointerId != this._lastPointerDownId) {\r\n            return;\r\n        }\r\n\r\n        if (this._pointerIsDown && !this.isReadOnly) {\r\n            this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        }\r\n\r\n        super._onPointerMove(target, coordinates, pointerId, pi);\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._pointerIsDown = false;\r\n\r\n        delete this._host._capturingControl[pointerId];\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n\r\n    public _onCanvasBlur(): void {\r\n        this._forcePointerUp();\r\n        super._onCanvasBlur();\r\n    }\r\n}\r\n", "import { BaseSlider } from \"./baseSlider\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { BaseGradient } from \"../gradient/BaseGradient\";\r\nimport type { AdvancedDynamicTexture } from \"gui/2D/advancedDynamicTexture\";\r\nimport { Tools } from \"core/Misc/tools\";\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class Slider extends BaseSlider {\r\n    private _background = \"black\";\r\n    private _borderColor = \"white\";\r\n    private _thumbColor = \"\";\r\n    private _isThumbCircle = false;\r\n    protected _displayValueBar = true;\r\n    private _backgroundGradient: Nullable<BaseGradient> = null;\r\n\r\n    /** Gets or sets a boolean indicating if the value bar must be rendered */\r\n    @serialize()\r\n    public get displayValueBar(): boolean {\r\n        return this._displayValueBar;\r\n    }\r\n\r\n    public set displayValueBar(value: boolean) {\r\n        if (this._displayValueBar === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayValueBar = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets border color */\r\n    @serialize()\r\n    public get borderColor(): string {\r\n        return this._borderColor;\r\n    }\r\n\r\n    public set borderColor(value: string) {\r\n        if (this._borderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._borderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background gradient */\r\n    public get backgroundGradient(): Nullable<BaseGradient> {\r\n        return this._backgroundGradient;\r\n    }\r\n\r\n    public set backgroundGradient(value: Nullable<BaseGradient>) {\r\n        if (this._backgroundGradient === value) {\r\n            return;\r\n        }\r\n\r\n        this._backgroundGradient = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets thumb's color */\r\n    @serialize()\r\n    public get thumbColor(): string {\r\n        return this._thumbColor;\r\n    }\r\n\r\n    public set thumbColor(value: string) {\r\n        if (this._thumbColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the thumb should be round or square */\r\n    @serialize()\r\n    public get isThumbCircle(): boolean {\r\n        return this._isThumbCircle;\r\n    }\r\n\r\n    public set isThumbCircle(value: boolean) {\r\n        if (this._isThumbCircle === value) {\r\n            return;\r\n        }\r\n\r\n        this._isThumbCircle = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Slider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Slider\";\r\n    }\r\n\r\n    protected _getBackgroundColor(context: ICanvasRenderingContext) {\r\n        return this._backgroundGradient ? this._backgroundGradient.getCanvasGradient(context) : this._background;\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        this._prepareRenderingData(this.isThumbCircle ? \"circle\" : \"rectangle\");\r\n        let left = this._renderLeft;\r\n        let top = this._renderTop;\r\n        const width = this._renderWidth;\r\n        const height = this._renderHeight;\r\n\r\n        let radius = 0;\r\n\r\n        if (this.isThumbClamped && this.isThumbCircle) {\r\n            if (this.isVertical) {\r\n                top += this._effectiveThumbThickness / 2;\r\n            } else {\r\n                left += this._effectiveThumbThickness / 2;\r\n            }\r\n\r\n            radius = this._backgroundBoxThickness / 2;\r\n        } else {\r\n            radius = (this._effectiveThumbThickness - this._effectiveBarOffset) / 2;\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        const thumbPosition = this._getThumbPosition();\r\n        context.fillStyle = this._getBackgroundColor(context);\r\n\r\n        if (this.isVertical) {\r\n            if (this.isThumbClamped) {\r\n                if (this.isThumbCircle) {\r\n                    context.beginPath();\r\n                    context.arc(left + this._backgroundBoxThickness / 2, top, radius, Math.PI, 2 * Math.PI);\r\n                    context.fill();\r\n                    context.fillRect(left, top, width, height);\r\n                } else {\r\n                    context.fillRect(left, top, width, height + this._effectiveThumbThickness);\r\n                }\r\n            } else {\r\n                context.fillRect(left, top, width, height);\r\n            }\r\n        } else {\r\n            if (this.isThumbClamped) {\r\n                if (this.isThumbCircle) {\r\n                    context.beginPath();\r\n                    context.arc(left + this._backgroundBoxLength, top + this._backgroundBoxThickness / 2, radius, 0, 2 * Math.PI);\r\n                    context.fill();\r\n                    context.fillRect(left, top, width, height);\r\n                } else {\r\n                    context.fillRect(left, top, width + this._effectiveThumbThickness, height);\r\n                }\r\n            } else {\r\n                context.fillRect(left, top, width, height);\r\n            }\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        // Value bar\r\n        context.fillStyle = this._getColor(context);\r\n        if (this._displayValueBar) {\r\n            if (this.isVertical) {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left + this._backgroundBoxThickness / 2, top + this._backgroundBoxLength, radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top + thumbPosition, width, height - thumbPosition);\r\n                    } else {\r\n                        context.fillRect(left, top + thumbPosition, width, height - thumbPosition + this._effectiveThumbThickness);\r\n                    }\r\n                } else {\r\n                    context.fillRect(left, top + thumbPosition, width, height - thumbPosition);\r\n                }\r\n            } else {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left, top + this._backgroundBoxThickness / 2, radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top, thumbPosition, height);\r\n                    } else {\r\n                        context.fillRect(left, top, thumbPosition, height);\r\n                    }\r\n                } else {\r\n                    context.fillRect(left, top, thumbPosition, height);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Thumb\r\n        context.fillStyle = this._thumbColor || this._getColor(context);\r\n        if (this.displayThumb) {\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n            if (this._isThumbCircle) {\r\n                context.beginPath();\r\n                if (this.isVertical) {\r\n                    context.arc(left + this._backgroundBoxThickness / 2, top + thumbPosition, radius, 0, 2 * Math.PI);\r\n                } else {\r\n                    context.arc(left + thumbPosition, top + this._backgroundBoxThickness / 2, radius, 0, 2 * Math.PI);\r\n                }\r\n                context.fill();\r\n                if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                    context.shadowBlur = 0;\r\n                    context.shadowOffsetX = 0;\r\n                    context.shadowOffsetY = 0;\r\n                }\r\n                context.strokeStyle = this._borderColor;\r\n                context.stroke();\r\n            } else {\r\n                if (this.isVertical) {\r\n                    context.fillRect(left - this._effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, this._effectiveThumbThickness);\r\n                } else {\r\n                    context.fillRect(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height);\r\n                }\r\n                if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                    context.shadowBlur = 0;\r\n                    context.shadowOffsetX = 0;\r\n                    context.shadowOffsetY = 0;\r\n                }\r\n                context.strokeStyle = this._borderColor;\r\n                if (this.isVertical) {\r\n                    context.strokeRect(left - this._effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, this._effectiveThumbThickness);\r\n                } else {\r\n                    context.strokeRect(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height);\r\n                }\r\n            }\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    public serialize(serializationObject: any) {\r\n        super.serialize(serializationObject);\r\n\r\n        if (this.backgroundGradient) {\r\n            serializationObject.backgroundGradient = {};\r\n            this.backgroundGradient.serialize(serializationObject.backgroundGradient);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n\r\n        if (serializedObject.backgroundGradient) {\r\n            const className = Tools.Instantiate(\"BABYLON.GUI.\" + serializedObject.backgroundGradient.className);\r\n            this.backgroundGradient = new className();\r\n            this.backgroundGradient!.parse(serializedObject.backgroundGradient);\r\n        }\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Slider\", Slider);\r\n", "import { Rectangle } from \"./rectangle\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { Control } from \"./control\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { Checkbox } from \"./checkbox\";\r\nimport { RadioButton } from \"./radioButton\";\r\nimport { Slider } from \"./sliders/slider\";\r\nimport { Container } from \"./container\";\r\n\r\n/** Class used to create a RadioGroup\r\n * which contains groups of radio buttons\r\n */\r\nexport class SelectorGroup {\r\n    private _groupPanel = new StackPanel();\r\n    private _selectors: StackPanel[] = new Array();\r\n    private _groupHeader: TextBlock;\r\n\r\n    /**\r\n     * Creates a new SelectorGroup\r\n     * @param name of group, used as a group heading\r\n     */\r\n    constructor(\r\n        /** name of SelectorGroup */\r\n        public name: string\r\n    ) {\r\n        this._groupPanel.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._groupPanel.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._groupHeader = this._addGroupHeader(name);\r\n    }\r\n\r\n    /** Gets the groupPanel of the SelectorGroup  */\r\n    public get groupPanel(): StackPanel {\r\n        return this._groupPanel;\r\n    }\r\n\r\n    /** Gets the selectors array */\r\n    public get selectors(): StackPanel[] {\r\n        return this._selectors;\r\n    }\r\n\r\n    /** Gets and sets the group header */\r\n    public get header() {\r\n        return this._groupHeader.text;\r\n    }\r\n\r\n    public set header(label: string) {\r\n        if (this._groupHeader.text === \"label\") {\r\n            return;\r\n        }\r\n\r\n        this._groupHeader.text = label;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    private _addGroupHeader(text: string): TextBlock {\r\n        const groupHeading = new TextBlock(\"groupHead\", text);\r\n        groupHeading.width = 0.9;\r\n        groupHeading.height = \"30px\";\r\n        groupHeading.textWrapping = true;\r\n        groupHeading.color = \"black\";\r\n        groupHeading.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        groupHeading.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        groupHeading.left = \"2px\";\r\n        this._groupPanel.addControl(groupHeading);\r\n        return groupHeading;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _getSelector(selectorNb: number) {\r\n        if (selectorNb < 0 || selectorNb >= this._selectors.length) {\r\n            return;\r\n        }\r\n        return this._selectors[selectorNb];\r\n    }\r\n\r\n    /** Removes the selector at the given position\r\n     * @param selectorNb the position of the selector within the group\r\n     */\r\n    public removeSelector(selectorNb: number) {\r\n        if (selectorNb < 0 || selectorNb >= this._selectors.length) {\r\n            return;\r\n        }\r\n        this._groupPanel.removeControl(this._selectors[selectorNb]);\r\n        this._selectors.splice(selectorNb, 1);\r\n    }\r\n}\r\n\r\n/** Class used to create a CheckboxGroup\r\n * which contains groups of checkbox buttons\r\n */\r\nexport class CheckboxGroup extends SelectorGroup {\r\n    /** Adds a checkbox as a control\r\n     * @param text is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public addCheckbox(text: string, func = (s: boolean) => {}, checked: boolean = false): void {\r\n        checked = checked || false;\r\n        const button = new Checkbox();\r\n        button.width = \"20px\";\r\n        button.height = \"20px\";\r\n        button.color = \"#364249\";\r\n        button.background = \"#CCCCCC\";\r\n        button.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n\r\n        button.onIsCheckedChangedObservable.add(function (state) {\r\n            func(state);\r\n        });\r\n\r\n        const _selector = Control.AddHeader(button, text, \"200px\", { isHorizontal: true, controlFirst: true });\r\n        _selector.height = \"30px\";\r\n        _selector.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        _selector.left = \"4px\";\r\n\r\n        this.groupPanel.addControl(_selector);\r\n        this.selectors.push(_selector);\r\n        button.isChecked = checked;\r\n\r\n        if (this.groupPanel.parent && this.groupPanel.parent.parent) {\r\n            button.color = (<SelectionPanel>this.groupPanel.parent.parent).buttonColor;\r\n            button.background = (<SelectionPanel>this.groupPanel.parent.parent).buttonBackground;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorLabel(selectorNb: number, label: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).text = label;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorLabelColor(selectorNb: number, color: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).color = color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorButtonColor(selectorNb: number, color: string) {\r\n        this.selectors[selectorNb].children[0].color = color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorButtonBackground(selectorNb: number, color: string) {\r\n        (<Checkbox>this.selectors[selectorNb].children[0]).background = color;\r\n    }\r\n}\r\n\r\n/** Class used to create a RadioGroup\r\n * which contains groups of radio buttons\r\n */\r\nexport class RadioGroup extends SelectorGroup {\r\n    private _selectNb = 0;\r\n\r\n    /** Adds a radio button as a control\r\n     * @param label is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public addRadio(label: string, func = (n: number) => {}, checked = false): void {\r\n        const nb = this._selectNb++;\r\n        const button = new RadioButton();\r\n        button.name = label;\r\n        button.width = \"20px\";\r\n        button.height = \"20px\";\r\n        button.color = \"#364249\";\r\n        button.background = \"#CCCCCC\";\r\n        button.group = this.name;\r\n        button.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n\r\n        button.onIsCheckedChangedObservable.add(function (state) {\r\n            if (state) {\r\n                func(nb);\r\n            }\r\n        });\r\n\r\n        const _selector = Control.AddHeader(button, label, \"200px\", { isHorizontal: true, controlFirst: true });\r\n        _selector.height = \"30px\";\r\n        _selector.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        _selector.left = \"4px\";\r\n        this.groupPanel.addControl(_selector);\r\n        this.selectors.push(_selector);\r\n        button.isChecked = checked;\r\n\r\n        if (this.groupPanel.parent && this.groupPanel.parent.parent) {\r\n            button.color = (<SelectionPanel>this.groupPanel.parent.parent).buttonColor;\r\n            button.background = (<SelectionPanel>this.groupPanel.parent.parent).buttonBackground;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorLabel(selectorNb: number, label: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).text = label;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorLabelColor(selectorNb: number, color: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).color = color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorButtonColor(selectorNb: number, color: string) {\r\n        this.selectors[selectorNb].children[0].color = color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorButtonBackground(selectorNb: number, color: string) {\r\n        (<RadioButton>this.selectors[selectorNb].children[0]).background = color;\r\n    }\r\n}\r\n\r\n/** Class used to create a SliderGroup\r\n * which contains groups of slider buttons\r\n */\r\nexport class SliderGroup extends SelectorGroup {\r\n    /**\r\n     * Adds a slider to the SelectorGroup\r\n     * @param label is the label for the SliderBar\r\n     * @param func is the function called when the Slider moves\r\n     * @param unit is a string describing the units used, eg degrees or metres\r\n     * @param min is the minimum value for the Slider\r\n     * @param max is the maximum value for the Slider\r\n     * @param value is the start value for the Slider between min and max\r\n     * @param onValueChange is the function used to format the value displayed, eg radians to degrees\r\n     */\r\n    public addSlider(\r\n        label: string,\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        func = (v: number) => {},\r\n        unit: string = \"Units\",\r\n        min: number = 0,\r\n        max: number = 0,\r\n        value: number = 0,\r\n        onValueChange = (v: number) => {\r\n            return v | 0;\r\n        }\r\n    ): void {\r\n        const button = new Slider();\r\n        button.name = unit;\r\n        button.value = value;\r\n        button.minimum = min;\r\n        button.maximum = max;\r\n        button.width = 0.9;\r\n        button.height = \"20px\";\r\n        button.color = \"#364249\";\r\n        button.background = \"#CCCCCC\";\r\n        button.borderColor = \"black\";\r\n        button.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        button.left = \"4px\";\r\n        button.paddingBottom = \"4px\";\r\n\r\n        button.onValueChangedObservable.add(function (value) {\r\n            (<TextBlock>button.parent!.children[0]).text = button.parent!.children[0].name + \": \" + onValueChange(value) + \" \" + button.name;\r\n            func(value);\r\n        });\r\n\r\n        const _selector = Control.AddHeader(button, label + \": \" + onValueChange(value) + \" \" + unit, \"30px\", { isHorizontal: false, controlFirst: false });\r\n        _selector.height = \"60px\";\r\n        _selector.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        _selector.left = \"4px\";\r\n        _selector.children[0].name = label;\r\n        this.groupPanel.addControl(_selector);\r\n        this.selectors.push(_selector);\r\n\r\n        if (this.groupPanel.parent && this.groupPanel.parent.parent) {\r\n            button.color = (<SelectionPanel>this.groupPanel.parent.parent).buttonColor;\r\n            button.background = (<SelectionPanel>this.groupPanel.parent.parent).buttonBackground;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorLabel(selectorNb: number, label: string) {\r\n        this.selectors[selectorNb].children[0].name = label;\r\n        (<TextBlock>this.selectors[selectorNb].children[0]).text =\r\n            label + \": \" + (<Slider>this.selectors[selectorNb].children[1]).value + \" \" + this.selectors[selectorNb].children[1].name;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorLabelColor(selectorNb: number, color: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[0]).color = color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorButtonColor(selectorNb: number, color: string) {\r\n        this.selectors[selectorNb].children[1].color = color;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _setSelectorButtonBackground(selectorNb: number, color: string) {\r\n        (<Slider>this.selectors[selectorNb].children[1]).background = color;\r\n    }\r\n}\r\n\r\n/** Class used to hold the controls for the checkboxes, radio buttons and sliders\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/selector\r\n */\r\nexport class SelectionPanel extends Rectangle {\r\n    private _panel: StackPanel;\r\n    private _buttonColor: string = \"#364249\";\r\n    private _buttonBackground: string = \"#CCCCCC\";\r\n    private _headerColor: string = \"black\";\r\n    private _barColor: string = \"white\";\r\n    private _barHeight: string = \"2px\";\r\n    private _spacerHeight: string = \"20px\";\r\n    private _labelColor: string;\r\n    private _groups: SelectorGroup[];\r\n    private _bars: any[] = new Array();\r\n\r\n    /**\r\n     * Creates a new SelectionPanel\r\n     * @param name of SelectionPanel\r\n     * @param groups is an array of SelectionGroups\r\n     */\r\n    constructor(\r\n        /** name of SelectionPanel */\r\n        public name: string,\r\n        /** an array of SelectionGroups */\r\n        public groups: SelectorGroup[] = []\r\n    ) {\r\n        super(name);\r\n        this._groups = groups;\r\n        this.thickness = 2;\r\n        this._panel = new StackPanel();\r\n        this._panel.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._panel.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._panel.top = 5;\r\n        this._panel.left = 5;\r\n        this._panel.width = 0.95;\r\n        if (groups.length > 0) {\r\n            for (let i = 0; i < groups.length - 1; i++) {\r\n                this._panel.addControl(groups[i].groupPanel);\r\n                this._addSpacer();\r\n            }\r\n            this._panel.addControl(groups[groups.length - 1].groupPanel);\r\n        }\r\n        this.addControl(this._panel);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"SelectionPanel\";\r\n    }\r\n\r\n    /** Gets the (stack) panel of the SelectionPanel  */\r\n    public get panel(): StackPanel {\r\n        return this._panel;\r\n    }\r\n\r\n    /** Gets or sets the headerColor */\r\n    public get headerColor(): string {\r\n        return this._headerColor;\r\n    }\r\n\r\n    public set headerColor(color: string) {\r\n        if (this._headerColor === color) {\r\n            return;\r\n        }\r\n        this._headerColor = color;\r\n        this._setHeaderColor();\r\n    }\r\n\r\n    private _setHeaderColor() {\r\n        for (let i = 0; i < this._groups.length; i++) {\r\n            this._groups[i].groupPanel.children[0].color = this._headerColor;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the button color */\r\n    public get buttonColor(): string {\r\n        return this._buttonColor;\r\n    }\r\n\r\n    public set buttonColor(color: string) {\r\n        if (this._buttonColor === color) {\r\n            return;\r\n        }\r\n\r\n        this._buttonColor = color;\r\n        this._setbuttonColor();\r\n    }\r\n\r\n    private _setbuttonColor() {\r\n        for (let i = 0; i < this._groups.length; i++) {\r\n            for (let j = 0; j < this._groups[i].selectors.length; j++) {\r\n                (<CheckboxGroup | RadioGroup | SliderGroup>this._groups[i])._setSelectorButtonColor(j, this._buttonColor);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the label color */\r\n    public get labelColor(): string {\r\n        return this._labelColor;\r\n    }\r\n\r\n    public set labelColor(color: string) {\r\n        if (this._labelColor === color) {\r\n            return;\r\n        }\r\n        this._labelColor = color;\r\n        this._setLabelColor();\r\n    }\r\n\r\n    private _setLabelColor() {\r\n        for (let i = 0; i < this._groups.length; i++) {\r\n            for (let j = 0; j < this._groups[i].selectors.length; j++) {\r\n                (<CheckboxGroup | RadioGroup | SliderGroup>this._groups[i])._setSelectorLabelColor(j, this._labelColor);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the button background */\r\n    public get buttonBackground(): string {\r\n        return this._buttonBackground;\r\n    }\r\n\r\n    public set buttonBackground(color: string) {\r\n        if (this._buttonBackground === color) {\r\n            return;\r\n        }\r\n\r\n        this._buttonBackground = color;\r\n        this._setButtonBackground();\r\n    }\r\n\r\n    private _setButtonBackground() {\r\n        for (let i = 0; i < this._groups.length; i++) {\r\n            for (let j = 0; j < this._groups[i].selectors.length; j++) {\r\n                (<CheckboxGroup | RadioGroup | SliderGroup>this._groups[i])._setSelectorButtonBackground(j, this._buttonBackground);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the color of separator bar */\r\n    public get barColor(): string {\r\n        return this._barColor;\r\n    }\r\n\r\n    public set barColor(color: string) {\r\n        if (this._barColor === color) {\r\n            return;\r\n        }\r\n\r\n        this._barColor = color;\r\n        this._setBarColor();\r\n    }\r\n\r\n    private _setBarColor() {\r\n        for (let i = 0; i < this._bars.length; i++) {\r\n            this._bars[i].children[0].background = this._barColor;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the height of separator bar */\r\n    public get barHeight(): string {\r\n        return this._barHeight;\r\n    }\r\n\r\n    public set barHeight(value: string) {\r\n        if (this._barHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._barHeight = value;\r\n        this._setBarHeight();\r\n    }\r\n\r\n    private _setBarHeight() {\r\n        for (let i = 0; i < this._bars.length; i++) {\r\n            this._bars[i].children[0].height = this._barHeight;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the height of spacers*/\r\n    public get spacerHeight(): string {\r\n        return this._spacerHeight;\r\n    }\r\n\r\n    public set spacerHeight(value: string) {\r\n        if (this._spacerHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._spacerHeight = value;\r\n        this._setSpacerHeight();\r\n    }\r\n\r\n    private _setSpacerHeight() {\r\n        for (let i = 0; i < this._bars.length; i++) {\r\n            this._bars[i].height = this._spacerHeight;\r\n        }\r\n    }\r\n\r\n    /** Adds a bar between groups */\r\n    private _addSpacer(): void {\r\n        const separator = new Container();\r\n        separator.width = 1;\r\n        separator.height = this._spacerHeight;\r\n        separator.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n\r\n        const bar = new Rectangle();\r\n        bar.width = 1;\r\n        bar.height = this._barHeight;\r\n        bar.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        bar.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n        bar.background = this._barColor;\r\n        bar.color = \"transparent\";\r\n        separator.addControl(bar);\r\n\r\n        this._panel.addControl(separator);\r\n        this._bars.push(separator);\r\n    }\r\n\r\n    /** Add a group to the selection panel\r\n     * @param group is the selector group to add\r\n     */\r\n    public addGroup(group: SelectorGroup): void {\r\n        if (this._groups.length > 0) {\r\n            this._addSpacer();\r\n        }\r\n        this._panel.addControl(group.groupPanel);\r\n        this._groups.push(group);\r\n        group.groupPanel.children[0].color = this._headerColor;\r\n        for (let j = 0; j < group.selectors.length; j++) {\r\n            (<CheckboxGroup | RadioGroup | SliderGroup>group)._setSelectorButtonColor(j, this._buttonColor);\r\n            (<CheckboxGroup | RadioGroup | SliderGroup>group)._setSelectorButtonBackground(j, this._buttonBackground);\r\n        }\r\n    }\r\n\r\n    /** Remove the group from the given position\r\n     * @param groupNb is the position of the group in the list\r\n     */\r\n    public removeGroup(groupNb: number): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        this._panel.removeControl(group.groupPanel);\r\n        this._groups.splice(groupNb, 1);\r\n        if (groupNb < this._bars.length) {\r\n            this._panel.removeControl(this._bars[groupNb]);\r\n            this._bars.splice(groupNb, 1);\r\n        }\r\n    }\r\n\r\n    /** Change a group header label\r\n     * @param label is the new group header label\r\n     * @param groupNb is the number of the group to relabel\r\n     * */\r\n    public setHeaderName(label: string, groupNb: number) {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        (<TextBlock>group.groupPanel.children[0]).text = label;\r\n    }\r\n\r\n    /** Change selector label to the one given\r\n     * @param label is the new selector label\r\n     * @param groupNb is the number of the groupcontaining the selector\r\n     * @param selectorNb is the number of the selector within a group to relabel\r\n     * */\r\n    public relabel(label: string, groupNb: number, selectorNb: number): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        if (selectorNb < 0 || selectorNb >= group.selectors.length) {\r\n            return;\r\n        }\r\n        (<CheckboxGroup | RadioGroup | SliderGroup>group)._setSelectorLabel(selectorNb, label);\r\n    }\r\n\r\n    /** For a given group position remove the selector at the given position\r\n     * @param groupNb is the number of the group to remove the selector from\r\n     * @param selectorNb is the number of the selector within the group\r\n     */\r\n    public removeFromGroupSelector(groupNb: number, selectorNb: number): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        if (selectorNb < 0 || selectorNb >= group.selectors.length) {\r\n            return;\r\n        }\r\n        group.removeSelector(selectorNb);\r\n    }\r\n\r\n    /** For a given group position of correct type add a checkbox button\r\n     * @param groupNb is the number of the group to remove the selector from\r\n     * @param label is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    public addToGroupCheckbox(groupNb: number, label: string, func = () => {}, checked: boolean = false): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        (<CheckboxGroup>group).addCheckbox(label, func, checked);\r\n    }\r\n\r\n    /** For a given group position of correct type add a radio button\r\n     * @param groupNb is the number of the group to remove the selector from\r\n     * @param label is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    public addToGroupRadio(groupNb: number, label: string, func = () => {}, checked: boolean = false): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        (<RadioGroup>group).addRadio(label, func, checked);\r\n    }\r\n\r\n    /**\r\n     * For a given slider group add a slider\r\n     * @param groupNb is the number of the group to add the slider to\r\n     * @param label is the label for the Slider\r\n     * @param func is the function called when the Slider moves\r\n     * @param unit is a string describing the units used, eg degrees or metres\r\n     * @param min is the minimum value for the Slider\r\n     * @param max is the maximum value for the Slider\r\n     * @param value is the start value for the Slider between min and max\r\n     * @param onVal is the function used to format the value displayed, eg radians to degrees\r\n     */\r\n    public addToGroupSlider(\r\n        groupNb: number,\r\n        label: string,\r\n        func = () => {},\r\n        unit: string = \"Units\",\r\n        min: number = 0,\r\n        max: number = 0,\r\n        value: number = 0,\r\n        onVal = (v: number) => {\r\n            return v | 0;\r\n        }\r\n    ): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        const group = this._groups[groupNb];\r\n        (<SliderGroup>group).addSlider(label, func, unit, min, max, value, onVal);\r\n    }\r\n}\r\n", "import { Measure } from \"../../measure\";\r\nimport { Container } from \"../container\";\r\nimport { ValueAndUnit } from \"../../valueAndUnit\";\r\nimport { Control } from \"../control\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to hold a the container for ScrollViewer\r\n * @internal\r\n */\r\nexport class _ScrollViewerWindow extends Container {\r\n    public parentClientWidth: number;\r\n    public parentClientHeight: number;\r\n\r\n    private _freezeControls = false;\r\n    private _parentMeasure: Measure;\r\n    private _oldLeft: number | null;\r\n    private _oldTop: number | null;\r\n\r\n    public get freezeControls(): boolean {\r\n        return this._freezeControls;\r\n    }\r\n\r\n    public set freezeControls(value: boolean) {\r\n        if (this._freezeControls === value) {\r\n            return;\r\n        }\r\n\r\n        if (!value) {\r\n            this._restoreMeasures();\r\n        }\r\n\r\n        // trigger a full normal layout calculation to be sure all children have their measures up to date\r\n        this._freezeControls = false;\r\n\r\n        const textureSize = this.host.getSize();\r\n        const renderWidth = textureSize.width;\r\n        const renderHeight = textureSize.height;\r\n\r\n        const context = this.host.getContext();\r\n\r\n        const measure = new Measure(0, 0, renderWidth, renderHeight);\r\n\r\n        this.host._numLayoutCalls = 0;\r\n\r\n        this.host._rootContainer._layout(measure, context);\r\n\r\n        // in freeze mode, prepare children measures accordingly\r\n        if (value) {\r\n            this._updateMeasures();\r\n            if (this._useBuckets()) {\r\n                this._makeBuckets();\r\n            }\r\n        }\r\n\r\n        this._freezeControls = value;\r\n\r\n        this.host.markAsDirty(); // redraw with the (new) current settings\r\n    }\r\n\r\n    private _bucketWidth: number = 0;\r\n    private _bucketHeight: number = 0;\r\n    private _buckets: { [key: number]: Array<Control> } = {};\r\n    private _bucketLen: number;\r\n\r\n    public get bucketWidth(): number {\r\n        return this._bucketWidth;\r\n    }\r\n\r\n    public get bucketHeight(): number {\r\n        return this._bucketHeight;\r\n    }\r\n\r\n    public setBucketSizes(width: number, height: number): void {\r\n        this._bucketWidth = width;\r\n        this._bucketHeight = height;\r\n\r\n        if (this._useBuckets()) {\r\n            if (this._freezeControls) {\r\n                this._makeBuckets();\r\n            }\r\n        } else {\r\n            this._buckets = {};\r\n        }\r\n    }\r\n\r\n    private _useBuckets(): boolean {\r\n        return this._bucketWidth > 0 && this._bucketHeight > 0;\r\n    }\r\n\r\n    private _makeBuckets(): void {\r\n        this._buckets = {};\r\n        this._bucketLen = Math.ceil(this.widthInPixels / this._bucketWidth);\r\n        this._dispatchInBuckets(this._children);\r\n        this._oldLeft = null;\r\n        this._oldTop = null;\r\n    }\r\n\r\n    private _dispatchInBuckets(children: Control[]): void {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            const child = children[i];\r\n\r\n            const bStartX = Math.max(0, Math.floor((child._customData._origLeft - this._customData.origLeft) / this._bucketWidth)),\r\n                bEndX = Math.floor((child._customData._origLeft - this._customData.origLeft + child._currentMeasure.width - 1) / this._bucketWidth),\r\n                bEndY = Math.floor((child._customData._origTop - this._customData.origTop + child._currentMeasure.height - 1) / this._bucketHeight);\r\n            let bStartY = Math.max(0, Math.floor((child._customData._origTop - this._customData.origTop) / this._bucketHeight));\r\n\r\n            while (bStartY <= bEndY) {\r\n                for (let x = bStartX; x <= bEndX; ++x) {\r\n                    const bucket = bStartY * this._bucketLen + x;\r\n                    let lstc = this._buckets[bucket];\r\n\r\n                    if (!lstc) {\r\n                        lstc = [];\r\n                        this._buckets[bucket] = lstc;\r\n                    }\r\n\r\n                    lstc.push(child);\r\n                }\r\n                bStartY++;\r\n            }\r\n\r\n            if (child instanceof Container && child._children.length > 0) {\r\n                this._dispatchInBuckets(child._children);\r\n            }\r\n        }\r\n    }\r\n\r\n    // reset left and top measures for the window and all its children\r\n    private _updateMeasures(): void {\r\n        const left = this.leftInPixels | 0,\r\n            top = this.topInPixels | 0;\r\n\r\n        this._measureForChildren.left -= left;\r\n        this._measureForChildren.top -= top;\r\n        this._currentMeasure.left -= left;\r\n        this._currentMeasure.top -= top;\r\n\r\n        this._customData.origLeftForChildren = this._measureForChildren.left;\r\n        this._customData.origTopForChildren = this._measureForChildren.top;\r\n        this._customData.origLeft = this._currentMeasure.left;\r\n        this._customData.origTop = this._currentMeasure.top;\r\n\r\n        this._updateChildrenMeasures(this._children, left, top);\r\n    }\r\n\r\n    private _updateChildrenMeasures(children: Control[], left: number, top: number): void {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            const child = children[i];\r\n\r\n            child._currentMeasure.left -= left;\r\n            child._currentMeasure.top -= top;\r\n\r\n            child._customData._origLeft = child._currentMeasure.left; // save the original left and top values for each child\r\n            child._customData._origTop = child._currentMeasure.top;\r\n\r\n            if (child instanceof Container && child._children.length > 0) {\r\n                this._updateChildrenMeasures(child._children, left, top);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _restoreMeasures(): void {\r\n        const left = this.leftInPixels | 0,\r\n            top = this.topInPixels | 0;\r\n\r\n        this._measureForChildren.left = this._customData.origLeftForChildren + left;\r\n        this._measureForChildren.top = this._customData.origTopForChildren + top;\r\n        this._currentMeasure.left = this._customData.origLeft + left;\r\n        this._currentMeasure.top = this._customData.origTop + top;\r\n    }\r\n\r\n    /**\r\n     * Creates a new ScrollViewerWindow\r\n     * @param name of ScrollViewerWindow\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ScrollViewerWindow\";\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._parentMeasure = parentMeasure;\r\n\r\n        this._measureForChildren.left = this._currentMeasure.left;\r\n        this._measureForChildren.top = this._currentMeasure.top;\r\n\r\n        this._measureForChildren.width = parentMeasure.width;\r\n        this._measureForChildren.height = parentMeasure.height;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _layout(parentMeasure: Measure, context: ICanvasRenderingContext): boolean {\r\n        if (this._freezeControls) {\r\n            this.invalidateRect(); // will trigger a redraw of the window\r\n            return false;\r\n        }\r\n\r\n        return super._layout(parentMeasure, context);\r\n    }\r\n\r\n    private _scrollChildren(children: Control[], left: number, top: number): void {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            const child = children[i];\r\n\r\n            child._currentMeasure.left = child._customData._origLeft + left;\r\n            child._currentMeasure.top = child._customData._origTop + top;\r\n            child._isClipped = false; // clipping will be handled by _draw and the call to _intersectsRect()\r\n\r\n            if (child instanceof Container && child._children.length > 0) {\r\n                this._scrollChildren(child._children, left, top);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _scrollChildrenWithBuckets(left: number, top: number, scrollLeft: number, scrollTop: number): void {\r\n        const bStartX = Math.max(0, Math.floor(-left / this._bucketWidth)),\r\n            bEndX = Math.floor((-left + this._parentMeasure.width - 1) / this._bucketWidth),\r\n            bEndY = Math.floor((-top + this._parentMeasure.height - 1) / this._bucketHeight);\r\n        let bStartY = Math.max(0, Math.floor(-top / this._bucketHeight));\r\n\r\n        while (bStartY <= bEndY) {\r\n            for (let x = bStartX; x <= bEndX; ++x) {\r\n                const bucket = bStartY * this._bucketLen + x,\r\n                    lstc = this._buckets[bucket];\r\n\r\n                if (lstc) {\r\n                    for (let i = 0; i < lstc.length; ++i) {\r\n                        const child = lstc[i];\r\n                        child._currentMeasure.left = child._customData._origLeft + scrollLeft;\r\n                        child._currentMeasure.top = child._customData._origTop + scrollTop;\r\n                        child._isClipped = false; // clipping will be handled by _draw and the call to _intersectsRect()\r\n                    }\r\n                }\r\n            }\r\n            bStartY++;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _draw(context: ICanvasRenderingContext, invalidatedRectangle?: Measure): void {\r\n        if (!this._freezeControls) {\r\n            super._draw(context, invalidatedRectangle);\r\n            return;\r\n        }\r\n\r\n        this._localDraw(context);\r\n\r\n        if (this.clipChildren) {\r\n            this._clipForChildren(context);\r\n        }\r\n\r\n        const left = this.leftInPixels | 0,\r\n            top = this.topInPixels | 0;\r\n\r\n        if (this._useBuckets()) {\r\n            if (this._oldLeft !== null && this._oldTop !== null) {\r\n                this._scrollChildrenWithBuckets(this._oldLeft, this._oldTop, left, top);\r\n                this._scrollChildrenWithBuckets(left, top, left, top);\r\n            } else {\r\n                this._scrollChildren(this._children, left, top);\r\n            }\r\n        } else {\r\n            this._scrollChildren(this._children, left, top);\r\n        }\r\n\r\n        this._oldLeft = left;\r\n        this._oldTop = top;\r\n\r\n        for (const child of this._children) {\r\n            if (!child._intersectsRect(this._parentMeasure)) {\r\n                continue;\r\n            }\r\n            child._render(context, this._parentMeasure);\r\n        }\r\n    }\r\n\r\n    protected _postMeasure(): void {\r\n        if (this._freezeControls) {\r\n            super._postMeasure();\r\n            return;\r\n        }\r\n\r\n        let maxWidth = this.parentClientWidth;\r\n        let maxHeight = this.parentClientHeight;\r\n        for (const child of this.children) {\r\n            if (!child.isVisible || child.notRenderable) {\r\n                continue;\r\n            }\r\n\r\n            if (child.horizontalAlignment === Control.HORIZONTAL_ALIGNMENT_CENTER) {\r\n                child._offsetLeft(this._currentMeasure.left - child._currentMeasure.left);\r\n            }\r\n\r\n            if (child.verticalAlignment === Control.VERTICAL_ALIGNMENT_CENTER) {\r\n                child._offsetTop(this._currentMeasure.top - child._currentMeasure.top);\r\n            }\r\n\r\n            maxWidth = Math.max(maxWidth, child._currentMeasure.left - this._currentMeasure.left + child._currentMeasure.width + child.paddingRightInPixels);\r\n            maxHeight = Math.max(maxHeight, child._currentMeasure.top - this._currentMeasure.top + child._currentMeasure.height + child.paddingBottomInPixels);\r\n        }\r\n\r\n        if (this._currentMeasure.width !== maxWidth) {\r\n            this._width.updateInPlace(maxWidth, ValueAndUnit.UNITMODE_PIXEL);\r\n            this._currentMeasure.width = maxWidth;\r\n            this._rebuildLayout = true;\r\n            this._isDirty = true;\r\n        }\r\n\r\n        if (this._currentMeasure.height !== maxHeight) {\r\n            this._height.updateInPlace(maxHeight, ValueAndUnit.UNITMODE_PIXEL);\r\n            this._currentMeasure.height = maxHeight;\r\n            this._rebuildLayout = true;\r\n            this._isDirty = true;\r\n        }\r\n\r\n        super._postMeasure();\r\n    }\r\n}\r\n", "import type { Vector2 } from \"core/Maths/math.vector\";\r\nimport { BaseSlider } from \"./baseSlider\";\r\nimport type { Control } from \"../control\";\r\nimport { Measure } from \"../../measure\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { BaseGradient } from \"../gradient/BaseGradient\";\r\nimport type { AdvancedDynamicTexture } from \"gui/2D/advancedDynamicTexture\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class ScrollBar extends BaseSlider {\r\n    private _background = \"black\";\r\n    private _borderColor = \"white\";\r\n    private _tempMeasure = new Measure(0, 0, 0, 0);\r\n    private _invertScrollDirection = false;\r\n    private _backgroundGradient: Nullable<BaseGradient> = null;\r\n\r\n    /** Gets or sets border color */\r\n    @serialize()\r\n    public get borderColor(): string {\r\n        return this._borderColor;\r\n    }\r\n\r\n    public set borderColor(value: string) {\r\n        if (this._borderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._borderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background gradient. Takes precedence over gradient. */\r\n    public get backgroundGradient(): Nullable<BaseGradient> {\r\n        return this._backgroundGradient;\r\n    }\r\n\r\n    public set backgroundGradient(value: Nullable<BaseGradient>) {\r\n        if (this._backgroundGradient === value) {\r\n            return;\r\n        }\r\n\r\n        this._backgroundGradient = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Inverts the scrolling direction (default: false) */\r\n    @serialize()\r\n    public get invertScrollDirection() {\r\n        return this._invertScrollDirection;\r\n    }\r\n\r\n    public set invertScrollDirection(invert: boolean) {\r\n        this._invertScrollDirection = invert;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Slider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Scrollbar\";\r\n    }\r\n\r\n    protected _getThumbThickness(): number {\r\n        let thumbThickness = 0;\r\n        if (this._thumbWidth.isPixel) {\r\n            thumbThickness = this._thumbWidth.getValue(this._host);\r\n        } else {\r\n            thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n    private _getBackgroundColor(context: ICanvasRenderingContext) {\r\n        return this._backgroundGradient ? this._backgroundGradient.getCanvasGradient(context) : this._background;\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        this._prepareRenderingData(\"rectangle\");\r\n        const left = this._renderLeft;\r\n\r\n        const thumbPosition = this._getThumbPosition();\r\n        context.fillStyle = this._getBackgroundColor(context);\r\n\r\n        context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n\r\n        // Value bar\r\n        context.fillStyle = this._getColor(context);\r\n\r\n        // Thumb\r\n        if (this.isVertical) {\r\n            this._tempMeasure.left = left - this._effectiveBarOffset;\r\n            this._tempMeasure.top = this._currentMeasure.top + thumbPosition;\r\n            this._tempMeasure.width = this._currentMeasure.width;\r\n            this._tempMeasure.height = this._effectiveThumbThickness;\r\n        } else {\r\n            this._tempMeasure.left = this._currentMeasure.left + thumbPosition;\r\n            this._tempMeasure.top = this._currentMeasure.top;\r\n            this._tempMeasure.width = this._effectiveThumbThickness;\r\n            this._tempMeasure.height = this._currentMeasure.height;\r\n        }\r\n\r\n        context.fillRect(this._tempMeasure.left, this._tempMeasure.top, this._tempMeasure.width, this._tempMeasure.height);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _first: boolean;\r\n    private _originX: number;\r\n    private _originY: number;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        const sign = this._invertScrollDirection ? -1 : 1;\r\n\r\n        if (this._first) {\r\n            this._first = false;\r\n            this._originX = x;\r\n            this._originY = y;\r\n\r\n            // Check if move is required\r\n            if (\r\n                x < this._tempMeasure.left ||\r\n                x > this._tempMeasure.left + this._tempMeasure.width ||\r\n                y < this._tempMeasure.top ||\r\n                y > this._tempMeasure.top + this._tempMeasure.height\r\n            ) {\r\n                if (this.isVertical) {\r\n                    this.value = this.minimum + (1 - (y - this._currentMeasure.top) / this._currentMeasure.height) * (this.maximum - this.minimum);\r\n                } else {\r\n                    this.value = this.minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this.maximum - this.minimum);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Delta mode\r\n        let delta = 0;\r\n        if (this.isVertical) {\r\n            delta = -((y - this._originY) / (this._currentMeasure.height - this._effectiveThumbThickness));\r\n        } else {\r\n            delta = (x - this._originX) / (this._currentMeasure.width - this._effectiveThumbThickness);\r\n        }\r\n\r\n        this.value += sign * delta * (this.maximum - this.minimum);\r\n\r\n        this._originX = x;\r\n        this._originY = y;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        this._first = true;\r\n\r\n        return super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi);\r\n    }\r\n\r\n    public serialize(serializationObject: any) {\r\n        super.serialize(serializationObject);\r\n\r\n        if (this.backgroundGradient) {\r\n            serializationObject.backgroundGradient = {};\r\n            this.backgroundGradient.serialize(serializationObject.backgroundGradient);\r\n        }\r\n    }\r\n\r\n    public _parseFromContent(serializationObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializationObject, host);\r\n\r\n        if (serializationObject.backgroundGradient) {\r\n            const className = Tools.Instantiate(\"BABYLON.GUI.\" + serializationObject.backgroundGradient.className);\r\n            this.backgroundGradient = new className();\r\n            this.backgroundGradient!.parse(serializationObject.backgroundGradient);\r\n        }\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Scrollbar\", ScrollBar);\r\n", "import type { Vector2 } from \"core/Maths/math.vector\";\r\nimport { BaseSlider } from \"./baseSlider\";\r\nimport type { Control } from \"../control\";\r\nimport type { Image } from \"../image\";\r\nimport { Measure } from \"../../measure\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class ImageScrollBar extends BaseSlider {\r\n    private _backgroundBaseImage: Image;\r\n    private _backgroundImage: Image;\r\n    private _thumbImage: Image;\r\n    private _thumbBaseImage: Image;\r\n    private _thumbLength: number = 0.5;\r\n    private _thumbHeight: number = 1;\r\n    private _barImageHeight: number = 1;\r\n    private _tempMeasure = new Measure(0, 0, 0, 0);\r\n    private _invertScrollDirection = false;\r\n\r\n    /** Number of 90 rotation to apply on the images when in vertical mode */\r\n    @serialize()\r\n    public num90RotationInVerticalMode = 1;\r\n\r\n    /** Inverts the scrolling direction (default: false) */\r\n    @serialize()\r\n    public get invertScrollDirection() {\r\n        return this._invertScrollDirection;\r\n    }\r\n\r\n    public set invertScrollDirection(invert: boolean) {\r\n        this._invertScrollDirection = invert;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the background for horizontal bar\r\n     */\r\n    public get backgroundImage(): Image {\r\n        return this._backgroundBaseImage;\r\n    }\r\n\r\n    public set backgroundImage(value: Image) {\r\n        if (this._backgroundBaseImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._backgroundBaseImage = value;\r\n\r\n        if (this.isVertical && this.num90RotationInVerticalMode !== 0) {\r\n            if (!value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    const rotatedValue = value._rotate90(this.num90RotationInVerticalMode, true);\r\n                    this._backgroundImage = rotatedValue;\r\n                    if (!rotatedValue.isLoaded) {\r\n                        rotatedValue.onImageLoadedObservable.addOnce(() => {\r\n                            this._markAsDirty();\r\n                        });\r\n                    }\r\n                    this._markAsDirty();\r\n                });\r\n            } else {\r\n                this._backgroundImage = value._rotate90(this.num90RotationInVerticalMode, true);\r\n                this._markAsDirty();\r\n            }\r\n        } else {\r\n            this._backgroundImage = value;\r\n            if (value && !value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    this._markAsDirty();\r\n                });\r\n            }\r\n\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the thumb\r\n     */\r\n    public get thumbImage(): Image {\r\n        return this._thumbBaseImage;\r\n    }\r\n\r\n    public set thumbImage(value: Image) {\r\n        if (this._thumbBaseImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbBaseImage = value;\r\n\r\n        if (this.isVertical && this.num90RotationInVerticalMode !== 0) {\r\n            if (!value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    const rotatedValue = value._rotate90(-this.num90RotationInVerticalMode, true);\r\n                    this._thumbImage = rotatedValue;\r\n                    if (!rotatedValue.isLoaded) {\r\n                        rotatedValue.onImageLoadedObservable.addOnce(() => {\r\n                            this._markAsDirty();\r\n                        });\r\n                    }\r\n                    this._markAsDirty();\r\n                });\r\n            } else {\r\n                this._thumbImage = value._rotate90(-this.num90RotationInVerticalMode, true);\r\n                this._markAsDirty();\r\n            }\r\n        } else {\r\n            this._thumbImage = value;\r\n            if (value && !value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    this._markAsDirty();\r\n                });\r\n            }\r\n\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the length of the thumb\r\n     */\r\n    public get thumbLength(): number {\r\n        return this._thumbLength;\r\n    }\r\n\r\n    public set thumbLength(value: number) {\r\n        if (this._thumbLength === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbLength = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height of the thumb\r\n     */\r\n    public get thumbHeight(): number {\r\n        return this._thumbHeight;\r\n    }\r\n\r\n    public set thumbHeight(value: number) {\r\n        if (this._thumbLength === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height of the bar image\r\n     */\r\n    public get barImageHeight(): number {\r\n        return this._barImageHeight;\r\n    }\r\n\r\n    public set barImageHeight(value: number) {\r\n        if (this._barImageHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._barImageHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new ImageScrollBar\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ImageScrollBar\";\r\n    }\r\n\r\n    protected _getThumbThickness(): number {\r\n        let thumbThickness = 0;\r\n        if (this._thumbWidth.isPixel) {\r\n            thumbThickness = this._thumbWidth.getValue(this._host);\r\n        } else {\r\n            thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._prepareRenderingData(\"rectangle\");\r\n        const thumbPosition = this._getThumbPosition();\r\n        const left = this._renderLeft;\r\n        const top = this._renderTop;\r\n        const width = this._renderWidth;\r\n        const height = this._renderHeight;\r\n\r\n        // Background\r\n        if (this._backgroundImage) {\r\n            this._tempMeasure.copyFromFloats(left, top, width, height);\r\n            if (this.isVertical) {\r\n                this._tempMeasure.copyFromFloats(left + width * (1 - this._barImageHeight) * 0.5, this._currentMeasure.top, width * this._barImageHeight, height);\r\n                this._tempMeasure.height += this._effectiveThumbThickness;\r\n                this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            } else {\r\n                this._tempMeasure.copyFromFloats(this._currentMeasure.left, top + height * (1 - this._barImageHeight) * 0.5, width, height * this._barImageHeight);\r\n                this._tempMeasure.width += this._effectiveThumbThickness;\r\n                this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            }\r\n            this._backgroundImage._draw(context);\r\n        }\r\n\r\n        // Thumb\r\n        if (this.isVertical) {\r\n            this._tempMeasure.copyFromFloats(\r\n                left - this._effectiveBarOffset + this._currentMeasure.width * (1 - this._thumbHeight) * 0.5,\r\n                this._currentMeasure.top + thumbPosition,\r\n                this._currentMeasure.width * this._thumbHeight,\r\n                this._effectiveThumbThickness\r\n            );\r\n        } else {\r\n            this._tempMeasure.copyFromFloats(\r\n                this._currentMeasure.left + thumbPosition,\r\n                this._currentMeasure.top + this._currentMeasure.height * (1 - this._thumbHeight) * 0.5,\r\n                this._effectiveThumbThickness,\r\n                this._currentMeasure.height * this._thumbHeight\r\n            );\r\n        }\r\n\r\n        if (this._thumbImage) {\r\n            this._thumbImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._thumbImage._draw(context);\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _first: boolean;\r\n    private _originX: number;\r\n    private _originY: number;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        const sign = this._invertScrollDirection ? -1 : 1;\r\n\r\n        if (this._first) {\r\n            this._first = false;\r\n            this._originX = x;\r\n            this._originY = y;\r\n\r\n            // Check if move is required\r\n            if (\r\n                x < this._tempMeasure.left ||\r\n                x > this._tempMeasure.left + this._tempMeasure.width ||\r\n                y < this._tempMeasure.top ||\r\n                y > this._tempMeasure.top + this._tempMeasure.height\r\n            ) {\r\n                if (this.isVertical) {\r\n                    this.value = this.minimum + (1 - (y - this._currentMeasure.top) / this._currentMeasure.height) * (this.maximum - this.minimum);\r\n                } else {\r\n                    this.value = this.minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this.maximum - this.minimum);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Delta mode\r\n        let delta = 0;\r\n        if (this.isVertical) {\r\n            delta = -((y - this._originY) / (this._currentMeasure.height - this._effectiveThumbThickness));\r\n        } else {\r\n            delta = (x - this._originX) / (this._currentMeasure.width - this._effectiveThumbThickness);\r\n        }\r\n\r\n        this.value += sign * delta * (this.maximum - this.minimum);\r\n\r\n        this._originX = x;\r\n        this._originY = y;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        this._first = true;\r\n\r\n        return super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi);\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math\";\r\nimport { Rectangle } from \"../rectangle\";\r\nimport { Grid } from \"../grid\";\r\nimport type { Image } from \"../image\";\r\nimport { Control } from \"../control\";\r\nimport type { Container } from \"../container\";\r\nimport type { Measure } from \"../../measure\";\r\nimport type { AdvancedDynamicTexture } from \"../../advancedDynamicTexture\";\r\nimport { _ScrollViewerWindow } from \"./scrollViewerWindow\";\r\nimport { ScrollBar } from \"../sliders/scrollBar\";\r\nimport { ImageScrollBar } from \"../sliders/imageScrollBar\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\n\r\n/**\r\n * Class used to hold a viewer window and sliders in a grid\r\n */\r\nexport class ScrollViewer extends Rectangle {\r\n    private _grid: Grid;\r\n    private _horizontalBarSpace: Rectangle;\r\n    private _verticalBarSpace: Rectangle;\r\n    private _dragSpace: Rectangle;\r\n    private _horizontalBar: ScrollBar | ImageScrollBar;\r\n    private _verticalBar: ScrollBar | ImageScrollBar;\r\n    private _barColor: string;\r\n    private _barBackground: string;\r\n    private _barImage: Image;\r\n    private _horizontalBarImage: Image;\r\n    private _verticalBarImage: Image;\r\n    private _barBackgroundImage: Image;\r\n    private _horizontalBarBackgroundImage: Image;\r\n    private _verticalBarBackgroundImage: Image;\r\n    private _barSize: number = 20;\r\n    private _window: _ScrollViewerWindow;\r\n    private _pointerIsOver: Boolean = false;\r\n    private _wheelPrecision: number = 0.05;\r\n    private _onWheelObserver: Nullable<Observer<Vector2>>;\r\n    private _clientWidth: number;\r\n    private _clientHeight: number;\r\n    private _useImageBar: Boolean;\r\n    private _thumbLength: number = 0.5;\r\n    private _thumbHeight: number = 1;\r\n    private _barImageHeight: number = 1;\r\n    private _horizontalBarImageHeight: number = 1;\r\n    private _verticalBarImageHeight: number = 1;\r\n    private _oldWindowContentsWidth: number = 0;\r\n    private _oldWindowContentsHeight: number = 0;\r\n\r\n    /**\r\n     * Gets the horizontal scrollbar\r\n     */\r\n    public get horizontalBar(): ScrollBar | ImageScrollBar {\r\n        return this._horizontalBar;\r\n    }\r\n\r\n    /**\r\n     * Gets the vertical scrollbar\r\n     */\r\n    public get verticalBar(): ScrollBar | ImageScrollBar {\r\n        return this._verticalBar;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current container\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Nullable<Control>): Container {\r\n        if (!control) {\r\n            return this;\r\n        }\r\n\r\n        this._window.addControl(control);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        this._window.removeControl(control);\r\n        return this;\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._window.children;\r\n    }\r\n\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        for (const child of this._children) {\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Freezes or unfreezes the controls in the window.\r\n     * When controls are frozen, the scroll viewer can render a lot more quickly but updates to positions/sizes of controls\r\n     * are not taken into account. If you want to change positions/sizes, unfreeze, perform the changes then freeze again\r\n     */\r\n    public get freezeControls(): boolean {\r\n        return this._window.freezeControls;\r\n    }\r\n\r\n    public set freezeControls(value: boolean) {\r\n        this._window.freezeControls = value;\r\n    }\r\n\r\n    /** Gets the bucket width */\r\n    public get bucketWidth(): number {\r\n        return this._window.bucketWidth;\r\n    }\r\n\r\n    /** Gets the bucket height */\r\n    public get bucketHeight(): number {\r\n        return this._window.bucketHeight;\r\n    }\r\n\r\n    /**\r\n     * Sets the bucket sizes.\r\n     * When freezeControls is true, setting a non-zero bucket size will improve performances by updating only\r\n     * controls that are visible. The bucket sizes is used to subdivide (internally) the window area to smaller areas into which\r\n     * controls are dispatched. So, the size should be roughly equals to the mean size of all the controls of\r\n     * the window. To disable the usage of buckets, sets either width or height (or both) to 0.\r\n     * Please note that using this option will raise the memory usage (the higher the bucket sizes, the less memory\r\n     * used), that's why it is not enabled by default.\r\n     * @param width width of the bucket\r\n     * @param height height of the bucket\r\n     */\r\n    public setBucketSizes(width: number, height: number): void {\r\n        this._window.setBucketSizes(width, height);\r\n    }\r\n\r\n    private _forceHorizontalBar: boolean = false;\r\n    private _forceVerticalBar: boolean = false;\r\n\r\n    /**\r\n     * Forces the horizontal scroll bar to be displayed\r\n     */\r\n    public get forceHorizontalBar(): boolean {\r\n        return this._forceHorizontalBar;\r\n    }\r\n\r\n    public set forceHorizontalBar(value: boolean) {\r\n        this._grid.setRowDefinition(1, value ? this._barSize : 0, true);\r\n        this._horizontalBar.isVisible = value;\r\n        this._forceHorizontalBar = value;\r\n    }\r\n\r\n    /**\r\n     * Forces the vertical scroll bar to be displayed\r\n     */\r\n    public get forceVerticalBar(): boolean {\r\n        return this._forceVerticalBar;\r\n    }\r\n\r\n    public set forceVerticalBar(value: boolean) {\r\n        this._grid.setColumnDefinition(1, value ? this._barSize : 0, true);\r\n        this._verticalBar.isVisible = value;\r\n        this._forceVerticalBar = value;\r\n    }\r\n\r\n    /**\r\n     * Creates a new ScrollViewer\r\n     * @param name of ScrollViewer\r\n     * @param isImageBased\r\n     */\r\n    constructor(name?: string, isImageBased?: boolean) {\r\n        super(name);\r\n\r\n        this._useImageBar = isImageBased ? isImageBased : false;\r\n\r\n        this.onDirtyObservable.add(() => {\r\n            this._horizontalBarSpace.color = this.color;\r\n            this._verticalBarSpace.color = this.color;\r\n            this._dragSpace.color = this.color;\r\n        });\r\n\r\n        this.onPointerEnterObservable.add(() => {\r\n            this._pointerIsOver = true;\r\n        });\r\n\r\n        this.onPointerOutObservable.add(() => {\r\n            this._pointerIsOver = false;\r\n        });\r\n\r\n        this._grid = new Grid();\r\n        if (this._useImageBar) {\r\n            this._horizontalBar = new ImageScrollBar();\r\n            this._verticalBar = new ImageScrollBar();\r\n        } else {\r\n            this._horizontalBar = new ScrollBar();\r\n            this._verticalBar = new ScrollBar();\r\n        }\r\n\r\n        this._window = new _ScrollViewerWindow(\"scrollViewer_window\");\r\n        this._window.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._window.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        this._grid.addColumnDefinition(1);\r\n        this._grid.addColumnDefinition(0, true);\r\n        this._grid.addRowDefinition(1);\r\n        this._grid.addRowDefinition(0, true);\r\n\r\n        super.addControl(this._grid);\r\n        this._grid.addControl(this._window, 0, 0);\r\n\r\n        this._verticalBarSpace = new Rectangle();\r\n        this._verticalBarSpace.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalBarSpace.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._verticalBarSpace.thickness = 1;\r\n        this._grid.addControl(this._verticalBarSpace, 0, 1);\r\n        this._addBar(this._verticalBar, this._verticalBarSpace, true, Math.PI);\r\n\r\n        this._horizontalBarSpace = new Rectangle();\r\n        this._horizontalBarSpace.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._horizontalBarSpace.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._horizontalBarSpace.thickness = 1;\r\n        this._grid.addControl(this._horizontalBarSpace, 1, 0);\r\n        this._addBar(this._horizontalBar, this._horizontalBarSpace, false, 0);\r\n\r\n        this._dragSpace = new Rectangle();\r\n        this._dragSpace.thickness = 1;\r\n        this._grid.addControl(this._dragSpace, 1, 1);\r\n\r\n        // Colors\r\n        if (!this._useImageBar) {\r\n            this.barColor = \"grey\";\r\n            this.barBackground = \"transparent\";\r\n        }\r\n    }\r\n\r\n    /** Reset the scroll viewer window to initial size */\r\n    public resetWindow() {\r\n        this._window.width = \"100%\";\r\n        this._window.height = \"100%\";\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ScrollViewer\";\r\n    }\r\n\r\n    private _buildClientSizes() {\r\n        const ratio = this.host.idealRatio;\r\n\r\n        this._window.parentClientWidth = this._currentMeasure.width - (this._verticalBar.isVisible || this.forceVerticalBar ? this._barSize * ratio : 0) - 2 * this.thickness;\r\n        this._window.parentClientHeight = this._currentMeasure.height - (this._horizontalBar.isVisible || this.forceHorizontalBar ? this._barSize * ratio : 0) - 2 * this.thickness;\r\n\r\n        this._clientWidth = this._window.parentClientWidth;\r\n        this._clientHeight = this._window.parentClientHeight;\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._buildClientSizes();\r\n    }\r\n\r\n    protected _postMeasure(): void {\r\n        super._postMeasure();\r\n\r\n        this._updateScroller();\r\n\r\n        this._setWindowPosition(false);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the mouse wheel precision\r\n     * from 0 to 1 with a default value of 0.05\r\n     * */\r\n    @serialize()\r\n    public get wheelPrecision(): number {\r\n        return this._wheelPrecision;\r\n    }\r\n\r\n    public set wheelPrecision(value: number) {\r\n        if (this._wheelPrecision === value) {\r\n            return;\r\n        }\r\n\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n\r\n        this._wheelPrecision = value;\r\n    }\r\n\r\n    /** Gets or sets the scroll bar container background color */\r\n    @serialize()\r\n    public get scrollBackground(): string {\r\n        return this._horizontalBarSpace.background;\r\n    }\r\n\r\n    public set scrollBackground(color: string) {\r\n        if (this._horizontalBarSpace.background === color) {\r\n            return;\r\n        }\r\n        this._horizontalBarSpace.background = color;\r\n        this._verticalBarSpace.background = color;\r\n    }\r\n\r\n    /** Gets or sets the bar color */\r\n    @serialize()\r\n    public get barColor(): string {\r\n        return this._barColor;\r\n    }\r\n\r\n    public set barColor(color: string) {\r\n        if (this._barColor === color) {\r\n            return;\r\n        }\r\n\r\n        this._barColor = color;\r\n        this._horizontalBar.color = color;\r\n        this._verticalBar.color = color;\r\n    }\r\n\r\n    /** Gets or sets the bar image */\r\n    public get thumbImage(): Image {\r\n        return this._barImage;\r\n    }\r\n\r\n    public set thumbImage(value: Image) {\r\n        if (this._barImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._barImage = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        hb.thumbImage = value;\r\n        vb.thumbImage = value;\r\n    }\r\n\r\n    /** Gets or sets the horizontal bar image */\r\n    public get horizontalThumbImage(): Image {\r\n        return this._horizontalBarImage;\r\n    }\r\n\r\n    public set horizontalThumbImage(value: Image) {\r\n        if (this._horizontalBarImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._horizontalBarImage = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        hb.thumbImage = value;\r\n    }\r\n\r\n    /** Gets or sets the vertical bar image */\r\n    public get verticalThumbImage(): Image {\r\n        return this._verticalBarImage;\r\n    }\r\n\r\n    public set verticalThumbImage(value: Image) {\r\n        if (this._verticalBarImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._verticalBarImage = value;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        vb.thumbImage = value;\r\n    }\r\n\r\n    /** Gets or sets the size of the bar */\r\n    @serialize()\r\n    public get barSize(): number {\r\n        return this._barSize;\r\n    }\r\n\r\n    public set barSize(value: number) {\r\n        if (this._barSize === value) {\r\n            return;\r\n        }\r\n\r\n        this._barSize = value;\r\n        this._markAsDirty();\r\n\r\n        if (this._horizontalBar.isVisible) {\r\n            this._grid.setRowDefinition(1, this._barSize, true);\r\n        }\r\n        if (this._verticalBar.isVisible) {\r\n            this._grid.setColumnDefinition(1, this._barSize, true);\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the length of the thumb */\r\n    public get thumbLength(): number {\r\n        return this._thumbLength;\r\n    }\r\n\r\n    public set thumbLength(value: number) {\r\n        if (this._thumbLength === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._thumbLength = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        hb.thumbLength = value;\r\n        vb.thumbLength = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the thumb */\r\n    public get thumbHeight(): number {\r\n        return this._thumbHeight;\r\n    }\r\n\r\n    public set thumbHeight(value: number) {\r\n        if (this._thumbHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._thumbHeight = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        hb.thumbHeight = value;\r\n        vb.thumbHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the bar image */\r\n    public get barImageHeight(): number {\r\n        return this._barImageHeight;\r\n    }\r\n\r\n    public set barImageHeight(value: number) {\r\n        if (this._barImageHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._barImageHeight = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        hb.barImageHeight = value;\r\n        vb.barImageHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the horizontal bar image */\r\n    public get horizontalBarImageHeight(): number {\r\n        return this._horizontalBarImageHeight;\r\n    }\r\n\r\n    public set horizontalBarImageHeight(value: number) {\r\n        if (this._horizontalBarImageHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._horizontalBarImageHeight = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        hb.barImageHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the vertical bar image */\r\n    public get verticalBarImageHeight(): number {\r\n        return this._verticalBarImageHeight;\r\n    }\r\n\r\n    public set verticalBarImageHeight(value: number) {\r\n        if (this._verticalBarImageHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._verticalBarImageHeight = value;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        vb.barImageHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the bar background */\r\n    @serialize()\r\n    public get barBackground(): string {\r\n        return this._barBackground;\r\n    }\r\n\r\n    public set barBackground(color: string) {\r\n        if (this._barBackground === color) {\r\n            return;\r\n        }\r\n\r\n        this._barBackground = color;\r\n        const hb = <ScrollBar>this._horizontalBar;\r\n        const vb = <ScrollBar>this._verticalBar;\r\n        hb.background = color;\r\n        vb.background = color;\r\n        this._dragSpace.background = color;\r\n    }\r\n\r\n    /** Gets or sets the bar background image */\r\n    public get barImage(): Image {\r\n        return this._barBackgroundImage;\r\n    }\r\n\r\n    public set barImage(value: Image) {\r\n        this._barBackgroundImage = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        hb.backgroundImage = value;\r\n        vb.backgroundImage = value;\r\n    }\r\n\r\n    /** Gets or sets the horizontal bar background image */\r\n    public get horizontalBarImage(): Image {\r\n        return this._horizontalBarBackgroundImage;\r\n    }\r\n\r\n    public set horizontalBarImage(value: Image) {\r\n        this._horizontalBarBackgroundImage = value;\r\n        const hb = <ImageScrollBar>this._horizontalBar;\r\n        hb.backgroundImage = value;\r\n    }\r\n\r\n    /** Gets or sets the vertical bar background image */\r\n    public get verticalBarImage(): Image {\r\n        return this._verticalBarBackgroundImage;\r\n    }\r\n\r\n    public set verticalBarImage(value: Image) {\r\n        this._verticalBarBackgroundImage = value;\r\n        const vb = <ImageScrollBar>this._verticalBar;\r\n        vb.backgroundImage = value;\r\n    }\r\n\r\n    private _setWindowPosition(force = true): void {\r\n        const ratio = this.host.idealRatio;\r\n        const windowContentsWidth = this._window._currentMeasure.width;\r\n        const windowContentsHeight = this._window._currentMeasure.height;\r\n\r\n        if (!force && this._oldWindowContentsWidth === windowContentsWidth && this._oldWindowContentsHeight === windowContentsHeight) {\r\n            return;\r\n        }\r\n\r\n        this._oldWindowContentsWidth = windowContentsWidth;\r\n        this._oldWindowContentsHeight = windowContentsHeight;\r\n\r\n        const _endLeft = this._clientWidth - windowContentsWidth;\r\n        const _endTop = this._clientHeight - windowContentsHeight;\r\n\r\n        const newLeft = (this._horizontalBar.value / ratio) * _endLeft + \"px\";\r\n        const newTop = (this._verticalBar.value / ratio) * _endTop + \"px\";\r\n\r\n        if (newLeft !== this._window.left) {\r\n            this._window.left = newLeft;\r\n            if (!this.freezeControls) {\r\n                this._rebuildLayout = true;\r\n            }\r\n        }\r\n\r\n        if (newTop !== this._window.top) {\r\n            this._window.top = newTop;\r\n            if (!this.freezeControls) {\r\n                this._rebuildLayout = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    private _updateScroller(): void {\r\n        const windowContentsWidth = this._window._currentMeasure.width;\r\n        const windowContentsHeight = this._window._currentMeasure.height;\r\n\r\n        if (this._horizontalBar.isVisible && windowContentsWidth <= this._clientWidth && !this.forceHorizontalBar) {\r\n            this._grid.setRowDefinition(1, 0, true);\r\n            this._horizontalBar.isVisible = false;\r\n            this._horizontalBar.value = 0;\r\n            this._rebuildLayout = true;\r\n        } else if (!this._horizontalBar.isVisible && (windowContentsWidth > this._clientWidth || this.forceHorizontalBar)) {\r\n            this._grid.setRowDefinition(1, this._barSize, true);\r\n            this._horizontalBar.isVisible = true;\r\n            this._rebuildLayout = true;\r\n        }\r\n\r\n        if (this._verticalBar.isVisible && windowContentsHeight <= this._clientHeight && !this.forceVerticalBar) {\r\n            this._grid.setColumnDefinition(1, 0, true);\r\n            this._verticalBar.isVisible = false;\r\n            this._verticalBar.value = 0;\r\n            this._rebuildLayout = true;\r\n        } else if (!this._verticalBar.isVisible && (windowContentsHeight > this._clientHeight || this.forceVerticalBar)) {\r\n            this._grid.setColumnDefinition(1, this._barSize, true);\r\n            this._verticalBar.isVisible = true;\r\n            this._rebuildLayout = true;\r\n        }\r\n\r\n        this._buildClientSizes();\r\n\r\n        const ratio = this.host.idealRatio;\r\n\r\n        this._horizontalBar.thumbWidth = this._thumbLength * 0.9 * (this._clientWidth / ratio) + \"px\";\r\n        this._verticalBar.thumbWidth = this._thumbLength * 0.9 * (this._clientHeight / ratio) + \"px\";\r\n    }\r\n\r\n    public _link(host: AdvancedDynamicTexture): void {\r\n        super._link(host);\r\n\r\n        this._attachWheel();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    private _addBar(barControl: ScrollBar | ImageScrollBar, barContainer: Rectangle, isVertical: boolean, rotation: number) {\r\n        barControl.paddingLeft = 0;\r\n        barControl.width = \"100%\";\r\n        barControl.height = \"100%\";\r\n        barControl.barOffset = 0;\r\n        barControl.value = 0;\r\n        barControl.maximum = 1;\r\n        barControl.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        barControl.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n        barControl.isVertical = isVertical;\r\n        barControl.rotation = rotation;\r\n        barControl.isVisible = false;\r\n\r\n        barContainer.addControl(barControl);\r\n\r\n        barControl.onValueChangedObservable.add(() => {\r\n            this._setWindowPosition();\r\n        });\r\n    }\r\n\r\n    /** @internal */\r\n    private _attachWheel() {\r\n        if (!this._host || this._onWheelObserver) {\r\n            return;\r\n        }\r\n\r\n        this._onWheelObserver = this.onWheelObservable.add((pi) => {\r\n            if (!this._pointerIsOver || this.isReadOnly) {\r\n                return;\r\n            }\r\n            if (this._verticalBar.isVisible == true) {\r\n                if (pi.y < 0 && this._verticalBar.value > 0) {\r\n                    this._verticalBar.value -= this._wheelPrecision;\r\n                } else if (pi.y > 0 && this._verticalBar.value < this._verticalBar.maximum) {\r\n                    this._verticalBar.value += this._wheelPrecision;\r\n                }\r\n            }\r\n            if (this._horizontalBar.isVisible == true) {\r\n                if (pi.x < 0 && this._horizontalBar.value < this._horizontalBar.maximum) {\r\n                    this._horizontalBar.value += this._wheelPrecision;\r\n                } else if (pi.x > 0 && this._horizontalBar.value > 0) {\r\n                    this._horizontalBar.value -= this._wheelPrecision;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public _renderHighlightSpecific(context: ICanvasRenderingContext): void {\r\n        if (!this.isHighlighted) {\r\n            return;\r\n        }\r\n\r\n        super._renderHighlightSpecific(context);\r\n\r\n        this._grid._renderHighlightSpecific(context);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        this.onWheelObservable.remove(this._onWheelObserver);\r\n        this._onWheelObserver = null;\r\n        super.dispose();\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.ScrollViewer\", ScrollViewer);\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Rectangle } from \"./rectangle\";\r\nimport type { Control } from \"./control\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\n\r\n/**\r\n * Class used to create toggle buttons\r\n * @since 5.0.0\r\n */\r\nexport class ToggleButton extends Rectangle {\r\n    /**\r\n     * Function called to generate the toActive animation\r\n     */\r\n    public toActiveAnimation: () => void;\r\n\r\n    /**\r\n     * Function called to generate the toInactive animation\r\n     */\r\n    public toInactiveAnimation: () => void;\r\n\r\n    /**\r\n     * Function called to generate a pointer enter animation when the toggle button is active.\r\n     */\r\n    public pointerEnterActiveAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer out animation when the toggle button is active.\r\n     */\r\n    public pointerOutActiveAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer down animation when the toggle button is active.\r\n     */\r\n    public pointerDownActiveAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer up animation when the toggle button is active.\r\n     */\r\n    public pointerUpActiveAnimation: () => void;\r\n\r\n    /**\r\n     * Function called to generate a pointer enter animation when the toggle button is inactive.\r\n     */\r\n    public pointerEnterInactiveAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer out animation when the toggle button is inactive.\r\n     */\r\n    public pointerOutInactiveAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer down animation when the toggle button is inactive.\r\n     */\r\n    public pointerDownInactiveAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer up animation when the toggle button is inactive.\r\n     */\r\n    public pointerUpInactiveAnimation: () => void;\r\n\r\n    /** Observable raised when isActive is changed */\r\n    public onIsActiveChangedObservable = new Observable<boolean>();\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the toggle button will let internal controls handle picking instead of doing it directly using its bounding info\r\n     */\r\n    public delegatePickingToChildren = false;\r\n\r\n    private _group: string;\r\n    /** Gets or sets group name this toggle button belongs to */\r\n    public get group(): string {\r\n        return this._group;\r\n    }\r\n    public set group(value: string) {\r\n        if (this._group === value) {\r\n            return;\r\n        }\r\n\r\n        this._group = value;\r\n    }\r\n\r\n    private _isActive = false;\r\n    /** Gets or sets a boolean indicating if the toggle button is active or not */\r\n    public get isActive(): boolean {\r\n        return this._isActive;\r\n    }\r\n    public set isActive(value: boolean) {\r\n        // Function modeled after radioButton.ts\r\n        if (this._isActive === value) {\r\n            return;\r\n        }\r\n\r\n        this._isActive = value;\r\n\r\n        // Update the visual state based on the new value\r\n        if (this._isActive) {\r\n            this.toActiveAnimation?.();\r\n        } else {\r\n            this.toInactiveAnimation?.();\r\n        }\r\n\r\n        this._markAsDirty();\r\n\r\n        this.onIsActiveChangedObservable.notifyObservers(value);\r\n\r\n        if (this._isActive && this._host && this._group) {\r\n            // A toggle button in a group can only have 1 active element at a given time.\r\n            // If this toggle button has a group, set other toggle buttons in the group to inactive.\r\n            this._host.executeOnAllControls((control) => {\r\n                // Check for control type ToggleButton\r\n                if (control.typeName === \"ToggleButton\") {\r\n                    // Don't do anything to this toggle button\r\n                    if (control === this) {\r\n                        return;\r\n                    }\r\n\r\n                    const childToggle = <ToggleButton>control;\r\n                    // If toggle button is in same group, set isActive to false\r\n                    if (childToggle.group === this.group) {\r\n                        childToggle.isActive = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new ToggleButton\r\n     * @param name defines the control name\r\n     * @param group defines the toggle group this toggle belongs to\r\n     */\r\n    constructor(\r\n        public name?: string,\r\n        group?: string\r\n    ) {\r\n        super(name);\r\n        this.group = group ?? \"\";\r\n\r\n        this.thickness = 0;\r\n        this.isPointerBlocker = true;\r\n\r\n        let alphaStore: Nullable<number> = null;\r\n\r\n        this.toActiveAnimation = () => {\r\n            this.thickness = 1;\r\n        };\r\n        this.toInactiveAnimation = () => {\r\n            this.thickness = 0;\r\n        };\r\n\r\n        this.pointerEnterActiveAnimation = () => {\r\n            alphaStore = this.alpha;\r\n            this.alpha -= 0.1;\r\n        };\r\n\r\n        this.pointerOutActiveAnimation = () => {\r\n            if (alphaStore !== null) {\r\n                this.alpha = alphaStore;\r\n            }\r\n        };\r\n\r\n        this.pointerDownActiveAnimation = () => {\r\n            this.scaleX -= 0.05;\r\n            this.scaleY -= 0.05;\r\n        };\r\n\r\n        this.pointerUpActiveAnimation = () => {\r\n            this.scaleX += 0.05;\r\n            this.scaleY += 0.05;\r\n        };\r\n\r\n        this.pointerEnterInactiveAnimation = () => {\r\n            alphaStore = this.alpha;\r\n            this.alpha -= 0.1;\r\n        };\r\n\r\n        this.pointerOutInactiveAnimation = () => {\r\n            if (alphaStore !== null) {\r\n                this.alpha = alphaStore;\r\n            }\r\n        };\r\n\r\n        this.pointerDownInactiveAnimation = () => {\r\n            this.scaleX -= 0.05;\r\n            this.scaleY -= 0.05;\r\n        };\r\n\r\n        this.pointerUpInactiveAnimation = () => {\r\n            this.scaleX += 0.05;\r\n            this.scaleY += 0.05;\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ToggleButton\";\r\n    }\r\n\r\n    // While being a container, the toggle button behaves like a control.\r\n    /**\r\n     * @internal\r\n     */\r\n    public _processPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled || !this.isHitTestVisible || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.delegatePickingToChildren) {\r\n            let contains = false;\r\n            for (let index = this._children.length - 1; index >= 0; index--) {\r\n                const child = this._children[index];\r\n                if (child.isEnabled && child.isHitTestVisible && child.isVisible && !child.notRenderable && child.contains(x, y)) {\r\n                    contains = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!contains) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerEnter(target: Control, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerEnter(target, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        if (this._isActive) {\r\n            if (this.pointerEnterActiveAnimation) {\r\n                this.pointerEnterActiveAnimation();\r\n            }\r\n        } else {\r\n            if (this.pointerEnterInactiveAnimation) {\r\n                this.pointerEnterInactiveAnimation();\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerOut(target: Control, pi: PointerInfoBase, force = false): void {\r\n        if (!this.isReadOnly) {\r\n            if (this._isActive) {\r\n                if (this.pointerOutActiveAnimation) {\r\n                    this.pointerOutActiveAnimation();\r\n                }\r\n            } else {\r\n                if (this.pointerOutInactiveAnimation) {\r\n                    this.pointerOutInactiveAnimation();\r\n                }\r\n            }\r\n        }\r\n\r\n        super._onPointerOut(target, pi, force);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        if (this._isActive) {\r\n            if (this.pointerDownActiveAnimation) {\r\n                this.pointerDownActiveAnimation();\r\n            }\r\n        } else {\r\n            if (this.pointerDownInactiveAnimation) {\r\n                this.pointerDownInactiveAnimation();\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi: PointerInfoBase): void {\r\n        if (!this.isReadOnly) {\r\n            if (this._isActive) {\r\n                if (this.pointerUpActiveAnimation) {\r\n                    this.pointerUpActiveAnimation();\r\n                }\r\n            } else {\r\n                if (this.pointerUpInactiveAnimation) {\r\n                    this.pointerUpInactiveAnimation();\r\n                }\r\n            }\r\n        }\r\n\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick, pi);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.ToggleButton\", ToggleButton);\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { Button } from \"./button\";\r\nimport type { Container } from \"./container\";\r\nimport type { TextBlock } from \"./textBlock\";\r\nimport type { InputText } from \"./inputText\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { InputTextArea } from \"./inputTextArea\";\r\n\r\n/**\r\n * Class used to store key control properties\r\n */\r\nexport class KeyPropertySet {\r\n    /** Width */\r\n    width?: string;\r\n    /** Height */\r\n    height?: string;\r\n    /** Left padding */\r\n    paddingLeft?: string;\r\n    /** Right padding */\r\n    paddingRight?: string;\r\n    /** Top padding */\r\n    paddingTop?: string;\r\n    /** Bottom padding */\r\n    paddingBottom?: string;\r\n    /** Foreground color */\r\n    color?: string;\r\n    /** Background color */\r\n    background?: string;\r\n}\r\n\r\ntype ConnectedInputText = {\r\n    input: InputText;\r\n    onFocusObserver: Nullable<Observer<InputText>>;\r\n    onBlurObserver: Nullable<Observer<InputText>>;\r\n};\r\n\r\n/**\r\n * Class used to create virtual keyboard\r\n */\r\nexport class VirtualKeyboard extends StackPanel {\r\n    /** Observable raised when a key is pressed */\r\n    public onKeyPressObservable = new Observable<string>();\r\n\r\n    /** Gets or sets default key button width */\r\n    public defaultButtonWidth = \"40px\";\r\n    /** Gets or sets default key button height */\r\n    public defaultButtonHeight = \"40px\";\r\n\r\n    /** Gets or sets default key button left padding */\r\n    public defaultButtonPaddingLeft = \"2px\";\r\n    /** Gets or sets default key button right padding */\r\n    public defaultButtonPaddingRight = \"2px\";\r\n    /** Gets or sets default key button top padding */\r\n    public defaultButtonPaddingTop = \"2px\";\r\n    /** Gets or sets default key button bottom padding */\r\n    public defaultButtonPaddingBottom = \"2px\";\r\n\r\n    /** Gets or sets default key button foreground color */\r\n    public defaultButtonColor = \"#DDD\";\r\n    /** Gets or sets default key button background color */\r\n    public defaultButtonBackground = \"#070707\";\r\n\r\n    /** Gets or sets shift button foreground color */\r\n    public shiftButtonColor = \"#7799FF\";\r\n    /** Gets or sets shift button thickness*/\r\n    public selectedShiftThickness = 1;\r\n\r\n    /** Gets shift key state */\r\n    public shiftState = 0;\r\n\r\n    protected _getTypeName(): string {\r\n        return \"VirtualKeyboard\";\r\n    }\r\n\r\n    private _createKey(key: string, propertySet: Nullable<KeyPropertySet>) {\r\n        const button = Button.CreateSimpleButton(key, key);\r\n\r\n        button.width = propertySet && propertySet.width ? propertySet.width : this.defaultButtonWidth;\r\n        button.height = propertySet && propertySet.height ? propertySet.height : this.defaultButtonHeight;\r\n        button.color = propertySet && propertySet.color ? propertySet.color : this.defaultButtonColor;\r\n        button.background = propertySet && propertySet.background ? propertySet.background : this.defaultButtonBackground;\r\n        button.paddingLeft = propertySet && propertySet.paddingLeft ? propertySet.paddingLeft : this.defaultButtonPaddingLeft;\r\n        button.paddingRight = propertySet && propertySet.paddingRight ? propertySet.paddingRight : this.defaultButtonPaddingRight;\r\n        button.paddingTop = propertySet && propertySet.paddingTop ? propertySet.paddingTop : this.defaultButtonPaddingTop;\r\n        button.paddingBottom = propertySet && propertySet.paddingBottom ? propertySet.paddingBottom : this.defaultButtonPaddingBottom;\r\n\r\n        button.thickness = 0;\r\n        button.isFocusInvisible = true;\r\n\r\n        button.shadowColor = this.shadowColor;\r\n        button.shadowBlur = this.shadowBlur;\r\n        button.shadowOffsetX = this.shadowOffsetX;\r\n        button.shadowOffsetY = this.shadowOffsetY;\r\n\r\n        button.onPointerUpObservable.add(() => {\r\n            this.onKeyPressObservable.notifyObservers(key);\r\n        });\r\n\r\n        return button;\r\n    }\r\n\r\n    /**\r\n     * Adds a new row of keys\r\n     * @param keys defines the list of keys to add\r\n     * @param propertySets defines the associated property sets\r\n     */\r\n    public addKeysRow(keys: Array<string>, propertySets?: Array<KeyPropertySet>): void {\r\n        const panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.isFocusInvisible = true;\r\n\r\n        let maxKey: Nullable<Button> = null;\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let properties = null;\r\n\r\n            if (propertySets && propertySets.length === keys.length) {\r\n                properties = propertySets[i];\r\n            }\r\n\r\n            const key = this._createKey(keys[i], properties);\r\n            if (!maxKey || key.heightInPixels > maxKey.heightInPixels) {\r\n                maxKey = key;\r\n            }\r\n\r\n            panel.addControl(key);\r\n        }\r\n\r\n        panel.height = maxKey ? maxKey.height : this.defaultButtonHeight;\r\n\r\n        this.addControl(panel);\r\n    }\r\n\r\n    /**\r\n     * Set the shift key to a specific state\r\n     * @param shiftState defines the new shift state\r\n     */\r\n    public applyShiftState(shiftState: number): void {\r\n        if (!this.children) {\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < this.children.length; i++) {\r\n            const row = this.children[i];\r\n            if (!row || !(<Container>row).children) {\r\n                continue;\r\n            }\r\n\r\n            const rowContainer = <Container>row;\r\n            for (let j = 0; j < rowContainer.children.length; j++) {\r\n                const button = rowContainer.children[j] as Button;\r\n\r\n                if (!button || !button.children[0]) {\r\n                    continue;\r\n                }\r\n\r\n                const button_tblock = button.children[0] as TextBlock;\r\n\r\n                if (button_tblock.text === \"\\u21E7\") {\r\n                    button.color = shiftState ? this.shiftButtonColor : this.defaultButtonColor;\r\n                    button.thickness = shiftState > 1 ? this.selectedShiftThickness : 0;\r\n                }\r\n\r\n                button_tblock.text = shiftState > 0 ? button_tblock.text.toUpperCase() : button_tblock.text.toLowerCase();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _currentlyConnectedInputText: Nullable<InputText | InputTextArea> = null;\r\n    private _connectedInputTexts: ConnectedInputText[] = [];\r\n    private _onKeyPressObserver: Nullable<Observer<string>> = null;\r\n\r\n    /** Gets the input text control currently attached to the keyboard */\r\n    public get connectedInputText(): Nullable<InputText | InputTextArea> {\r\n        return this._currentlyConnectedInputText;\r\n    }\r\n\r\n    /**\r\n     * Connects the keyboard with an input text control\r\n     *\r\n     * @param input defines the target control\r\n     */\r\n    public connect(input: InputText): void {\r\n        const inputTextAlreadyConnected = this._connectedInputTexts.some((a) => a.input === input);\r\n        if (inputTextAlreadyConnected) {\r\n            return;\r\n        }\r\n\r\n        if (this._onKeyPressObserver === null) {\r\n            this._onKeyPressObserver = this.onKeyPressObservable.add((key) => {\r\n                if (!this._currentlyConnectedInputText) {\r\n                    return;\r\n                }\r\n\r\n                this._currentlyConnectedInputText._host.focusedControl = this._currentlyConnectedInputText;\r\n\r\n                switch (key) {\r\n                    case \"\\u21E7\":\r\n                        this.shiftState++;\r\n                        if (this.shiftState > 2) {\r\n                            this.shiftState = 0;\r\n                        }\r\n                        this.applyShiftState(this.shiftState);\r\n                        return;\r\n                    case \"\\u2190\":\r\n                        if (this._currentlyConnectedInputText instanceof InputTextArea) {\r\n                            this._currentlyConnectedInputText.alternativeProcessKey(\"Backspace\");\r\n                        } else {\r\n                            this._currentlyConnectedInputText.processKey(8);\r\n                        }\r\n                        return;\r\n                    case \"\\u21B5\":\r\n                        if (this._currentlyConnectedInputText instanceof InputTextArea) {\r\n                            this._currentlyConnectedInputText.alternativeProcessKey(\"Enter\");\r\n                        } else {\r\n                            this._currentlyConnectedInputText.processKey(13);\r\n                        }\r\n                        return;\r\n                }\r\n                if (this._currentlyConnectedInputText instanceof InputTextArea) {\r\n                    this._currentlyConnectedInputText.alternativeProcessKey(\"\", this.shiftState ? key.toUpperCase() : key);\r\n                } else {\r\n                    this._currentlyConnectedInputText.processKey(-1, this.shiftState ? key.toUpperCase() : key);\r\n                }\r\n\r\n                if (this.shiftState === 1) {\r\n                    this.shiftState = 0;\r\n                    this.applyShiftState(this.shiftState);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.isVisible = false;\r\n        this._currentlyConnectedInputText = input;\r\n        input._connectedVirtualKeyboard = this;\r\n\r\n        // Events hooking\r\n        const onFocusObserver: Nullable<Observer<InputText>> = input.onFocusObservable.add(() => {\r\n            this._currentlyConnectedInputText = input;\r\n            input._connectedVirtualKeyboard = this;\r\n            this.isVisible = true;\r\n        });\r\n\r\n        const onBlurObserver: Nullable<Observer<InputText>> = input.onBlurObservable.add(() => {\r\n            input._connectedVirtualKeyboard = null;\r\n            this._currentlyConnectedInputText = null;\r\n            this.isVisible = false;\r\n        });\r\n\r\n        this._connectedInputTexts.push({\r\n            input,\r\n            onBlurObserver,\r\n            onFocusObserver,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Disconnects the keyboard from connected InputText controls\r\n     *\r\n     * @param input optionally defines a target control, otherwise all are disconnected\r\n     */\r\n    public disconnect(input?: InputText): void {\r\n        if (input) {\r\n            // .find not available on IE\r\n            const filtered = this._connectedInputTexts.filter((a) => a.input === input);\r\n            if (filtered.length === 1) {\r\n                this._removeConnectedInputObservables(filtered[0]);\r\n\r\n                this._connectedInputTexts = this._connectedInputTexts.filter((a) => a.input !== input);\r\n                if (this._currentlyConnectedInputText === input) {\r\n                    this._currentlyConnectedInputText = null;\r\n                }\r\n            }\r\n        } else {\r\n            this._connectedInputTexts.forEach((connectedInputText: ConnectedInputText) => {\r\n                this._removeConnectedInputObservables(connectedInputText);\r\n            });\r\n            this._connectedInputTexts.length = 0;\r\n        }\r\n\r\n        if (this._connectedInputTexts.length === 0) {\r\n            this._currentlyConnectedInputText = null;\r\n            this.onKeyPressObservable.remove(this._onKeyPressObserver);\r\n            this._onKeyPressObserver = null;\r\n        }\r\n    }\r\n\r\n    private _removeConnectedInputObservables(connectedInputText: ConnectedInputText): void {\r\n        connectedInputText.input._connectedVirtualKeyboard = null;\r\n        connectedInputText.input.onFocusObservable.remove(connectedInputText.onFocusObserver);\r\n        connectedInputText.input.onBlurObservable.remove(connectedInputText.onBlurObserver);\r\n    }\r\n\r\n    /**\r\n     * Release all resources\r\n     */\r\n    public dispose(): void {\r\n        super.dispose();\r\n\r\n        this.disconnect();\r\n    }\r\n\r\n    // Statics\r\n\r\n    /**\r\n     * Creates a new keyboard using a default layout\r\n     *\r\n     * @param name defines control name\r\n     * @returns a new VirtualKeyboard\r\n     */\r\n    public static CreateDefaultLayout(name?: string): VirtualKeyboard {\r\n        const returnValue = new VirtualKeyboard(name);\r\n\r\n        returnValue.addKeysRow([\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"\\u2190\"]);\r\n        returnValue.addKeysRow([\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\"]);\r\n        returnValue.addKeysRow([\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"'\", \"\\u21B5\"]);\r\n        returnValue.addKeysRow([\"\\u21E7\", \"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\"]);\r\n        returnValue.addKeysRow([\" \"], [{ width: \"200px\" }]);\r\n\r\n        return returnValue;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n        for (const row of this.children) {\r\n            if (row.getClassName() === \"StackPanel\") {\r\n                const stackPanel = row as StackPanel;\r\n                for (const key of stackPanel.children) {\r\n                    if (key.getClassName() === \"Button\" && key.name) {\r\n                        key.onPointerUpObservable.add(() => {\r\n                            this.onKeyPressObservable.notifyObservers(key.name as string);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.VirtualKeyboard\", VirtualKeyboard);\r\n", "import { Control } from \"./control\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/** Class used to render a grid  */\r\nexport class DisplayGrid extends Control {\r\n    private _cellWidth = 20;\r\n    private _cellHeight = 20;\r\n\r\n    private _minorLineTickness = 1;\r\n    private _minorLineColor = \"DarkGray\";\r\n\r\n    private _majorLineTickness = 2;\r\n    private _majorLineColor = \"White\";\r\n\r\n    private _majorLineFrequency = 5;\r\n\r\n    private _background = \"Black\";\r\n\r\n    private _displayMajorLines = true;\r\n    private _displayMinorLines = true;\r\n\r\n    /** Gets or sets a boolean indicating if minor lines must be rendered (true by default)) */\r\n    @serialize()\r\n    public get displayMinorLines(): boolean {\r\n        return this._displayMinorLines;\r\n    }\r\n\r\n    public set displayMinorLines(value: boolean) {\r\n        if (this._displayMinorLines === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayMinorLines = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if major lines must be rendered (true by default)) */\r\n    @serialize()\r\n    public get displayMajorLines(): boolean {\r\n        return this._displayMajorLines;\r\n    }\r\n\r\n    public set displayMajorLines(value: boolean) {\r\n        if (this._displayMajorLines === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayMajorLines = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color (Black by default) */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the width of each cell (20 by default) */\r\n    @serialize()\r\n    public get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n\r\n    public set cellWidth(value: number) {\r\n        this._cellWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of each cell (20 by default) */\r\n    @serialize()\r\n    public get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n\r\n    public set cellHeight(value: number) {\r\n        this._cellHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the tickness of minor lines (1 by default) */\r\n    @serialize()\r\n    public get minorLineTickness(): number {\r\n        return this._minorLineTickness;\r\n    }\r\n\r\n    public set minorLineTickness(value: number) {\r\n        this._minorLineTickness = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the color of minor lines (DarkGray by default) */\r\n    @serialize()\r\n    public get minorLineColor(): string {\r\n        return this._minorLineColor;\r\n    }\r\n\r\n    public set minorLineColor(value: string) {\r\n        this._minorLineColor = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the tickness of major lines (2 by default) */\r\n    @serialize()\r\n    public get majorLineTickness(): number {\r\n        return this._majorLineTickness;\r\n    }\r\n\r\n    public set majorLineTickness(value: number) {\r\n        this._majorLineTickness = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the color of major lines (White by default) */\r\n    @serialize()\r\n    public get majorLineColor(): string {\r\n        return this._majorLineColor;\r\n    }\r\n\r\n    public set majorLineColor(value: string) {\r\n        this._majorLineColor = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the frequency of major lines (default is 1 every 5 minor lines)*/\r\n    @serialize()\r\n    public get majorLineFrequency(): number {\r\n        return this._majorLineFrequency;\r\n    }\r\n\r\n    public set majorLineFrequency(value: number) {\r\n        this._majorLineFrequency = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new GridDisplayRectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        if (this._isEnabled) {\r\n            if (this._background) {\r\n                context.fillStyle = this._background;\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n\r\n            const cellCountX = this._currentMeasure.width / this._cellWidth;\r\n            const cellCountY = this._currentMeasure.height / this._cellHeight;\r\n\r\n            // Minor lines\r\n            const left = this._currentMeasure.left + this._currentMeasure.width / 2;\r\n            const top = this._currentMeasure.top + this._currentMeasure.height / 2;\r\n\r\n            if (this._displayMinorLines) {\r\n                context.strokeStyle = this._minorLineColor;\r\n                context.lineWidth = this._minorLineTickness;\r\n\r\n                for (let x = -cellCountX / 2 + 1; x < cellCountX / 2; x++) {\r\n                    const cellX = left + x * this.cellWidth;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(cellX, this._currentMeasure.top);\r\n                    context.lineTo(cellX, this._currentMeasure.top + this._currentMeasure.height);\r\n\r\n                    context.stroke();\r\n                }\r\n\r\n                for (let y = -cellCountY / 2 + 1; y < cellCountY / 2; y++) {\r\n                    const cellY = top + y * this.cellHeight;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(this._currentMeasure.left, cellY);\r\n                    context.lineTo(this._currentMeasure.left + this._currentMeasure.width, cellY);\r\n                    context.stroke();\r\n                }\r\n            }\r\n\r\n            // Major lines\r\n            if (this._displayMajorLines) {\r\n                context.strokeStyle = this._majorLineColor;\r\n                context.lineWidth = this._majorLineTickness;\r\n\r\n                for (let x = -cellCountX / 2 + this._majorLineFrequency; x < cellCountX / 2; x += this._majorLineFrequency) {\r\n                    const cellX = left + x * this.cellWidth;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(cellX, this._currentMeasure.top);\r\n                    context.lineTo(cellX, this._currentMeasure.top + this._currentMeasure.height);\r\n                    context.stroke();\r\n                }\r\n\r\n                for (let y = -cellCountY / 2 + this._majorLineFrequency; y < cellCountY / 2; y += this._majorLineFrequency) {\r\n                    const cellY = top + y * this.cellHeight;\r\n                    context.moveTo(this._currentMeasure.left, cellY);\r\n                    context.lineTo(this._currentMeasure.left + this._currentMeasure.width, cellY);\r\n                    context.closePath();\r\n                    context.stroke();\r\n                }\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"DisplayGrid\";\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.DisplayGrid\", DisplayGrid);\r\n", "import { BaseSlider } from \"./baseSlider\";\r\nimport { Measure } from \"../../measure\";\r\nimport { Image } from \"../image\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport type { AdvancedDynamicTexture } from \"../../advancedDynamicTexture\";\r\n\r\n/**\r\n * Class used to create slider controls based on images\r\n */\r\nexport class ImageBasedSlider extends BaseSlider {\r\n    private _backgroundImage: Image;\r\n    private _thumbImage: Image;\r\n    private _valueBarImage: Image;\r\n    private _tempMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    @serialize()\r\n    public get displayThumb(): boolean {\r\n        return this._displayThumb && this.thumbImage != null;\r\n    }\r\n\r\n    public set displayThumb(value: boolean) {\r\n        if (this._displayThumb === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayThumb = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the background\r\n     */\r\n    public get backgroundImage(): Image {\r\n        return this._backgroundImage;\r\n    }\r\n\r\n    public set backgroundImage(value: Image) {\r\n        if (this._backgroundImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._backgroundImage = value;\r\n\r\n        if (value && !value.isLoaded) {\r\n            value.onImageLoadedObservable.addOnce(() => this._markAsDirty());\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the value bar\r\n     */\r\n    public get valueBarImage(): Image {\r\n        return this._valueBarImage;\r\n    }\r\n\r\n    public set valueBarImage(value: Image) {\r\n        if (this._valueBarImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._valueBarImage = value;\r\n\r\n        if (value && !value.isLoaded) {\r\n            value.onImageLoadedObservable.addOnce(() => this._markAsDirty());\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the thumb\r\n     */\r\n    public get thumbImage(): Image {\r\n        return this._thumbImage;\r\n    }\r\n\r\n    public set thumbImage(value: Image) {\r\n        if (this._thumbImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbImage = value;\r\n\r\n        if (value && !value.isLoaded) {\r\n            value.onImageLoadedObservable.addOnce(() => this._markAsDirty());\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new ImageBasedSlider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ImageBasedSlider\";\r\n    }\r\n\r\n    public _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._prepareRenderingData(\"rectangle\");\r\n        const thumbPosition = this._getThumbPosition();\r\n        const left = this._renderLeft;\r\n        const top = this._renderTop;\r\n        const width = this._renderWidth;\r\n        const height = this._renderHeight;\r\n\r\n        // Background\r\n        if (this._backgroundImage) {\r\n            this._tempMeasure.copyFromFloats(left, top, width, height);\r\n            if (this.isThumbClamped && this.displayThumb) {\r\n                if (this.isVertical) {\r\n                    this._tempMeasure.height += this._effectiveThumbThickness;\r\n                } else {\r\n                    this._tempMeasure.width += this._effectiveThumbThickness;\r\n                }\r\n            }\r\n            this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._backgroundImage._draw(context);\r\n        }\r\n\r\n        // Bar\r\n        if (this._valueBarImage) {\r\n            if (this.isVertical) {\r\n                if (this.isThumbClamped && this.displayThumb) {\r\n                    this._tempMeasure.copyFromFloats(left, top + thumbPosition, width, height - thumbPosition + this._effectiveThumbThickness);\r\n                } else {\r\n                    this._tempMeasure.copyFromFloats(left, top + thumbPosition, width, height - thumbPosition);\r\n                }\r\n            } else {\r\n                if (this.isThumbClamped && this.displayThumb) {\r\n                    this._tempMeasure.copyFromFloats(left, top, thumbPosition + this._effectiveThumbThickness / 2, height);\r\n                } else {\r\n                    this._tempMeasure.copyFromFloats(left, top, thumbPosition, height);\r\n                }\r\n            }\r\n            this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._valueBarImage._draw(context);\r\n        }\r\n\r\n        // Thumb\r\n        if (this.displayThumb) {\r\n            if (this.isVertical) {\r\n                this._tempMeasure.copyFromFloats(\r\n                    left - this._effectiveBarOffset,\r\n                    this._currentMeasure.top + thumbPosition,\r\n                    this._currentMeasure.width,\r\n                    this._effectiveThumbThickness\r\n                );\r\n            } else {\r\n                this._tempMeasure.copyFromFloats(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height);\r\n            }\r\n\r\n            this._thumbImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._thumbImage._draw(context);\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    /**\r\n     * Serializes the current control\r\n     * @param serializationObject defined the JSON serialized object\r\n     */\r\n    public serialize(serializationObject: any) {\r\n        super.serialize(serializationObject);\r\n        const backgroundImage = {};\r\n        const thumbImage = {};\r\n        const valueBarImage = {};\r\n        this.backgroundImage.serialize(backgroundImage);\r\n        this.thumbImage.serialize(thumbImage);\r\n        this.valueBarImage.serialize(valueBarImage);\r\n        serializationObject.backgroundImage = backgroundImage;\r\n        serializationObject.thumbImage = thumbImage;\r\n        serializationObject.valueBarImage = valueBarImage;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n        this.backgroundImage = Image.Parse(serializedObject.backgroundImage, host) as Image;\r\n        this.thumbImage = Image.Parse(serializedObject.thumbImage, host) as Image;\r\n        this.valueBarImage = Image.Parse(serializedObject.valueBarImage, host) as Image;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.ImageBasedSlider\", ImageBasedSlider);\r\n", "import { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\n\r\n/**\r\n * Forcing an export so that this code will execute\r\n * @internal\r\n */\r\nconst name = \"Statics\";\r\n\r\nexport { name };\r\n\r\n/**\r\n * Creates a stack panel that can be used to render headers\r\n * @param control defines the control to associate with the header\r\n * @param text defines the text of the header\r\n * @param size defines the size of the header\r\n * @param options defines options used to configure the header\r\n * @param options.isHorizontal\r\n * @param options.controlFirst\r\n * @returns a new StackPanel\r\n */\r\nControl.AddHeader = function (control: Control, text: string, size: string | number, options: { isHorizontal: boolean; controlFirst: boolean }): StackPanel {\r\n    const panel = new StackPanel(\"panel\");\r\n    const isHorizontal = options ? options.isHorizontal : true;\r\n    const controlFirst = options ? options.controlFirst : true;\r\n\r\n    panel.isVertical = !isHorizontal;\r\n\r\n    const header = new TextBlock(\"header\");\r\n    header.text = text;\r\n    header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n    if (isHorizontal) {\r\n        header.width = size;\r\n    } else {\r\n        header.height = size;\r\n    }\r\n\r\n    if (controlFirst) {\r\n        panel.addControl(control);\r\n        panel.addControl(header);\r\n        header.paddingLeft = \"5px\";\r\n    } else {\r\n        panel.addControl(header);\r\n        panel.addControl(control);\r\n        header.paddingRight = \"5px\";\r\n    }\r\n\r\n    header.shadowBlur = control.shadowBlur;\r\n    header.shadowColor = control.shadowColor;\r\n    header.shadowOffsetX = control.shadowOffsetX;\r\n    header.shadowOffsetY = control.shadowOffsetY;\r\n\r\n    return panel;\r\n};\r\n", "/*\r\n * Base Gradient class. Should not be used directly.\r\n */\r\n\r\nimport type { ICanvasGradient, ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Type that represents a single stop on the gradient.\r\n */\r\nexport type GradientColorStop = {\r\n    /**\r\n     * Offset from the start where the color will be applied.\r\n     */\r\n    offset: number;\r\n    /**\r\n     * Color to be applied.\r\n     */\r\n    color: string;\r\n};\r\n\r\n/**\r\n * Class that serves as a base for all the gradients created from context.\r\n */\r\nexport abstract class BaseGradient {\r\n    private _colorStops: GradientColorStop[] = [];\r\n\r\n    private _canvasGradient: CanvasGradient;\r\n    private _context: ICanvasRenderingContext;\r\n    private _gradientDirty: boolean = true;\r\n\r\n    /**\r\n     * Overwritten by child classes to create the canvas gradient.\r\n     * @param context\r\n     */\r\n    protected abstract _createCanvasGradient(context: ICanvasRenderingContext): ICanvasGradient;\r\n\r\n    private _addColorStopsToCanvasGradient() {\r\n        for (const stop of this._colorStops) {\r\n            this._canvasGradient.addColorStop(stop.offset, stop.color);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * If there are any changes or the context changed, regenerate the canvas gradient object. Else,\r\n     * reuse the existing gradient.\r\n     * @param context the context to create the gradient from\r\n     * @returns the canvas gradient\r\n     */\r\n    public getCanvasGradient(context: ICanvasRenderingContext) {\r\n        if (this._gradientDirty || this._context !== context) {\r\n            this._context = context;\r\n            this._canvasGradient = this._createCanvasGradient(context);\r\n            this._addColorStopsToCanvasGradient();\r\n            this._gradientDirty = false;\r\n        }\r\n        return this._canvasGradient;\r\n    }\r\n\r\n    /**\r\n     * Adds a new color stop to the gradient.\r\n     * @param offset the offset of the stop on the gradient. Should be between 0 and 1\r\n     * @param color the color of the stop\r\n     */\r\n    public addColorStop(offset: number, color: string) {\r\n        this._colorStops.push({ offset, color });\r\n        this._gradientDirty = true;\r\n    }\r\n\r\n    /**\r\n     * Removes an existing color stop with the specified offset from the gradient\r\n     * @param offset the offset of the stop to be removed\r\n     */\r\n    public removeColorStop(offset: number) {\r\n        this._colorStops = this._colorStops.filter((colorStop) => colorStop.offset !== offset);\r\n        this._gradientDirty = true;\r\n    }\r\n\r\n    /**\r\n     * Removes all color stops from the gradient\r\n     */\r\n    public clearColorStops() {\r\n        this._colorStops = [];\r\n        this._gradientDirty = true;\r\n    }\r\n\r\n    /**\r\n     * Color stops of the gradient\r\n     */\r\n    public get colorStops() {\r\n        return this._colorStops;\r\n    }\r\n\r\n    /**\r\n     * @returns Type of the gradient\r\n     */\r\n    public getClassName() {\r\n        return \"BaseGradient\";\r\n    }\r\n\r\n    /**\r\n     * Serialize into a json object\r\n     * @param serializationObject object to serialize into\r\n     */\r\n    public serialize(serializationObject: any) {\r\n        serializationObject.colorStops = this._colorStops;\r\n        serializationObject.className = this.getClassName();\r\n    }\r\n\r\n    /**\r\n     * Parse from json object\r\n     * @param serializationObject object to parse from\r\n     */\r\n    public parse(serializationObject: any) {\r\n        this._colorStops = serializationObject.colorStops;\r\n    }\r\n}\r\n", "import type { ICanvasGradient, ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { BaseGradient } from \"./BaseGradient\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\n\r\n/**\r\n * Gradient along a line that connects two coordinates.\r\n * These coordinates are relative to the canvas' space, not to any control's space.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\r\n */\r\nexport class LinearGradient extends BaseGradient {\r\n    private _x0: number;\r\n    private _y0: number;\r\n    private _x1: number;\r\n    private _y1: number;\r\n\r\n    /**\r\n     * Creates a new linear gradient\r\n     * @param x0\r\n     * @param y0\r\n     * @param x1\r\n     * @param y1\r\n     */\r\n    constructor(x0?: number, y0?: number, x1?: number, y1?: number) {\r\n        super();\r\n        this._x0 = x0 ?? 0;\r\n        this._y0 = y0 ?? 0;\r\n        this._x1 = x1 ?? 0;\r\n        this._y1 = y1 ?? 0;\r\n    }\r\n\r\n    protected _createCanvasGradient(context: ICanvasRenderingContext): ICanvasGradient {\r\n        return context.createLinearGradient(this._x0, this._y0, this._x1, this._y1);\r\n    }\r\n\r\n    /** X axis coordinate of the starting point in the line */\r\n    public get x0() {\r\n        return this._x0;\r\n    }\r\n\r\n    /** X axis coordinate of the ending point in the line */\r\n    public get x1() {\r\n        return this._x1;\r\n    }\r\n\r\n    /** Y axis coordinate of the starting point in the line */\r\n    public get y0() {\r\n        return this._y0;\r\n    }\r\n\r\n    /** Y axis coordinate of the ending point in the line */\r\n    public get y1() {\r\n        return this._y1;\r\n    }\r\n\r\n    /**\r\n     * Class name of the gradient\r\n     * @returns the class name of the gradient\r\n     */\r\n    public getClassName(): string {\r\n        return \"LinearGradient\";\r\n    }\r\n\r\n    /**\r\n     * Serializes this gradient\r\n     * @param serializationObject the object to serialize to\r\n     */\r\n    public serialize(serializationObject: any): void {\r\n        super.serialize(serializationObject);\r\n        serializationObject.x0 = this._x0;\r\n        serializationObject.y0 = this._y0;\r\n        serializationObject.x1 = this._x1;\r\n        serializationObject.y1 = this._y1;\r\n    }\r\n\r\n    /**\r\n     * Parses a gradient from a serialization object\r\n     * @param serializationObject the object to parse from\r\n     */\r\n    public parse(serializationObject: any): void {\r\n        super.parse(serializationObject);\r\n        this._x0 = serializationObject.x0;\r\n        this._y0 = serializationObject.y0;\r\n        this._x1 = serializationObject.x1;\r\n        this._y1 = serializationObject.y1;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.LinearGradient\", LinearGradient);\r\n", "import type { ICanvasGradient, ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { BaseGradient } from \"./BaseGradient\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\n\r\n/**\r\n * Gradient formed from two circles with their own centers and radius.\r\n * The coordinates of the circles centers are relative to the canvas' space, not to any control's space.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\r\n */\r\nexport class RadialGradient extends BaseGradient {\r\n    private _x0: number;\r\n    private _y0: number;\r\n    private _r0: number;\r\n    private _x1: number;\r\n    private _y1: number;\r\n    private _r1: number;\r\n\r\n    /**\r\n     * Creates a new radial gradient\r\n     * @param x0 x coordinate of the first circle's center\r\n     * @param y0 y coordinate of the first circle's center\r\n     * @param r0 radius of the first circle\r\n     * @param x1 x coordinate of the second circle's center\r\n     * @param y1 y coordinate of the second circle's center\r\n     * @param r1 radius of the second circle\r\n     */\r\n    constructor(x0?: number, y0?: number, r0?: number, x1?: number, y1?: number, r1?: number) {\r\n        super();\r\n        this._x0 = x0 ?? 0;\r\n        this._y0 = y0 ?? 0;\r\n        this._r0 = r0 ?? 0;\r\n        this._x1 = x1 ?? 0;\r\n        this._y1 = y1 ?? 0;\r\n        this._r1 = r1 ?? 0;\r\n    }\r\n\r\n    protected _createCanvasGradient(context: ICanvasRenderingContext): ICanvasGradient {\r\n        return context.createRadialGradient(this._x0, this._y0, this._r0, this._x1, this._y1, this._r1);\r\n    }\r\n\r\n    /** x coordinate of the first circle's center */\r\n    public get x0() {\r\n        return this._x0;\r\n    }\r\n\r\n    /** x coordinate of the second circle's center */\r\n    public get x1() {\r\n        return this._x1;\r\n    }\r\n\r\n    /** y coordinate of the first circle's center */\r\n    public get y0() {\r\n        return this._y0;\r\n    }\r\n\r\n    /** y coordinate of the second circle's center */\r\n    public get y1() {\r\n        return this._y1;\r\n    }\r\n\r\n    /** radius of the first circle */\r\n    public get r0() {\r\n        return this._r0;\r\n    }\r\n\r\n    /** radius of the second circle */\r\n    public get r1() {\r\n        return this._r1;\r\n    }\r\n\r\n    /**\r\n     * Class name of the gradient\r\n     * @returns the class name of the gradient\r\n     */\r\n    public getClassName() {\r\n        return \"RadialGradient\";\r\n    }\r\n\r\n    /**\r\n     * Serializes this gradient\r\n     * @param serializationObject the object to serialize to\r\n     */\r\n    public serialize(serializationObject: any): void {\r\n        super.serialize(serializationObject);\r\n        serializationObject.x0 = this._x0;\r\n        serializationObject.y0 = this._y0;\r\n        serializationObject.r0 = this._r0;\r\n        serializationObject.x1 = this._x1;\r\n        serializationObject.y1 = this._y1;\r\n        serializationObject.r1 = this._r1;\r\n    }\r\n\r\n    /**\r\n     * Parses a gradient from a serialization object\r\n     * @param serializationObject the object to parse from\r\n     */\r\n    public parse(serializationObject: any): void {\r\n        super.parse(serializationObject);\r\n        this._x0 = serializationObject.x0;\r\n        this._y0 = serializationObject.y0;\r\n        this._r0 = serializationObject.r0;\r\n        this._x1 = serializationObject.x1;\r\n        this._y1 = serializationObject.y1;\r\n        this._r1 = serializationObject.r1;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.RadialGradient\", RadialGradient);\r\n", "import { Observable } from \"core/Misc/observable\";\r\nimport type { IDisposable } from \"core/scene\";\r\nimport type { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\nimport { ValueAndUnit } from \"./valueAndUnit\";\r\n\r\n/**\r\n * Define a style used by control to automatically setup properties based on a template.\r\n * Only support font related properties so far\r\n */\r\nexport class Style implements IDisposable {\r\n    private _fontFamily = \"Arial\";\r\n    private _fontStyle = \"\";\r\n    private _fontWeight = \"\";\r\n    /** @internal */\r\n    public _host: AdvancedDynamicTexture;\r\n    /** @internal */\r\n    public _fontSize = new ValueAndUnit(18, ValueAndUnit.UNITMODE_PIXEL, false);\r\n\r\n    /**\r\n     * Observable raised when the style values are changed\r\n     */\r\n    public onChangedObservable = new Observable<Style>();\r\n\r\n    /**\r\n     * Creates a new style object\r\n     * @param host defines the AdvancedDynamicTexture which hosts this style\r\n     */\r\n    public constructor(host: AdvancedDynamicTexture) {\r\n        this._host = host;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font size\r\n     */\r\n    public get fontSize(): string | number {\r\n        return this._fontSize.toString(this._host);\r\n    }\r\n\r\n    public set fontSize(value: string | number) {\r\n        if (this._fontSize.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._fontSize.fromString(value)) {\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font family\r\n     */\r\n    public get fontFamily(): string {\r\n        return this._fontFamily;\r\n    }\r\n\r\n    public set fontFamily(value: string) {\r\n        if (this._fontFamily === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontFamily = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font style\r\n     */\r\n    public get fontStyle(): string {\r\n        return this._fontStyle;\r\n    }\r\n\r\n    public set fontStyle(value: string) {\r\n        if (this._fontStyle === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontStyle = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Gets or sets font weight */\r\n    public get fontWeight(): string {\r\n        return this._fontWeight;\r\n    }\r\n\r\n    public set fontWeight(value: string) {\r\n        if (this._fontWeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontWeight = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Dispose all associated resources */\r\n    public dispose() {\r\n        this.onChangedObservable.clear();\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector2, Vector3, TmpVectors } from \"core/Maths/math.vector\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport type { PointerInfoPre, PointerInfo, PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport { ClipboardEventTypes, ClipboardInfo } from \"core/Events/clipboardEvents\";\r\nimport type { KeyboardInfoPre } from \"core/Events/keyboardEvents\";\r\nimport { KeyboardEventTypes } from \"core/Events/keyboardEvents\";\r\nimport type { Camera } from \"core/Cameras/camera\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { DynamicTexture } from \"core/Materials/Textures/dynamicTexture\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { Layer } from \"core/Layers/layer\";\r\nimport type { Engine } from \"core/Engines/engine\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { Container } from \"./controls/container\";\r\nimport { Control } from \"./controls/control\";\r\nimport type { IFocusableControl } from \"./controls/focusableControl\";\r\nimport { Style } from \"./style\";\r\nimport { Measure } from \"./measure\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { Viewport } from \"core/Maths/math.viewport\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { WebRequest } from \"core/Misc/webRequest\";\r\nimport type { IPointerEvent, IWheelEvent } from \"core/Events/deviceInputEvents\";\r\nimport { RandomGUID } from \"core/Misc/guid\";\r\nimport { GetClass } from \"core/Misc/typeStore\";\r\nimport { DecodeBase64ToBinary } from \"core/Misc/stringTools\";\r\n\r\nimport type { StandardMaterial } from \"core/Materials/standardMaterial\";\r\n\r\n/**\r\n * Class used to create texture to support 2D GUI elements\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui\r\n */\r\nexport class AdvancedDynamicTexture extends DynamicTexture {\r\n    /** Define the url to load snippets */\r\n    public static SnippetUrl = Constants.SnippetUrl;\r\n\r\n    /** Indicates if some optimizations can be performed in GUI GPU management (the downside is additional memory/GPU texture memory used) */\r\n    public static AllowGPUOptimizations = true;\r\n\r\n    /** Snippet ID if the content was created from the snippet server */\r\n    public snippetId: string;\r\n\r\n    /** Observable that fires when the GUI is ready */\r\n    public onGuiReadyObservable = new Observable<AdvancedDynamicTexture>();\r\n\r\n    private _isDirty = false;\r\n    private _renderObserver: Nullable<Observer<Camera>>;\r\n    private _resizeObserver: Nullable<Observer<Engine>>;\r\n    private _preKeyboardObserver: Nullable<Observer<KeyboardInfoPre>>;\r\n    private _prePointerObserver: Nullable<Observer<PointerInfoPre>>;\r\n    private _sceneRenderObserver: Nullable<Observer<Scene>>;\r\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\r\n    private _canvasPointerOutObserver: Nullable<Observer<PointerEvent>>;\r\n    private _canvasBlurObserver: Nullable<Observer<Engine>>;\r\n    private _controlAddedObserver: Nullable<Observer<Nullable<Control>>>;\r\n    private _controlRemovedObserver: Nullable<Observer<Nullable<Control>>>;\r\n    private _background: string;\r\n    /** @internal */\r\n    public _rootContainer = new Container(\"root\");\r\n    /** @internal */\r\n    public _lastPickedControl: Control;\r\n    /** @internal */\r\n    public _lastControlOver: { [pointerId: number]: Control } = {};\r\n    /** @internal */\r\n    public _lastControlDown: { [pointerId: number]: Control } = {};\r\n    /** @internal */\r\n    public _capturingControl: { [pointerId: number]: Control } = {};\r\n    /** @internal */\r\n    public _shouldBlockPointer: boolean;\r\n    /** @internal */\r\n    public _layerToDispose: Nullable<Layer>;\r\n    /** @internal */\r\n    public _linkedControls = new Array<Control>();\r\n    /** @internal */\r\n    public _isFullscreen = false;\r\n    private _fullscreenViewport = new Viewport(0, 0, 1, 1);\r\n    private _idealWidth = 0;\r\n    private _idealHeight = 0;\r\n    private _useSmallestIdeal: boolean = false;\r\n    private _renderAtIdealSize = false;\r\n    private _focusedControl: Nullable<IFocusableControl>;\r\n    private _blockNextFocusCheck = false;\r\n    private _renderScale = 1;\r\n    private _rootElement: Nullable<HTMLElement>;\r\n    private _cursorChanged = false;\r\n    private _defaultMousePointerId = 0;\r\n    private _rootChildrenHaveChanged: boolean = false;\r\n\r\n    /** @internal */\r\n    public _capturedPointerIds = new Set<number>();\r\n\r\n    /** @internal */\r\n    public _numLayoutCalls = 0;\r\n    /** Gets the number of layout calls made the last time the ADT has been rendered */\r\n    public get numLayoutCalls(): number {\r\n        return this._numLayoutCalls;\r\n    }\r\n\r\n    /** @internal */\r\n    public _numRenderCalls = 0;\r\n    /** Gets the number of render calls made the last time the ADT has been rendered */\r\n    public get numRenderCalls(): number {\r\n        return this._numRenderCalls;\r\n    }\r\n\r\n    /**\r\n     * Define type to string to ensure compatibility across browsers\r\n     * Safari doesn't support DataTransfer constructor\r\n     */\r\n    private _clipboardData: string = \"\";\r\n    /**\r\n     * Observable event triggered each time an clipboard event is received from the rendering canvas\r\n     */\r\n    public onClipboardObservable = new Observable<ClipboardInfo>();\r\n    /**\r\n     * Observable event triggered each time a pointer down is intercepted by a control\r\n     */\r\n    public onControlPickedObservable = new Observable<Control>();\r\n    /**\r\n     * Observable event triggered before layout is evaluated\r\n     */\r\n    public onBeginLayoutObservable = new Observable<AdvancedDynamicTexture>();\r\n    /**\r\n     * Observable event triggered after the layout was evaluated\r\n     */\r\n    public onEndLayoutObservable = new Observable<AdvancedDynamicTexture>();\r\n    /**\r\n     * Observable event triggered before the texture is rendered\r\n     */\r\n    public onBeginRenderObservable = new Observable<AdvancedDynamicTexture>();\r\n    /**\r\n     * Observable event triggered after the texture was rendered\r\n     */\r\n    public onEndRenderObservable = new Observable<AdvancedDynamicTexture>();\r\n    /**\r\n     * Gets or sets a boolean defining if alpha is stored as premultiplied\r\n     */\r\n    public premulAlpha = false;\r\n    /**\r\n     * Gets or sets a boolean indicating that the canvas must be reverted on Y when updating the texture\r\n     */\r\n    public applyYInversionOnUpdate = true;\r\n    /**\r\n     * Gets or sets a number used to scale rendering size (2 means that the texture will be twice bigger).\r\n     * Useful when you want more antialiasing\r\n     */\r\n    public get renderScale(): number {\r\n        return this._renderScale;\r\n    }\r\n    public set renderScale(value: number) {\r\n        if (value === this._renderScale) {\r\n            return;\r\n        }\r\n        this._renderScale = value;\r\n        this._onResize();\r\n    }\r\n    /** Gets or sets the background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n        this._background = value;\r\n        this.markAsDirty();\r\n    }\r\n    /**\r\n     * Gets or sets the ideal width used to design controls.\r\n     * The GUI will then rescale everything accordingly\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#adaptive-scaling\r\n     */\r\n    public get idealWidth(): number {\r\n        return this._idealWidth;\r\n    }\r\n    public set idealWidth(value: number) {\r\n        if (this._idealWidth === value) {\r\n            return;\r\n        }\r\n        this._idealWidth = value;\r\n        this.markAsDirty();\r\n        this._rootContainer._markAllAsDirty();\r\n    }\r\n    /**\r\n     * Gets or sets the ideal height used to design controls.\r\n     * The GUI will then rescale everything accordingly\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#adaptive-scaling\r\n     */\r\n    public get idealHeight(): number {\r\n        return this._idealHeight;\r\n    }\r\n    public set idealHeight(value: number) {\r\n        if (this._idealHeight === value) {\r\n            return;\r\n        }\r\n        this._idealHeight = value;\r\n        this.markAsDirty();\r\n        this._rootContainer._markAllAsDirty();\r\n    }\r\n    /**\r\n     * Gets or sets a boolean indicating if the smallest ideal value must be used if idealWidth and idealHeight are both set\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#adaptive-scaling\r\n     */\r\n    public get useSmallestIdeal(): boolean {\r\n        return this._useSmallestIdeal;\r\n    }\r\n    public set useSmallestIdeal(value: boolean) {\r\n        if (this._useSmallestIdeal === value) {\r\n            return;\r\n        }\r\n        this._useSmallestIdeal = value;\r\n        this.markAsDirty();\r\n        this._rootContainer._markAllAsDirty();\r\n    }\r\n    /**\r\n     * Gets or sets a boolean indicating if adaptive scaling must be used\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#adaptive-scaling\r\n     */\r\n    public get renderAtIdealSize(): boolean {\r\n        return this._renderAtIdealSize;\r\n    }\r\n    public set renderAtIdealSize(value: boolean) {\r\n        if (this._renderAtIdealSize === value) {\r\n            return;\r\n        }\r\n        this._renderAtIdealSize = value;\r\n        this._onResize();\r\n    }\r\n\r\n    /**\r\n     * Gets the ratio used when in \"ideal mode\"\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#adaptive-scaling\r\n     * */\r\n    public get idealRatio(): number {\r\n        let rwidth: number = 0;\r\n        let rheight: number = 0;\r\n\r\n        if (this._idealWidth) {\r\n            rwidth = this.getSize().width / this._idealWidth;\r\n        }\r\n\r\n        if (this._idealHeight) {\r\n            rheight = this.getSize().height / this._idealHeight;\r\n        }\r\n\r\n        if (this._useSmallestIdeal && this._idealWidth && this._idealHeight) {\r\n            return window.innerWidth < window.innerHeight ? rwidth : rheight;\r\n        }\r\n\r\n        if (this._idealWidth) {\r\n            // horizontal\r\n            return rwidth;\r\n        }\r\n\r\n        if (this._idealHeight) {\r\n            // vertical\r\n            return rheight;\r\n        }\r\n\r\n        return 1;\r\n    }\r\n\r\n    /**\r\n     * Gets the underlying layer used to render the texture when in fullscreen mode\r\n     */\r\n    public get layer(): Nullable<Layer> {\r\n        return this._layerToDispose;\r\n    }\r\n    /**\r\n     * Gets the root container control\r\n     */\r\n    public get rootContainer(): Container {\r\n        return this._rootContainer;\r\n    }\r\n    /**\r\n     * Returns an array containing the root container.\r\n     * This is mostly used to let the Inspector introspects the ADT\r\n     * @returns an array containing the rootContainer\r\n     */\r\n    public getChildren(): Array<Container> {\r\n        return [this._rootContainer];\r\n    }\r\n    /**\r\n     * Will return all controls that are inside this texture\r\n     * @param directDescendantsOnly defines if true only direct descendants of 'this' will be considered, if false direct and also indirect (children of children, an so on in a recursive manner) descendants of 'this' will be considered\r\n     * @param predicate defines an optional predicate that will be called on every evaluated child, the predicate must return true for a given child to be part of the result, otherwise it will be ignored\r\n     * @returns all child controls\r\n     */\r\n    public getDescendants(directDescendantsOnly?: boolean, predicate?: (control: Control) => boolean): Control[] {\r\n        return this._rootContainer.getDescendants(directDescendantsOnly, predicate);\r\n    }\r\n\r\n    /**\r\n     * Will return all controls with the given type name\r\n     * @param typeName defines the type name to search for\r\n     * @returns an array of all controls found\r\n     */\r\n    public getControlsByType(typeName: string): Control[] {\r\n        return this._rootContainer.getDescendants(false, (control) => control.typeName === typeName);\r\n    }\r\n\r\n    /**\r\n     * Will return the first control with the given name\r\n     * @param name defines the name to search for\r\n     * @returns the first control found or null\r\n     */\r\n    public getControlByName(name: string): Nullable<Control> {\r\n        return this._getControlByKey(\"name\", name);\r\n    }\r\n\r\n    private _getControlByKey(key: string, value: any): Nullable<Control> {\r\n        return this._rootContainer.getDescendants().find((control) => control[key as keyof Control] === value) || null;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the current focused control\r\n     */\r\n    public get focusedControl(): Nullable<IFocusableControl> {\r\n        return this._focusedControl;\r\n    }\r\n    public set focusedControl(control: Nullable<IFocusableControl>) {\r\n        if (this._focusedControl == control) {\r\n            return;\r\n        }\r\n        if (this._focusedControl) {\r\n            this._focusedControl.onBlur();\r\n        }\r\n        if (control) {\r\n            control.onFocus();\r\n        }\r\n        this._focusedControl = control;\r\n    }\r\n    /**\r\n     * Gets or sets a boolean indicating if the texture must be rendered in background or foreground when in fullscreen mode\r\n     */\r\n    public get isForeground(): boolean {\r\n        if (!this.layer) {\r\n            return true;\r\n        }\r\n        return !this.layer.isBackground;\r\n    }\r\n    public set isForeground(value: boolean) {\r\n        if (!this.layer) {\r\n            return;\r\n        }\r\n        if (this.layer.isBackground === !value) {\r\n            return;\r\n        }\r\n        this.layer.isBackground = !value;\r\n    }\r\n    /**\r\n     * Gets or set information about clipboardData\r\n     */\r\n    public get clipboardData(): string {\r\n        return this._clipboardData;\r\n    }\r\n    public set clipboardData(value: string) {\r\n        this._clipboardData = value;\r\n    }\r\n\r\n    /**\r\n     * If this is set, even when a control is pointer blocker, some events can still be passed through to the scene.\r\n     * Options from values are PointerEventTypes\r\n     * POINTERDOWN, POINTERUP, POINTERMOVE, POINTERWHEEL, POINTERPICK, POINTERTAP, POINTERDOUBLETAP\r\n     */\r\n    public skipBlockEvents = 0;\r\n\r\n    /**\r\n     * If set to true, every scene render will trigger a pointer event for the GUI\r\n     * if it is linked to a mesh or has controls linked to a mesh. This will allow\r\n     * you to catch the pointer moving around the GUI due to camera or mesh movements,\r\n     * but it has a performance cost.\r\n     */\r\n    public checkPointerEveryFrame = false;\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture\r\n     * @param name defines the name of the texture\r\n     * @param width defines the width of the texture\r\n     * @param height defines the height of the texture\r\n     * @param scene defines the hosting scene\r\n     * @param generateMipMaps defines a boolean indicating if mipmaps must be generated (false by default)\r\n     * @param samplingMode defines the texture sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\r\n     * @param invertY defines if the texture needs to be inverted on the y axis during loading (true by default)\r\n     */\r\n    constructor(name: string, width = 0, height = 0, scene?: Nullable<Scene>, generateMipMaps = false, samplingMode = Texture.NEAREST_SAMPLINGMODE, invertY = true) {\r\n        super(name, { width: width, height: height }, scene, generateMipMaps, samplingMode, Constants.TEXTUREFORMAT_RGBA, invertY);\r\n        scene = this.getScene();\r\n        if (!scene || !this._texture) {\r\n            return;\r\n        }\r\n        this.applyYInversionOnUpdate = invertY;\r\n        this._rootElement = scene.getEngine().getInputElement();\r\n        this._renderObserver = scene.onBeforeCameraRenderObservable.add((camera: Camera) => this._checkUpdate(camera));\r\n\r\n        /** Whenever a control is added or removed to the root, we have to recheck the camera projection as it can have changed  */\r\n        this._controlAddedObserver = this._rootContainer.onControlAddedObservable.add((control) => {\r\n            if (control) {\r\n                this._rootChildrenHaveChanged = true;\r\n            }\r\n        });\r\n        this._controlRemovedObserver = this._rootContainer.onControlRemovedObservable.add((control) => {\r\n            if (control) {\r\n                this._rootChildrenHaveChanged = true;\r\n            }\r\n        });\r\n        this._preKeyboardObserver = scene.onPreKeyboardObservable.add((info) => {\r\n            if (!this._focusedControl) {\r\n                return;\r\n            }\r\n            if (info.type === KeyboardEventTypes.KEYDOWN) {\r\n                this._focusedControl.processKeyboard(info.event);\r\n            }\r\n            info.skipOnPointerObservable = true;\r\n        });\r\n        this._rootContainer._link(this);\r\n        this.hasAlpha = true;\r\n        if (!width || !height) {\r\n            this._resizeObserver = scene.getEngine().onResizeObservable.add(() => this._onResize());\r\n            this._onResize();\r\n        }\r\n        this._texture.isReady = true;\r\n    }\r\n    /**\r\n     * Get the current class name of the texture useful for serialization or dynamic coding.\r\n     * @returns \"AdvancedDynamicTexture\"\r\n     */\r\n    public getClassName(): string {\r\n        return \"AdvancedDynamicTexture\";\r\n    }\r\n    /**\r\n     * Function used to execute a function on all controls\r\n     * @param func defines the function to execute\r\n     * @param container defines the container where controls belong. If null the root container will be used\r\n     */\r\n    public executeOnAllControls(func: (control: Control) => void, container?: Container) {\r\n        if (!container) {\r\n            container = this._rootContainer;\r\n        }\r\n        func(container);\r\n        for (const child of container.children) {\r\n            if ((<any>child).children) {\r\n                this.executeOnAllControls(func, <Container>child);\r\n                continue;\r\n            }\r\n            func(child);\r\n        }\r\n    }\r\n\r\n    private _useInvalidateRectOptimization = true;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the InvalidateRect optimization should be turned on\r\n     */\r\n    public get useInvalidateRectOptimization(): boolean {\r\n        return this._useInvalidateRectOptimization;\r\n    }\r\n\r\n    public set useInvalidateRectOptimization(value: boolean) {\r\n        this._useInvalidateRectOptimization = value;\r\n    }\r\n\r\n    // Invalidated rectangle which is the combination of all invalidated controls after they have been rotated into absolute position\r\n    private _invalidatedRectangle: Nullable<Measure> = null;\r\n    /**\r\n     * Invalidates a rectangle area on the gui texture\r\n     * @param invalidMinX left most position of the rectangle to invalidate in the texture\r\n     * @param invalidMinY top most position of the rectangle to invalidate in the texture\r\n     * @param invalidMaxX right most position of the rectangle to invalidate in the texture\r\n     * @param invalidMaxY bottom most position of the rectangle to invalidate in the texture\r\n     */\r\n    public invalidateRect(invalidMinX: number, invalidMinY: number, invalidMaxX: number, invalidMaxY: number) {\r\n        if (!this._useInvalidateRectOptimization) {\r\n            return;\r\n        }\r\n        if (!this._invalidatedRectangle) {\r\n            this._invalidatedRectangle = new Measure(invalidMinX, invalidMinY, invalidMaxX - invalidMinX + 1, invalidMaxY - invalidMinY + 1);\r\n        } else {\r\n            // Compute intersection\r\n            const maxX = Math.ceil(Math.max(this._invalidatedRectangle.left + this._invalidatedRectangle.width - 1, invalidMaxX));\r\n            const maxY = Math.ceil(Math.max(this._invalidatedRectangle.top + this._invalidatedRectangle.height - 1, invalidMaxY));\r\n            this._invalidatedRectangle.left = Math.floor(Math.min(this._invalidatedRectangle.left, invalidMinX));\r\n            this._invalidatedRectangle.top = Math.floor(Math.min(this._invalidatedRectangle.top, invalidMinY));\r\n            this._invalidatedRectangle.width = maxX - this._invalidatedRectangle.left + 1;\r\n            this._invalidatedRectangle.height = maxY - this._invalidatedRectangle.top + 1;\r\n        }\r\n    }\r\n    /**\r\n     * Marks the texture as dirty forcing a complete update\r\n     */\r\n    public markAsDirty() {\r\n        this._isDirty = true;\r\n    }\r\n    /**\r\n     * Helper function used to create a new style\r\n     * @returns a new style\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#styles\r\n     */\r\n    public createStyle(): Style {\r\n        return new Style(this);\r\n    }\r\n    /**\r\n     * Adds a new control to the root container\r\n     * @param control defines the control to add\r\n     * @returns the current texture\r\n     */\r\n    public addControl(control: Control): AdvancedDynamicTexture {\r\n        this._rootContainer.addControl(control);\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes a control from the root container\r\n     * @param control defines the control to remove\r\n     * @returns the current texture\r\n     */\r\n    public removeControl(control: Control): AdvancedDynamicTexture {\r\n        this._rootContainer.removeControl(control);\r\n        return this;\r\n    }\r\n    /**\r\n     * Moves overlapped controls towards a position where it is not overlapping anymore.\r\n     * Please note that this method alters linkOffsetXInPixels and linkOffsetYInPixels.\r\n     * @param overlapGroup the overlap group which will be processed or undefined to process all overlap groups\r\n     * @param deltaStep the step size (speed) to reach the target non overlapping position (default 0.1)\r\n     * @param repelFactor how much is the control repelled by other controls\r\n     */\r\n    public moveToNonOverlappedPosition(overlapGroup?: number | Control[], deltaStep = 1, repelFactor = 1) {\r\n        let controlsForGroup: Control[];\r\n        if (Array.isArray(overlapGroup)) {\r\n            controlsForGroup = overlapGroup;\r\n        } else {\r\n            const descendants = this.getDescendants(true);\r\n            // get only the controls with an overlapGroup property set\r\n            // if the overlapGroup parameter is set, filter the controls and get only the controls belonging to that overlapGroup\r\n            controlsForGroup = overlapGroup === undefined ? descendants.filter((c) => c.overlapGroup !== undefined) : descendants.filter((c) => c.overlapGroup === overlapGroup);\r\n        }\r\n\r\n        controlsForGroup.forEach((control1) => {\r\n            let velocity = Vector2.Zero();\r\n            const center = new Vector2(control1.centerX, control1.centerY);\r\n\r\n            controlsForGroup.forEach((control2) => {\r\n                if (control1 !== control2 && AdvancedDynamicTexture._Overlaps(control1, control2)) {\r\n                    // if the two controls overlaps get a direction vector from one control's center to another control's center\r\n                    const diff = center.subtract(new Vector2(control2.centerX, control2.centerY));\r\n                    const diffLength = diff.length();\r\n\r\n                    if (diffLength > 0) {\r\n                        // calculate the velocity\r\n                        velocity = velocity.add(diff.normalize().scale(repelFactor / diffLength));\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (velocity.length() > 0) {\r\n                // move the control along the direction vector away from the overlapping control\r\n                velocity = velocity.normalize().scale(deltaStep * (control1.overlapDeltaMultiplier ?? 1));\r\n                control1.linkOffsetXInPixels += velocity.x;\r\n                control1.linkOffsetYInPixels += velocity.y;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Release all resources\r\n     */\r\n    public dispose(): void {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        this._rootElement = null;\r\n        scene.onBeforeCameraRenderObservable.remove(this._renderObserver);\r\n        if (this._resizeObserver) {\r\n            scene.getEngine().onResizeObservable.remove(this._resizeObserver);\r\n        }\r\n        if (this._prePointerObserver) {\r\n            scene.onPrePointerObservable.remove(this._prePointerObserver);\r\n        }\r\n        if (this._sceneRenderObserver) {\r\n            scene.onBeforeRenderObservable.remove(this._sceneRenderObserver);\r\n        }\r\n        if (this._pointerObserver) {\r\n            scene.onPointerObservable.remove(this._pointerObserver);\r\n        }\r\n        if (this._preKeyboardObserver) {\r\n            scene.onPreKeyboardObservable.remove(this._preKeyboardObserver);\r\n        }\r\n        if (this._canvasPointerOutObserver) {\r\n            scene.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver);\r\n        }\r\n        if (this._canvasBlurObserver) {\r\n            scene.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver);\r\n        }\r\n        if (this._controlAddedObserver) {\r\n            this._rootContainer.onControlAddedObservable.remove(this._controlAddedObserver);\r\n        }\r\n        if (this._controlRemovedObserver) {\r\n            this._rootContainer.onControlRemovedObservable.remove(this._controlRemovedObserver);\r\n        }\r\n        if (this._layerToDispose) {\r\n            this._layerToDispose.texture = null;\r\n            this._layerToDispose.dispose();\r\n            this._layerToDispose = null;\r\n        }\r\n        this._rootContainer.dispose();\r\n        this.onClipboardObservable.clear();\r\n        this.onControlPickedObservable.clear();\r\n        this.onBeginRenderObservable.clear();\r\n        this.onEndRenderObservable.clear();\r\n        this.onBeginLayoutObservable.clear();\r\n        this.onEndLayoutObservable.clear();\r\n        this.onGuiReadyObservable.clear();\r\n        super.dispose();\r\n    }\r\n    private _onResize(): void {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        // Check size\r\n        const engine = scene.getEngine();\r\n        const textureSize = this.getSize();\r\n        let renderWidth = engine.getRenderWidth() * this._renderScale;\r\n        let renderHeight = engine.getRenderHeight() * this._renderScale;\r\n\r\n        if (this._renderAtIdealSize) {\r\n            if (this._idealWidth) {\r\n                renderHeight = (renderHeight * this._idealWidth) / renderWidth;\r\n                renderWidth = this._idealWidth;\r\n            } else if (this._idealHeight) {\r\n                renderWidth = (renderWidth * this._idealHeight) / renderHeight;\r\n                renderHeight = this._idealHeight;\r\n            }\r\n        }\r\n        if (textureSize.width !== renderWidth || textureSize.height !== renderHeight) {\r\n            this.scaleTo(renderWidth, renderHeight);\r\n            this.markAsDirty();\r\n            if (this._idealWidth || this._idealHeight) {\r\n                this._rootContainer._markAllAsDirty();\r\n            }\r\n        }\r\n        this.invalidateRect(0, 0, textureSize.width - 1, textureSize.height - 1);\r\n    }\r\n    /** @internal */\r\n    public _getGlobalViewport(): Viewport {\r\n        const size = this.getSize();\r\n        const globalViewPort = this._fullscreenViewport.toGlobal(size.width, size.height);\r\n\r\n        const targetX = Math.round(globalViewPort.width * (1 / this.rootContainer.scaleX));\r\n        const targetY = Math.round(globalViewPort.height * (1 / this.rootContainer.scaleY));\r\n\r\n        globalViewPort.x += (globalViewPort.width - targetX) / 2;\r\n        globalViewPort.y += (globalViewPort.height - targetY) / 2;\r\n\r\n        globalViewPort.width = targetX;\r\n        globalViewPort.height = targetY;\r\n\r\n        return globalViewPort;\r\n    }\r\n    /**\r\n     * Get screen coordinates for a vector3\r\n     * @param position defines the position to project\r\n     * @param worldMatrix defines the world matrix to use\r\n     * @returns the projected position\r\n     */\r\n    public getProjectedPosition(position: Vector3, worldMatrix: Matrix): Vector2 {\r\n        const result = this.getProjectedPositionWithZ(position, worldMatrix);\r\n        return new Vector2(result.x, result.y);\r\n    }\r\n\r\n    /**\r\n     * Get screen coordinates for a vector3\r\n     * @param position defines the position to project\r\n     * @param worldMatrix defines the world matrix to use\r\n     * @returns the projected position with Z\r\n     */\r\n    public getProjectedPositionWithZ(position: Vector3, worldMatrix: Matrix): Vector3 {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return Vector3.Zero();\r\n        }\r\n        const globalViewport = this._getGlobalViewport();\r\n        const projectedPosition = Vector3.Project(position, worldMatrix, scene.getTransformMatrix(), globalViewport);\r\n        return new Vector3(projectedPosition.x, projectedPosition.y, projectedPosition.z);\r\n    }\r\n\r\n    private _checkUpdate(camera: Camera, skipUpdate?: boolean): void {\r\n        if (this._layerToDispose) {\r\n            if ((camera.layerMask & this._layerToDispose.layerMask) === 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (this._isFullscreen && this._linkedControls.length) {\r\n            const scene = this.getScene();\r\n            if (!scene) {\r\n                return;\r\n            }\r\n            const globalViewport = this._getGlobalViewport();\r\n            for (const control of this._linkedControls) {\r\n                if (!control.isVisible) {\r\n                    continue;\r\n                }\r\n                const mesh = control._linkedMesh as AbstractMesh;\r\n                if (!mesh || mesh.isDisposed()) {\r\n                    Tools.SetImmediate(() => {\r\n                        control.linkWithMesh(null);\r\n                    });\r\n                    continue;\r\n                }\r\n                const position = mesh.getBoundingInfo ? mesh.getBoundingInfo().boundingSphere.center : (Vector3.ZeroReadOnly as Vector3);\r\n                const projectedPosition = Vector3.Project(position, mesh.getWorldMatrix(), scene.getTransformMatrix(), globalViewport);\r\n                if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n                    control.notRenderable = true;\r\n                    continue;\r\n                }\r\n                control.notRenderable = false;\r\n                if (this.useInvalidateRectOptimization) {\r\n                    control.invalidateRect();\r\n                }\r\n\r\n                control._moveToProjectedPosition(projectedPosition);\r\n            }\r\n        }\r\n        if (!this._isDirty && !this._rootContainer.isDirty) {\r\n            return;\r\n        }\r\n        this._isDirty = false;\r\n        this._render(skipUpdate);\r\n        if (!skipUpdate) {\r\n            this.update(this.applyYInversionOnUpdate, this.premulAlpha, AdvancedDynamicTexture.AllowGPUOptimizations);\r\n        }\r\n    }\r\n\r\n    private _clearMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    private _render(skipRender?: boolean): void {\r\n        const textureSize = this.getSize();\r\n        const renderWidth = textureSize.width;\r\n        const renderHeight = textureSize.height;\r\n\r\n        const context = this.getContext();\r\n        context.font = \"18px Arial\";\r\n        context.strokeStyle = \"white\";\r\n\r\n        if (this.onGuiReadyObservable.hasObservers()) {\r\n            this._checkGuiIsReady();\r\n        }\r\n\r\n        /** We have to recheck the camera projection in the case the root control's children have changed  */\r\n        if (this._rootChildrenHaveChanged) {\r\n            const camera = this.getScene()?.activeCamera;\r\n            if (camera) {\r\n                this._rootChildrenHaveChanged = false;\r\n                this._checkUpdate(camera, true);\r\n            }\r\n        }\r\n\r\n        // Layout\r\n        this.onBeginLayoutObservable.notifyObservers(this);\r\n        const measure = new Measure(0, 0, renderWidth, renderHeight);\r\n        this._numLayoutCalls = 0;\r\n        this._rootContainer._layout(measure, context);\r\n        this.onEndLayoutObservable.notifyObservers(this);\r\n        this._isDirty = false; // Restoring the dirty state that could have been set by controls during layout processing\r\n\r\n        if (skipRender) {\r\n            return;\r\n        }\r\n\r\n        // Clear\r\n        if (this._invalidatedRectangle) {\r\n            this._clearMeasure.copyFrom(this._invalidatedRectangle);\r\n        } else {\r\n            this._clearMeasure.copyFromFloats(0, 0, renderWidth, renderHeight);\r\n        }\r\n        context.clearRect(this._clearMeasure.left, this._clearMeasure.top, this._clearMeasure.width, this._clearMeasure.height);\r\n        if (this._background) {\r\n            context.save();\r\n            context.fillStyle = this._background;\r\n            context.fillRect(this._clearMeasure.left, this._clearMeasure.top, this._clearMeasure.width, this._clearMeasure.height);\r\n            context.restore();\r\n        }\r\n\r\n        // Render\r\n        this.onBeginRenderObservable.notifyObservers(this);\r\n        this._numRenderCalls = 0;\r\n        this._rootContainer._render(context, this._invalidatedRectangle);\r\n        this.onEndRenderObservable.notifyObservers(this);\r\n        this._invalidatedRectangle = null;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    public _changeCursor(cursor: string) {\r\n        if (this._rootElement) {\r\n            this._rootElement.style.cursor = cursor;\r\n            this._cursorChanged = true;\r\n        }\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    public _registerLastControlDown(control: Control, pointerId: number) {\r\n        this._lastControlDown[pointerId] = control;\r\n        this.onControlPickedObservable.notifyObservers(control);\r\n    }\r\n    private _doPicking(x: number, y: number, pi: Nullable<PointerInfoBase>, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): void {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        const engine = scene.getEngine();\r\n        const textureSize = this.getSize();\r\n        if (this._isFullscreen) {\r\n            const camera = scene.cameraToUseForPointers || scene.activeCamera;\r\n            if (!camera) {\r\n                return;\r\n            }\r\n            const viewport = camera.viewport;\r\n            x = x * (textureSize.width / (engine.getRenderWidth() * viewport.width));\r\n            y = y * (textureSize.height / (engine.getRenderHeight() * viewport.height));\r\n        }\r\n        if (this._capturingControl[pointerId]) {\r\n            if (this._capturingControl[pointerId].isPointerBlocker) {\r\n                this._shouldBlockPointer = true;\r\n            }\r\n            this._capturingControl[pointerId]._processObservables(type, x, y, pi, pointerId, buttonIndex);\r\n            return;\r\n        }\r\n\r\n        this._cursorChanged = false;\r\n        if (!this._rootContainer._processPicking(x, y, pi, type, pointerId, buttonIndex, deltaX, deltaY)) {\r\n            if (!scene.doNotHandleCursors) {\r\n                this._changeCursor(\"\");\r\n            }\r\n            if (type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId], pi);\r\n                    delete this._lastControlOver[pointerId];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!this._cursorChanged && !scene.doNotHandleCursors) {\r\n            this._changeCursor(\"\");\r\n        }\r\n        this._manageFocus();\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    public _cleanControlAfterRemovalFromList(list: { [pointerId: number]: Control }, control: Control) {\r\n        for (const pointerId in list) {\r\n            if (!Object.prototype.hasOwnProperty.call(list, pointerId)) {\r\n                continue;\r\n            }\r\n            const lastControlOver = list[pointerId];\r\n            if (lastControlOver === control) {\r\n                delete list[pointerId];\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    public _cleanControlAfterRemoval(control: Control) {\r\n        this._cleanControlAfterRemovalFromList(this._lastControlDown, control);\r\n        this._cleanControlAfterRemovalFromList(this._lastControlOver, control);\r\n    }\r\n\r\n    /**\r\n     * This function will run a pointer event on this ADT and will trigger any pointer events on any controls\r\n     * This will work on a fullscreen ADT only. For mesh based ADT, simulate pointer events using the scene directly.\r\n     * @param x pointer X on the canvas for the picking\r\n     * @param y pointer Y on the canvas for the picking\r\n     * @param pi optional pointer information\r\n     */\r\n    public pick(x: number, y: number, pi: Nullable<PointerInfoPre> = null) {\r\n        if (this._isFullscreen && this._scene) {\r\n            this._translateToPicking(this._scene, new Viewport(0, 0, 0, 0), pi, x, y);\r\n        }\r\n    }\r\n\r\n    private _translateToPicking(scene: Scene, tempViewport: Viewport, pi: Nullable<PointerInfoPre>, x: number = scene.pointerX, y: number = scene.pointerY) {\r\n        const camera = scene.cameraToUseForPointers || scene.activeCamera;\r\n        const engine = scene.getEngine();\r\n        const originalCameraToUseForPointers = scene.cameraToUseForPointers;\r\n\r\n        if (!camera) {\r\n            tempViewport.x = 0;\r\n            tempViewport.y = 0;\r\n            tempViewport.width = engine.getRenderWidth();\r\n            tempViewport.height = engine.getRenderHeight();\r\n        } else {\r\n            if (camera.rigCameras.length) {\r\n                // rig camera - we need to find the camera to use for this event\r\n                const rigViewport = new Viewport(0, 0, 1, 1);\r\n                camera.rigCameras.forEach((rigCamera) => {\r\n                    // generate the viewport of this camera\r\n                    rigCamera.viewport.toGlobalToRef(engine.getRenderWidth(), engine.getRenderHeight(), rigViewport);\r\n                    const transformedX = x / engine.getHardwareScalingLevel() - rigViewport.x;\r\n                    const transformedY = y / engine.getHardwareScalingLevel() - (engine.getRenderHeight() - rigViewport.y - rigViewport.height);\r\n                    // check if the pointer is in the camera's viewport\r\n                    if (transformedX < 0 || transformedY < 0 || x > rigViewport.width || y > rigViewport.height) {\r\n                        // out of viewport - don't use this camera\r\n                        return;\r\n                    }\r\n                    // set the camera to use for pointers until this pointer loop is over\r\n                    scene.cameraToUseForPointers = rigCamera;\r\n                    // set the viewport\r\n                    tempViewport.x = rigViewport.x;\r\n                    tempViewport.y = rigViewport.y;\r\n                    tempViewport.width = rigViewport.width;\r\n                    tempViewport.height = rigViewport.height;\r\n                });\r\n            } else {\r\n                camera.viewport.toGlobalToRef(engine.getRenderWidth(), engine.getRenderHeight(), tempViewport);\r\n            }\r\n        }\r\n\r\n        const transformedX = x / engine.getHardwareScalingLevel() - tempViewport.x;\r\n        const transformedY = y / engine.getHardwareScalingLevel() - (engine.getRenderHeight() - tempViewport.y - tempViewport.height);\r\n        this._shouldBlockPointer = false;\r\n        // Do picking modifies _shouldBlockPointer\r\n        if (pi) {\r\n            const pointerId = (pi.event as IPointerEvent).pointerId || this._defaultMousePointerId;\r\n            this._doPicking(transformedX, transformedY, pi, pi.type, pointerId, pi.event.button, (<IWheelEvent>pi.event).deltaX, (<IWheelEvent>pi.event).deltaY);\r\n            // Avoid overwriting a true skipOnPointerObservable to false\r\n            if ((this._shouldBlockPointer && !(pi.type & this.skipBlockEvents)) || this._capturingControl[pointerId]) {\r\n                pi.skipOnPointerObservable = true;\r\n            }\r\n        } else {\r\n            this._doPicking(transformedX, transformedY, null, PointerEventTypes.POINTERMOVE, this._defaultMousePointerId, 0);\r\n        }\r\n        // if overridden by a rig camera - reset back to the original value\r\n        scene.cameraToUseForPointers = originalCameraToUseForPointers;\r\n    }\r\n\r\n    /** Attach to all scene events required to support pointer events */\r\n    public attach(): void {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        const tempViewport = new Viewport(0, 0, 0, 0);\r\n\r\n        this._prePointerObserver = scene.onPrePointerObservable.add((pi) => {\r\n            if (\r\n                scene.isPointerCaptured((<IPointerEvent>pi.event).pointerId) &&\r\n                pi.type === PointerEventTypes.POINTERUP &&\r\n                !this._capturedPointerIds.has((pi.event as IPointerEvent).pointerId)\r\n            ) {\r\n                return;\r\n            }\r\n            if (\r\n                pi.type !== PointerEventTypes.POINTERMOVE &&\r\n                pi.type !== PointerEventTypes.POINTERUP &&\r\n                pi.type !== PointerEventTypes.POINTERDOWN &&\r\n                pi.type !== PointerEventTypes.POINTERWHEEL\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            if (pi.type === PointerEventTypes.POINTERMOVE) {\r\n                // Avoid pointerMove events firing while the pointer is captured by the scene\r\n                if (scene.isPointerCaptured((<IPointerEvent>pi.event).pointerId)) {\r\n                    return;\r\n                }\r\n                if ((pi.event as IPointerEvent).pointerId) {\r\n                    this._defaultMousePointerId = (pi.event as IPointerEvent).pointerId; // This is required to make sure we have the correct pointer ID for wheel\r\n                }\r\n            }\r\n            this._translateToPicking(scene, tempViewport, pi);\r\n        });\r\n        this._attachPickingToSceneRender(scene, () => this._translateToPicking(scene, tempViewport, null), false);\r\n        this._attachToOnPointerOut(scene);\r\n        this._attachToOnBlur(scene);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    private _onClipboardCopy = (rawEvt: Event) => {\r\n        const evt = rawEvt as ClipboardEvent;\r\n        const ev = new ClipboardInfo(ClipboardEventTypes.COPY, evt);\r\n        this.onClipboardObservable.notifyObservers(ev);\r\n        evt.preventDefault();\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    private _onClipboardCut = (rawEvt: Event) => {\r\n        const evt = rawEvt as ClipboardEvent;\r\n        const ev = new ClipboardInfo(ClipboardEventTypes.CUT, evt);\r\n        this.onClipboardObservable.notifyObservers(ev);\r\n        evt.preventDefault();\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    private _onClipboardPaste = (rawEvt: Event) => {\r\n        const evt = rawEvt as ClipboardEvent;\r\n        const ev = new ClipboardInfo(ClipboardEventTypes.PASTE, evt);\r\n        this.onClipboardObservable.notifyObservers(ev);\r\n        evt.preventDefault();\r\n    };\r\n    /**\r\n     * Register the clipboard Events onto the canvas\r\n     */\r\n    public registerClipboardEvents(): void {\r\n        self.addEventListener(\"copy\", this._onClipboardCopy, false);\r\n        self.addEventListener(\"cut\", this._onClipboardCut, false);\r\n        self.addEventListener(\"paste\", this._onClipboardPaste, false);\r\n    }\r\n    /**\r\n     * Unregister the clipboard Events from the canvas\r\n     */\r\n    public unRegisterClipboardEvents(): void {\r\n        self.removeEventListener(\"copy\", this._onClipboardCopy);\r\n        self.removeEventListener(\"cut\", this._onClipboardCut);\r\n        self.removeEventListener(\"paste\", this._onClipboardPaste);\r\n    }\r\n\r\n    /**\r\n     * Transform uvs from mesh space to texture space, taking the texture into account\r\n     * @param uv the uvs in mesh space\r\n     * @returns the uvs in texture space\r\n     */\r\n    private _transformUvs(uv: Vector2): Vector2 {\r\n        const textureMatrix = this.getTextureMatrix();\r\n        let result;\r\n        if (textureMatrix.isIdentityAs3x2()) {\r\n            result = uv;\r\n        } else {\r\n            const homogeneousTextureMatrix = TmpVectors.Matrix[0];\r\n\r\n            textureMatrix.getRowToRef(0, TmpVectors.Vector4[0]);\r\n            textureMatrix.getRowToRef(1, TmpVectors.Vector4[1]);\r\n            textureMatrix.getRowToRef(2, TmpVectors.Vector4[2]);\r\n\r\n            const r0 = TmpVectors.Vector4[0];\r\n            const r1 = TmpVectors.Vector4[1];\r\n            const r2 = TmpVectors.Vector4[2];\r\n\r\n            homogeneousTextureMatrix.setRowFromFloats(0, r0.x, r0.y, 0, 0);\r\n            homogeneousTextureMatrix.setRowFromFloats(1, r1.x, r1.y, 0, 0);\r\n            homogeneousTextureMatrix.setRowFromFloats(2, 0, 0, 1, 0);\r\n            homogeneousTextureMatrix.setRowFromFloats(3, r2.x, r2.y, 0, 1);\r\n\r\n            result = TmpVectors.Vector2[0];\r\n            Vector2.TransformToRef(uv, homogeneousTextureMatrix, result);\r\n        }\r\n\r\n        // In wrap and mirror mode, the texture coordinate for coordinates more than 1 is the fractional part of the coordinate\r\n        if (this.wrapU === Texture.WRAP_ADDRESSMODE || this.wrapU === Texture.MIRROR_ADDRESSMODE) {\r\n            if (result.x > 1) {\r\n                let fX = result.x - Math.trunc(result.x);\r\n                // In mirror mode, the sign of the texture coordinate depends on the integer part -\r\n                // odd integers means it is mirrored from the original coordinate\r\n                if (this.wrapU === Texture.MIRROR_ADDRESSMODE && Math.trunc(result.x) % 2 === 1) {\r\n                    fX = 1 - fX;\r\n                }\r\n                result.x = fX;\r\n            }\r\n        }\r\n        if (this.wrapV === Texture.WRAP_ADDRESSMODE || this.wrapV === Texture.MIRROR_ADDRESSMODE) {\r\n            if (result.y > 1) {\r\n                let fY = result.y - Math.trunc(result.y);\r\n                if (this.wrapV === Texture.MIRROR_ADDRESSMODE && Math.trunc(result.x) % 2 === 1) {\r\n                    fY = 1 - fY;\r\n                }\r\n                result.y = fY;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Connect the texture to a hosting mesh to enable interactions\r\n     * @param mesh defines the mesh to attach to\r\n     * @param supportPointerMove defines a boolean indicating if pointer move events must be catched as well\r\n     */\r\n    public attachToMesh(mesh: AbstractMesh, supportPointerMove = true): void {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        if (this._pointerObserver) {\r\n            scene.onPointerObservable.remove(this._pointerObserver);\r\n        }\r\n\r\n        this._pointerObserver = scene.onPointerObservable.add((pi) => {\r\n            if (\r\n                pi.type !== PointerEventTypes.POINTERMOVE &&\r\n                pi.type !== PointerEventTypes.POINTERUP &&\r\n                pi.type !== PointerEventTypes.POINTERDOWN &&\r\n                pi.type !== PointerEventTypes.POINTERWHEEL\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            if (pi.type === PointerEventTypes.POINTERMOVE && (pi.event as IPointerEvent).pointerId) {\r\n                this._defaultMousePointerId = (pi.event as IPointerEvent).pointerId; // This is required to make sure we have the correct pointer ID for wheel\r\n            }\r\n\r\n            const pointerId = (pi.event as IPointerEvent).pointerId || this._defaultMousePointerId;\r\n            if (pi.pickInfo && pi.pickInfo.hit && pi.pickInfo.pickedMesh === mesh) {\r\n                let uv = pi.pickInfo.getTextureCoordinates();\r\n                if (uv) {\r\n                    uv = this._transformUvs(uv);\r\n                    const size = this.getSize();\r\n                    this._doPicking(\r\n                        uv.x * size.width,\r\n                        (this.applyYInversionOnUpdate ? 1.0 - uv.y : uv.y) * size.height,\r\n                        pi,\r\n                        pi.type,\r\n                        pointerId,\r\n                        pi.event.button,\r\n                        (<IWheelEvent>pi.event).deltaX,\r\n                        (<IWheelEvent>pi.event).deltaY\r\n                    );\r\n                }\r\n            } else if (pi.type === PointerEventTypes.POINTERUP) {\r\n                if (this._lastControlDown[pointerId]) {\r\n                    this._lastControlDown[pointerId]._forcePointerUp(pointerId);\r\n                }\r\n                delete this._lastControlDown[pointerId];\r\n                if (this.focusedControl) {\r\n                    const friendlyControls = this.focusedControl.keepsFocusWith();\r\n                    let canMoveFocus = true;\r\n                    if (friendlyControls) {\r\n                        for (const control of friendlyControls) {\r\n                            // Same host, no need to keep the focus\r\n                            if (this === control._host) {\r\n                                continue;\r\n                            }\r\n                            // Different hosts\r\n                            const otherHost = control._host;\r\n                            if (otherHost._lastControlOver[pointerId] && otherHost._lastControlOver[pointerId].isAscendant(control)) {\r\n                                canMoveFocus = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (canMoveFocus) {\r\n                        this.focusedControl = null;\r\n                    }\r\n                }\r\n            } else if (pi.type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId], pi, true);\r\n                }\r\n                delete this._lastControlOver[pointerId];\r\n            }\r\n        });\r\n        mesh.enablePointerMoveEvents = supportPointerMove;\r\n        this._attachPickingToSceneRender(\r\n            scene,\r\n            () => {\r\n                const pointerId = this._defaultMousePointerId;\r\n                const pick = scene?.pick(scene.pointerX, scene.pointerY);\r\n                if (pick && pick.hit && pick.pickedMesh === mesh) {\r\n                    let uv = pick.getTextureCoordinates();\r\n                    if (uv) {\r\n                        uv = this._transformUvs(uv);\r\n                        const size = this.getSize();\r\n                        this._doPicking(uv.x * size.width, (this.applyYInversionOnUpdate ? 1.0 - uv.y : uv.y) * size.height, null, PointerEventTypes.POINTERMOVE, pointerId, 0);\r\n                    }\r\n                } else {\r\n                    if (this._lastControlOver[pointerId]) {\r\n                        this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId], null, true);\r\n                    }\r\n                    delete this._lastControlOver[pointerId];\r\n                }\r\n            },\r\n            true\r\n        );\r\n        this._attachToOnPointerOut(scene);\r\n        this._attachToOnBlur(scene);\r\n    }\r\n    /**\r\n     * Move the focus to a specific control\r\n     * @param control defines the control which will receive the focus\r\n     */\r\n    public moveFocusToControl(control: IFocusableControl): void {\r\n        this.focusedControl = control;\r\n        this._lastPickedControl = <any>control;\r\n        this._blockNextFocusCheck = true;\r\n    }\r\n    private _manageFocus(): void {\r\n        if (this._blockNextFocusCheck) {\r\n            this._blockNextFocusCheck = false;\r\n            this._lastPickedControl = <any>this._focusedControl;\r\n            return;\r\n        }\r\n        // Focus management\r\n        if (this._focusedControl) {\r\n            if (this._focusedControl !== <any>this._lastPickedControl) {\r\n                if (this._lastPickedControl.isFocusInvisible) {\r\n                    return;\r\n                }\r\n                this.focusedControl = null;\r\n            }\r\n        }\r\n    }\r\n    private _attachPickingToSceneRender(scene: Scene, pickFunction: () => void, forcePicking: boolean) {\r\n        this._sceneRenderObserver = scene.onBeforeRenderObservable.add(() => {\r\n            if (!this.checkPointerEveryFrame) {\r\n                return;\r\n            }\r\n            if (this._linkedControls.length > 0 || forcePicking) {\r\n                pickFunction();\r\n            }\r\n        });\r\n    }\r\n    private _attachToOnPointerOut(scene: Scene): void {\r\n        this._canvasPointerOutObserver = scene.getEngine().onCanvasPointerOutObservable.add((pointerEvent) => {\r\n            if (this._lastControlOver[pointerEvent.pointerId]) {\r\n                this._lastControlOver[pointerEvent.pointerId]._onPointerOut(this._lastControlOver[pointerEvent.pointerId], null);\r\n            }\r\n            delete this._lastControlOver[pointerEvent.pointerId];\r\n            if (this._lastControlDown[pointerEvent.pointerId] && this._lastControlDown[pointerEvent.pointerId] !== this._capturingControl[pointerEvent.pointerId]) {\r\n                this._lastControlDown[pointerEvent.pointerId]._forcePointerUp(pointerEvent.pointerId);\r\n                delete this._lastControlDown[pointerEvent.pointerId];\r\n            }\r\n        });\r\n    }\r\n    private _attachToOnBlur(scene: Scene): void {\r\n        this._canvasBlurObserver = scene.getEngine().onCanvasBlurObservable.add(() => {\r\n            Object.entries(this._lastControlDown).forEach(([, value]) => {\r\n                value._onCanvasBlur();\r\n            });\r\n            this.focusedControl = null;\r\n            this._lastControlDown = {};\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Serializes the entire GUI system\r\n     * @returns an object with the JSON serialized data\r\n     */\r\n    public serializeContent(): any {\r\n        const size = this.getSize();\r\n        const serializationObject = {\r\n            root: {},\r\n            width: size.width,\r\n            height: size.height,\r\n        };\r\n\r\n        this._rootContainer.serialize(serializationObject.root);\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Recreate the content of the ADT from a JSON object\r\n     * @param serializedObject define the JSON serialized object to restore from\r\n     * @param scaleToSize defines whether to scale to texture to the saved size\r\n     */\r\n    public parseSerializedObject(serializedObject: any, scaleToSize?: boolean) {\r\n        this._rootContainer = Control.Parse(serializedObject.root, this) as Container;\r\n        if (scaleToSize) {\r\n            const width = serializedObject.width;\r\n            const height = serializedObject.height;\r\n            if (typeof width === \"number\" && typeof height === \"number\" && width >= 0 && height >= 0) {\r\n                this.scaleTo(width, height);\r\n            } else {\r\n                // scales the GUI to a default size if none was available in the serialized content\r\n                this.scaleTo(1920, 1080);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clones the ADT. If no mesh is defined, the GUI will be considered as a fullscreen GUI\r\n     * @param newName defines the name of the new ADT\r\n     * @param attachToMesh defines if the new ADT should be attached to a mesh\r\n     * @returns the clone of the ADT\r\n     */\r\n    public clone(newName?: string, attachToMesh?: AbstractMesh): AdvancedDynamicTexture {\r\n        const scene = this.getScene();\r\n\r\n        if (!scene) {\r\n            return this;\r\n        }\r\n        const size = this.getSize();\r\n        const data = this.serializeContent();\r\n        let clone;\r\n        if (!this._isFullscreen) {\r\n            if (attachToMesh) {\r\n                clone = AdvancedDynamicTexture.CreateForMesh(attachToMesh, size.width, size.height);\r\n            } else {\r\n                clone = new AdvancedDynamicTexture(newName ?? \"Clone of \" + this.name, size.width, size.height, scene, !this.noMipmap, this.samplingMode);\r\n            }\r\n        } else {\r\n            clone = AdvancedDynamicTexture.CreateFullscreenUI(newName ?? \"Clone of \" + this.name);\r\n        }\r\n        clone.parseSerializedObject(data);\r\n\r\n        return clone;\r\n    }\r\n\r\n    /**\r\n     * Recreate the content of the ADT from a JSON object\r\n     * @param serializedObject define the JSON serialized object to restore from\r\n     * @param scaleToSize defines whether to scale to texture to the saved size\r\n     * @deprecated Please use parseSerializedObject instead\r\n     */\r\n    public parseContent = this.parseSerializedObject;\r\n\r\n    /**\r\n     * Recreate the content of the ADT from a snippet saved by the GUI editor\r\n     * @param snippetId defines the snippet to load\r\n     * @param scaleToSize defines whether to scale to texture to the saved size\r\n     * @param appendToAdt if provided the snippet will be appended to the adt. Otherwise a fullscreen ADT will be created.\r\n     * @returns a promise that will resolve on success\r\n     */\r\n    public static async ParseFromSnippetAsync(snippetId: string, scaleToSize?: boolean, appendToAdt?: AdvancedDynamicTexture): Promise<AdvancedDynamicTexture> {\r\n        const adt = appendToAdt ?? AdvancedDynamicTexture.CreateFullscreenUI(\"ADT from snippet\");\r\n        if (snippetId === \"_BLANK\") {\r\n            return adt;\r\n        }\r\n\r\n        const serialized = await AdvancedDynamicTexture._LoadURLContentAsync(AdvancedDynamicTexture.SnippetUrl + \"/\" + snippetId.replace(/#/g, \"/\"), true);\r\n        adt.parseSerializedObject(serialized, scaleToSize);\r\n        return adt;\r\n    }\r\n\r\n    /**\r\n     * Recreate the content of the ADT from a snippet saved by the GUI editor\r\n     * @param snippetId defines the snippet to load\r\n     * @param scaleToSize defines whether to scale to texture to the saved size\r\n     * @returns a promise that will resolve on success\r\n     */\r\n    public parseFromSnippetAsync(snippetId: string, scaleToSize?: boolean): Promise<AdvancedDynamicTexture> {\r\n        return AdvancedDynamicTexture.ParseFromSnippetAsync(snippetId, scaleToSize, this);\r\n    }\r\n\r\n    /**\r\n     * Recreate the content of the ADT from a url json\r\n     * @param url defines the url to load\r\n     * @param scaleToSize defines whether to scale to texture to the saved size\r\n     * @param appendToAdt if provided the snippet will be appended to the adt. Otherwise a fullscreen ADT will be created.\r\n     * @returns a promise that will resolve on success\r\n     */\r\n    public static async ParseFromFileAsync(url: string, scaleToSize?: boolean, appendToAdt?: AdvancedDynamicTexture): Promise<AdvancedDynamicTexture> {\r\n        const adt = appendToAdt ?? AdvancedDynamicTexture.CreateFullscreenUI(\"ADT from URL\");\r\n        const serialized = await AdvancedDynamicTexture._LoadURLContentAsync(url);\r\n        adt.parseSerializedObject(serialized, scaleToSize);\r\n        return adt;\r\n    }\r\n\r\n    /**\r\n     * Recreate the content of the ADT from a url json\r\n     * @param url defines the url to load\r\n     * @param scaleToSize defines whether to scale to texture to the saved size\r\n     * @returns a promise that will resolve on success\r\n     */\r\n    public parseFromURLAsync(url: string, scaleToSize?: boolean): Promise<AdvancedDynamicTexture> {\r\n        return AdvancedDynamicTexture.ParseFromFileAsync(url, scaleToSize, this);\r\n    }\r\n\r\n    private static _LoadURLContentAsync(url: string, snippet: boolean = false): Promise<any> {\r\n        if (url === \"\") {\r\n            return Promise.reject(\"No URL provided\");\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const request = new WebRequest();\r\n            request.addEventListener(\"readystatechange\", () => {\r\n                if (request.readyState == 4) {\r\n                    if (request.status == 200) {\r\n                        let gui;\r\n                        if (snippet) {\r\n                            const payload = JSON.parse(JSON.parse(request.responseText).jsonPayload);\r\n                            gui = payload.encodedGui ? new TextDecoder(\"utf-8\").decode(DecodeBase64ToBinary(payload.encodedGui)) : payload.gui;\r\n                        } else {\r\n                            gui = request.responseText;\r\n                        }\r\n                        const serializationObject = JSON.parse(gui);\r\n                        resolve(serializationObject);\r\n                    } else {\r\n                        reject(\"Unable to load\");\r\n                    }\r\n                }\r\n            });\r\n            request.open(\"GET\", url);\r\n            request.send();\r\n        });\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Compares two rectangle based controls for pixel overlap\r\n     * @param control1 The first control to compare\r\n     * @param control2 The second control to compare\r\n     * @returns true if overlaps, otherwise false\r\n     */\r\n    private static _Overlaps(control1: Control, control2: Control) {\r\n        return !(\r\n            control1.centerX > control2.centerX + control2.widthInPixels ||\r\n            control1.centerX + control1.widthInPixels < control2.centerX ||\r\n            control1.centerY + control1.heightInPixels < control2.centerY ||\r\n            control1.centerY > control2.centerY + control2.heightInPixels\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture in projected mode (ie. attached to a mesh)\r\n     * @param mesh defines the mesh which will receive the texture\r\n     * @param width defines the texture width (1024 by default)\r\n     * @param height defines the texture height (1024 by default)\r\n     * @param supportPointerMove defines a boolean indicating if the texture must capture move events (true by default)\r\n     * @param onlyAlphaTesting defines a boolean indicating that alpha blending will not be used (only alpha testing) (false by default)\r\n     * @param invertY defines if the texture needs to be inverted on the y axis during loading (true by default)\r\n     * @param materialSetupCallback defines a custom way of creating and setting up the material on the mesh\r\n     * @returns a new AdvancedDynamicTexture\r\n     */\r\n    public static CreateForMesh(\r\n        mesh: AbstractMesh,\r\n        width = 1024,\r\n        height = 1024,\r\n        supportPointerMove = true,\r\n        onlyAlphaTesting = false,\r\n        invertY?: boolean,\r\n        materialSetupCallback: (mesh: AbstractMesh, uniqueId: string, texture: AdvancedDynamicTexture, onlyAlphaTesting: boolean) => void = this._CreateMaterial\r\n    ): AdvancedDynamicTexture {\r\n        // use a unique ID in name so serialization will work even if you create two ADTs for a single mesh\r\n        const uniqueId = RandomGUID();\r\n        const result = new AdvancedDynamicTexture(\r\n            `AdvancedDynamicTexture for ${mesh.name} [${uniqueId}]`,\r\n            width,\r\n            height,\r\n            mesh.getScene(),\r\n            true,\r\n            Texture.TRILINEAR_SAMPLINGMODE,\r\n            invertY\r\n        );\r\n\r\n        materialSetupCallback(mesh, uniqueId, result, onlyAlphaTesting);\r\n\r\n        result.attachToMesh(mesh, supportPointerMove);\r\n        return result;\r\n    }\r\n\r\n    private static _CreateMaterial(mesh: AbstractMesh, uniqueId: string, texture: AdvancedDynamicTexture, onlyAlphaTesting: boolean): void {\r\n        const internalClassType = GetClass(\"BABYLON.StandardMaterial\");\r\n        if (!internalClassType) {\r\n            // eslint-disable-next-line no-throw-literal\r\n            throw \"StandardMaterial needs to be imported before as it contains a side-effect required by your code.\";\r\n        }\r\n\r\n        const material: StandardMaterial = new internalClassType(`AdvancedDynamicTextureMaterial for ${mesh.name} [${uniqueId}]`, mesh.getScene());\r\n        material.backFaceCulling = false;\r\n        material.diffuseColor = Color3.Black();\r\n        material.specularColor = Color3.Black();\r\n        if (onlyAlphaTesting) {\r\n            material.diffuseTexture = texture;\r\n            material.emissiveTexture = texture;\r\n            texture.hasAlpha = true;\r\n        } else {\r\n            material.emissiveTexture = texture;\r\n            material.opacityTexture = texture;\r\n        }\r\n        mesh.material = material;\r\n    }\r\n\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture in projected mode (ie. attached to a mesh) BUT do not create a new material for the mesh. You will be responsible for connecting the texture\r\n     * @param mesh defines the mesh which will receive the texture\r\n     * @param width defines the texture width (1024 by default)\r\n     * @param height defines the texture height (1024 by default)\r\n     * @param supportPointerMove defines a boolean indicating if the texture must capture move events (true by default)\r\n     * @param invertY defines if the texture needs to be inverted on the y axis during loading (true by default)\r\n     * @returns a new AdvancedDynamicTexture\r\n     */\r\n    public static CreateForMeshTexture(mesh: AbstractMesh, width = 1024, height = 1024, supportPointerMove = true, invertY?: boolean): AdvancedDynamicTexture {\r\n        const result = new AdvancedDynamicTexture(mesh.name + \" AdvancedDynamicTexture\", width, height, mesh.getScene(), true, Texture.TRILINEAR_SAMPLINGMODE, invertY);\r\n        result.attachToMesh(mesh, supportPointerMove);\r\n        return result;\r\n    }\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture in fullscreen mode.\r\n     * In this mode the texture will rely on a layer for its rendering.\r\n     * This allows it to be treated like any other layer.\r\n     * As such, if you have a multi camera setup, you can set the layerMask on the GUI as well.\r\n     * LayerMask is set through advancedTexture.layer.layerMask\r\n     * @param name defines name for the texture\r\n     * @param foreground defines a boolean indicating if the texture must be rendered in foreground (default is true)\r\n     * @param scene defines the hosting scene\r\n     * @param sampling defines the texture sampling mode (Texture.BILINEAR_SAMPLINGMODE by default)\r\n     * @param adaptiveScaling defines whether to automatically scale root to match hardwarescaling (false by default)\r\n     * @returns a new AdvancedDynamicTexture\r\n     */\r\n    public static CreateFullscreenUI(\r\n        name: string,\r\n        foreground: boolean = true,\r\n        scene: Nullable<Scene> = null,\r\n        sampling = Texture.BILINEAR_SAMPLINGMODE,\r\n        adaptiveScaling: boolean = false\r\n    ): AdvancedDynamicTexture {\r\n        const result = new AdvancedDynamicTexture(name, 0, 0, scene, false, sampling);\r\n        // Display\r\n        const resultScene = result.getScene();\r\n        const layer = new Layer(name + \"_layer\", null, resultScene, !foreground);\r\n        layer.texture = result;\r\n        result._layerToDispose = layer;\r\n        result._isFullscreen = true;\r\n\r\n        if (adaptiveScaling && resultScene) {\r\n            const newScale = 1 / resultScene.getEngine().getHardwareScalingLevel();\r\n            result._rootContainer.scaleX = newScale;\r\n            result._rootContainer.scaleY = newScale;\r\n        }\r\n\r\n        // Attach\r\n        result.attach();\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Scales the texture\r\n     * @param ratio the scale factor to apply to both width and height\r\n     */\r\n    public scale(ratio: number): void {\r\n        super.scale(ratio);\r\n        this.markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Resizes the texture\r\n     * @param width the new width\r\n     * @param height the new height\r\n     */\r\n    public scaleTo(width: number, height: number): void {\r\n        super.scaleTo(width, height);\r\n        this.markAsDirty();\r\n    }\r\n\r\n    private _checkGuiIsReady() {\r\n        if (this.guiIsReady()) {\r\n            this.onGuiReadyObservable.notifyObservers(this);\r\n\r\n            this.onGuiReadyObservable.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns true if all the GUI components are ready to render\r\n     */\r\n    public guiIsReady(): boolean {\r\n        return this._rootContainer.isReady();\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { PerfCounter } from \"core/Misc/perfCounter\";\r\nimport type { IDisposable } from \"core/scene\";\r\n\r\nimport type { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\n\r\n/**\r\n * This class can be used to get instrumentation data from a AdvancedDynamicTexture object\r\n */\r\nexport class AdvancedDynamicTextureInstrumentation implements IDisposable {\r\n    private _captureRenderTime = false;\r\n    private _renderTime = new PerfCounter();\r\n\r\n    private _captureLayoutTime = false;\r\n    private _layoutTime = new PerfCounter();\r\n\r\n    // Observers\r\n    private _onBeginRenderObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onEndRenderObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onBeginLayoutObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onEndLayoutObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n\r\n    // Properties\r\n\r\n    /**\r\n     * Gets the perf counter used to capture render time\r\n     */\r\n    public get renderTimeCounter(): PerfCounter {\r\n        return this._renderTime;\r\n    }\r\n\r\n    /**\r\n     * Gets the perf counter used to capture layout time\r\n     */\r\n    public get layoutTimeCounter(): PerfCounter {\r\n        return this._layoutTime;\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the render time capture\r\n     */\r\n    public get captureRenderTime(): boolean {\r\n        return this._captureRenderTime;\r\n    }\r\n\r\n    public set captureRenderTime(value: boolean) {\r\n        if (value === this._captureRenderTime) {\r\n            return;\r\n        }\r\n\r\n        this._captureRenderTime = value;\r\n\r\n        if (value) {\r\n            this._onBeginRenderObserver = this.texture.onBeginRenderObservable.add(() => {\r\n                this._renderTime.beginMonitoring();\r\n            });\r\n\r\n            this._onEndRenderObserver = this.texture.onEndRenderObservable.add(() => {\r\n                this._renderTime.endMonitoring(true);\r\n            });\r\n        } else {\r\n            this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);\r\n            this._onBeginRenderObserver = null;\r\n            this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);\r\n            this._onEndRenderObserver = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the layout time capture\r\n     */\r\n    public get captureLayoutTime(): boolean {\r\n        return this._captureLayoutTime;\r\n    }\r\n\r\n    public set captureLayoutTime(value: boolean) {\r\n        if (value === this._captureLayoutTime) {\r\n            return;\r\n        }\r\n\r\n        this._captureLayoutTime = value;\r\n\r\n        if (value) {\r\n            this._onBeginLayoutObserver = this.texture.onBeginLayoutObservable.add(() => {\r\n                this._layoutTime.beginMonitoring();\r\n            });\r\n\r\n            this._onEndLayoutObserver = this.texture.onEndLayoutObservable.add(() => {\r\n                this._layoutTime.endMonitoring(true);\r\n            });\r\n        } else {\r\n            this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);\r\n            this._onBeginLayoutObserver = null;\r\n            this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);\r\n            this._onEndLayoutObserver = null;\r\n        }\r\n    }\r\n    /**\r\n     * Instantiates a new advanced dynamic texture instrumentation.\r\n     * This class can be used to get instrumentation data from an AdvancedDynamicTexture object\r\n     * @param texture Defines the AdvancedDynamicTexture to instrument\r\n     */\r\n    public constructor(\r\n        /**\r\n         * Define the instrumented AdvancedDynamicTexture.\r\n         */\r\n        public texture: AdvancedDynamicTexture\r\n    ) {}\r\n\r\n    /**\r\n     * Dispose and release associated resources.\r\n     */\r\n    public dispose() {\r\n        this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);\r\n        this._onBeginRenderObserver = null;\r\n        this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);\r\n        this._onEndRenderObserver = null;\r\n        this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);\r\n        this._onBeginLayoutObserver = null;\r\n        this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);\r\n        this._onEndLayoutObserver = null;\r\n\r\n        (<any>this.texture) = null;\r\n    }\r\n}\r\n", "import { GetClass } from \"core/Misc/typeStore\";\r\nimport type { Nullable } from \"core/types\";\r\n\r\nconst XmlLoaderError = \"XmlLoader Exception : XML file is malformed or corrupted.\";\r\n\r\n/**\r\n * Class used to load GUI via XML.\r\n */\r\nexport class XmlLoader {\r\n    private _nodes: any = {};\r\n\r\n    private _nodeTypes: any = {\r\n        element: 1,\r\n        attribute: 2,\r\n        text: 3,\r\n    };\r\n\r\n    private _isLoaded: boolean = false;\r\n\r\n    private _objectAttributes: any = {\r\n        textHorizontalAlignment: 1,\r\n        textVerticalAlignment: 2,\r\n        horizontalAlignment: 3,\r\n        verticalAlignment: 4,\r\n        stretch: 5,\r\n    };\r\n\r\n    private _rootNode: any;\r\n\r\n    private _parentClass: any;\r\n\r\n    /**\r\n     * Create a new xml loader\r\n     * @param parentClass Sets the class context. Used when the loader is instanced inside a class and not in a global context\r\n     */\r\n    constructor(parentClass: any = null) {\r\n        if (parentClass) {\r\n            this._parentClass = parentClass;\r\n        }\r\n    }\r\n\r\n    private _getChainElement(attributeValue: any): any {\r\n        let element: any = window;\r\n\r\n        if (this._parentClass) {\r\n            element = this._parentClass;\r\n        }\r\n        let value = attributeValue;\r\n        value = value.split(\".\");\r\n\r\n        for (let i = 0; i < value.length; i++) {\r\n            element = element[value[i]];\r\n        }\r\n        return element;\r\n    }\r\n\r\n    private _getClassAttribute(attributeName: string): any {\r\n        const attribute = attributeName.split(\".\");\r\n        const className = GetClass(\"BABYLON.GUI.\" + attribute[0]);\r\n        return className[attribute[1]];\r\n    }\r\n\r\n    private _createGuiElement(node: any, parent: any, linkParent: boolean = true): void {\r\n        try {\r\n            const className = GetClass(\"BABYLON.GUI.\" + node.nodeName);\r\n            const guiNode = new className();\r\n\r\n            if (parent && linkParent) {\r\n                parent.addControl(guiNode);\r\n            }\r\n\r\n            for (let i = 0; i < node.attributes.length; i++) {\r\n                if (node.attributes[i].name.toLowerCase().includes(\"datasource\")) {\r\n                    continue;\r\n                }\r\n\r\n                if (node.attributes[i].name.toLowerCase().includes(\"observable\")) {\r\n                    const element = this._getChainElement(node.attributes[i].value);\r\n                    guiNode[node.attributes[i].name].add(element);\r\n\r\n                    continue;\r\n                } else if (node.attributes[i].name == \"linkWithMesh\") {\r\n                    if (this._parentClass) {\r\n                        guiNode.linkWithMesh(this._parentClass[node.attributes[i].value]);\r\n                    } else {\r\n                        guiNode.linkWithMesh(window[node.attributes[i].value]);\r\n                    }\r\n                } else if (node.attributes[i].value.startsWith(\"{{\") && node.attributes[i].value.endsWith(\"}}\")) {\r\n                    const element = this._getChainElement(node.attributes[i].value.substring(2, node.attributes[i].value.length - 2));\r\n                    guiNode[node.attributes[i].name] = element;\r\n                } else if (!this._objectAttributes[node.attributes[i].name]) {\r\n                    if (node.attributes[i].value == \"true\" || node.attributes[i].value == \"false\") {\r\n                        guiNode[node.attributes[i].name] = node.attributes[i].value == \"true\";\r\n                    } else {\r\n                        guiNode[node.attributes[i].name] = !isNaN(Number(node.attributes[i].value)) ? Number(node.attributes[i].value) : node.attributes[i].value;\r\n                    }\r\n                } else {\r\n                    guiNode[node.attributes[i].name] = this._getClassAttribute(node.attributes[i].value);\r\n                }\r\n            }\r\n\r\n            if (!node.attributes.getNamedItem(\"id\")) {\r\n                this._nodes[node.nodeName + Object.keys(this._nodes).length + \"_gen\"] = guiNode;\r\n                return guiNode;\r\n            }\r\n\r\n            let id = node.attributes.getNamedItem(\"id\").value;\r\n            if (id.startsWith(\"{{\") && id.endsWith(\"}}\")) {\r\n                id = this._getChainElement(id.substring(2, id.length - 2));\r\n            }\r\n\r\n            if (!this._nodes[id]) {\r\n                this._nodes[id] = guiNode;\r\n            } else {\r\n                // eslint-disable-next-line no-throw-literal\r\n                throw \"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute\";\r\n            }\r\n            return guiNode;\r\n        } catch (exception) {\r\n            // eslint-disable-next-line no-throw-literal\r\n            throw \"XmlLoader Exception : Error parsing Control \" + node.nodeName + \",\" + exception + \".\";\r\n        }\r\n    }\r\n\r\n    private _parseGrid(node: any, guiNode: any, parent: any): void {\r\n        let width;\r\n        let height;\r\n        let columns;\r\n        const rows = node.children;\r\n        let cells;\r\n        let isPixel = false;\r\n        let cellNode;\r\n        let rowNumber = -1;\r\n        let columnNumber = -1;\r\n        let totalColumnsNumber = 0;\r\n\r\n        for (let i = 0; i < rows.length; i++) {\r\n            if (rows[i].nodeType != this._nodeTypes.element) {\r\n                continue;\r\n            }\r\n            if (rows[i].nodeName != \"Row\") {\r\n                // eslint-disable-next-line no-throw-literal\r\n                throw \"XmlLoader Exception : Expecting Row node, received \" + rows[i].nodeName;\r\n            }\r\n            rowNumber += 1;\r\n            columns = rows[i].children;\r\n\r\n            if (!rows[i].attributes.getNamedItem(\"height\")) {\r\n                // eslint-disable-next-line no-throw-literal\r\n                throw \"XmlLoader Exception : Height must be defined for grid rows\";\r\n            }\r\n            height = Number(rows[i].attributes.getNamedItem(\"height\").nodeValue);\r\n            isPixel = rows[i].attributes.getNamedItem(\"isPixel\") ? JSON.parse(rows[i].attributes.getNamedItem(\"isPixel\").nodeValue) : false;\r\n            guiNode.addRowDefinition(height, isPixel);\r\n\r\n            for (let j = 0; j < columns.length; j++) {\r\n                if (columns[j].nodeType != this._nodeTypes.element) {\r\n                    continue;\r\n                }\r\n                if (columns[j].nodeName != \"Column\") {\r\n                    // eslint-disable-next-line no-throw-literal\r\n                    throw \"XmlLoader Exception : Expecting Column node, received \" + columns[j].nodeName;\r\n                }\r\n                columnNumber += 1;\r\n                if (rowNumber > 0 && columnNumber > totalColumnsNumber) {\r\n                    // eslint-disable-next-line no-throw-literal\r\n                    throw \"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.\";\r\n                }\r\n\r\n                if (rowNumber == 0) {\r\n                    if (!columns[j].attributes.getNamedItem(\"width\")) {\r\n                        // eslint-disable-next-line no-throw-literal\r\n                        throw \"XmlLoader Exception : Width must be defined for all the grid columns in the first row\";\r\n                    }\r\n                    width = Number(columns[j].attributes.getNamedItem(\"width\").nodeValue);\r\n                    isPixel = columns[j].attributes.getNamedItem(\"isPixel\") ? JSON.parse(columns[j].attributes.getNamedItem(\"isPixel\").nodeValue) : false;\r\n                    guiNode.addColumnDefinition(width, isPixel);\r\n                }\r\n\r\n                cells = columns[j].children;\r\n\r\n                for (let k = 0; k < cells.length; k++) {\r\n                    if (cells[k].nodeType != this._nodeTypes.element) {\r\n                        continue;\r\n                    }\r\n                    cellNode = this._createGuiElement(cells[k], guiNode, false);\r\n                    guiNode.addControl(cellNode, rowNumber, columnNumber);\r\n                    if (cells[k].firstChild) {\r\n                        this._parseXml(cells[k].firstChild, cellNode);\r\n                    }\r\n                }\r\n            }\r\n            if (rowNumber == 0) {\r\n                totalColumnsNumber = columnNumber;\r\n            }\r\n            columnNumber = -1;\r\n        }\r\n\r\n        if (node.nextSibling) {\r\n            this._parseXml(node.nextSibling, parent);\r\n        }\r\n    }\r\n\r\n    private _parseElement(node: any, guiNode: any, parent: any): void {\r\n        if (node.firstChild) {\r\n            this._parseXml(node.firstChild, guiNode);\r\n        }\r\n\r\n        if (node.nextSibling) {\r\n            this._parseXml(node.nextSibling, parent);\r\n        }\r\n    }\r\n\r\n    private _prepareSourceElement(node: any, guiNode: any, variable: any, source: any, iterator: any): void {\r\n        if (this._parentClass) {\r\n            this._parentClass[variable] = source[iterator];\r\n        } else {\r\n            window[variable] = source[iterator];\r\n        }\r\n\r\n        if (node.firstChild) {\r\n            this._parseXml(node.firstChild, guiNode, true);\r\n        }\r\n    }\r\n\r\n    private _parseElementsFromSource(node: any, guiNode: any, parent: any): void {\r\n        const dataSource = node.attributes.getNamedItem(\"dataSource\").value;\r\n\r\n        if (!dataSource.includes(\" in \")) {\r\n            // eslint-disable-next-line no-throw-literal\r\n            throw \"XmlLoader Exception : Malformed XML, Data Source must include an in\";\r\n        } else {\r\n            let isArray = true;\r\n            const splittedSource = dataSource.split(\" in \");\r\n            if (splittedSource.length < 2) {\r\n                // eslint-disable-next-line no-throw-literal\r\n                throw \"XmlLoader Exception : Malformed XML, Data Source must have an iterator and a source\";\r\n            }\r\n            let source = splittedSource[1];\r\n            if (source.startsWith(\"{\") && source.endsWith(\"}\")) {\r\n                isArray = false;\r\n            }\r\n\r\n            if (!isArray || (source.startsWith(\"[\") && source.endsWith(\"]\"))) {\r\n                source = source.substring(1, source.length - 1);\r\n            }\r\n\r\n            if (this._parentClass) {\r\n                source = this._parentClass[source];\r\n            } else {\r\n                source = window[source];\r\n            }\r\n\r\n            if (isArray) {\r\n                for (let i = 0; i < source.length; i++) {\r\n                    this._prepareSourceElement(node, guiNode, splittedSource[0], source, i);\r\n                }\r\n            } else {\r\n                for (const i in source) {\r\n                    this._prepareSourceElement(node, guiNode, splittedSource[0], source, i);\r\n                }\r\n            }\r\n\r\n            if (node.nextSibling) {\r\n                this._parseXml(node.nextSibling, parent);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _parseXml(node: any, parent: any, generated: boolean = false): void {\r\n        if (node.nodeType != this._nodeTypes.element) {\r\n            if (node.nextSibling) {\r\n                this._parseXml(node.nextSibling, parent, generated);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (generated) {\r\n            node.setAttribute(\"id\", parent.id + (parent._children.length + 1));\r\n        }\r\n\r\n        const guiNode = this._createGuiElement(node, parent);\r\n\r\n        if (!this._rootNode) {\r\n            this._rootNode = guiNode;\r\n        }\r\n\r\n        if (node.nodeName == \"Grid\") {\r\n            this._parseGrid(node, guiNode, parent);\r\n        } else if (!node.attributes.getNamedItem(\"dataSource\")) {\r\n            this._parseElement(node, guiNode, parent);\r\n        } else {\r\n            this._parseElementsFromSource(node, guiNode, parent);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets if the loading has finished.\r\n     * @returns whether the loading has finished or not\r\n     */\r\n    public isLoaded(): boolean {\r\n        return this._isLoaded;\r\n    }\r\n\r\n    /**\r\n     * Gets a loaded node / control by id.\r\n     * @param id the Controls id set in the xml\r\n     * @returns element of type Control\r\n     */\r\n    public getNodeById(id: string): any {\r\n        return this._nodes[id];\r\n    }\r\n\r\n    /**\r\n     * Gets all loaded nodes / controls\r\n     * @returns Array of controls\r\n     */\r\n    public getNodes(): any {\r\n        return this._nodes;\r\n    }\r\n    /**\r\n     * Disposes the loaded layout\r\n     */\r\n    public dispose(): void {\r\n        if (this._rootNode) {\r\n            this._rootNode.dispose();\r\n            this._rootNode = null;\r\n            this._nodes = {};\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initiates the xml layout loading\r\n     * @param xmlFile defines the xml layout to load\r\n     * @param rootNode defines the node / control to use as a parent for the loaded layout controls.\r\n     * @param onSuccess defines the callback called on layout load successfully.\r\n     * @param onError defines the callback called on layout load failure.\r\n     */\r\n    public loadLayout(xmlFile: any, rootNode: any, onSuccess: Nullable<() => void> = null, onError: Nullable<(error: string) => void> = null): void {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onload = () => {\r\n            if (xhttp.readyState === 4 && xhttp.status === 200) {\r\n                if (!xhttp.responseXML) {\r\n                    if (onError) {\r\n                        onError(XmlLoaderError);\r\n                        return;\r\n                    } else {\r\n                        throw XmlLoaderError;\r\n                    }\r\n                }\r\n\r\n                const xmlDoc = xhttp.responseXML.documentElement;\r\n                this._parseXml(xmlDoc.firstChild, rootNode);\r\n                this._isLoaded = true;\r\n\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            }\r\n        };\r\n\r\n        xhttp.onerror = function () {\r\n            if (onError) {\r\n                onError(\"an error occurred during loading the layout\");\r\n            }\r\n        };\r\n\r\n        xhttp.open(\"GET\", xmlFile, true);\r\n        xhttp.send();\r\n    }\r\n    /**\r\n     * Initiates the xml layout loading asynchronously\r\n     * @param xmlFile defines the xml layout to load\r\n     * @param rootNode defines the node / control to use as a parent for the loaded layout controls.\r\n     * @returns Promise\r\n     */\r\n    public async loadLayoutAsync(xmlFile: any, rootNode: any): Promise<any> {\r\n        return new Promise((resolve: any, reject: any) => {\r\n            this.loadLayout(xmlFile, rootNode, resolve, reject);\r\n        });\r\n    }\r\n}\r\n", "import { Vector3 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * Class used to transport Vector3 information for pointer events\r\n */\r\nexport class Vector3WithInfo extends Vector3 {\r\n    /**\r\n     * Creates a new Vector3WithInfo\r\n     * @param source defines the vector3 data to transport\r\n     * @param buttonIndex defines the current mouse button index\r\n     */\r\n    public constructor(\r\n        source: Vector3,\r\n        /** defines the current mouse button index */\r\n        public buttonIndex: number = 0\r\n    ) {\r\n        super(source.x, source.y, source.z);\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { IBehaviorAware, Behavior } from \"core/Behaviors/behavior\";\r\nimport type { IDisposable, Scene } from \"core/scene\";\r\n\r\nimport type { GUI3DManager } from \"../gui3DManager\";\r\nimport { Vector3WithInfo } from \"../vector3WithInfo\";\r\nimport type { Container3D } from \"./container3D\";\r\n\r\nimport type { TouchButton3D } from \"./touchButton3D\";\r\n\r\n/**\r\n * Class used as base class for controls\r\n */\r\nexport class Control3D implements IDisposable, IBehaviorAware<Control3D> {\r\n    private _node: Nullable<TransformNode>;\r\n    private _downCount = 0;\r\n    private _enterCount = -1;\r\n    private _downPointerIds: { [id: number]: number } = {}; // Store number of pointer downs per ID, from near and far interactions\r\n\r\n    protected _isVisible = true;\r\n\r\n    /** @internal */\r\n    public _host: GUI3DManager;\r\n    /** @internal */\r\n    public _isScaledByManager = false;\r\n\r\n    /** Gets or sets the control position in world space */\r\n    public get position(): Vector3 {\r\n        if (!this._node) {\r\n            return Vector3.Zero();\r\n        }\r\n\r\n        return this._node.position;\r\n    }\r\n\r\n    public set position(value: Vector3) {\r\n        if (!this._node) {\r\n            return;\r\n        }\r\n\r\n        this._node.position = value;\r\n    }\r\n\r\n    /** Gets or sets the control scaling in world space */\r\n    public get scaling(): Vector3 {\r\n        if (!this._node) {\r\n            return new Vector3(1, 1, 1);\r\n        }\r\n\r\n        return this._node.scaling;\r\n    }\r\n\r\n    public set scaling(value: Vector3) {\r\n        if (!this._node) {\r\n            return;\r\n        }\r\n\r\n        this._isScaledByManager = false;\r\n        this._node.scaling = value;\r\n    }\r\n\r\n    /** Callback used to start pointer enter animation */\r\n    public pointerEnterAnimation: () => void;\r\n    /** Callback used to start pointer out animation */\r\n    public pointerOutAnimation: () => void;\r\n    /** Callback used to start pointer down animation */\r\n    public pointerDownAnimation: () => void;\r\n    /** Callback used to start pointer up animation */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    /**\r\n     * An event triggered when the pointer moves over the control\r\n     */\r\n    public onPointerMoveObservable = new Observable<Vector3>();\r\n\r\n    /**\r\n     * An event triggered when the pointer moves out of the control\r\n     */\r\n    public onPointerOutObservable = new Observable<Control3D>();\r\n\r\n    /**\r\n     * An event triggered when the pointer taps the control\r\n     */\r\n    public onPointerDownObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer is up\r\n     */\r\n    public onPointerUpObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when a control is clicked on (with a mouse)\r\n     */\r\n    public onPointerClickObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer enters the control\r\n     */\r\n    public onPointerEnterObservable = new Observable<Control3D>();\r\n\r\n    /**\r\n     * Gets or sets the parent container\r\n     */\r\n    public parent: Nullable<Container3D>;\r\n\r\n    // Behaviors\r\n    private _behaviors = new Array<Behavior<Control3D>>();\r\n\r\n    /**\r\n     * Gets the list of attached behaviors\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/behaviors\r\n     */\r\n    public get behaviors(): Behavior<Control3D>[] {\r\n        return this._behaviors;\r\n    }\r\n\r\n    /**\r\n     * Attach a behavior to the control\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/behaviors\r\n     * @param behavior defines the behavior to attach\r\n     * @returns the current control\r\n     */\r\n    public addBehavior(behavior: Behavior<Control3D>): Control3D {\r\n        const index = this._behaviors.indexOf(behavior);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n\r\n        behavior.init();\r\n        const scene = this._host.scene;\r\n        if (scene.isLoading) {\r\n            // We defer the attach when the scene will be loaded\r\n            scene.onDataLoadedObservable.addOnce(() => {\r\n                behavior.attach(this);\r\n            });\r\n        } else {\r\n            behavior.attach(this);\r\n        }\r\n        this._behaviors.push(behavior);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove an attached behavior\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/behaviors\r\n     * @param behavior defines the behavior to attach\r\n     * @returns the current control\r\n     */\r\n    public removeBehavior(behavior: Behavior<Control3D>): Control3D {\r\n        const index = this._behaviors.indexOf(behavior);\r\n\r\n        if (index === -1) {\r\n            return this;\r\n        }\r\n\r\n        this._behaviors[index].detach();\r\n        this._behaviors.splice(index, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets an attached behavior by name\r\n     * @param name defines the name of the behavior to look for\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/behaviors\r\n     * @returns null if behavior was not found else the requested behavior\r\n     */\r\n    public getBehaviorByName(name: string): Nullable<Behavior<Control3D>> {\r\n        for (const behavior of this._behaviors) {\r\n            if (behavior.name === name) {\r\n                return behavior;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control is visible */\r\n    public get isVisible(): boolean {\r\n        return this._isVisible;\r\n    }\r\n\r\n    public set isVisible(value: boolean) {\r\n        if (this._isVisible === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVisible = value;\r\n\r\n        const mesh = this.mesh;\r\n        if (mesh) {\r\n            mesh.setEnabled(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new control\r\n     * @param name defines the control name\r\n     */\r\n    constructor(\r\n        /** Defines the control name */\r\n        public name?: string\r\n    ) {}\r\n\r\n    /**\r\n     * Gets a string representing the class name\r\n     */\r\n    public get typeName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    /**\r\n     * Get the current class name of the control.\r\n     * @returns current class name\r\n     */\r\n    public getClassName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Control3D\";\r\n    }\r\n\r\n    /**\r\n     * Gets the transform node used by this control\r\n     */\r\n    public get node(): Nullable<TransformNode> {\r\n        return this._node;\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh used to render this control\r\n     */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        if (this._node instanceof AbstractMesh) {\r\n            return this._node as AbstractMesh;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Link the control as child of the given node\r\n     * @param node defines the node to link to. Use null to unlink the control\r\n     * @returns the current control\r\n     */\r\n    public linkToTransformNode(node: Nullable<TransformNode>): Control3D {\r\n        if (this._node) {\r\n            this._node.parent = node;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _prepareNode(scene: Scene): void {\r\n        if (!this._node) {\r\n            this._node = this._createNode(scene);\r\n\r\n            if (!this.node) {\r\n                return;\r\n            }\r\n            this._injectGUI3DReservedDataStore(this.node).control = this; // Store the control on the reservedDataStore field in order to get it when picking\r\n\r\n            const mesh = this.mesh;\r\n            if (mesh) {\r\n                mesh.isPickable = true;\r\n\r\n                this._affectMaterial(mesh);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _injectGUI3DReservedDataStore(node: TransformNode): any {\r\n        node.reservedDataStore = node.reservedDataStore ?? {};\r\n        node.reservedDataStore.GUI3D = node.reservedDataStore.GUI3D ?? {};\r\n        return node.reservedDataStore.GUI3D;\r\n    }\r\n\r\n    /**\r\n     * Node creation.\r\n     * Can be overriden by children\r\n     * @param scene defines the scene where the node must be attached\r\n     * @returns the attached node or null if none. Must return a Mesh or AbstractMesh if there is an attached visible object\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        // Do nothing by default\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Affect a material to the given mesh\r\n     * @param mesh defines the mesh which will represent the control\r\n     */\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        mesh.material = null;\r\n    }\r\n\r\n    private _isTouchButton3D(control: Control3D): control is TouchButton3D {\r\n        return (control as TouchButton3D)._generatePointerEventType !== undefined;\r\n    }\r\n\r\n    // Pointers\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerMove(target: Control3D, coordinates: Vector3): void {\r\n        this.onPointerMoveObservable.notifyObservers(coordinates, -1, target, this);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerEnter(target: Control3D): boolean {\r\n        if (this._enterCount === -1) {\r\n            // -1 is for touch input, we are now sure we are with a mouse or pencil\r\n            this._enterCount = 0;\r\n        }\r\n\r\n        this._enterCount++;\r\n\r\n        if (this._enterCount > 1) {\r\n            return false;\r\n        }\r\n\r\n        this.onPointerEnterObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerOut(target: Control3D): void {\r\n        this._enterCount--;\r\n\r\n        if (this._enterCount > 0) {\r\n            return;\r\n        }\r\n\r\n        this._enterCount = 0;\r\n\r\n        this.onPointerOutObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerDown(target: Control3D, coordinates: Vector3, pointerId: number, buttonIndex: number): boolean {\r\n        this._downCount++;\r\n        this._downPointerIds[pointerId] = this._downPointerIds[pointerId] + 1 || 1;\r\n\r\n        if (this._downCount !== 1) {\r\n            return false;\r\n        }\r\n\r\n        this.onPointerDownObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n        if (this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _onPointerUp(target: Control3D, coordinates: Vector3, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._downCount--;\r\n        this._downPointerIds[pointerId]--;\r\n\r\n        if (this._downPointerIds[pointerId] <= 0) {\r\n            delete this._downPointerIds[pointerId];\r\n        }\r\n\r\n        if (this._downCount < 0) {\r\n            // Handle if forcePointerUp was called prior to this\r\n            this._downCount = 0;\r\n            return;\r\n        }\r\n\r\n        if (this._downCount == 0) {\r\n            if (notifyClick && (this._enterCount > 0 || this._enterCount === -1)) {\r\n                this.onPointerClickObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n            }\r\n            this.onPointerUpObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n            if (this.pointerUpAnimation) {\r\n                this.pointerUpAnimation();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public forcePointerUp(pointerId: Nullable<number> = null) {\r\n        if (pointerId !== null) {\r\n            this._onPointerUp(this, Vector3.Zero(), pointerId, 0, true);\r\n        } else {\r\n            for (const key in this._downPointerIds) {\r\n                this._onPointerUp(this, Vector3.Zero(), +key as number, 0, true);\r\n            }\r\n            if (this._downCount > 0) {\r\n                this._downCount = 1;\r\n                this._onPointerUp(this, Vector3.Zero(), 0, 0, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _processObservables(type: number, pickedPoint: Vector3, originMeshPosition: Nullable<Vector3>, pointerId: number, buttonIndex: number): boolean {\r\n        if (this._isTouchButton3D(this) && originMeshPosition) {\r\n            type = this._generatePointerEventType(type, originMeshPosition, this._downCount);\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERMOVE) {\r\n            this._onPointerMove(this, pickedPoint);\r\n\r\n            const previousControlOver = this._host._lastControlOver[pointerId];\r\n            if (previousControlOver && previousControlOver !== this) {\r\n                previousControlOver._onPointerOut(this);\r\n            }\r\n\r\n            if (previousControlOver !== this) {\r\n                this._onPointerEnter(this);\r\n            }\r\n\r\n            this._host._lastControlOver[pointerId] = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERDOWN) {\r\n            this._onPointerDown(this, pickedPoint, pointerId, buttonIndex);\r\n            this._host._lastControlDown[pointerId] = this;\r\n            this._host._lastPickedControl = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERUP || type === PointerEventTypes.POINTERDOUBLETAP) {\r\n            if (this._host._lastControlDown[pointerId]) {\r\n                this._host._lastControlDown[pointerId]._onPointerUp(this, pickedPoint, pointerId, buttonIndex, true);\r\n            }\r\n            delete this._host._lastControlDown[pointerId];\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @internal */\r\n    public _disposeNode(): void {\r\n        if (this._node) {\r\n            this._node.dispose();\r\n            this._node = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        this.onPointerDownObservable.clear();\r\n        this.onPointerEnterObservable.clear();\r\n        this.onPointerMoveObservable.clear();\r\n        this.onPointerOutObservable.clear();\r\n        this.onPointerUpObservable.clear();\r\n        this.onPointerClickObservable.clear();\r\n\r\n        this._disposeNode();\r\n\r\n        // Behaviors\r\n        for (const behavior of this._behaviors) {\r\n            behavior.detach();\r\n        }\r\n    }\r\n}\r\n", "import type { Control } from \"../../2D/controls/control\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\n\r\n/**\r\n * The base class for controls that display content\r\n */\r\nexport class ContentDisplay3D extends Control3D {\r\n    private _content: Control;\r\n    private _facadeTexture: Nullable<AdvancedDynamicTexture>;\r\n    protected _contentResolution = 512;\r\n    protected _contentScaleRatio = 2;\r\n    protected _contentScaleRatioY?: number;\r\n\r\n    /**\r\n     * Gets or sets the GUI 2D content used to display the button's facade\r\n     */\r\n    public get content(): Control {\r\n        return this._content;\r\n    }\r\n\r\n    public set content(value: Control) {\r\n        this._content = value;\r\n\r\n        if (!value || !this._host || !this._host.utilityLayer) {\r\n            return;\r\n        }\r\n\r\n        if (!this._facadeTexture) {\r\n            this._facadeTexture = new AdvancedDynamicTexture(\r\n                \"Facade\",\r\n                this._contentResolution,\r\n                this._contentResolution,\r\n                this._host.utilityLayer.utilityLayerScene,\r\n                true,\r\n                Texture.TRILINEAR_SAMPLINGMODE\r\n            );\r\n            this._setFacadeTextureScaling();\r\n            this._facadeTexture.premulAlpha = true;\r\n        } else {\r\n            this._facadeTexture.rootContainer.clearControls();\r\n        }\r\n\r\n        this._facadeTexture.addControl(value);\r\n\r\n        this._applyFacade(this._facadeTexture);\r\n    }\r\n\r\n    protected _setFacadeTextureScaling() {\r\n        if (this._facadeTexture) {\r\n            this._facadeTexture.rootContainer.scaleX = this._contentScaleRatio;\r\n            this._facadeTexture.rootContainer.scaleY = this._contentScaleRatioY ?? this._contentScaleRatio;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the texture resolution used to render content (512 by default)\r\n     */\r\n    public get contentResolution(): number {\r\n        return this._contentResolution;\r\n    }\r\n\r\n    public set contentResolution(value: number) {\r\n        if (this._contentResolution === value) {\r\n            return;\r\n        }\r\n\r\n        this._contentResolution = value;\r\n        this._resetContent();\r\n    }\r\n\r\n    protected _disposeFacadeTexture() {\r\n        if (this._facadeTexture) {\r\n            this._facadeTexture.dispose();\r\n            this._facadeTexture = null;\r\n        }\r\n    }\r\n\r\n    protected _resetContent() {\r\n        this._disposeFacadeTexture();\r\n        this.content = this._content;\r\n    }\r\n\r\n    /**\r\n     * Apply the facade texture (created from the content property).\r\n     * This function can be overloaded by child classes\r\n     * @param facadeTexture defines the AdvancedDynamicTexture to use\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {}\r\n}\r\n", "import { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { ContentDisplay3D } from \"./contentDisplay3D\";\r\n\r\n/**\r\n * Class used as a root to all buttons\r\n */\r\nexport class AbstractButton3D extends ContentDisplay3D {\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"AbstractButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        return new TransformNode(\"button\" + this.name, scene);\r\n    }\r\n}\r\n", "import { Vector4 } from \"core/Maths/math.vector\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport type { Material } from \"core/Materials/material\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { AbstractButton3D } from \"./abstractButton3D\";\r\nimport type { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\n\r\n/**\r\n * Options used to create a button in 3D\r\n */\r\nexport interface IButton3DCreationOptions {\r\n    /**\r\n     * Width of the button. Default: 1\r\n     */\r\n    width?: number;\r\n\r\n    /**\r\n     * Height of the button. Default: 1\r\n     */\r\n    height?: number;\r\n\r\n    /**\r\n     * Depth of the button. Default: 0.08\r\n     */\r\n    depth?: number;\r\n}\r\n\r\n/**\r\n * Class used to create a button in 3D\r\n */\r\nexport class Button3D extends AbstractButton3D {\r\n    /** @internal */\r\n    protected _currentMaterial: Material;\r\n\r\n    protected _options: IButton3DCreationOptions;\r\n    protected _height: number;\r\n    protected _depth: number;\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     * @param options defines the options used to create the button\r\n     */\r\n    constructor(name?: string, options?: IButton3DCreationOptions) {\r\n        super(name);\r\n\r\n        this._options = {\r\n            width: 1,\r\n            height: 1,\r\n            depth: 0.08,\r\n            ...options,\r\n        };\r\n\r\n        // Default animations\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            (<StandardMaterial>this._currentMaterial).emissiveColor = Color3.Red();\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            (<StandardMaterial>this._currentMaterial).emissiveColor = Color3.Black();\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Apply the facade texture (created from the content property).\r\n     * @param facadeTexture defines the AdvancedDynamicTexture to use\r\n     */\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        (<any>this._currentMaterial).emissiveTexture = facadeTexture;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Button3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        const faceUV = new Array(6);\r\n\r\n        for (let i = 0; i < 6; i++) {\r\n            faceUV[i] = new Vector4(0, 0, 0, 0);\r\n        }\r\n        if (scene.useRightHandedSystem) {\r\n            // Flip the u on the texture\r\n            faceUV[0].copyFromFloats(1, 0, 0, 1);\r\n        } else {\r\n            faceUV[1].copyFromFloats(0, 0, 1, 1);\r\n        }\r\n\r\n        const mesh = CreateBox(\r\n            this.name + \"_rootMesh\",\r\n            {\r\n                width: this._options.width,\r\n                height: this._options.height,\r\n                depth: this._options.depth,\r\n                faceUV: faceUV,\r\n                wrap: true,\r\n            },\r\n            scene\r\n        );\r\n\r\n        this._contentScaleRatioY = (this._contentScaleRatio * this._options.width!) / this._options.height!;\r\n        this._setFacadeTextureScaling();\r\n\r\n        return mesh;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        const material = new StandardMaterial(this.name + \"Material\", mesh.getScene());\r\n        material.specularColor = Color3.Black();\r\n\r\n        mesh.material = material;\r\n        this._currentMaterial = material;\r\n\r\n        this._resetContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._disposeFacadeTexture();\r\n\r\n        if (this._currentMaterial) {\r\n            this._currentMaterial.dispose();\r\n        }\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { Control3D } from \"./control3D\";\r\n\r\n/**\r\n * Class used to create containers for controls\r\n */\r\nexport class Container3D extends Control3D {\r\n    private _blockLayout = false;\r\n\r\n    /**\r\n     * Gets the list of child controls\r\n     */\r\n    protected _children = new Array<Control3D>();\r\n\r\n    /**\r\n     * Gets the list of child controls\r\n     */\r\n    public get children(): Array<Control3D> {\r\n        return this._children;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the layout must be blocked (default is false).\r\n     * This is helpful to optimize layout operation when adding multiple children in a row\r\n     */\r\n    public get blockLayout(): boolean {\r\n        return this._blockLayout;\r\n    }\r\n\r\n    public set blockLayout(value: boolean) {\r\n        if (this._blockLayout === value) {\r\n            return;\r\n        }\r\n\r\n        this._blockLayout = value;\r\n\r\n        if (!this._blockLayout) {\r\n            this._arrangeChildren();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new container\r\n     * @param name defines the container name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    /**\r\n     * Force the container to update the layout. Please note that it will not take blockLayout property in account\r\n     * @returns the current container\r\n     */\r\n    public updateLayout(): Container3D {\r\n        this._arrangeChildren();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given control is in the children of this control\r\n     * @param control defines the control to check\r\n     * @returns true if the control is in the child list\r\n     */\r\n    public containsControl(control: Control3D): boolean {\r\n        return this._children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a control to the children of this control\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Control3D): Container3D {\r\n        const index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control.parent = this;\r\n        control._host = this._host;\r\n\r\n        this._children.push(control);\r\n\r\n        if (this._host.utilityLayer) {\r\n            control._prepareNode(this._host.utilityLayer.utilityLayerScene);\r\n\r\n            if (control.node) {\r\n                control.node.parent = this.node;\r\n            }\r\n\r\n            if (!this.blockLayout) {\r\n                this._arrangeChildren();\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * This function will be called everytime a new control is added\r\n     */\r\n    protected _arrangeChildren() {}\r\n\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        return new TransformNode(\"ContainerNode\", scene);\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the children of this control\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control3D): Container3D {\r\n        const index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n            control._disposeNode();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Container3D\";\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        for (const control of this._children) {\r\n            control.dispose();\r\n        }\r\n\r\n        this._children.length = 0;\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    /** Control rotation will remain unchanged  */\r\n    public static readonly UNSET_ORIENTATION = 0;\r\n\r\n    /** Control will rotate to make it look at sphere central axis */\r\n    public static readonly FACEORIGIN_ORIENTATION = 1;\r\n\r\n    /** Control will rotate to make it look back at sphere central axis */\r\n    public static readonly FACEORIGINREVERSED_ORIENTATION = 2;\r\n\r\n    /** Control will rotate to look at z axis (0, 0, 1) */\r\n    public static readonly FACEFORWARD_ORIENTATION = 3;\r\n\r\n    /** Control will rotate to look at negative z axis (0, 0, -1) */\r\n    public static readonly FACEFORWARDREVERSED_ORIENTATION = 4;\r\n}\r\n", "import { Tools } from \"core/Misc/tools\";\r\nimport { Matrix, Vector3, TmpVectors } from \"core/Maths/math.vector\";\r\nimport type { int } from \"core/types\";\r\n\r\nimport { Container3D } from \"./container3D\";\r\nimport type { Control3D } from \"./control3D\";\r\n\r\n/**\r\n * Abstract class used to create a container panel deployed on the surface of a volume\r\n */\r\nexport abstract class VolumeBasedPanel extends Container3D {\r\n    private _columns = 10;\r\n    private _rows = 0;\r\n    private _rowThenColum = true;\r\n\r\n    private _orientation = Container3D.FACEORIGIN_ORIENTATION;\r\n\r\n    protected _cellWidth: number;\r\n    protected _cellHeight: number;\r\n\r\n    /**\r\n     * Gets or sets the distance between elements\r\n     */\r\n    public margin = 0;\r\n\r\n    /**\r\n     * Gets or sets the orientation to apply to all controls (BABYLON.Container3D.FaceOriginReversedOrientation by default)\r\n     * | Value | Type                                | Description |\r\n     * | ----- | ----------------------------------- | ----------- |\r\n     * | 0     | UNSET_ORIENTATION                   |  Control rotation will remain unchanged |\r\n     * | 1     | FACEORIGIN_ORIENTATION              |  Control will rotate to make it look at sphere central axis |\r\n     * | 2     | FACEORIGINREVERSED_ORIENTATION      |  Control will rotate to make it look back at sphere central axis |\r\n     * | 3     | FACEFORWARD_ORIENTATION             |  Control will rotate to look at z axis (0, 0, 1) |\r\n     * | 4     | FACEFORWARDREVERSED_ORIENTATION     |  Control will rotate to look at negative z axis (0, 0, -1) |\r\n     */\r\n    public get orientation(): number {\r\n        return this._orientation;\r\n    }\r\n\r\n    public set orientation(value: number) {\r\n        if (this._orientation === value) {\r\n            return;\r\n        }\r\n\r\n        this._orientation = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the number of columns requested (10 by default).\r\n     * The panel will automatically compute the number of rows based on number of child controls.\r\n     */\r\n    public get columns(): int {\r\n        return this._columns;\r\n    }\r\n\r\n    public set columns(value: int) {\r\n        if (this._columns === value) {\r\n            return;\r\n        }\r\n\r\n        this._columns = value;\r\n        this._rowThenColum = true;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a the number of rows requested.\r\n     * The panel will automatically compute the number of columns based on number of child controls.\r\n     */\r\n    public get rows(): int {\r\n        return this._rows;\r\n    }\r\n\r\n    public set rows(value: int) {\r\n        if (this._rows === value) {\r\n            return;\r\n        }\r\n\r\n        this._rows = value;\r\n        this._rowThenColum = false;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates new VolumeBasedPanel\r\n     * @param name\r\n     */\r\n    public constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _arrangeChildren() {\r\n        this._cellWidth = 0;\r\n        this._cellHeight = 0;\r\n        let rows = 0;\r\n        let columns = 0;\r\n        let controlCount = 0;\r\n\r\n        const currentInverseWorld = Matrix.Invert(this.node!.computeWorldMatrix(true));\r\n\r\n        // Measure\r\n        for (const child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            controlCount++;\r\n            child.mesh.computeWorldMatrix(true);\r\n            //   child.mesh.getWorldMatrix().multiplyToRef(currentInverseWorld, Tmp.Matrix[0]);\r\n\r\n            const boundingBox = child.mesh.getHierarchyBoundingVectors();\r\n            const extendSize = TmpVectors.Vector3[0];\r\n            const diff = TmpVectors.Vector3[1];\r\n\r\n            boundingBox.max.subtractToRef(boundingBox.min, diff);\r\n\r\n            diff.scaleInPlace(0.5);\r\n\r\n            Vector3.TransformNormalToRef(diff, currentInverseWorld, extendSize);\r\n\r\n            this._cellWidth = Math.max(this._cellWidth, extendSize.x * 2);\r\n            this._cellHeight = Math.max(this._cellHeight, extendSize.y * 2);\r\n        }\r\n\r\n        this._cellWidth += this.margin * 2;\r\n        this._cellHeight += this.margin * 2;\r\n\r\n        // Arrange\r\n        if (this._rowThenColum) {\r\n            columns = this._columns;\r\n            rows = Math.ceil(controlCount / this._columns);\r\n        } else {\r\n            rows = this._rows;\r\n            columns = Math.ceil(controlCount / this._rows);\r\n        }\r\n\r\n        const startOffsetX = columns * 0.5 * this._cellWidth;\r\n        const startOffsetY = rows * 0.5 * this._cellHeight;\r\n        const nodeGrid = [];\r\n        let cellCounter = 0;\r\n\r\n        if (this._rowThenColum) {\r\n            for (let r = 0; r < rows; r++) {\r\n                for (let c = 0; c < columns; c++) {\r\n                    nodeGrid.push(new Vector3(c * this._cellWidth - startOffsetX + this._cellWidth / 2, r * this._cellHeight - startOffsetY + this._cellHeight / 2, 0));\r\n                    cellCounter++;\r\n                    if (cellCounter > controlCount) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (let c = 0; c < columns; c++) {\r\n                for (let r = 0; r < rows; r++) {\r\n                    nodeGrid.push(new Vector3(c * this._cellWidth - startOffsetX + this._cellWidth / 2, r * this._cellHeight - startOffsetY + this._cellHeight / 2, 0));\r\n                    cellCounter++;\r\n                    if (cellCounter > controlCount) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        cellCounter = 0;\r\n        for (const child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            this._mapGridNode(child, nodeGrid[cellCounter]);\r\n\r\n            cellCounter++;\r\n        }\r\n\r\n        this._finalProcessing();\r\n    }\r\n\r\n    /** Child classes must implement this function to provide correct control positioning */\r\n    protected abstract _mapGridNode(control: Control3D, nodePosition: Vector3): void;\r\n\r\n    /** Child classes can implement this function to provide additional processing */\r\n    protected _finalProcessing() {}\r\n}\r\n", "import { Tools } from \"core/Misc/tools\";\r\nimport { Matrix, TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport type { float } from \"core/types\";\r\n\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\nimport { Axis, Space } from \"core/Maths/math.axis\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a cylinder\r\n */\r\nexport class CylinderPanel extends VolumeBasedPanel {\r\n    private _radius = 5.0;\r\n\r\n    /**\r\n     * Gets or sets the radius of the cylinder where to project controls (5 by default)\r\n     */\r\n    public get radius(): float {\r\n        return this._radius;\r\n    }\r\n\r\n    public set radius(value: float) {\r\n        if (this._radius === value) {\r\n            return;\r\n        }\r\n\r\n        this._radius = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        const mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n        const newPos = this._cylindricalMapping(nodePosition);\r\n        control.position = newPos;\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n                mesh.lookAt(new Vector3(2 * newPos.x, newPos.y, 2 * newPos.z));\r\n                break;\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(-newPos.x, newPos.y, -newPos.z));\r\n                break;\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n                mesh.rotate(Axis.Y, Math.PI, Space.LOCAL);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _cylindricalMapping(source: Vector3) {\r\n        const newPos = new Vector3(0, source.y, this._radius);\r\n\r\n        const yAngle = source.x / this._radius;\r\n\r\n        Matrix.RotationYawPitchRollToRef(yAngle, 0, 0, TmpVectors.Matrix[0]);\r\n\r\n        return Vector3.TransformNormal(newPos, TmpVectors.Matrix[0]);\r\n    }\r\n}\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"fluentVertexShader\";\nconst shader = `precision highp float;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;uniform mat4 world;uniform mat4 viewProjection;varying vec2 vUV;\n#ifdef BORDER\nvarying vec2 scaleInfo;uniform float borderWidth;uniform vec3 scaleFactor;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\n#endif\nvoid main(void) {vUV=uv;\n#ifdef BORDER\nvec3 scale=scaleFactor;float minScale=min(min(scale.x,scale.y),scale.z);float maxScale=max(max(scale.x,scale.y),scale.z);float minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);float areaYZ=scale.y*scale.z;float areaXZ=scale.x*scale.z;float areaXY=scale.x*scale.y;float scaledBorderWidth=borderWidth; \nif (abs(normal.x)==1.0) \n{scale.x=scale.y;scale.y=scale.z;if (areaYZ>areaXZ && areaYZ>areaXY)\n{scaledBorderWidth*=minOverMiddleScale;}}\nelse if (abs(normal.y)==1.0) \n{scale.x=scale.z;if (areaXZ>areaXY && areaXZ>areaYZ)\n{scaledBorderWidth*=minOverMiddleScale;}}\nelse \n{if (areaXY>areaYZ && areaXY>areaXZ)\n{scaledBorderWidth*=minOverMiddleScale;}}\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);if (scale.x>scale.y)\n{scaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);scaleInfo.y=1.0-scaledBorderWidth;}\nelse\n{scaleInfo.x=1.0-scaledBorderWidth;scaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);} \n#endif \nvec4 worldPos=world*vec4(position,1.0);\n#ifdef HOVERLIGHT\nworldPosition=worldPos.xyz;\n#endif\ngl_Position=viewProjection*worldPos;}\n`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const fluentVertexShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"fluentPixelShader\";\nconst shader = `precision highp float;varying vec2 vUV;uniform vec4 albedoColor;\n#ifdef INNERGLOW\nuniform vec4 innerGlowColor;\n#endif\n#ifdef BORDER\nvarying vec2 scaleInfo;uniform float edgeSmoothingValue;uniform float borderMinValue;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;uniform vec3 hoverPosition;uniform vec4 hoverColor;uniform float hoverRadius;\n#endif\n#ifdef TEXTURE\nuniform sampler2D albedoSampler;uniform mat4 textureMatrix;vec2 finalUV;\n#endif\nvoid main(void) {vec3 albedo=albedoColor.rgb;float alpha=albedoColor.a;\n#ifdef TEXTURE\nfinalUV=vec2(textureMatrix*vec4(vUV,1.0,0.0));albedo=texture2D(albedoSampler,finalUV).rgb;\n#endif\n#ifdef HOVERLIGHT\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;albedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\n#else\nfloat pointToHover=1.0;\n#endif\n#ifdef BORDER \nfloat borderPower=10.0;float inverseBorderPower=1.0/borderPower;vec3 borderColor=albedo*borderPower;vec2 distanceToEdge;distanceToEdge.x=abs(vUV.x-0.5)*2.0;distanceToEdge.y=abs(vUV.y-0.5)*2.0;float borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));borderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover); \nalbedo+=borderColor;alpha=max(alpha,borderValue);\n#endif\n#ifdef INNERGLOW\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);uvGlow=uvGlow*uvGlow;uvGlow=uvGlow*uvGlow;albedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y); \n#endif\ngl_FragColor=vec4(albedo,alpha);}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const fluentPixelShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { serializeAsColor4, serializeAsVector3, serializeAsTexture, serialize, expandToProperty, serializeAsColor3 } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector3, TmpVectors } from \"core/Maths/math.vector\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\n\r\nimport \"./shaders/fluent.vertex\";\r\nimport \"./shaders/fluent.fragment\";\r\nimport { PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @internal */\r\nexport class FluentMaterialDefines extends MaterialDefines {\r\n    public INNERGLOW = false;\r\n    public BORDER = false;\r\n    public HOVERLIGHT = false;\r\n    public TEXTURE = false;\r\n\r\n    constructor() {\r\n        super();\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render controls with fluent design\r\n */\r\nexport class FluentMaterial extends PushMaterial {\r\n    /**\r\n     * Gets or sets inner glow intensity. A value of 0 means no glow (default is 0.5)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public innerGlowColorIntensity = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the inner glow color (white by default)\r\n     */\r\n    @serializeAsColor3()\r\n    public innerGlowColor = new Color3(1.0, 1.0, 1.0);\r\n\r\n    /**\r\n     * Gets or sets the albedo color (Default is Color3(0.3, 0.35, 0.4))\r\n     */\r\n    @serializeAsColor3()\r\n    public albedoColor = new Color3(0.3, 0.35, 0.4);\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if borders must be rendered (default is false)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public renderBorders = false;\r\n\r\n    /**\r\n     * Gets or sets border width (default is 0.5)\r\n     */\r\n    @serialize()\r\n    public borderWidth = 0.5;\r\n\r\n    /**\r\n     * Gets or sets a value indicating the smoothing value applied to border edges (0.02 by default)\r\n     */\r\n    @serialize()\r\n    public edgeSmoothingValue = 0.02;\r\n\r\n    /**\r\n     * Gets or sets the minimum value that can be applied to border width (default is 0.1)\r\n     */\r\n    @serialize()\r\n    public borderMinValue = 0.1;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if hover light must be rendered (default is false)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public renderHoverLight = false;\r\n\r\n    /**\r\n     * Gets or sets the radius used to render the hover light (default is 0.01)\r\n     */\r\n    @serialize()\r\n    public hoverRadius = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the color used to render the hover light (default is Color4(0.3, 0.3, 0.3, 1.0))\r\n     */\r\n    @serializeAsColor4()\r\n    public hoverColor = new Color4(0.3, 0.3, 0.3, 1.0);\r\n\r\n    /**\r\n     * Gets or sets the hover light position in world space (default is Vector3.Zero())\r\n     */\r\n    @serializeAsVector3()\r\n    public hoverPosition = Vector3.Zero();\r\n\r\n    @serializeAsTexture(\"albedoTexture\")\r\n    private _albedoTexture: Nullable<BaseTexture>;\r\n\r\n    /** Gets or sets the texture to use for albedo color */\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesAndMiscDirty\")\r\n    public albedoTexture: Nullable<BaseTexture>;\r\n\r\n    /**\r\n     * Creates a new Fluent material\r\n     * @param name defines the name of the material\r\n     * @param scene defines the hosting scene\r\n     */\r\n    constructor(name: string, scene?: Scene) {\r\n        super(name, scene);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return this.alpha !== 1.0;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new FluentMaterialDefines();\r\n        }\r\n\r\n        const scene = this.getScene();\r\n        const defines = <FluentMaterialDefines>subMesh.materialDefines;\r\n        if (!this.checkReadyOnEveryCall && subMesh.effect) {\r\n            if (defines._renderId === scene.getRenderId()) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (defines._areTexturesDirty) {\r\n            defines.INNERGLOW = this.innerGlowColorIntensity > 0;\r\n            defines.BORDER = this.renderBorders;\r\n            defines.HOVERLIGHT = this.renderHoverLight;\r\n\r\n            if (this._albedoTexture) {\r\n                if (!this._albedoTexture.isReadyOrNotBlocking()) {\r\n                    return false;\r\n                } else {\r\n                    defines.TEXTURE = true;\r\n                }\r\n            } else {\r\n                defines.TEXTURE = false;\r\n            }\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n            scene.resetCachedMaterial();\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n            attribs.push(VertexBuffer.NormalKind);\r\n            attribs.push(VertexBuffer.UVKind);\r\n\r\n            const shaderName = \"fluent\";\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"viewProjection\",\r\n                \"innerGlowColor\",\r\n                \"albedoColor\",\r\n                \"borderWidth\",\r\n                \"edgeSmoothingValue\",\r\n                \"scaleFactor\",\r\n                \"borderMinValue\",\r\n                \"hoverColor\",\r\n                \"hoverPosition\",\r\n                \"hoverRadius\",\r\n                \"textureMatrix\",\r\n            ];\r\n\r\n            const samplers = [\"albedoSampler\"];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            const join = defines.toString();\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: null,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines,\r\n                this._materialContext\r\n            );\r\n        }\r\n\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const scene = this.getScene();\r\n\r\n        const defines = <FluentMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n\r\n        if (this._mustRebind(scene, effect, subMesh)) {\r\n            this._activeEffect.setColor4(\"albedoColor\", this.albedoColor, this.alpha);\r\n\r\n            if (defines.INNERGLOW) {\r\n                this._activeEffect.setColor4(\"innerGlowColor\", this.innerGlowColor, this.innerGlowColorIntensity);\r\n            }\r\n\r\n            if (defines.BORDER) {\r\n                this._activeEffect.setFloat(\"borderWidth\", this.borderWidth);\r\n                this._activeEffect.setFloat(\"edgeSmoothingValue\", this.edgeSmoothingValue);\r\n                this._activeEffect.setFloat(\"borderMinValue\", this.borderMinValue);\r\n\r\n                mesh.getBoundingInfo().boundingBox.extendSize.multiplyToRef(mesh.scaling, TmpVectors.Vector3[0]);\r\n                this._activeEffect.setVector3(\"scaleFactor\", TmpVectors.Vector3[0]);\r\n            }\r\n\r\n            if (defines.HOVERLIGHT) {\r\n                this._activeEffect.setDirectColor4(\"hoverColor\", this.hoverColor);\r\n                this._activeEffect.setFloat(\"hoverRadius\", this.hoverRadius);\r\n                this._activeEffect.setVector3(\"hoverPosition\", this.hoverPosition);\r\n            }\r\n\r\n            if (defines.TEXTURE && this._albedoTexture) {\r\n                this._activeEffect.setTexture(\"albedoSampler\", this._albedoTexture);\r\n                const matrix = this._albedoTexture.getTextureMatrix();\r\n                this._activeEffect.setMatrix(\"textureMatrix\", matrix);\r\n            }\r\n        }\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    public getActiveTextures(): BaseTexture[] {\r\n        const activeTextures = super.getActiveTextures();\r\n\r\n        return activeTextures;\r\n    }\r\n\r\n    public hasTexture(texture: BaseTexture): boolean {\r\n        if (super.hasTexture(texture)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): FluentMaterial {\r\n        return SerializationHelper.Clone(() => new FluentMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.customType = \"BABYLON.GUI.FluentMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"FluentMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): FluentMaterial {\r\n        return SerializationHelper.Parse(() => new FluentMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.FluentMaterial\", FluentMaterial);\r\n", "import type { Scene } from \"core/scene\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { Mesh } from \"core/Meshes/mesh\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { FluentMaterial } from \"../materials/fluent/fluentMaterial\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport type { Container3D } from \"./container3D\";\r\nimport type { TouchHolographicButton } from \"./touchHolographicButton\";\r\n\r\n/**\r\n * Simple menu that can contain holographic buttons\r\n */\r\nexport class TouchHolographicMenu extends VolumeBasedPanel {\r\n    protected _backPlate: Mesh;\r\n    private _backPlateMaterial: FluentMaterial;\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n\r\n    private _currentMin: Nullable<Vector3>;\r\n    private _currentMax: Nullable<Vector3>;\r\n\r\n    private _backPlateMargin = 1.25;\r\n\r\n    /**\r\n     * Scale for the buttons added to the menu\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    protected static MENU_BUTTON_SCALE: number = 1;\r\n\r\n    /**\r\n     * Gets or sets the margin size of the backplate in button size units.\r\n     * Setting this to 1, will make the backPlate margin the size of 1 button\r\n     */\r\n    public get backPlateMargin(): number {\r\n        return this._backPlateMargin;\r\n    }\r\n\r\n    public set backPlateMargin(value: number) {\r\n        this._backPlateMargin = value;\r\n\r\n        if (this._children.length >= 1) {\r\n            this.children.forEach((control) => {\r\n                this._updateCurrentMinMax(control.position);\r\n            });\r\n\r\n            this._updateMargins();\r\n        }\r\n    }\r\n\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        const node = new Mesh(`menu_${this.name}`, scene);\r\n\r\n        this._backPlate = CreateBox(\"backPlate\" + this.name, { size: 1 }, scene);\r\n        this._backPlate.parent = node;\r\n\r\n        return node;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        this._backPlateMaterial = new FluentMaterial(this.name + \"backPlateMaterial\", mesh.getScene());\r\n        this._backPlateMaterial.albedoColor = new Color3(0.08, 0.15, 0.55);\r\n        this._backPlateMaterial.renderBorders = true;\r\n        this._backPlateMaterial.renderHoverLight = true;\r\n\r\n        this._pickedPointObserver = this._host.onPickedPointChangedObservable.add((pickedPoint) => {\r\n            if (pickedPoint) {\r\n                this._backPlateMaterial.hoverPosition = pickedPoint;\r\n                this._backPlateMaterial.hoverColor.a = 1.0;\r\n            } else {\r\n                this._backPlateMaterial.hoverColor.a = 0;\r\n            }\r\n        });\r\n\r\n        this._backPlate.material = this._backPlateMaterial;\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        // Simple plane mapping for the menu\r\n        const mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        control.position = nodePosition.clone();\r\n\r\n        this._updateCurrentMinMax(nodePosition);\r\n    }\r\n\r\n    protected _finalProcessing() {\r\n        this._updateMargins();\r\n    }\r\n\r\n    private _updateCurrentMinMax(nodePosition: Vector3) {\r\n        if (!this._currentMin) {\r\n            this._currentMin = nodePosition.clone();\r\n            this._currentMax = nodePosition.clone();\r\n        }\r\n\r\n        this._currentMin.minimizeInPlace(nodePosition);\r\n        this._currentMax!.maximizeInPlace(nodePosition);\r\n    }\r\n\r\n    private _updateMargins() {\r\n        if (this._children.length > 0) {\r\n            this._currentMin!.addInPlaceFromFloats(-this._cellWidth / 2, -this._cellHeight / 2, 0);\r\n            this._currentMax!.addInPlaceFromFloats(this._cellWidth / 2, this._cellHeight / 2, 0);\r\n            const extendSize = this._currentMax!.subtract(this._currentMin!);\r\n\r\n            // Also add a % margin\r\n            this._backPlate.scaling.x = extendSize.x + this._cellWidth * this.backPlateMargin;\r\n            this._backPlate.scaling.y = extendSize.y + this._cellHeight * this.backPlateMargin;\r\n            this._backPlate.scaling.z = 0.001;\r\n\r\n            for (let i = 0; i < this._children.length; i++) {\r\n                this._children[i].position.subtractInPlace(this._currentMin!).subtractInPlace(extendSize.scale(0.5));\r\n                this._children[i].position.z -= 0.01;\r\n            }\r\n        }\r\n\r\n        this._currentMin = null;\r\n        this._currentMax = null;\r\n    }\r\n\r\n    /**\r\n     * Creates a holographic menu GUI 3D control\r\n     * @param name name of the menu\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    /**\r\n     * Adds a button to the menu.\r\n     * Please note that the back material of the button will be set to transparent as it is attached to the menu.\r\n     *\r\n     * @param button Button to add\r\n     * @returns This menu\r\n     */\r\n    public addButton(button: TouchHolographicButton): TouchHolographicMenu {\r\n        // Block updating the layout until the button is resized (which has to happen after node creation)\r\n        const wasLayoutBlocked = this.blockLayout;\r\n        if (!wasLayoutBlocked) {\r\n            this.blockLayout = true;\r\n        }\r\n\r\n        super.addControl(button);\r\n\r\n        button.isBackplateVisible = false;\r\n        button.scaling.scaleInPlace(TouchHolographicMenu.MENU_BUTTON_SCALE);\r\n\r\n        // Unblocking the layout triggers the pending layout update that uses the size of the buttons to determine the size of the backing mesh\r\n        if (!wasLayoutBlocked) {\r\n            this.blockLayout = false;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * This method should not be used directly. It is inherited from `Container3D`.\r\n     * Please use `addButton` instead.\r\n     * @param _control the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(_control: Control3D): Container3D {\r\n        Logger.Warn(\"TouchHolographicMenu can only contain buttons. Please use the method `addButton` instead.\");\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Disposes the menu\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n    }\r\n}\r\n", "import type { Scene } from \"core/scene\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport { TouchHolographicMenu } from \"./touchHolographicMenu\";\r\nimport { HandConstraintBehavior } from \"core/Behaviors/Meshes/handConstraintBehavior\";\r\nimport type { WebXRExperienceHelper } from \"core/XR/webXRExperienceHelper\";\r\n\r\n/**\r\n * Hand menu that displays buttons and floats around the hand.\r\n * @since 5.0.0\r\n */\r\nexport class HandMenu extends TouchHolographicMenu {\r\n    private _handConstraintBehavior: HandConstraintBehavior;\r\n\r\n    /**\r\n     * The hand constraint behavior setting the transformation of this node\r\n     */\r\n    public get handConstraintBehavior() {\r\n        return this._handConstraintBehavior;\r\n    }\r\n\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        const node = super._createNode(scene)! as Mesh;\r\n\r\n        this._handConstraintBehavior.attach(node);\r\n\r\n        return node;\r\n    }\r\n\r\n    /**\r\n     * Creates a hand menu GUI 3D control\r\n     * @param xr the WebXRExperienceHelper used to link this control to the enabled WebXRHandTracking feature\r\n     * @param name name of the hand menu\r\n     */\r\n    constructor(xr: WebXRExperienceHelper, name?: string) {\r\n        super(name);\r\n\r\n        this._handConstraintBehavior = new HandConstraintBehavior();\r\n        this._handConstraintBehavior.linkToXRExperience(xr);\r\n        this.backPlateMargin = 0.15;\r\n        this.rows = 3;\r\n    }\r\n\r\n    /**\r\n     * Disposes the hand menu\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._handConstraintBehavior.detach();\r\n    }\r\n}\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"fluentBackplatePixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform float _Angle_;uniform float _Fade_Out_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform sampler2D _Iridescent_Map_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;void Round_Rect_Fragment_B31(\nfloat Radius,\nfloat Line_Width,\nvec4 Line_Color,\nfloat Filter_Width,\nvec2 UV,\nfloat Line_Visibility,\nvec4 Rect_Parms,\nvec4 Fill_Color,\nout vec4 Color)\n{float d=length(max(abs(UV)-Rect_Parms.xy,0.0));float dx=max(fwidth(d)*Filter_Width,0.00001);float g=min(Rect_Parms.z,Rect_Parms.w);float dgrad=max(fwidth(g)*Filter_Width,0.00001);float Inside_Rect=clamp(g/dgrad,0.0,1.0);float inner=clamp((d+dx*0.5-max(Radius-Line_Width,d-dx*0.5))/dx,0.0,1.0);Color=clamp(mix(Fill_Color,Line_Color,inner),0.0,1.0)*Inside_Rect;}\nvoid Blob_Fragment_B71(\nsampler2D Blob_Texture,\nvec4 Blob_Info1,\nvec4 Blob_Info2,\nout vec4 Blob_Color)\n{float k1=dot(Blob_Info1.xy,Blob_Info1.xy);float k2=dot(Blob_Info2.xy,Blob_Info2.xy);vec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);Blob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);}\nvoid Line_Fragment_B48(\nvec4 Base_Color,\nvec4 Highlight_Color,\nfloat Highlight_Width,\nvec3 Line_Vertex,\nfloat Highlight,\nout vec4 Line_Color)\n{float k2=1.0-clamp(abs(Line_Vertex.y/Highlight_Width),0.0,1.0);Line_Color=mix(Base_Color,Highlight_Color,Highlight*k2);}\nvoid Scale_RGB_B54(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}\nvoid Conditional_Float_B38(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{Result=Which ? If_True : If_False;}\nvoid main()\n{float R_Q72;float G_Q72;float B_Q72;float A_Q72;R_Q72=vColor.r; G_Q72=vColor.g; B_Q72=vColor.b; A_Q72=vColor.a;vec4 Blob_Color_Q71;\n#if BLOB_ENABLE\nfloat k1=dot(vExtra2.xy,vExtra2.xy);float k2=dot(vExtra3.xy,vExtra3.xy);vec3 closer=k1<k2 ? vec3(k1,vExtra2.z,vExtra2.w) : vec3(k2,vExtra3.z,vExtra3.w);Blob_Color_Q71=closer.z*texture(_Blob_Texture_,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);\n#else\nBlob_Color_Q71=vec4(0,0,0,0);\n#endif\nvec4 Line_Color_Q48;Line_Fragment_B48(_Line_Color_,_Highlight_Color_,_Highlight_Width_,vTangent,_Highlight_,Line_Color_Q48);float X_Q67;float Y_Q67;X_Q67=vUV.x;Y_Q67=vUV.y;vec3 Incident_Q66=normalize(vPosition-cameraPosition);vec3 Reflected_Q60=reflect(Incident_Q66,vBinormal);float Product_Q63=Y_Q67*_Vertical_Offset_;float Dot_Q68=dot(Incident_Q66, Reflected_Q60);float Dot_Q57=dot(vNormal, Incident_Q66);float Result_Q38;Conditional_Float_B38(_Reflected_,Dot_Q68,Dot_Q57,Result_Q38);float Product_Q64=Result_Q38*_Frequency_;float Sum_Q69=Product_Q64+1.0;float Product_Q70=Sum_Q69*0.5;float Sum_Q62=Product_Q63+Product_Q70;float FractF_Q59=fract(Sum_Q62);vec2 Vec2_Q65=vec2(FractF_Q59,0.5);vec4 Color_Q58;\n#if IRIDESCENT_MAP_ENABLE\nColor_Q58=texture(_Iridescent_Map_,Vec2_Q65);\n#else\nColor_Q58=vec4(0,0,0,0);\n#endif\nvec4 Result_Q54;Scale_RGB_B54(Color_Q58,_Iridescence_Edge_Intensity_,Result_Q54);vec4 Result_Q55;Scale_RGB_B54(Color_Q58,_Iridescence_Intensity_,Result_Q55);vec4 Base_And_Iridescent_Q53;Base_And_Iridescent_Q53=Line_Color_Q48+vec4(Result_Q54.rgb,0.0);vec4 Base_And_Iridescent_Q56;Base_And_Iridescent_Q56=_Base_Color_+vec4(Result_Q55.rgb,0.0);vec4 Result_Q52=Base_And_Iridescent_Q53; Result_Q52.a=1.0;vec4 Result_Q35=Blob_Color_Q71+(1.0-Blob_Color_Q71.a)*Base_And_Iridescent_Q56;vec4 Color_Q31;Round_Rect_Fragment_B31(R_Q72,G_Q72,Result_Q52,_Filter_Width_,vUV,1.0,vExtra1,Result_Q35,Color_Q31);vec4 Result_Q47=_Fade_Out_*Color_Q31;vec4 Out_Color=Result_Q47;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const fluentBackplatePixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"fluentBackplateVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;\n#ifdef TANGENT\nattribute vec3 tangent;\n#else\nconst vec3 tangent=vec3(0.);\n#endif\nuniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform float _Angle_;uniform float _Fade_Out_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform sampler2D _Iridescent_Map_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Object_To_World_Pos_B115(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}\nvoid PickDir_B140(\nfloat Degrees,\nvec3 DirX,\nvec3 DirY,\nout vec3 Dir)\n{float a=Degrees*3.14159/180.0;Dir=cos(a)*DirX+sin(a)*DirY;}\nvoid Round_Rect_Vertex_B139(\nvec2 UV,\nfloat Radius,\nfloat Margin,\nfloat Anisotropy,\nfloat Gradient1,\nfloat Gradient2,\nout vec2 Rect_UV,\nout vec4 Rect_Parms,\nout vec2 Scale_XY,\nout vec2 Line_UV)\n{Scale_XY=vec2(Anisotropy,1.0);Line_UV=(UV-vec2(0.5,0.5));Rect_UV=Line_UV*Scale_XY;Rect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius)-vec2(Margin,Margin);Rect_Parms.z=Gradient1; \nRect_Parms.w=Gradient2;}\nvoid Line_Vertex_B135(\nvec2 Scale_XY,\nvec2 UV,\nfloat Time,\nfloat Rate,\nvec4 Highlight_Transform,\nout vec3 Line_Vertex)\n{float angle2=(Rate*Time)*2.0*3.1416;float sinAngle2=sin(angle2);float cosAngle2=cos(angle2);vec2 xformUV=UV*Highlight_Transform.xy+Highlight_Transform.zw;Line_Vertex.x=0.0;Line_Vertex.y=cosAngle2*xformUV.x-sinAngle2*xformUV.y;Line_Vertex.z=0.0; }\nvoid Blob_Vertex_B180(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{vec3 blob=Blob_Position;vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}\nvoid Move_Verts_B129(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir)\n{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);New_UV=center+r2*(UV-2.0*center+0.5);New_P=vec3(New_UV-0.5,P.z);Radial_Gradient=1.0-length(delta)*2.0;Radial_Dir=vec3(delta*r2,0.0);}\nvoid Object_To_World_Dir_B132(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}\nvoid RelativeOrAbsoluteDetail_B147(\nfloat Nominal_Radius,\nfloat Nominal_LineWidth,\nbool Absolute_Measurements,\nfloat Height,\nout float Radius,\nout float Line_Width)\n{float scale=Absolute_Measurements ? 1.0/Height : 1.0;Radius=Nominal_Radius*scale;Line_Width=Nominal_LineWidth*scale;}\nvoid Edge_AA_Vertex_B130(\nvec3 Position_World,\nvec3 Position_Object,\nvec3 Normal_Object,\nvec3 Eye,\nfloat Radial_Gradient,\nvec3 Radial_Dir,\nvec3 Tangent,\nout float Gradient1,\nout float Gradient2)\n{vec3 I=(Eye-Position_World);vec3 T=(world* vec4(Tangent,0.0)).xyz;float g=(dot(T,I)<0.0) ? 0.0 : 1.0;if (Normal_Object.z==0.0) { \nGradient1=Position_Object.z>0.0 ? g : 1.0;Gradient2=Position_Object.z>0.0 ? 1.0 : g;} else {Gradient1=g+(1.0-g)*(Radial_Gradient);Gradient2=1.0;}}\nvoid Pick_Radius_B144(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}\nvoid main()\n{vec3 Nrm_World_Q128;Nrm_World_Q128=normalize((world*vec4(normal,0.0)).xyz);vec3 Tangent_World_Q131;vec3 Tangent_World_N_Q131;float Tangent_Length_Q131;Tangent_World_Q131=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q131=length(Tangent_World_Q131);Tangent_World_N_Q131=Tangent_World_Q131/Tangent_Length_Q131;vec3 Binormal_World_Q132;vec3 Binormal_World_N_Q132;float Binormal_Length_Q132;Object_To_World_Dir_B132(vec3(0,1,0),Binormal_World_Q132,Binormal_World_N_Q132,Binormal_Length_Q132);float Anisotropy_Q133=Tangent_Length_Q131/Binormal_Length_Q132;vec3 Result_Q177;Result_Q177=mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(_Use_Global_Left_Index_));vec3 Result_Q178;Result_Q178=mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(_Use_Global_Right_Index_));float Result_Q144;Pick_Radius_B144(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q144);vec3 Dir_Q140;PickDir_B140(_Angle_,Tangent_World_N_Q131,Binormal_World_N_Q132,Dir_Q140);float Radius_Q147;float Line_Width_Q147;RelativeOrAbsoluteDetail_B147(Result_Q144,_Line_Width_,_Absolute_Sizes_,Binormal_Length_Q132,Radius_Q147,Line_Width_Q147);vec4 Out_Color_Q145=vec4(Radius_Q147,Line_Width_Q147,0,1);vec3 New_P_Q129;vec2 New_UV_Q129;float Radial_Gradient_Q129;vec3 Radial_Dir_Q129;Move_Verts_B129(Anisotropy_Q133,position,Radius_Q147,New_P_Q129,New_UV_Q129,Radial_Gradient_Q129,Radial_Dir_Q129);vec3 Pos_World_Q115;Object_To_World_Pos_B115(New_P_Q129,Pos_World_Q115);vec4 Blob_Info_Q180;\n#if BLOB_ENABLE\nBlob_Vertex_B180(Pos_World_Q115,Nrm_World_Q128,Tangent_World_N_Q131,Binormal_World_N_Q132,Result_Q177,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q180);\n#else\nBlob_Info_Q180=vec4(0,0,0,0);\n#endif\nvec4 Blob_Info_Q181;\n#if BLOB_ENABLE_2\nBlob_Vertex_B180(Pos_World_Q115,Nrm_World_Q128,Tangent_World_N_Q131,Binormal_World_N_Q132,Result_Q178,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q181);\n#else\nBlob_Info_Q181=vec4(0,0,0,0);\n#endif\nfloat Gradient1_Q130;float Gradient2_Q130;\n#if SMOOTH_EDGES\nEdge_AA_Vertex_B130(Pos_World_Q115,position,normal,cameraPosition,Radial_Gradient_Q129,Radial_Dir_Q129,tangent,Gradient1_Q130,Gradient2_Q130);\n#else\nGradient1_Q130=1.0;Gradient2_Q130=1.0;\n#endif\nvec2 Rect_UV_Q139;vec4 Rect_Parms_Q139;vec2 Scale_XY_Q139;vec2 Line_UV_Q139;Round_Rect_Vertex_B139(New_UV_Q129,Radius_Q147,0.0,Anisotropy_Q133,Gradient1_Q130,Gradient2_Q130,Rect_UV_Q139,Rect_Parms_Q139,Scale_XY_Q139,Line_UV_Q139);vec3 Line_Vertex_Q135;Line_Vertex_B135(Scale_XY_Q139,Line_UV_Q139,0.0,_Rate_,_Highlight_Transform_,Line_Vertex_Q135);vec3 Position=Pos_World_Q115;vec3 Normal=Dir_Q140;vec2 UV=Rect_UV_Q139;vec3 Tangent=Line_Vertex_Q135;vec3 Binormal=Nrm_World_Q128;vec4 Color=Out_Color_Q145;vec4 Extra1=Rect_Parms_Q139;vec4 Extra2=Blob_Info_Q180;vec4 Extra3=Blob_Info_Q181;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const fluentBackplateVertexShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { serialize, serializeAsVector3 } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector3, Vector4 } from \"core/Maths/math.vector\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\nimport \"./shaders/fluentBackplate.fragment\";\r\nimport \"./shaders/fluentBackplate.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @internal */\r\nclass FluentBackplateMaterialDefines extends MaterialDefines {\r\n    public BLOB_ENABLE = true;\r\n    public BLOB_ENABLE_2 = true;\r\n    public SMOOTH_EDGES = true;\r\n    public IRIDESCENT_MAP_ENABLE = true;\r\n\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render square buttons with fluent design\r\n */\r\nexport class FluentBackplateMaterial extends PushMaterial {\r\n    /**\r\n     * URL pointing to the texture used to define the coloring for the fluent blob effect.\r\n     */\r\n    public static BLOB_TEXTURE_URL = \"https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-backplate-blob.png\";\r\n\r\n    /**\r\n     * URL pointing to the texture used to define iridescent map.\r\n     */\r\n    public static IM_TEXTURE_URL = \"https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-backplate-iridescence.png\";\r\n\r\n    private _blobTexture: Texture;\r\n    private _iridescentMap: Texture;\r\n\r\n    /**\r\n     * Gets or sets the corner radius on the backplate. Best to keep this value between 0.01 and 0.5. Default is 0.03.\r\n     */\r\n    @serialize()\r\n    public radius = 0.03;\r\n\r\n    /**\r\n     * Gets or sets the line width of the backplate.\r\n     */\r\n    @serialize()\r\n    public lineWidth = 0.01;\r\n\r\n    /**\r\n     * Gets or sets whether to use absolute sizes when calculating effects on the backplate.\r\n     * Since desktop and VR/AR have different relative sizes, it's usually best to keep this false.\r\n     */\r\n    @serialize()\r\n    public absoluteSizes = false;\r\n\r\n    /** @internal */\r\n    public _filterWidth = 1;\r\n\r\n    /**\r\n     * Gets or sets the base color of the backplate.\r\n     */\r\n    @serialize()\r\n    public baseColor = new Color4(0.0392157, 0.0666667, 0.207843, 1);\r\n\r\n    /**\r\n     * Gets or sets the line color of the backplate.\r\n     */\r\n    @serialize()\r\n    public lineColor = new Color4(0.14902, 0.133333, 0.384314, 1);\r\n\r\n    /**\r\n     * Gets or sets the intensity of the fluent hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobIntensity = 0.98;\r\n\r\n    /**\r\n     * Gets or sets the far size of the fluent hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobFarSize = 0.04;\r\n\r\n    /**\r\n     * Gets or sets the distance considered \"near\" to the backplate, which controls the size of the fluent hover glow effect (see blobNearSize).\r\n     */\r\n    @serialize()\r\n    public blobNearDistance = 0;\r\n\r\n    /**\r\n     * Gets or sets the distance considered \"far\" from the backplate, which controls the size of the fluent hover glow effect (see blobFarSize).\r\n     */\r\n    @serialize()\r\n    public blobFarDistance = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the length of the fluent hover glow effect fade.\r\n     */\r\n    @serialize()\r\n    public blobFadeLength = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the size of the fluent hover glow effect when the left pointer is considered \"near\" to the backplate (see blobNearDistance).\r\n     */\r\n    @serialize()\r\n    public blobNearSize = 0.22;\r\n\r\n    /**\r\n     * Gets or sets the progress of the fluent hover glow effect selection animation corresponding to the left pointer (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public blobPulse = 0;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the fluent hover glow effect corresponding to the left pointer (0.0 - 1.0). Default is 0.\r\n     */\r\n    @serialize()\r\n    public blobFade = 0;\r\n\r\n    /**\r\n     * Gets or sets the size of the fluent hover glow effect when the right pointer is considered \"near\" to the backplate (see blobNearDistance).\r\n     */\r\n    @serialize()\r\n    public blobNearSize2 = 0.22;\r\n\r\n    /**\r\n     * Gets or sets the progress of the fluent hover glow effect selection animation corresponding to the right pointer (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public blobPulse2 = 0;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the fluent hover glow effect corresponding to the right pointer (0.0 - 1.0). Default is 0.\r\n     */\r\n    @serialize()\r\n    public blobFade2 = 0;\r\n\r\n    /** @internal */\r\n    public _rate = 0.135;\r\n\r\n    /**\r\n     * Gets or sets the color of the highlights on the backplate line.\r\n     */\r\n    @serialize()\r\n    public highlightColor = new Color4(0.98, 0.98, 0.98, 1);\r\n\r\n    /**\r\n     * Gets or sets the width of the highlights on the backplate line.\r\n     */\r\n    @serialize()\r\n    public highlightWidth = 0.25;\r\n\r\n    /** @internal */\r\n    public _highlightTransform = new Vector4(1, 1, 0, 0);\r\n\r\n    /** @internal */\r\n    public _highlight = 1;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the iridescence effect.\r\n     */\r\n    @serialize()\r\n    public iridescenceIntensity = 0;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the iridescence effect on the backplate edges.\r\n     */\r\n    @serialize()\r\n    public iridescenceEdgeIntensity = 1;\r\n\r\n    /** @internal */\r\n    public _angle = -45;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the backplate (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public fadeOut = 1;\r\n\r\n    /** @internal */\r\n    public _reflected = true;\r\n\r\n    /** @internal */\r\n    public _frequency = 1;\r\n\r\n    /** @internal */\r\n    public _verticalOffset = 0;\r\n\r\n    /**\r\n     * Gets or sets the world-space position of the tip of the left index finger.\r\n     */\r\n    @serializeAsVector3()\r\n    public globalLeftIndexTipPosition = Vector3.Zero();\r\n    private _globalLeftIndexTipPosition4 = Vector4.Zero();\r\n\r\n    /**\r\n     * Gets or sets the world-space position of the tip of the right index finger.\r\n     */\r\n    @serializeAsVector3()\r\n    public globalRightIndexTipPosition = Vector3.Zero();\r\n    private _globalRightIndexTipPosition4 = Vector4.Zero();\r\n\r\n    constructor(name: string, scene?: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_DISABLE;\r\n        this.backFaceCulling = false;\r\n\r\n        this._blobTexture = new Texture(FluentBackplateMaterial.BLOB_TEXTURE_URL, this.getScene(), true, false, Texture.NEAREST_SAMPLINGMODE);\r\n        this._iridescentMap = new Texture(FluentBackplateMaterial.IM_TEXTURE_URL, this.getScene(), true, false, Texture.NEAREST_SAMPLINGMODE);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new FluentBackplateMaterialDefines();\r\n        }\r\n\r\n        const defines = <FluentBackplateMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, false, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"fluentBackplate\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Radius_\",\r\n                \"_Line_Width_\",\r\n                \"_Absolute_Sizes_\",\r\n                \"_Filter_Width_\",\r\n                \"_Base_Color_\",\r\n                \"_Line_Color_\",\r\n                \"_Radius_Top_Left_\",\r\n                \"_Radius_Top_Right_\",\r\n                \"_Radius_Bottom_Left_\",\r\n                \"_Radius_Bottom_Right_\",\r\n                \"_Blob_Position_\",\r\n                \"_Blob_Intensity_\",\r\n                \"_Blob_Near_Size_\",\r\n                \"_Blob_Far_Size_\",\r\n                \"_Blob_Near_Distance_\",\r\n                \"_Blob_Far_Distance_\",\r\n                \"_Blob_Fade_Length_\",\r\n                \"_Blob_Pulse_\",\r\n                \"_Blob_Fade_\",\r\n                \"_Blob_Texture_\",\r\n                \"_Blob_Position_2_\",\r\n                \"_Blob_Near_Size_2_\",\r\n                \"_Blob_Pulse_2_\",\r\n                \"_Blob_Fade_2_\",\r\n                \"_Rate_\",\r\n                \"_Highlight_Color_\",\r\n                \"_Highlight_Width_\",\r\n                \"_Highlight_Transform_\",\r\n                \"_Highlight_\",\r\n                \"_Iridescence_Intensity_\",\r\n                \"_Iridescence_Edge_Intensity_\",\r\n                \"_Angle_\",\r\n                \"_Fade_Out_\",\r\n                \"_Reflected_\",\r\n                \"_Frequency_\",\r\n                \"_Vertical_Offset_\",\r\n                \"_Iridescent_Map_\",\r\n                \"_Use_Global_Left_Index_\",\r\n                \"_Use_Global_Right_Index_\",\r\n                \"Global_Left_Index_Tip_Position\",\r\n                \"Global_Right_Index_Tip_Position\",\r\n            ];\r\n            const samplers: string[] = [\"_Blob_Texture_\", \"_Iridescent_Map_\"];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines,\r\n                this._materialContext\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const defines = <FluentBackplateMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", this.getScene().getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", this.getScene().activeCamera?.position ?? Vector3.ZeroReadOnly);\r\n\r\n        // \"Round Rect\"\r\n        this._activeEffect.setFloat(\"_Radius_\", this.radius);\r\n        this._activeEffect.setFloat(\"_Line_Width_\", this.lineWidth);\r\n        this._activeEffect.setFloat(\"_Absolute_Sizes_\", this.absoluteSizes ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Filter_Width_\", this._filterWidth);\r\n        this._activeEffect.setDirectColor4(\"_Base_Color_\", this.baseColor);\r\n        this._activeEffect.setDirectColor4(\"_Line_Color_\", this.lineColor);\r\n\r\n        // \"Radii Multipliers\"\r\n        this._activeEffect.setFloat(\"_Radius_Top_Left_\", 1);\r\n        this._activeEffect.setFloat(\"_Radius_Top_Right_\", 1.0);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Left_\", 1.0);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Right_\", 1.0);\r\n\r\n        // \"Blob\"\r\n        //define BLOB_ENABLE true;\r\n        this._activeEffect.setFloat(\"_Blob_Intensity_\", this.blobIntensity);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_\", this.blobNearSize);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Size_\", this.blobFarSize);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Distance_\", this.blobNearDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Distance_\", this.blobFarDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_Length_\", this.blobFadeLength);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_\", this.blobPulse);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_\", this.blobFade);\r\n\r\n        // \"Blob Texture\"\r\n        this._activeEffect.setTexture(\"_Blob_Texture_\", this._blobTexture);\r\n\r\n        // \"Blob 2\"\r\n        //define BLOB_ENABLE_2 true;\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_2_\", this.blobNearSize2);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_2_\", this.blobPulse2);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_2_\", this.blobFade2);\r\n\r\n        // \"Line Highlight\"\r\n        this._activeEffect.setFloat(\"_Rate_\", this._rate);\r\n        this._activeEffect.setDirectColor4(\"_Highlight_Color_\", this.highlightColor);\r\n        this._activeEffect.setFloat(\"_Highlight_Width_\", this.highlightWidth);\r\n        this._activeEffect.setVector4(\"_Highlight_Transform_\", this._highlightTransform);\r\n        this._activeEffect.setFloat(\"_Highlight_\", this._highlight);\r\n\r\n        // \"Iridescence\"\r\n        this._activeEffect.setFloat(\"_Iridescence_Intensity_\", this.iridescenceIntensity);\r\n        this._activeEffect.setFloat(\"_Iridescence_Edge_Intensity_\", this.iridescenceEdgeIntensity);\r\n        this._activeEffect.setFloat(\"_Angle_\", this._angle);\r\n\r\n        // \"Fade\"\r\n        this._activeEffect.setFloat(\"_Fade_Out_\", this.fadeOut);\r\n\r\n        // \"Antialiasing\"\r\n        //define SMOOTH_EDGES true;\r\n\r\n        // \"ChooseAngle\"\r\n        this._activeEffect.setFloat(\"_Reflected_\", this._reflected ? 1.0 : 0.0);\r\n\r\n        // \"Multiply\"\r\n        this._activeEffect.setFloat(\"_Frequency_\", this._frequency);\r\n        this._activeEffect.setFloat(\"_Vertical_Offset_\", this._verticalOffset);\r\n\r\n        // \"Color Texture\"\r\n        //define IRIDESCENT_MAP_ENABLE true;\r\n        this._activeEffect.setTexture(\"_Iridescent_Map_\", this._iridescentMap);\r\n\r\n        // \"Global\"\r\n        this._activeEffect.setFloat(\"_Use_Global_Left_Index_\", 1.0);\r\n        this._activeEffect.setFloat(\"_Use_Global_Right_Index_\", 1.0);\r\n\r\n        this._globalLeftIndexTipPosition4.set(this.globalLeftIndexTipPosition.x, this.globalLeftIndexTipPosition.y, this.globalLeftIndexTipPosition.z, 1.0);\r\n        this._activeEffect.setVector4(\"Global_Left_Index_Tip_Position\", this._globalLeftIndexTipPosition4);\r\n\r\n        this._globalRightIndexTipPosition4.set(this.globalRightIndexTipPosition.x, this.globalRightIndexTipPosition.y, this.globalRightIndexTipPosition.z, 1.0);\r\n        this._activeEffect.setVector4(\"Global_Right_Index_Tip_Position\", this._globalRightIndexTipPosition4);\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n\r\n        this._blobTexture.dispose();\r\n        this._iridescentMap.dispose();\r\n    }\r\n\r\n    public clone(name: string): FluentBackplateMaterial {\r\n        return SerializationHelper.Clone(() => new FluentBackplateMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.customType = \"BABYLON.FluentBackplateMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"FluentBackplateMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): FluentBackplateMaterial {\r\n        return SerializationHelper.Parse(() => new FluentBackplateMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.FluentBackplateMaterial\", FluentBackplateMaterial);\r\n", "import type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { FluentBackplateMaterial } from \"../materials/fluentBackplate/fluentBackplateMaterial\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { SceneLoader } from \"core/Loading/sceneLoader\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\n\r\n/**\r\n * Class used to create a holographic backplate in 3D\r\n * @since 5.0.0\r\n */\r\nexport class HolographicBackplate extends Control3D {\r\n    /**\r\n     * Base Url for the button model.\r\n     */\r\n    public static MODEL_BASE_URL: string = \"https://assets.babylonjs.com/meshes/MRTK/\";\r\n    /**\r\n     * File name for the button model.\r\n     */\r\n    public static MODEL_FILENAME: string = \"mrtk-fluent-backplate.glb\";\r\n\r\n    private _model: AbstractMesh;\r\n    private _material: FluentBackplateMaterial;\r\n\r\n    /**\r\n     * Rendering ground id of the backplate mesh.\r\n     */\r\n    public set renderingGroupId(id: number) {\r\n        this._model.renderingGroupId = id;\r\n    }\r\n    public get renderingGroupId(): number {\r\n        return this._model.renderingGroupId;\r\n    }\r\n\r\n    /**\r\n     * Gets the material used by the backplate\r\n     */\r\n    public get material(): FluentBackplateMaterial {\r\n        return this._material;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this backplate shares its material with other HolographicBackplates\r\n     */\r\n    public get shareMaterials(): boolean {\r\n        return this._shareMaterials;\r\n    }\r\n\r\n    /**\r\n     * Creates a new holographic backplate\r\n     * @param name defines the control name\r\n     * @param _shareMaterials\r\n     */\r\n    constructor(\r\n        name?: string,\r\n        private _shareMaterials = true\r\n    ) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"HolographicBackplate\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        const collisionMesh = CreateBox(\r\n            (this.name ?? \"HolographicBackplate\") + \"_CollisionMesh\",\r\n            {\r\n                width: 1.0,\r\n                height: 1.0,\r\n                depth: 1.0,\r\n            },\r\n            scene\r\n        );\r\n        collisionMesh.isPickable = true;\r\n        collisionMesh.visibility = 0;\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, HolographicBackplate.MODEL_BASE_URL, HolographicBackplate.MODEL_FILENAME, scene).then((result) => {\r\n            const importedModel = result.meshes[1];\r\n            importedModel.name = `${this.name}_frontPlate`;\r\n            importedModel.isPickable = false;\r\n            importedModel.parent = collisionMesh;\r\n            if (this._material) {\r\n                importedModel.material = this._material;\r\n            }\r\n            this._model = importedModel;\r\n        });\r\n\r\n        return collisionMesh;\r\n    }\r\n\r\n    private _createMaterial(mesh: Mesh) {\r\n        this._material = new FluentBackplateMaterial(this.name + \" Material\", mesh.getScene());\r\n    }\r\n\r\n    protected _affectMaterial(mesh: Mesh) {\r\n        // Back\r\n        if (this._shareMaterials) {\r\n            if (!this._host._touchSharedMaterials[\"fluentBackplateMaterial\"]) {\r\n                this._createMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"fluentBackplateMaterial\"] = this._material;\r\n            } else {\r\n                this._material = this._host._touchSharedMaterials[\"fluentBackplateMaterial\"] as FluentBackplateMaterial;\r\n            }\r\n        } else {\r\n            this._createMaterial(mesh);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose(); // will dispose main mesh ie. back plate\r\n\r\n        if (!this.shareMaterials) {\r\n            this._material.dispose();\r\n        }\r\n\r\n        this._model.dispose();\r\n    }\r\n}\r\n", "import { Button3D } from \"./button3D\";\r\n\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { Mesh } from \"core/Meshes/mesh\";\r\nimport { CreatePlane } from \"core/Meshes/Builders/planeBuilder\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport { FadeInOutBehavior } from \"core/Behaviors/Meshes/fadeInOutBehavior\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { FluentMaterial } from \"../materials/fluent/fluentMaterial\";\r\nimport { StackPanel } from \"../../2D/controls/stackPanel\";\r\nimport { Image } from \"../../2D/controls/image\";\r\nimport { TextBlock } from \"../../2D/controls/textBlock\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { IsDocumentAvailable } from \"core/Misc/domManagement\";\r\n\r\n/**\r\n * Class used to create a holographic button in 3D\r\n */\r\nexport class HolographicButton extends Button3D {\r\n    private _backPlate: Mesh;\r\n    private _textPlate: Mesh;\r\n    private _frontPlate: Mesh;\r\n    private _text: string;\r\n    private _imageUrl: string;\r\n    private _shareMaterials = true;\r\n    private _frontMaterial: FluentMaterial;\r\n    private _backMaterial: FluentMaterial;\r\n    private _plateMaterial: StandardMaterial;\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n\r\n    // Tooltip\r\n    private _tooltipFade: Nullable<FadeInOutBehavior>;\r\n    private _tooltipTextBlock: Nullable<TextBlock>;\r\n    private _tooltipTexture: Nullable<AdvancedDynamicTexture>;\r\n    private _tooltipMesh: Nullable<Mesh>;\r\n    private _tooltipHoverObserver: Nullable<Observer<Control3D>>;\r\n    private _tooltipOutObserver: Nullable<Observer<Control3D>>;\r\n\r\n    private _disposeTooltip() {\r\n        this._tooltipFade = null;\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.dispose();\r\n        }\r\n        if (this._tooltipTexture) {\r\n            this._tooltipTexture.dispose();\r\n        }\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.dispose();\r\n        }\r\n        this.onPointerEnterObservable.remove(this._tooltipHoverObserver);\r\n        this.onPointerOutObservable.remove(this._tooltipOutObserver);\r\n    }\r\n\r\n    /**\r\n     * Rendering ground id of all the mesh in the button\r\n     */\r\n    public set renderingGroupId(id: number) {\r\n        this._backPlate.renderingGroupId = id;\r\n        this._textPlate.renderingGroupId = id;\r\n        this._frontPlate.renderingGroupId = id;\r\n\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.renderingGroupId = id;\r\n        }\r\n    }\r\n    public get renderingGroupId(): number {\r\n        return this._backPlate.renderingGroupId;\r\n    }\r\n\r\n    /**\r\n     * Text to be displayed on the tooltip shown when hovering on the button. When set to null tooltip is disabled. (Default: null)\r\n     */\r\n    public set tooltipText(text: Nullable<string>) {\r\n        if (!text) {\r\n            this._disposeTooltip();\r\n            return;\r\n        }\r\n        if (!this._tooltipFade) {\r\n            const rightHandedScene = this._backPlate._scene.useRightHandedSystem;\r\n            // Create tooltip with mesh and text\r\n            this._tooltipMesh = CreatePlane(\"\", { size: 1 }, this._backPlate._scene);\r\n            const tooltipBackground = CreatePlane(\"\", { size: 1, sideOrientation: Mesh.DOUBLESIDE }, this._backPlate._scene);\r\n            const mat = new StandardMaterial(\"\", this._backPlate._scene);\r\n            mat.diffuseColor = Color3.FromHexString(\"#212121\");\r\n            tooltipBackground.material = mat;\r\n            tooltipBackground.isPickable = false;\r\n            this._tooltipMesh.addChild(tooltipBackground);\r\n            tooltipBackground.position = Vector3.Forward(rightHandedScene).scale(0.05);\r\n            this._tooltipMesh.scaling.y = 1 / 3;\r\n            this._tooltipMesh.position = Vector3.Up().scale(0.7).add(Vector3.Forward(rightHandedScene).scale(-0.15));\r\n            this._tooltipMesh.isPickable = false;\r\n            this._tooltipMesh.parent = this._backPlate;\r\n\r\n            // Create text texture for the tooltip\r\n            this._tooltipTexture = AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh);\r\n            this._tooltipTextBlock = new TextBlock();\r\n            this._tooltipTextBlock.scaleY = 3;\r\n            this._tooltipTextBlock.color = \"white\";\r\n            this._tooltipTextBlock.fontSize = 130;\r\n            this._tooltipTexture.addControl(this._tooltipTextBlock);\r\n\r\n            // Add hover action to tooltip\r\n            this._tooltipFade = new FadeInOutBehavior();\r\n            this._tooltipFade.delay = 500;\r\n            this._tooltipMesh.addBehavior(this._tooltipFade);\r\n            this._tooltipHoverObserver = this.onPointerEnterObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(true);\r\n                }\r\n            });\r\n            this._tooltipOutObserver = this.onPointerOutObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(false);\r\n                }\r\n            });\r\n        }\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.text = text;\r\n        }\r\n    }\r\n\r\n    public get tooltipText() {\r\n        if (this._tooltipTextBlock) {\r\n            return this._tooltipTextBlock.text;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text for the button\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n\r\n        this._text = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image url for the button\r\n     */\r\n    public get imageUrl(): string {\r\n        return this._imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        if (this._imageUrl === value) {\r\n            return;\r\n        }\r\n\r\n        this._imageUrl = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets the back material used by this button\r\n     */\r\n    public get backMaterial(): FluentMaterial {\r\n        return this._backMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the front material used by this button\r\n     */\r\n    public get frontMaterial(): FluentMaterial {\r\n        return this._frontMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the plate material used by this button\r\n     */\r\n    public get plateMaterial(): StandardMaterial {\r\n        return this._plateMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this button shares its material with other HolographicButtons\r\n     */\r\n    public get shareMaterials(): boolean {\r\n        return this._shareMaterials;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     * @param shareMaterials\r\n     */\r\n    constructor(name?: string, shareMaterials = true) {\r\n        super(name);\r\n\r\n        this._shareMaterials = shareMaterials;\r\n\r\n        // Default animations\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this._frontPlate.setEnabled(true);\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this._frontPlate.setEnabled(false);\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"HolographicButton\";\r\n    }\r\n\r\n    private _rebuildContent(): void {\r\n        this._disposeFacadeTexture();\r\n\r\n        const panel = new StackPanel();\r\n        panel.isVertical = true;\r\n\r\n        if (IsDocumentAvailable() && !!document.createElement) {\r\n            if (this._imageUrl) {\r\n                const image = new Image();\r\n                image.source = this._imageUrl;\r\n                image.paddingTop = \"40px\";\r\n                image.height = \"180px\";\r\n                image.width = \"100px\";\r\n                image.paddingBottom = \"40px\";\r\n                panel.addControl(image);\r\n            }\r\n        }\r\n\r\n        if (this._text) {\r\n            const text = new TextBlock();\r\n            text.text = this._text;\r\n            text.color = \"white\";\r\n            text.height = \"30px\";\r\n            text.fontSize = 24;\r\n            panel.addControl(text);\r\n        }\r\n\r\n        if (this._frontPlate) {\r\n            this.content = panel;\r\n        }\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this._backPlate = CreateBox(\r\n            this.name + \"BackMesh\",\r\n            {\r\n                width: 1.0,\r\n                height: 1.0,\r\n                depth: 0.08,\r\n            },\r\n            scene\r\n        );\r\n\r\n        this._frontPlate = CreateBox(\r\n            this.name + \"FrontMesh\",\r\n            {\r\n                width: 1.0,\r\n                height: 1.0,\r\n                depth: 0.08,\r\n            },\r\n            scene\r\n        );\r\n\r\n        this._frontPlate.parent = this._backPlate;\r\n        this._frontPlate.position = Vector3.Forward(scene.useRightHandedSystem).scale(-0.08);\r\n        this._frontPlate.isPickable = false;\r\n        this._frontPlate.setEnabled(false);\r\n\r\n        this._textPlate = <Mesh>super._createNode(scene);\r\n        this._textPlate.parent = this._backPlate;\r\n        this._textPlate.position = Vector3.Forward(scene.useRightHandedSystem).scale(-0.08);\r\n        this._textPlate.isPickable = false;\r\n\r\n        return this._backPlate;\r\n    }\r\n\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        this._plateMaterial.emissiveTexture = facadeTexture;\r\n        this._plateMaterial.opacityTexture = facadeTexture;\r\n    }\r\n\r\n    private _createBackMaterial(mesh: Mesh) {\r\n        this._backMaterial = new FluentMaterial(this.name + \"Back Material\", mesh.getScene());\r\n        this._backMaterial.renderHoverLight = true;\r\n        this._pickedPointObserver = this._host.onPickedPointChangedObservable.add((pickedPoint) => {\r\n            if (pickedPoint) {\r\n                this._backMaterial.hoverPosition = pickedPoint;\r\n                this._backMaterial.hoverColor.a = 1.0;\r\n            } else {\r\n                this._backMaterial.hoverColor.a = 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    private _createFrontMaterial(mesh: Mesh) {\r\n        this._frontMaterial = new FluentMaterial(this.name + \"Front Material\", mesh.getScene());\r\n        this._frontMaterial.innerGlowColorIntensity = 0; // No inner glow\r\n        this._frontMaterial.alpha = 0.5; // Additive\r\n        this._frontMaterial.renderBorders = true;\r\n    }\r\n\r\n    private _createPlateMaterial(mesh: Mesh) {\r\n        this._plateMaterial = new StandardMaterial(this.name + \"Plate Material\", mesh.getScene());\r\n        this._plateMaterial.specularColor = Color3.Black();\r\n    }\r\n\r\n    protected _affectMaterial(mesh: Mesh) {\r\n        // Back\r\n        if (this._shareMaterials) {\r\n            if (!this._host._sharedMaterials[\"backFluentMaterial\"]) {\r\n                this._createBackMaterial(mesh);\r\n                this._host._sharedMaterials[\"backFluentMaterial\"] = this._backMaterial;\r\n            } else {\r\n                this._backMaterial = this._host._sharedMaterials[\"backFluentMaterial\"] as FluentMaterial;\r\n            }\r\n\r\n            // Front\r\n            if (!this._host._sharedMaterials[\"frontFluentMaterial\"]) {\r\n                this._createFrontMaterial(mesh);\r\n                this._host._sharedMaterials[\"frontFluentMaterial\"] = this._frontMaterial;\r\n            } else {\r\n                this._frontMaterial = this._host._sharedMaterials[\"frontFluentMaterial\"] as FluentMaterial;\r\n            }\r\n        } else {\r\n            this._createBackMaterial(mesh);\r\n            this._createFrontMaterial(mesh);\r\n        }\r\n\r\n        this._createPlateMaterial(mesh);\r\n        this._backPlate.material = this._backMaterial;\r\n        this._frontPlate.material = this._frontMaterial;\r\n        this._textPlate.material = this._plateMaterial;\r\n\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose(); // will dispose main mesh ie. back plate\r\n\r\n        this._disposeTooltip();\r\n\r\n        if (!this.shareMaterials) {\r\n            this._backMaterial.dispose();\r\n            this._frontMaterial.dispose();\r\n            this._plateMaterial.dispose();\r\n\r\n            if (this._pickedPointObserver) {\r\n                this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n                this._pickedPointObserver = null;\r\n            }\r\n        }\r\n    }\r\n}\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"fluentButtonPixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;uniform float _Edge_Width_;uniform vec4 _Edge_Color_;uniform bool _Relative_Width_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Active_Face_Dir_;uniform vec3 _Active_Face_Up_;uniform bool Enable_Fade;uniform float _Fade_Width_;uniform bool _Smooth_Active_Face_;uniform bool _Show_Frame_;uniform bool _Use_Blob_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;void Holo_Edge_Fragment_B35(\nvec4 Edges,\nfloat Edge_Width,\nout float NotEdge)\n{vec2 c=vec2(min(Edges.r,Edges.g),min(Edges.b,Edges.a));vec2 df=fwidth(c)*Edge_Width;vec2 g=clamp(c/df,0.0,1.0);NotEdge=g.x*g.y;}\nvoid Blob_Fragment_B39(\nvec2 UV,\nvec3 Blob_Info,\nsampler2D Blob_Texture,\nout vec4 Blob_Color)\n{float k=dot(UV,UV);Blob_Color=Blob_Info.y*texture(Blob_Texture,vec2(vec2(sqrt(k),Blob_Info.x).x,1.0-vec2(sqrt(k),Blob_Info.x).y))*(1.0-clamp(k,0.0,1.0));}\nvec2 FilterStep(vec2 Edge,vec2 X)\n{vec2 dX=max(fwidth(X),vec2(0.00001,0.00001));return clamp( (X+dX-max(Edge,X-dX))/(dX*2.0),0.0,1.0);}\nvoid Wireframe_Fragment_B59(\nvec3 Widths,\nvec2 UV,\nfloat Proximity,\nvec4 Edge_Color,\nout vec4 Wireframe)\n{vec2 c=min(UV,vec2(1.0,1.0)-UV);vec2 g=FilterStep(Widths.xy*0.5,c); \nWireframe=(1.0-min(g.x,g.y))*Proximity*Edge_Color;}\nvoid Proximity_B53(\nvec3 Proximity_Center,\nvec3 Proximity_Center_2,\nfloat Proximity_Max_Intensity,\nfloat Proximity_Near_Radius,\nvec3 Position,\nvec3 Show_Selection,\nvec4 Extra1,\nfloat Dist_To_Face,\nfloat Intensity,\nout float Proximity)\n{vec2 delta1=Extra1.xy;vec2 delta2=Extra1.zw;float d2=sqrt(min(dot(delta1,delta1),dot(delta2,delta2))+Dist_To_Face*Dist_To_Face);Proximity=Intensity*Proximity_Max_Intensity*(1.0-clamp(d2/Proximity_Near_Radius,0.0,1.0))*(1.0-Show_Selection.x)+Show_Selection.x;}\nvoid To_XYZ_B46(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}\nvoid main()\n{float NotEdge_Q35;\n#if ENABLE_FADE\nHolo_Edge_Fragment_B35(vColor,_Fade_Width_,NotEdge_Q35);\n#else\nNotEdge_Q35=1.0;\n#endif\nvec4 Blob_Color_Q39;float k=dot(vUV,vUV);vec2 blobTextureCoord=vec2(vec2(sqrt(k),vTangent.x).x,1.0-vec2(sqrt(k),vTangent.x).y);vec4 blobColor=mix(vec4(1.0,1.0,1.0,1.0)*step(1.0-vTangent.x,clamp(sqrt(k)+0.1,0.0,1.0)),texture(_Blob_Texture_,blobTextureCoord),float(_Use_Blob_Texture_));Blob_Color_Q39=vTangent.y*blobColor*(1.0-clamp(k,0.0,1.0));float Is_Quad_Q24;Is_Quad_Q24=vNormal.z;vec3 Blob_Position_Q41= mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(Use_Global_Left_Index));vec3 Blob_Position_Q42= mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(Use_Global_Right_Index));float X_Q46;float Y_Q46;float Z_Q46;To_XYZ_B46(vBinormal,X_Q46,Y_Q46,Z_Q46);float Proximity_Q53;Proximity_B53(Blob_Position_Q41,Blob_Position_Q42,_Proximity_Max_Intensity_,_Proximity_Near_Radius_,vPosition,vBinormal,vExtra1,Y_Q46,Z_Q46,Proximity_Q53);vec4 Wireframe_Q59;Wireframe_Fragment_B59(vNormal,vUV,Proximity_Q53,_Edge_Color_,Wireframe_Q59);vec4 Wire_Or_Blob_Q23=mix(Wireframe_Q59,Blob_Color_Q39,Is_Quad_Q24);vec4 Result_Q22;Result_Q22=mix(Wire_Or_Blob_Q23,vec4(0.3,0.3,0.3,0.3),float(_Show_Frame_));vec4 Final_Color_Q37=NotEdge_Q35*Result_Q22;vec4 Out_Color=Final_Color_Q37;float Clip_Threshold=0.0;bool To_sRGB=false;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const fluentButtonPixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"fluentButtonVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;attribute vec4 color;uniform float _Edge_Width_;uniform vec4 _Edge_Color_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Active_Face_Dir_;uniform vec3 _Active_Face_Up_;uniform bool _Enable_Fade_;uniform float _Fade_Width_;uniform bool _Smooth_Active_Face_;uniform bool _Show_Frame_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;void Blob_Vertex_B47(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nvec4 Vx_Color,\nvec2 UV,\nvec3 Face_Center,\nvec2 Face_Size,\nvec2 In_UV,\nfloat Blob_Fade_Length,\nfloat Selection_Fade,\nfloat Selection_Fade_Size,\nfloat Inner_Fade,\nvec3 Active_Face_Center,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nfloat Blob_Enabled,\nout vec3 Out_Position,\nout vec2 Out_UV,\nout vec3 Blob_Info)\n{float blobSize,fadeIn;vec3 Hit_Position;Blob_Info=vec3(0.0,0.0,0.0);float Hit_Distance=dot(Blob_Position-Face_Center,Normal);Hit_Position=Blob_Position-Hit_Distance*Normal;float absD=abs(Hit_Distance);float lerpVal=clamp((absD-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);fadeIn=1.0-clamp((absD-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float innerFade=1.0-clamp(-Hit_Distance/Inner_Fade,0.0,1.0);float farClip=clamp(1.0-step(Blob_Far_Distance+Blob_Fade_Length,absD),0.0,1.0);float size=mix(Blob_Near_Size,Blob_Far_Size,lerpVal)*farClip;blobSize=mix(size,Selection_Fade_Size,Selection_Fade)*innerFade*Blob_Enabled;Blob_Info.x=lerpVal*0.5+0.5;Blob_Info.y=fadeIn*Intensity*(1.0-Selection_Fade)*Blob_Fade;Blob_Info.x*=(1.0-Blob_Pulse);vec3 delta=Hit_Position-Face_Center;vec2 blobCenterXY=vec2(dot(delta,Tangent),dot(delta,Bitangent));vec2 quadUVin=2.0*UV-1.0; \nvec2 blobXY=blobCenterXY+quadUVin*blobSize;vec2 blobClipped=clamp(blobXY,-Face_Size*0.5,Face_Size*0.5);vec2 blobUV=(blobClipped-blobCenterXY)/max(blobSize,0.0001)*2.0;vec3 blobCorner=Face_Center+blobClipped.x*Tangent+blobClipped.y*Bitangent;Out_Position=mix(Position,blobCorner,Vx_Color.rrr);Out_UV=mix(In_UV,blobUV,Vx_Color.rr);}\nvec2 ProjectProximity(\nvec3 blobPosition,\nvec3 position,\nvec3 center,\nvec3 dir,\nvec3 xdir,\nvec3 ydir,\nout float vdistance\n)\n{vec3 delta=blobPosition-position;vec2 xy=vec2(dot(delta,xdir),dot(delta,ydir));vdistance=abs(dot(delta,dir));return xy;}\nvoid Proximity_Vertex_B66(\nvec3 Blob_Position,\nvec3 Blob_Position_2,\nvec3 Active_Face_Center,\nvec3 Active_Face_Dir,\nvec3 Position,\nfloat Proximity_Far_Distance,\nfloat Relative_Scale,\nfloat Proximity_Anisotropy,\nvec3 Up,\nout vec4 Extra1,\nout float Distance_To_Face,\nout float Intensity)\n{vec3 Active_Face_Dir_X=normalize(cross(Active_Face_Dir,Up));vec3 Active_Face_Dir_Y=cross(Active_Face_Dir,Active_Face_Dir_X);float distz1,distz2;Extra1.xy=ProjectProximity(Blob_Position,Position,Active_Face_Center,Active_Face_Dir,Active_Face_Dir_X*Proximity_Anisotropy,Active_Face_Dir_Y,distz1)/Relative_Scale;Extra1.zw=ProjectProximity(Blob_Position_2,Position,Active_Face_Center,Active_Face_Dir,Active_Face_Dir_X*Proximity_Anisotropy,Active_Face_Dir_Y,distz2)/Relative_Scale;Distance_To_Face=dot(Active_Face_Dir,Position-Active_Face_Center);Intensity=1.0-clamp(min(distz1,distz2)/Proximity_Far_Distance,0.0,1.0);}\nvoid Holo_Edge_Vertex_B44(\nvec3 Incident,\nvec3 Normal,\nvec2 UV,\nvec3 Tangent,\nvec3 Bitangent,\nbool Smooth_Active_Face,\nfloat Active,\nout vec4 Holo_Edges)\n{float NdotI=dot(Incident,Normal);vec2 flip=(UV-vec2(0.5,0.5));float udot=dot(Incident,Tangent)*flip.x*NdotI;float uval=1.0-float(udot>0.0);float vdot=-dot(Incident,Bitangent)*flip.y*NdotI;float vval=1.0-float(vdot>0.0);float Smooth_And_Active=step(1.0,float(Smooth_Active_Face && Active>0.0));uval=mix(uval,max(1.0,uval),Smooth_And_Active); \nvval=mix(vval,max(1.0,vval),Smooth_And_Active);Holo_Edges=vec4(1.0,1.0,1.0,1.0)-vec4(uval*UV.x,uval*(1.0-UV.x),vval*UV.y,vval*(1.0-UV.y));}\nvoid Object_To_World_Pos_B13(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}\nvoid Choose_Blob_B38(\nvec4 Vx_Color,\nvec3 Position1,\nvec3 Position2,\nbool Blob_Enable_1,\nbool Blob_Enable_2,\nfloat Near_Size_1,\nfloat Near_Size_2,\nfloat Blob_Inner_Fade_1,\nfloat Blob_Inner_Fade_2,\nfloat Blob_Pulse_1,\nfloat Blob_Pulse_2,\nfloat Blob_Fade_1,\nfloat Blob_Fade_2,\nout vec3 Position,\nout float Near_Size,\nout float Inner_Fade,\nout float Blob_Enable,\nout float Fade,\nout float Pulse)\n{Position=Position1*(1.0-Vx_Color.g)+Vx_Color.g*Position2;float b1=float(Blob_Enable_1);float b2=float(Blob_Enable_2);Blob_Enable=b1+(b2-b1)*Vx_Color.g;Pulse=Blob_Pulse_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Pulse_2;Fade=Blob_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Fade_2;Near_Size=Near_Size_1*(1.0-Vx_Color.g)+Vx_Color.g*Near_Size_2;Inner_Fade=Blob_Inner_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Inner_Fade_2;}\nvoid Wireframe_Vertex_B51(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nfloat Edge_Width,\nvec2 Face_Size,\nout vec3 Wire_Vx_Pos,\nout vec2 UV,\nout vec2 Widths)\n{Widths.xy=Edge_Width/Face_Size;float x=dot(Position,Tangent);float y=dot(Position,Bitangent);float dx=0.5-abs(x);float newx=(0.5-dx*Widths.x*2.0)*sign(x);float dy=0.5-abs(y);float newy=(0.5-dy*Widths.y*2.0)*sign(y);Wire_Vx_Pos=Normal*0.5+newx*Tangent+newy*Bitangent;UV.x=dot(Wire_Vx_Pos,Tangent)+0.5;UV.y=dot(Wire_Vx_Pos,Bitangent)+0.5;}\nvec2 ramp2(vec2 start,vec2 end,vec2 x)\n{return clamp((x-start)/(end-start),vec2(0.0,0.0),vec2(1.0,1.0));}\nfloat computeSelection(\nvec3 blobPosition,\nvec3 normal,\nvec3 tangent,\nvec3 bitangent,\nvec3 faceCenter,\nvec2 faceSize,\nfloat selectionFuzz,\nfloat farDistance,\nfloat fadeLength\n)\n{vec3 delta=blobPosition-faceCenter;float absD=abs(dot(delta,normal));float fadeIn=1.0-clamp((absD-farDistance)/fadeLength,0.0,1.0);vec2 blobCenterXY=vec2(dot(delta,tangent),dot(delta,bitangent));vec2 innerFace=faceSize*(1.0-selectionFuzz)*0.5;vec2 selectPulse=ramp2(-faceSize*0.5,-innerFace,blobCenterXY)-ramp2(innerFace,faceSize*0.5,blobCenterXY);return selectPulse.x*selectPulse.y*fadeIn;}\nvoid Selection_Vertex_B48(\nvec3 Blob_Position,\nvec3 Blob_Position_2,\nvec3 Face_Center,\nvec2 Face_Size,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nfloat Selection_Fuzz,\nfloat Selected,\nfloat Far_Distance,\nfloat Fade_Length,\nvec3 Active_Face_Dir,\nout float Show_Selection)\n{float select1=computeSelection(Blob_Position,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);float select2=computeSelection(Blob_Position_2,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);float Active=max(0.0,dot(Active_Face_Dir,Normal));Show_Selection=mix(max(select1,select2),1.0,Selected)*Active;}\nvoid Proximity_Visibility_B54(\nfloat Selection,\nvec3 Proximity_Center,\nvec3 Proximity_Center_2,\nfloat Input_Width,\nfloat Proximity_Far_Distance,\nfloat Proximity_Radius,\nvec3 Active_Face_Center,\nvec3 Active_Face_Dir,\nout float Width)\n{vec3 boxEdges=(world*vec4(vec3(0.5,0.5,0.5),0.0)).xyz;float boxMaxSize=length(boxEdges);float d1=dot(Proximity_Center-Active_Face_Center,Active_Face_Dir);vec3 blob1=Proximity_Center-d1*Active_Face_Dir;float d2=dot(Proximity_Center_2-Active_Face_Center,Active_Face_Dir);vec3 blob2=Proximity_Center_2-d2*Active_Face_Dir;vec3 delta1=blob1-Active_Face_Center;vec3 delta2=blob2-Active_Face_Center;float dist1=dot(delta1,delta1);float dist2=dot(delta2,delta2);float nearestProxDist=sqrt(min(dist1,dist2));Width=Input_Width*(1.0-step(boxMaxSize+Proximity_Radius,nearestProxDist))*(1.0-step(Proximity_Far_Distance,min(d1,d2))*(1.0-step(0.0001,Selection)));}\nvoid Object_To_World_Dir_B67(\nvec3 Dir_Object,\nout vec3 Dir_World)\n{Dir_World=(world*vec4(Dir_Object,0.0)).xyz;}\nvoid main()\n{vec3 Active_Face_Center_Q49;Active_Face_Center_Q49=(world*vec4(_Active_Face_Dir_*0.5,1.0)).xyz;vec3 Blob_Position_Q41= mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(Use_Global_Left_Index));vec3 Blob_Position_Q42= mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(Use_Global_Right_Index));vec3 Active_Face_Dir_Q64=normalize((world*vec4(_Active_Face_Dir_,0.0)).xyz);float Relative_Scale_Q57;\n#if RELATIVE_WIDTH\nRelative_Scale_Q57=length((world*vec4(vec3(0,1,0),0.0)).xyz);\n#else\nRelative_Scale_Q57=1.0;\n#endif\nvec3 Tangent_World_Q30;Tangent_World_Q30=(world*vec4(tangent,0.0)).xyz;vec3 Binormal_World_Q31;Binormal_World_Q31=(world*vec4((cross(normal,tangent)),0.0)).xyz;vec3 Normal_World_Q60;Normal_World_Q60=(world*vec4(normal,0.0)).xyz;vec3 Result_Q18=0.5*normal;vec3 Dir_World_Q67;Object_To_World_Dir_B67(_Active_Face_Up_,Dir_World_Q67);float Product_Q56=_Edge_Width_*Relative_Scale_Q57;vec3 Normal_World_N_Q29=normalize(Normal_World_Q60);vec3 Tangent_World_N_Q28=normalize(Tangent_World_Q30);vec3 Binormal_World_N_Q32=normalize(Binormal_World_Q31);vec3 Position_Q38;float Near_Size_Q38;float Inner_Fade_Q38;float Blob_Enable_Q38;float Fade_Q38;float Pulse_Q38;Choose_Blob_B38(color,Blob_Position_Q41,Blob_Position_Q42,_Blob_Enable_,_Blob_Enable_2_,_Blob_Near_Size_,_Blob_Near_Size_2_,_Blob_Inner_Fade_,_Blob_Inner_Fade_2_,_Blob_Pulse_,_Blob_Pulse_2_,_Blob_Fade_,_Blob_Fade_2_,Position_Q38,Near_Size_Q38,Inner_Fade_Q38,Blob_Enable_Q38,Fade_Q38,Pulse_Q38);vec3 Face_Center_Q33;Face_Center_Q33=(world*vec4(Result_Q18,1.0)).xyz;vec2 Face_Size_Q50=vec2(length(Tangent_World_Q30),length(Binormal_World_Q31));float Show_Selection_Q48;Selection_Vertex_B48(Blob_Position_Q41,Blob_Position_Q42,Face_Center_Q33,Face_Size_Q50,Normal_World_N_Q29,Tangent_World_N_Q28,Binormal_World_N_Q32,_Selection_Fuzz_,_Selected_,_Selected_Distance_,_Selected_Fade_Length_,Active_Face_Dir_Q64,Show_Selection_Q48);vec3 Normalized_Q72=normalize(Dir_World_Q67);float Active_Q34=max(0.0,dot(Active_Face_Dir_Q64,Normal_World_N_Q29));float Width_Q54;Proximity_Visibility_B54(Show_Selection_Q48,Blob_Position_Q41,Blob_Position_Q42,Product_Q56,_Proximity_Far_Distance_,_Proximity_Near_Radius_,Active_Face_Center_Q49,Active_Face_Dir_Q64,Width_Q54);vec3 Wire_Vx_Pos_Q51;vec2 UV_Q51;vec2 Widths_Q51;Wireframe_Vertex_B51(position,normal,tangent,(cross(normal,tangent)),Width_Q54,Face_Size_Q50,Wire_Vx_Pos_Q51,UV_Q51,Widths_Q51);vec3 Vec3_Q27=vec3(Widths_Q51.x,Widths_Q51.y,color.r);vec3 Pos_World_Q13;Object_To_World_Pos_B13(Wire_Vx_Pos_Q51,Pos_World_Q13);vec3 Incident_Q36=normalize(Pos_World_Q13-cameraPosition);vec3 Out_Position_Q47;vec2 Out_UV_Q47;vec3 Blob_Info_Q47;Blob_Vertex_B47(Pos_World_Q13,Normal_World_N_Q29,Tangent_World_N_Q28,Binormal_World_N_Q32,Position_Q38,_Blob_Intensity_,Near_Size_Q38,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,color,uv,Face_Center_Q33,Face_Size_Q50,UV_Q51,_Blob_Fade_Length_,_Selection_Fade_,_Selection_Fade_Size_,Inner_Fade_Q38,Active_Face_Center_Q49,Pulse_Q38,Fade_Q38,Blob_Enable_Q38,Out_Position_Q47,Out_UV_Q47,Blob_Info_Q47);vec4 Extra1_Q66;float Distance_To_Face_Q66;float Intensity_Q66;Proximity_Vertex_B66(Blob_Position_Q41,Blob_Position_Q42,Active_Face_Center_Q49,Active_Face_Dir_Q64,Pos_World_Q13,_Proximity_Far_Distance_,Relative_Scale_Q57,_Proximity_Anisotropy_,Normalized_Q72,Extra1_Q66,Distance_To_Face_Q66,Intensity_Q66);vec4 Holo_Edges_Q44;Holo_Edge_Vertex_B44(Incident_Q36,Normal_World_N_Q29,uv,Tangent_World_Q30,Binormal_World_Q31,_Smooth_Active_Face_,Active_Q34,Holo_Edges_Q44);vec3 Vec3_Q19=vec3(Show_Selection_Q48,Distance_To_Face_Q66,Intensity_Q66);vec3 Position=Out_Position_Q47;vec2 UV=Out_UV_Q47;vec3 Tangent=Blob_Info_Q47;vec3 Binormal=Vec3_Q19;vec3 Normal=Vec3_Q27;vec4 Extra1=Extra1_Q66;vec4 Color=Holo_Edges_Q44;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const fluentButtonVertexShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { serializeAsColor4, serializeAsVector3, serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector3, Vector4 } from \"core/Maths/math.vector\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\nimport \"./shaders/fluentButton.fragment\";\r\nimport \"./shaders/fluentButton.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @internal */\r\nclass FluentButtonMaterialDefines extends MaterialDefines {\r\n    public RELATIVE_WIDTH = true;\r\n    public ENABLE_FADE = true;\r\n\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this._needUVs = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render square buttons with fluent design\r\n * @since 5.0.0\r\n */\r\nexport class FluentButtonMaterial extends PushMaterial {\r\n    /**\r\n     * URL pointing to the texture used to define the coloring for the fluent blob effect.\r\n     */\r\n    public static BLOB_TEXTURE_URL = \"https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-button-blob.png\";\r\n\r\n    /**\r\n     * Gets or sets the width of the glowing edge, relative to the scale of the button.\r\n     * (Default is 4% of the height).\r\n     */\r\n    @serialize()\r\n    public edgeWidth = 0.04;\r\n\r\n    /**\r\n     * Gets or sets the color of the glowing edge.\r\n     */\r\n    @serializeAsColor4()\r\n    public edgeColor = new Color4(0.592157, 0.592157, 0.592157, 1.0);\r\n\r\n    /**\r\n     * Gets or sets the maximum intensity of the proximity light.\r\n     */\r\n    @serialize()\r\n    public proximityMaxIntensity = 0.45;\r\n\r\n    /**\r\n     * Gets or sets the maximum distance for the proximity light (Default is 16mm).\r\n     */\r\n    @serialize()\r\n    public proximityFarDistance = 0.16;\r\n\r\n    /**\r\n     * Gets or sets the radius of the proximity light when near to the surface.\r\n     */\r\n    @serialize()\r\n    public proximityNearRadius = 1.5;\r\n\r\n    /**\r\n     * Gets or sets the anisotropy of the proximity light.\r\n     */\r\n    @serialize()\r\n    public proximityAnisotropy = 1;\r\n\r\n    /**\r\n     * Gets or sets the amount of fuzzing in the selection focus.\r\n     */\r\n    @serialize()\r\n    public selectionFuzz = 0.5;\r\n\r\n    /**\r\n     * Gets or sets an override value to display the button as selected.\r\n     */\r\n    @serialize()\r\n    public selected = 0;\r\n\r\n    /**\r\n     * Gets or sets a value to manually fade the blob size.\r\n     */\r\n    @serialize()\r\n    public selectionFade = 0;\r\n\r\n    /**\r\n     * Gets or sets a value to manually shrink the blob size as it fades (see selectionFade).\r\n     */\r\n    @serialize()\r\n    public selectionFadeSize = 0.3;\r\n\r\n    /**\r\n     * Gets or sets the distance from the button the cursor should be for the button\r\n     * to appear selected (Default is 8cm).\r\n     */\r\n    @serialize()\r\n    public selectedDistance = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the fall-off distance for the selection fade (Default is 8cm).\r\n     */\r\n    @serialize()\r\n    public selectedFadeLength = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the luminous blob (Ranges 0-1, default is 0.5).\r\n     */\r\n    @serialize()\r\n    public blobIntensity = 0.5;\r\n\r\n    /**\r\n     * The size of the blob when the pointer is at the blobFarDistance (Default is 5cm).\r\n     */\r\n    @serialize()\r\n    public blobFarSize = 0.05;\r\n\r\n    /**\r\n     * The distance at which the pointer is considered near. See [left|right]BlobNearSize. (Default is 0cm).\r\n     */\r\n    @serialize()\r\n    public blobNearDistance = 0;\r\n\r\n    /**\r\n     * The distance at which the pointer is considered far. See [left|right]BlobFarSize. (Default is 8cm).\r\n     */\r\n    @serialize()\r\n    public blobFarDistance = 0.08;\r\n\r\n    /**\r\n     * The distance over which the blob intensity fades from full to none (Default is 8cm).\r\n     */\r\n    @serialize()\r\n    public blobFadeLength = 0.08;\r\n\r\n    /**\r\n     * Gets or sets whether the blob corresponding to the left index finger is enabled.\r\n     */\r\n    @serialize()\r\n    public leftBlobEnable = true;\r\n\r\n    /**\r\n     * Gets or sets the size of the left blob when the left pointer is considered near. See blobNearDistance. (Default is 2.5cm).\r\n     */\r\n    @serialize()\r\n    public leftBlobNearSize = 0.025;\r\n\r\n    /**\r\n     * Gets or sets the progress of the pulse animation on the left blob (Ranges 0-1).\r\n     */\r\n    @serialize()\r\n    public leftBlobPulse = 0;\r\n\r\n    /**\r\n     * Gets or sets the fade factor on the left blob.\r\n     */\r\n    @serialize()\r\n    public leftBlobFade = 1;\r\n\r\n    /**\r\n     * Gets or sets the inner fade on the left blob;\r\n     */\r\n    @serialize()\r\n    public leftBlobInnerFade = 0.01;\r\n\r\n    /**\r\n     * Gets or sets whether the blob corresponding to the right index finger is enabled.\r\n     */\r\n    @serialize()\r\n    public rightBlobEnable = true;\r\n\r\n    /**\r\n     * Gets or sets the size of the right blob when the right pointer is considered near. See blobNearDistance. (Default is 2.5cm).\r\n     */\r\n    @serialize()\r\n    public rightBlobNearSize = 0.025;\r\n\r\n    /**\r\n     * Gets or sets the progress of the pulse animation on the right blob (Ranges 0-1).\r\n     */\r\n    @serialize()\r\n    public rightBlobPulse = 0;\r\n\r\n    /**\r\n     * Gets or sets the fade factor on the right blob.\r\n     */\r\n    @serialize()\r\n    public rightBlobFade = 1;\r\n\r\n    /**\r\n     * Gets or sets the inner fade on the right blob;\r\n     */\r\n    @serialize()\r\n    public rightBlobInnerFade = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the direction of the active face before the world transform is applied.\r\n     * This should almost always be set to -z.\r\n     */\r\n    @serializeAsVector3()\r\n    public activeFaceDir = new Vector3(0, 0, -1);\r\n\r\n    /**\r\n     * Gets or sets the button's up direction before the world transform is applied.\r\n     * This should almost always be set to +y.\r\n     */\r\n    @serializeAsVector3()\r\n    public activeFaceUp = new Vector3(0, 1, 0);\r\n\r\n    /**\r\n     * Gets or sets whether the edge fade effect is enabled.\r\n     */\r\n    @serialize()\r\n    public enableFade = true;\r\n\r\n    /**\r\n     * Gets or sets a value corresponding to the width of the edge fade effect (Default 1.5).\r\n     */\r\n    @serialize()\r\n    public fadeWidth = 1.5;\r\n\r\n    /**\r\n     * Gets or sets whether the active face is smoothly interpolated.\r\n     */\r\n    @serialize()\r\n    public smoothActiveFace = true;\r\n\r\n    /**\r\n     * Gets or sets whether the frame of the fluent button model is visible.\r\n     * This is usually only enabled for debugging purposes.\r\n     */\r\n    @serialize()\r\n    public showFrame = false;\r\n\r\n    /**\r\n     * Gets or sets whether the blob color texture is used for the proximity\r\n     * light effect. This is usually only disabled for debugging purposes.\r\n     */\r\n    @serialize()\r\n    public useBlobTexture = true;\r\n\r\n    /**\r\n     * Gets or sets the world-space position of the tip of the left index finger.\r\n     */\r\n    @serializeAsVector3()\r\n    public globalLeftIndexTipPosition = Vector3.Zero();\r\n\r\n    /**\r\n     * Gets or sets the world-space position of the tip of the right index finger.\r\n     */\r\n    @serializeAsVector3()\r\n    public globalRightIndexTipPosition = Vector3.Zero();\r\n\r\n    private _blobTexture: Texture;\r\n\r\n    constructor(name: string, scene?: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_ADD;\r\n        this.disableDepthWrite = true;\r\n        this.backFaceCulling = false;\r\n\r\n        this._blobTexture = new Texture(FluentButtonMaterial.BLOB_TEXTURE_URL, this.getScene(), true, false, Texture.NEAREST_SAMPLINGMODE);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return true;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return true;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new FluentButtonMaterialDefines();\r\n        }\r\n\r\n        const defines = <FluentButtonMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, true, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"fluentButton\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n\r\n                \"_Edge_Width_\",\r\n                \"_Edge_Color_\",\r\n                \"_Relative_Width_\",\r\n                \"_Proximity_Max_Intensity_\",\r\n                \"_Proximity_Far_Distance_\",\r\n                \"_Proximity_Near_Radius_\",\r\n                \"_Proximity_Anisotropy_\",\r\n                \"_Selection_Fuzz_\",\r\n                \"_Selected_\",\r\n                \"_Selection_Fade_\",\r\n                \"_Selection_Fade_Size_\",\r\n                \"_Selected_Distance_\",\r\n                \"_Selected_Fade_Length_\",\r\n                \"_Blob_Enable_\",\r\n                \"_Blob_Position_\",\r\n                \"_Blob_Intensity_\",\r\n                \"_Blob_Near_Size_\",\r\n                \"_Blob_Far_Size_\",\r\n                \"_Blob_Near_Distance_\",\r\n                \"_Blob_Far_Distance_\",\r\n                \"_Blob_Fade_Length_\",\r\n                \"_Blob_Inner_Fade_\",\r\n                \"_Blob_Pulse_\",\r\n                \"_Blob_Fade_\",\r\n                \"_Blob_Texture_\",\r\n                \"_Blob_Enable_2_\",\r\n                \"_Blob_Position_2_\",\r\n                \"_Blob_Near_Size_2_\",\r\n                \"_Blob_Inner_Fade_2_\",\r\n                \"_Blob_Pulse_2_\",\r\n                \"_Blob_Fade_2_\",\r\n                \"_Active_Face_Dir_\",\r\n                \"_Active_Face_Up_\",\r\n                \"_Enable_Fade_\",\r\n                \"_Fade_Width_\",\r\n                \"_Smooth_Active_Face_\",\r\n                \"_Show_Frame_\",\r\n                \"_Use_Blob_Texture_\",\r\n\r\n                \"Use_Global_Left_Index\",\r\n                \"Use_Global_Right_Index\",\r\n                \"Global_Left_Index_Tip_Position\",\r\n                \"Global_Right_Index_Tip_Position\",\r\n                \"Global_Left_Thumb_Tip_Position\",\r\n                \"Global_Right_Thumb_Tip_Position\",\r\n                \"Global_Left_Index_Tip_Proximity\",\r\n                \"Global_Right_Index_Tip_Proximity\",\r\n            ];\r\n            const samplers: string[] = [\"_Blob_Texture_\"];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines,\r\n                this._materialContext\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const scene = this.getScene();\r\n\r\n        const defines = <FluentButtonMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", scene.activeCamera!.position);\r\n\r\n        // \"Blob Texture\"\r\n        this._activeEffect.setTexture(\"_Blob_Texture_\", this._blobTexture);\r\n\r\n        // \"Wireframe\"\r\n        this._activeEffect.setFloat(\"_Edge_Width_\", this.edgeWidth);\r\n        this._activeEffect.setColor4(\"_Edge_Color_\", new Color3(this.edgeColor.r, this.edgeColor.g, this.edgeColor.b), this.edgeColor.a);\r\n        //define _Relative_Width_ true;\r\n\r\n        // \"Proximity\"\r\n        this._activeEffect.setFloat(\"_Proximity_Max_Intensity_\", this.proximityMaxIntensity);\r\n        this._activeEffect.setFloat(\"_Proximity_Far_Distance_\", this.proximityFarDistance);\r\n        this._activeEffect.setFloat(\"_Proximity_Near_Radius_\", this.proximityNearRadius);\r\n        this._activeEffect.setFloat(\"_Proximity_Anisotropy_\", this.proximityAnisotropy);\r\n\r\n        // \"Selection\"\r\n        this._activeEffect.setFloat(\"_Selection_Fuzz_\", this.selectionFuzz);\r\n        this._activeEffect.setFloat(\"_Selected_\", this.selected);\r\n        this._activeEffect.setFloat(\"_Selection_Fade_\", this.selectionFade);\r\n        this._activeEffect.setFloat(\"_Selection_Fade_Size_\", this.selectionFadeSize);\r\n        this._activeEffect.setFloat(\"_Selected_Distance_\", this.selectedDistance);\r\n        this._activeEffect.setFloat(\"_Selected_Fade_Length_\", this.selectedFadeLength);\r\n\r\n        // \"Blob\"\r\n        this._activeEffect.setFloat(\"_Blob_Enable_\", this.leftBlobEnable ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Blob_Intensity_\", this.blobIntensity);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_\", this.leftBlobNearSize);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Size_\", this.blobFarSize);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Distance_\", this.blobNearDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Distance_\", this.blobFarDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_Length_\", this.blobFadeLength);\r\n        this._activeEffect.setFloat(\"_Blob_Inner_Fade_\", this.leftBlobInnerFade);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_\", this.leftBlobPulse);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_\", this.leftBlobFade);\r\n\r\n        // \"Blob 2\"\r\n        this._activeEffect.setFloat(\"_Blob_Enable_2_\", this.rightBlobEnable ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_2_\", this.rightBlobNearSize);\r\n        this._activeEffect.setFloat(\"_Blob_Inner_Fade_2_\", this.rightBlobInnerFade);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_2_\", this.rightBlobPulse);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_2_\", this.rightBlobFade);\r\n\r\n        // \"Active Face\"\r\n        this._activeEffect.setVector3(\"_Active_Face_Dir_\", this.activeFaceDir);\r\n        this._activeEffect.setVector3(\"_Active_Face_Up_\", this.activeFaceUp);\r\n\r\n        // \"Hololens Edge Fade\"\r\n        //define _Enable_Fade_ true;\r\n        this._activeEffect.setFloat(\"_Fade_Width_\", this.fadeWidth);\r\n        this._activeEffect.setFloat(\"_Smooth_Active_Face_\", this.smoothActiveFace ? 1.0 : 0.0);\r\n\r\n        // \"Debug\"\r\n        this._activeEffect.setFloat(\"_Show_Frame_\", this.showFrame ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Use_Blob_Texture_\", this.useBlobTexture ? 1.0 : 0.0);\r\n\r\n        // Global inputs\r\n        this._activeEffect.setFloat(\"Use_Global_Left_Index\", 1.0);\r\n        this._activeEffect.setFloat(\"Use_Global_Right_Index\", 1.0);\r\n\r\n        this._activeEffect.setVector4(\r\n            \"Global_Left_Index_Tip_Position\",\r\n            new Vector4(this.globalLeftIndexTipPosition.x, this.globalLeftIndexTipPosition.y, this.globalLeftIndexTipPosition.z, 1.0)\r\n        );\r\n        this._activeEffect.setVector4(\r\n            \"Global_Right_Index_Tip_Position\",\r\n            new Vector4(this.globalRightIndexTipPosition.x, this.globalRightIndexTipPosition.y, this.globalRightIndexTipPosition.z, 1.0)\r\n        );\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): FluentButtonMaterial {\r\n        return SerializationHelper.Clone(() => new FluentButtonMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.customType = \"BABYLON.FluentButtonMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"FluentButtonMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): FluentButtonMaterial {\r\n        return SerializationHelper.Parse(() => new FluentButtonMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.FluentButtonMaterial\", FluentButtonMaterial);\r\n", "// Assumptions: absolute position of button mesh is inside the mesh\r\n\r\nimport { Vector3, TmpVectors } from \"core/Maths/math.vector\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\nimport { Button3D } from \"./button3D\";\r\n\r\n/**\r\n * Class used to create a touchable button in 3D\r\n */\r\nexport class TouchButton3D extends Button3D {\r\n    private _collisionMesh: Mesh;\r\n\r\n    // 'front' direction. If Vector3.Zero, there is no front and all directions of interaction are accepted\r\n    private _collidableFrontDirection: Vector3;\r\n    private _isNearPressed = false;\r\n    private _interactionSurfaceHeight = 0;\r\n\r\n    private _isToggleButton = false;\r\n    private _toggleState = false;\r\n    private _toggleButtonCallback = () => {\r\n        this._onToggle(!this._toggleState);\r\n    };\r\n\r\n    /**\r\n     * An event triggered when the button is toggled. Only fired if 'isToggleButton' is true\r\n     */\r\n    public onToggleObservable = new Observable<boolean>();\r\n\r\n    /**\r\n     * Creates a new touchable button\r\n     * @param name defines the control name\r\n     * @param collisionMesh mesh to track collisions with\r\n     */\r\n    constructor(name?: string, collisionMesh?: Mesh) {\r\n        super(name);\r\n\r\n        this.collidableFrontDirection = Vector3.Zero();\r\n\r\n        if (collisionMesh) {\r\n            this.collisionMesh = collisionMesh;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Whether the current interaction is caused by near interaction or not\r\n     */\r\n    public get isActiveNearInteraction() {\r\n        return this._isNearPressed;\r\n    }\r\n\r\n    /**\r\n     * Sets the front-facing direction of the button. Pass in Vector3.Zero to allow interactions from any direction\r\n     * @param frontWorldDir the forward direction of the button\r\n     */\r\n    public set collidableFrontDirection(frontWorldDir: Vector3) {\r\n        this._collidableFrontDirection = frontWorldDir.normalize();\r\n\r\n        if (this._collisionMesh) {\r\n            const invert = TmpVectors.Matrix[0];\r\n\r\n            invert.copyFrom(this._collisionMesh.getWorldMatrix());\r\n            invert.invert();\r\n            Vector3.TransformNormalToRef(this._collidableFrontDirection, invert, this._collidableFrontDirection);\r\n            this._collidableFrontDirection.normalize();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the front-facing direction of the button, or Vector3.Zero if there is no 'front'\r\n     */\r\n    public get collidableFrontDirection() {\r\n        if (this._collisionMesh) {\r\n            // Update the front direction to reflect any rotations of the collision mesh\r\n            const transformedDirection = TmpVectors.Vector3[0];\r\n            Vector3.TransformNormalToRef(this._collidableFrontDirection, this._collisionMesh.getWorldMatrix(), transformedDirection);\r\n\r\n            return transformedDirection.normalize();\r\n        }\r\n\r\n        return this._collidableFrontDirection;\r\n    }\r\n\r\n    /**\r\n     * Sets the mesh used for testing input collision\r\n     * @param collisionMesh the new collision mesh for the button\r\n     */\r\n    public set collisionMesh(collisionMesh: Mesh) {\r\n        // Remove the GUI3DManager's data from the previous collision mesh's reserved data store, and reset interactability\r\n        if (this._collisionMesh) {\r\n            this._collisionMesh.isNearPickable = false;\r\n            if (this._collisionMesh.reservedDataStore?.GUI3D) {\r\n                this._collisionMesh.reservedDataStore.GUI3D = {};\r\n            }\r\n\r\n            this._collisionMesh.getChildMeshes().forEach((mesh) => {\r\n                mesh.isNearPickable = false;\r\n                if (mesh.reservedDataStore?.GUI3D) {\r\n                    mesh.reservedDataStore.GUI3D = {};\r\n                }\r\n            });\r\n        }\r\n\r\n        this._collisionMesh = collisionMesh;\r\n        this._injectGUI3DReservedDataStore(this._collisionMesh).control = this;\r\n        this._collisionMesh.isNearPickable = true;\r\n\r\n        this._collisionMesh.getChildMeshes().forEach((mesh) => {\r\n            this._injectGUI3DReservedDataStore(mesh).control = this;\r\n            mesh.isNearPickable = true;\r\n        });\r\n        this.collidableFrontDirection = collisionMesh.forward;\r\n    }\r\n\r\n    /**\r\n     * Setter for if this TouchButton3D should be treated as a toggle button\r\n     * @param value If this TouchHolographicButton should act like a toggle button\r\n     */\r\n    public set isToggleButton(value: boolean) {\r\n        if (value === this._isToggleButton) {\r\n            return;\r\n        }\r\n\r\n        this._isToggleButton = value;\r\n\r\n        if (value) {\r\n            this.onPointerUpObservable.add(this._toggleButtonCallback);\r\n        } else {\r\n            this.onPointerUpObservable.removeCallback(this._toggleButtonCallback);\r\n\r\n            // Safety check, reset the button if it's toggled on but no longer a toggle button\r\n            if (this._toggleState) {\r\n                this._onToggle(false);\r\n            }\r\n        }\r\n    }\r\n    public get isToggleButton() {\r\n        return this._isToggleButton;\r\n    }\r\n\r\n    /**\r\n     * A public entrypoint to set the toggle state of the TouchHolographicButton. Only works if 'isToggleButton' is true\r\n     * @param newState The new state to set the TouchHolographicButton's toggle state to\r\n     */\r\n    public set isToggled(newState: boolean) {\r\n        if (this._isToggleButton && this._toggleState !== newState) {\r\n            this._onToggle(newState);\r\n        }\r\n    }\r\n    public get isToggled() {\r\n        return this._toggleState;\r\n    }\r\n\r\n    protected _onToggle(newState: boolean) {\r\n        this._toggleState = newState;\r\n        this.onToggleObservable.notifyObservers(newState);\r\n    }\r\n\r\n    // Returns true if the collidable is in front of the button, or if the button has no front direction\r\n    private _isInteractionInFrontOfButton(collidablePos: Vector3) {\r\n        return this._getInteractionHeight(collidablePos, this._collisionMesh.getAbsolutePosition()) > 0;\r\n    }\r\n\r\n    /**\r\n     * Get the height of the touchPoint from the collidable part of the button\r\n     * @param touchPoint the point to compare to the button, in absolute position\r\n     * @returns the depth of the touch point into the front of the button\r\n     */\r\n    public getPressDepth(touchPoint: Vector3) {\r\n        if (!this._isNearPressed) {\r\n            return 0;\r\n        }\r\n        const interactionHeight = this._getInteractionHeight(touchPoint, this._collisionMesh.getAbsolutePosition());\r\n        return this._interactionSurfaceHeight - interactionHeight;\r\n    }\r\n\r\n    // Returns true if the collidable is in front of the button, or if the button has no front direction\r\n    protected _getInteractionHeight(interactionPos: Vector3, basePos: Vector3) {\r\n        const frontDir = this.collidableFrontDirection;\r\n        if (frontDir.length() === 0) {\r\n            // The button has no front, just return the distance to the base\r\n            return Vector3.Distance(interactionPos, basePos);\r\n        }\r\n        const d = Vector3.Dot(basePos, frontDir);\r\n        const abc = Vector3.Dot(interactionPos, frontDir);\r\n\r\n        return abc - d;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _generatePointerEventType(providedType: number, nearMeshPosition: Vector3, activeInteractionCount: number): number {\r\n        if (providedType === PointerEventTypes.POINTERDOWN || providedType === PointerEventTypes.POINTERMOVE) {\r\n            if (!this._isInteractionInFrontOfButton(nearMeshPosition)) {\r\n                // Near interaction mesh is behind the button, don't send a pointer down\r\n                return PointerEventTypes.POINTERMOVE;\r\n            } else {\r\n                this._isNearPressed = true;\r\n                this._interactionSurfaceHeight = this._getInteractionHeight(nearMeshPosition, this._collisionMesh.getAbsolutePosition());\r\n            }\r\n        }\r\n        if (providedType === PointerEventTypes.POINTERUP) {\r\n            if (activeInteractionCount == 0) {\r\n                // We get the release for the down we swallowed earlier, swallow as well\r\n                return PointerEventTypes.POINTERMOVE;\r\n            } else {\r\n                this._isNearPressed = false;\r\n            }\r\n        }\r\n\r\n        return providedType;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TouchButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        return super._createNode(scene);\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        // Clean up toggle observables\r\n        this.onPointerUpObservable.removeCallback(this._toggleButtonCallback);\r\n        this.onToggleObservable.clear();\r\n\r\n        if (this._collisionMesh) {\r\n            this._collisionMesh.dispose();\r\n        }\r\n    }\r\n}\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { Mesh } from \"core/Meshes/mesh\";\r\nimport { CreatePlane } from \"core/Meshes/Builders/planeBuilder\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport { FadeInOutBehavior } from \"core/Behaviors/Meshes/fadeInOutBehavior\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { FluentMaterial } from \"../materials/fluent/fluentMaterial\";\r\nimport { FluentButtonMaterial } from \"../materials/fluentButton/fluentButtonMaterial\";\r\nimport { StackPanel } from \"../../2D/controls/stackPanel\";\r\nimport { Image } from \"../../2D/controls/image\";\r\nimport { TextBlock } from \"../../2D/controls/textBlock\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { TouchButton3D } from \"./touchButton3D\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { SceneLoader } from \"core/Loading/sceneLoader\";\r\nimport { IsDocumentAvailable } from \"core/Misc/domManagement\";\r\nimport { Scalar } from \"core/Maths/math.scalar\";\r\n\r\n/**\r\n * Class used to create a holographic button in 3D\r\n * @since 5.0.0\r\n */\r\nexport class TouchHolographicButton extends TouchButton3D {\r\n    /**\r\n     * Base Url for the button model.\r\n     */\r\n    public static MODEL_BASE_URL: string = \"https://assets.babylonjs.com/meshes/MRTK/\";\r\n    /**\r\n     * File name for the button model.\r\n     */\r\n    public static MODEL_FILENAME: string = \"mrtk-fluent-button.glb\";\r\n\r\n    private _backPlate: Mesh;\r\n    private _textPlate: Mesh;\r\n    private _frontPlate: AbstractMesh;\r\n    private _text: string;\r\n    private _imageUrl: string;\r\n    private _shareMaterials = true;\r\n    private _isBackplateVisible = true;\r\n    private _frontMaterial: FluentButtonMaterial;\r\n    private _backMaterial: FluentMaterial;\r\n    private _plateMaterial: StandardMaterial;\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n    private _pointerHoverObserver: Nullable<Observer<Vector3>>;\r\n    private _frontPlateDepth = 0.5;\r\n    private _backPlateDepth = 0.04;\r\n    private _backplateColor = new Color3(0.08, 0.15, 0.55);\r\n    private _backplateToggledColor = new Color3(0.25, 0.4, 0.95);\r\n\r\n    // Tooltip\r\n    private _tooltipFade: Nullable<FadeInOutBehavior>;\r\n    private _tooltipTextBlock: Nullable<TextBlock>;\r\n    private _tooltipTexture: Nullable<AdvancedDynamicTexture>;\r\n    private _tooltipMesh: Nullable<Mesh>;\r\n    private _tooltipHoverObserver: Nullable<Observer<Control3D>>;\r\n    private _tooltipOutObserver: Nullable<Observer<Control3D>>;\r\n\r\n    private _disposeTooltip() {\r\n        this._tooltipFade = null;\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.dispose();\r\n        }\r\n        if (this._tooltipTexture) {\r\n            this._tooltipTexture.dispose();\r\n        }\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.dispose();\r\n        }\r\n        this.onPointerEnterObservable.remove(this._tooltipHoverObserver);\r\n        this.onPointerOutObservable.remove(this._tooltipOutObserver);\r\n    }\r\n\r\n    /**\r\n     * Rendering ground id of all the mesh in the button\r\n     */\r\n    public set renderingGroupId(id: number) {\r\n        this._backPlate.renderingGroupId = id;\r\n        this._textPlate.renderingGroupId = id;\r\n        this._frontPlate.renderingGroupId = id;\r\n\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.renderingGroupId = id;\r\n        }\r\n    }\r\n    public get renderingGroupId(): number {\r\n        return this._backPlate.renderingGroupId;\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh used to render this control\r\n     */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        return this._backPlate as AbstractMesh;\r\n    }\r\n\r\n    /**\r\n     * Text to be displayed on the tooltip shown when hovering on the button. When set to null tooltip is disabled. (Default: null)\r\n     */\r\n    public set tooltipText(text: Nullable<string>) {\r\n        if (!text) {\r\n            this._disposeTooltip();\r\n            return;\r\n        }\r\n        if (!this._tooltipFade) {\r\n            const rightHandedScene = this._backPlate._scene.useRightHandedSystem;\r\n            // Create tooltip with mesh and text\r\n            this._tooltipMesh = CreatePlane(\"\", { size: 1 }, this._backPlate._scene);\r\n            const tooltipBackground = CreatePlane(\"\", { size: 1, sideOrientation: Mesh.DOUBLESIDE }, this._backPlate._scene);\r\n            const mat = new StandardMaterial(\"\", this._backPlate._scene);\r\n            mat.diffuseColor = Color3.FromHexString(\"#212121\");\r\n            tooltipBackground.material = mat;\r\n            tooltipBackground.isPickable = false;\r\n            this._tooltipMesh.addChild(tooltipBackground);\r\n            tooltipBackground.position = Vector3.Forward(rightHandedScene).scale(0.05);\r\n            this._tooltipMesh.scaling.y = 1 / 3;\r\n            this._tooltipMesh.position = Vector3.Up().scale(0.7).add(Vector3.Forward(rightHandedScene).scale(-0.15));\r\n            this._tooltipMesh.isPickable = false;\r\n            this._tooltipMesh.parent = this._backPlate;\r\n\r\n            // Create text texture for the tooltip\r\n            this._tooltipTexture = AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh);\r\n            this._tooltipTextBlock = new TextBlock();\r\n            this._tooltipTextBlock.scaleY = 3;\r\n            this._tooltipTextBlock.color = \"white\";\r\n            this._tooltipTextBlock.fontSize = 130;\r\n            this._tooltipTexture.addControl(this._tooltipTextBlock);\r\n\r\n            // Add hover action to tooltip\r\n            this._tooltipFade = new FadeInOutBehavior();\r\n            this._tooltipFade.delay = 500;\r\n            this._tooltipMesh.addBehavior(this._tooltipFade);\r\n            this._tooltipHoverObserver = this.onPointerEnterObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(true);\r\n                }\r\n            });\r\n            this._tooltipOutObserver = this.onPointerOutObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(false);\r\n                }\r\n            });\r\n        }\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.text = text;\r\n        }\r\n    }\r\n\r\n    public get tooltipText() {\r\n        if (this._tooltipTextBlock) {\r\n            return this._tooltipTextBlock.text;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text for the button\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n\r\n        this._text = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image url for the button\r\n     */\r\n    public get imageUrl(): string {\r\n        return this._imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        if (this._imageUrl === value) {\r\n            return;\r\n        }\r\n\r\n        this._imageUrl = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets the back material used by this button\r\n     */\r\n    public get backMaterial(): FluentMaterial {\r\n        return this._backMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the front material used by this button\r\n     */\r\n    public get frontMaterial(): FluentButtonMaterial {\r\n        return this._frontMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the plate material used by this button\r\n     */\r\n    public get plateMaterial(): StandardMaterial {\r\n        return this._plateMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this button shares its material with other HolographicButtons\r\n     */\r\n    public get shareMaterials(): boolean {\r\n        return this._shareMaterials;\r\n    }\r\n\r\n    /**\r\n     * Sets whether the backplate is visible or hidden. Hiding the backplate is not recommended without some sort of replacement\r\n     */\r\n    public set isBackplateVisible(isVisible: boolean) {\r\n        if (this.mesh && !!this._backMaterial) {\r\n            if (isVisible && !this._isBackplateVisible) {\r\n                this._backPlate.visibility = 1;\r\n            } else if (!isVisible && this._isBackplateVisible) {\r\n                this._backPlate.visibility = 0;\r\n            }\r\n        }\r\n\r\n        this._isBackplateVisible = isVisible;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     * @param shareMaterials\r\n     */\r\n    constructor(name?: string, shareMaterials = true) {\r\n        super(name);\r\n\r\n        this._shareMaterials = shareMaterials;\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            this._frontMaterial.leftBlobEnable = true;\r\n            this._frontMaterial.rightBlobEnable = true;\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            this._frontMaterial.leftBlobEnable = false;\r\n            this._frontMaterial.rightBlobEnable = false;\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (this._frontPlate && !this.isActiveNearInteraction) {\r\n                this._frontPlate.scaling.z = this._frontPlateDepth * 0.2;\r\n                this._frontPlate.position = Vector3.Forward(this._frontPlate._scene.useRightHandedSystem).scale((this._frontPlateDepth - 0.2 * this._frontPlateDepth) / 2);\r\n                this._textPlate.position = Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-(this._backPlateDepth + 0.2 * this._frontPlateDepth) / 2);\r\n            }\r\n        };\r\n        this.pointerUpAnimation = () => {\r\n            if (this._frontPlate) {\r\n                this._frontPlate.scaling.z = this._frontPlateDepth;\r\n                this._frontPlate.position = Vector3.Forward(this._frontPlate._scene.useRightHandedSystem).scale((this._frontPlateDepth - this._frontPlateDepth) / 2);\r\n                this._textPlate.position = Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-(this._backPlateDepth + this._frontPlateDepth) / 2);\r\n            }\r\n        };\r\n\r\n        this.onPointerMoveObservable.add((position) => {\r\n            if (this._frontPlate && this.isActiveNearInteraction) {\r\n                const scale = Vector3.Zero();\r\n                if (this._backPlate.getWorldMatrix().decompose(scale, undefined, undefined)) {\r\n                    let interactionHeight = this._getInteractionHeight(position, this._backPlate.getAbsolutePosition()) / scale.z;\r\n                    interactionHeight = Scalar.Clamp(interactionHeight - this._backPlateDepth / 2, 0.2 * this._frontPlateDepth, this._frontPlateDepth);\r\n\r\n                    this._frontPlate.scaling.z = interactionHeight;\r\n                    this._frontPlate.position = Vector3.Forward(this._frontPlate._scene.useRightHandedSystem).scale((this._frontPlateDepth - interactionHeight) / 2);\r\n                    this._textPlate.position = Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-(this._backPlateDepth + interactionHeight) / 2);\r\n                }\r\n            }\r\n        });\r\n\r\n        this._pointerHoverObserver = this.onPointerMoveObservable.add((hoverPosition: Vector3) => {\r\n            this._frontMaterial.globalLeftIndexTipPosition = hoverPosition;\r\n        });\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TouchHolographicButton\";\r\n    }\r\n\r\n    private _rebuildContent(): void {\r\n        this._disposeFacadeTexture();\r\n\r\n        const panel = new StackPanel();\r\n        panel.isVertical = true;\r\n\r\n        if (IsDocumentAvailable() && !!document.createElement) {\r\n            if (this._imageUrl) {\r\n                const image = new Image();\r\n                image.source = this._imageUrl;\r\n                image.paddingTop = \"40px\";\r\n                image.height = \"180px\";\r\n                image.width = \"100px\";\r\n                image.paddingBottom = \"40px\";\r\n                panel.addControl(image);\r\n            }\r\n        }\r\n\r\n        if (this._text) {\r\n            const text = new TextBlock();\r\n            text.text = this._text;\r\n            text.color = \"white\";\r\n            text.height = \"30px\";\r\n            text.fontSize = 24;\r\n            panel.addControl(text);\r\n        }\r\n\r\n        this.content = panel;\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this.name = this.name ?? \"TouchHolographicButton\";\r\n        const collisionMesh = CreateBox(\r\n            `${this.name}_collisionMesh`,\r\n            {\r\n                width: 1.0,\r\n                height: 1.0,\r\n                depth: this._frontPlateDepth,\r\n            },\r\n            scene\r\n        );\r\n        collisionMesh.isPickable = true;\r\n        collisionMesh.isNearPickable = true;\r\n        collisionMesh.visibility = 0;\r\n        collisionMesh.position = Vector3.Forward(scene.useRightHandedSystem).scale(-this._frontPlateDepth / 2);\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, TouchHolographicButton.MODEL_BASE_URL, TouchHolographicButton.MODEL_FILENAME, scene).then((result) => {\r\n            const alphaMesh = CreateBox(\r\n                \"${this.name}_alphaMesh\",\r\n                {\r\n                    width: 1.0,\r\n                    height: 1.0,\r\n                    depth: 1.0,\r\n                },\r\n                scene\r\n            );\r\n            alphaMesh.isPickable = false;\r\n            alphaMesh.material = new StandardMaterial(\"${this.name}_alphaMesh_material\", scene);\r\n            alphaMesh.material.alpha = 0.15;\r\n\r\n            const importedFrontPlate = result.meshes[1];\r\n            importedFrontPlate.name = `${this.name}_frontPlate`;\r\n            importedFrontPlate.isPickable = false;\r\n            importedFrontPlate.scaling.z = this._frontPlateDepth;\r\n            alphaMesh.parent = importedFrontPlate;\r\n            importedFrontPlate.parent = collisionMesh;\r\n            if (this._frontMaterial) {\r\n                importedFrontPlate.material = this._frontMaterial;\r\n            }\r\n            this._frontPlate = importedFrontPlate;\r\n        });\r\n\r\n        this._backPlate = CreateBox(\r\n            `${this.name}_backPlate`,\r\n            {\r\n                width: 1.0,\r\n                height: 1.0,\r\n                depth: this._backPlateDepth,\r\n            },\r\n            scene\r\n        );\r\n\r\n        this._backPlate.position = Vector3.Forward(scene.useRightHandedSystem).scale(this._backPlateDepth / 2);\r\n        this._backPlate.isPickable = false;\r\n\r\n        this._textPlate = <Mesh>super._createNode(scene);\r\n        this._textPlate.name = `${this.name}_textPlate`;\r\n        this._textPlate.isPickable = false;\r\n        this._textPlate.position = Vector3.Forward(scene.useRightHandedSystem).scale(-this._frontPlateDepth / 2);\r\n\r\n        this._backPlate.addChild(collisionMesh);\r\n        this._backPlate.addChild(this._textPlate);\r\n\r\n        const tn = new TransformNode(`{this.name}_root`, scene);\r\n        this._backPlate.setParent(tn);\r\n\r\n        this.collisionMesh = collisionMesh;\r\n        this.collidableFrontDirection = this._backPlate.forward.negate(); // Mesh is facing the wrong way\r\n\r\n        return tn;\r\n    }\r\n\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        this._plateMaterial.emissiveTexture = facadeTexture;\r\n        this._plateMaterial.opacityTexture = facadeTexture;\r\n        this._plateMaterial.diffuseColor = new Color3(0.4, 0.4, 0.4);\r\n    }\r\n\r\n    private _createBackMaterial(mesh: Mesh) {\r\n        this._backMaterial = new FluentMaterial(this.name + \"backPlateMaterial\", mesh.getScene());\r\n        this._backMaterial.albedoColor = this._backplateColor;\r\n        this._backMaterial.renderBorders = true;\r\n        this._backMaterial.renderHoverLight = false;\r\n    }\r\n\r\n    private _createFrontMaterial(mesh: Mesh) {\r\n        this._frontMaterial = new FluentButtonMaterial(this.name + \"Front Material\", mesh.getScene());\r\n    }\r\n\r\n    private _createPlateMaterial(mesh: Mesh) {\r\n        this._plateMaterial = new StandardMaterial(this.name + \"Plate Material\", mesh.getScene());\r\n        this._plateMaterial.specularColor = Color3.Black();\r\n    }\r\n\r\n    protected _onToggle(newState: boolean) {\r\n        if (this._backMaterial) {\r\n            if (newState) {\r\n                this._backMaterial.albedoColor = this._backplateToggledColor;\r\n            } else {\r\n                this._backMaterial.albedoColor = this._backplateColor;\r\n            }\r\n        }\r\n\r\n        super._onToggle(newState);\r\n    }\r\n\r\n    protected _affectMaterial(mesh: Mesh) {\r\n        if (this._shareMaterials) {\r\n            // Back\r\n            if (!this._host._touchSharedMaterials[\"backFluentMaterial\"]) {\r\n                this._createBackMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"backFluentMaterial\"] = this._backMaterial;\r\n            } else {\r\n                this._backMaterial = this._host._touchSharedMaterials[\"backFluentMaterial\"] as FluentMaterial;\r\n            }\r\n\r\n            // Front\r\n            if (!this._host._touchSharedMaterials[\"frontFluentMaterial\"]) {\r\n                this._createFrontMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"frontFluentMaterial\"] = this._frontMaterial;\r\n            } else {\r\n                this._frontMaterial = this._host._touchSharedMaterials[\"frontFluentMaterial\"] as FluentButtonMaterial;\r\n            }\r\n        } else {\r\n            this._createBackMaterial(mesh);\r\n            this._createFrontMaterial(mesh);\r\n        }\r\n\r\n        this._createPlateMaterial(mesh);\r\n        this._backPlate.material = this._backMaterial;\r\n        this._textPlate.material = this._plateMaterial;\r\n\r\n        if (!this._isBackplateVisible) {\r\n            this._backPlate.visibility = 0;\r\n        }\r\n        if (this._frontPlate) {\r\n            this._frontPlate.material = this._frontMaterial;\r\n        }\r\n\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose(); // will dispose main mesh ie. back plate\r\n\r\n        this._disposeTooltip();\r\n        this.onPointerMoveObservable.remove(this._pointerHoverObserver);\r\n\r\n        if (!this.shareMaterials) {\r\n            this._backMaterial.dispose();\r\n            this._frontMaterial.dispose();\r\n            this._plateMaterial.dispose();\r\n\r\n            if (this._pickedPointObserver) {\r\n                this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n                this._pickedPointObserver = null;\r\n            }\r\n        }\r\n    }\r\n}\r\n", "import type { Behavior } from \"core/Behaviors/behavior\";\r\nimport { FollowBehavior } from \"core/Behaviors/Meshes/followBehavior\";\r\nimport { SixDofDragBehavior } from \"core/Behaviors/Meshes/sixDofDragBehavior\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { SurfaceMagnetismBehavior } from \"core/Behaviors/Meshes/surfaceMagnetismBehavior\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport type { PickingInfo } from \"core/Collisions/pickingInfo\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\n\r\n/**\r\n * Default behavior for 3D UI elements.\r\n * Handles a FollowBehavior, SixDofBehavior and SurfaceMagnetismBehavior\r\n * @since 5.0.0\r\n */\r\nexport class DefaultBehavior implements Behavior<Mesh> {\r\n    private _scene: Scene;\r\n    private _followBehavior: FollowBehavior;\r\n    private _sixDofDragBehavior: SixDofDragBehavior;\r\n    private _surfaceMagnetismBehavior: SurfaceMagnetismBehavior;\r\n    private _onBeforeRenderObserver: Nullable<Observer<Scene>>;\r\n    private _onDragObserver: Nullable<Observer<{ delta: Vector3; position: Vector3; pickInfo: PickingInfo }>>;\r\n\r\n    /**\r\n     * Instantiates the default behavior\r\n     */\r\n    constructor() {\r\n        this._followBehavior = new FollowBehavior();\r\n        this._sixDofDragBehavior = new SixDofDragBehavior();\r\n        this._surfaceMagnetismBehavior = new SurfaceMagnetismBehavior();\r\n    }\r\n\r\n    /**\r\n     * Attached node of this behavior\r\n     */\r\n    public attachedNode: Nullable<Mesh>;\r\n\r\n    /**\r\n     *  The name of the behavior\r\n     */\r\n    public get name(): string {\r\n        return \"Default\";\r\n    }\r\n\r\n    /**\r\n     *  The follow behavior\r\n     */\r\n    public get followBehavior(): FollowBehavior {\r\n        return this._followBehavior;\r\n    }\r\n\r\n    /**\r\n     *  The six DoF drag behavior\r\n     */\r\n    public get sixDofDragBehavior(): SixDofDragBehavior {\r\n        return this._sixDofDragBehavior;\r\n    }\r\n\r\n    /**\r\n     * The surface magnetism behavior\r\n     */\r\n    public get surfaceMagnetismBehavior(): SurfaceMagnetismBehavior {\r\n        return this._surfaceMagnetismBehavior;\r\n    }\r\n\r\n    /**\r\n     * Enables the follow behavior\r\n     */\r\n    public followBehaviorEnabled: boolean = false;\r\n\r\n    /**\r\n     * Enables the six DoF drag behavior\r\n     */\r\n    public sixDofDragBehaviorEnabled: boolean = true;\r\n\r\n    /**\r\n     * Enables the surface magnetism behavior\r\n     */\r\n    public surfaceMagnetismBehaviorEnabled: boolean = true;\r\n\r\n    /**\r\n     *  Initializes the behavior\r\n     */\r\n    public init() {}\r\n\r\n    /**\r\n     * Attaches the default behavior\r\n     * @param ownerMesh The top level mesh\r\n     * @param draggablesMeshes Descendant meshes that can be used for dragging the owner mesh\r\n     * @param sceneUnderstandingMeshes Meshes from the scene understanding that will be used for surface magnetism\r\n     */\r\n    public attach(ownerMesh: Mesh, draggablesMeshes?: Mesh[], sceneUnderstandingMeshes?: AbstractMesh[]): void {\r\n        this._scene = ownerMesh.getScene();\r\n        this.attachedNode = ownerMesh;\r\n\r\n        this._addObservables();\r\n        // Since our observables are bound before the child behaviors', ours are called first\r\n        this._followBehavior.attach(ownerMesh);\r\n        this._sixDofDragBehavior.attach(ownerMesh);\r\n        this._sixDofDragBehavior.draggableMeshes = draggablesMeshes || null;\r\n        this._sixDofDragBehavior.faceCameraOnDragStart = true;\r\n        this._surfaceMagnetismBehavior.attach(ownerMesh, this._scene);\r\n        if (sceneUnderstandingMeshes) {\r\n            this._surfaceMagnetismBehavior.meshes = sceneUnderstandingMeshes;\r\n        }\r\n\r\n        // We disable this behavior because we will handle pose changing event manually with sixDofDragBehavior\r\n        this._surfaceMagnetismBehavior.enabled = false;\r\n    }\r\n\r\n    /**\r\n     *  Detaches the behavior from the mesh\r\n     */\r\n    public detach(): void {\r\n        this.attachedNode = null;\r\n        this._removeObservables();\r\n        this._followBehavior.detach();\r\n        this._sixDofDragBehavior.detach();\r\n        this._surfaceMagnetismBehavior.detach();\r\n    }\r\n\r\n    private _addObservables() {\r\n        this._onBeforeRenderObserver = this._scene.onBeforeRenderObservable.add(() => {\r\n            this._followBehavior._enabled = !this._sixDofDragBehavior.isMoving && this.followBehaviorEnabled;\r\n        });\r\n        this._onDragObserver = this._sixDofDragBehavior.onDragObservable.add((event: { pickInfo: PickingInfo }) => {\r\n            this._sixDofDragBehavior.disableMovement = this._surfaceMagnetismBehavior.findAndUpdateTarget(event.pickInfo);\r\n        });\r\n    }\r\n\r\n    private _removeObservables() {\r\n        this._scene.onBeforeRenderObservable.remove(this._onBeforeRenderObserver);\r\n        this._sixDofDragBehavior.onDragObservable.remove(this._onDragObserver);\r\n    }\r\n}\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"handleVertexShader\";\nconst shader = `precision highp float;attribute vec3 position;uniform vec3 positionOffset;uniform mat4 worldViewProjection;uniform float scale;void main(void) {vec4 vPos=vec4((vec3(position)+positionOffset)*scale,1.0);gl_Position=worldViewProjection*vPos;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const handleVertexShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"handlePixelShader\";\nconst shader = `uniform vec3 color;void main(void) {gl_FragColor=vec4(color,1.0);}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const handlePixelShader = { name, shader };\n", "import { ShaderMaterial } from \"core/Materials/shaderMaterial\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Color3, TmpColors } from \"core/Maths/math.color\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\n\r\nimport \"./shaders/handle.vertex\";\r\nimport \"./shaders/handle.fragment\";\r\n\r\n/**\r\n * Class used to render gizmo handles with fluent design\r\n */\r\nexport class HandleMaterial extends ShaderMaterial {\r\n    private _hover: boolean = false;\r\n    private _drag: boolean = false;\r\n    private _onBeforeRender: Nullable<Observer<Scene>>;\r\n    private _color: Color3 = new Color3();\r\n    private _scale: number = 1;\r\n    private _targetColor: Color3;\r\n    private _targetScale: number;\r\n    private _lastTick = -1;\r\n\r\n    /**\r\n     * Is the material indicating hovering state\r\n     */\r\n    public get hover(): boolean {\r\n        return this._hover;\r\n    }\r\n\r\n    public set hover(b: boolean) {\r\n        this._hover = b;\r\n\r\n        this._updateInterpolationTarget();\r\n    }\r\n\r\n    /**\r\n     * Is the material indicating drag state\r\n     */\r\n    public get drag(): boolean {\r\n        return this._drag;\r\n    }\r\n\r\n    public set drag(b: boolean) {\r\n        this._drag = b;\r\n\r\n        this._updateInterpolationTarget();\r\n    }\r\n\r\n    /**\r\n     * Length of animation\r\n     */\r\n    public animationLength: number = 100;\r\n\r\n    /**\r\n     * Color of the handle when hovered\r\n     */\r\n    public hoverColor: Color3 = new Color3(0, 0.467, 0.84);\r\n\r\n    /**\r\n     * Color of the handle when idle\r\n     */\r\n    public baseColor: Color3 = new Color3(1, 1, 1);\r\n\r\n    /**\r\n     * Scale of the handle when hovered\r\n     */\r\n    public hoverScale: number = 0.75;\r\n\r\n    /**\r\n     * Scale of the handle when idle\r\n     */\r\n    public baseScale: number = 0.35;\r\n\r\n    /**\r\n     * Scale of the handle when dragged\r\n     */\r\n    public dragScale: number = 0.55;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _positionOffset: Vector3 = Vector3.Zero();\r\n\r\n    /**\r\n     * Creates a handle material\r\n     * @param name Name of the material\r\n     * @param scene Scene\r\n     */\r\n    constructor(name: string, scene: Scene) {\r\n        super(name, scene, \"handle\", {\r\n            attributes: [\"position\"],\r\n            uniforms: [\"worldViewProjection\", \"color\", \"scale\", \"positionOffset\"],\r\n            needAlphaBlending: false,\r\n            needAlphaTesting: false,\r\n        });\r\n\r\n        this._updateInterpolationTarget();\r\n\r\n        // Register callback for scene after render\r\n        this._lastTick = Date.now();\r\n        this._onBeforeRender = this.getScene().onBeforeRenderObservable.add(() => {\r\n            const tick = Date.now();\r\n            const delta = tick - this._lastTick;\r\n\r\n            const scaleDiff = this._targetScale - this._scale;\r\n            const colorDiff = TmpColors.Color3[0].copyFrom(this._targetColor).subtractToRef(this._color, TmpColors.Color3[0]);\r\n\r\n            this._scale = this._scale + (scaleDiff * delta) / this.animationLength;\r\n            colorDiff.scaleToRef(delta / this.animationLength, colorDiff);\r\n            this._color.addToRef(colorDiff, this._color);\r\n\r\n            this.setColor3(\"color\", this._color);\r\n            this.setFloat(\"scale\", this._scale);\r\n            this.setVector3(\"positionOffset\", this._positionOffset);\r\n\r\n            this._lastTick = tick;\r\n        });\r\n    }\r\n\r\n    private _updateInterpolationTarget() {\r\n        if (this.drag) {\r\n            this._targetColor = this.hoverColor;\r\n            this._targetScale = this.dragScale;\r\n        } else if (this.hover) {\r\n            this._targetColor = this.hoverColor;\r\n            this._targetScale = this.hoverScale;\r\n        } else {\r\n            this._targetColor = this.baseColor;\r\n            this._targetScale = this.baseScale;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disposes the handle material\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n        this.getScene().onBeforeRenderObservable.remove(this._onBeforeRender);\r\n    }\r\n}\r\n", "import type { Scene } from \"core/scene\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { HandleMaterial } from \"../materials/handle/handleMaterial\";\r\nimport type { SlateGizmo } from \"./slateGizmo\";\r\nimport { BaseSixDofDragBehavior } from \"core/Behaviors/Meshes/baseSixDofDragBehavior\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\n\r\n/**\r\n * State of the handle regarding user interaction\r\n */\r\nexport enum HandleState {\r\n    /**\r\n     * Handle is idle\r\n     */\r\n    IDLE = 0,\r\n    /**\r\n     * Handle is hovered\r\n     */\r\n    HOVER = 1,\r\n    /**\r\n     * Handle is dragged\r\n     */\r\n    DRAG = 2,\r\n}\r\n\r\n/**\r\n * Base class for SlateGizmo handles\r\n */\r\nexport abstract class GizmoHandle {\r\n    protected _scene: Scene;\r\n    protected _state: HandleState = HandleState.IDLE;\r\n    protected _materials: HandleMaterial[] = [];\r\n\r\n    private _dragStartObserver: Nullable<Observer<any>>;\r\n    private _draggingObserver: Nullable<Observer<any>>;\r\n    private _dragEndObserver: Nullable<Observer<any>>;\r\n    /**\r\n     * @internal\r\n     */\r\n    public _dragBehavior: BaseSixDofDragBehavior;\r\n\r\n    /**\r\n     * The current state of the handle\r\n     */\r\n    public get state(): HandleState {\r\n        return this._state;\r\n    }\r\n\r\n    private _gizmo: SlateGizmo;\r\n\r\n    /**\r\n     * Returns the gizmo carrying this handle\r\n     */\r\n    public get gizmo() {\r\n        return this._gizmo;\r\n    }\r\n\r\n    /**\r\n     * Sets hover state\r\n     */\r\n    public set hover(value: boolean) {\r\n        if (value) {\r\n            this._state |= HandleState.HOVER;\r\n        } else {\r\n            this._state &= ~HandleState.HOVER;\r\n        }\r\n\r\n        this._updateMaterial();\r\n    }\r\n    /**\r\n     * Sets drag state\r\n     */\r\n    public set drag(value: boolean) {\r\n        if (value) {\r\n            this._state |= HandleState.DRAG;\r\n        } else {\r\n            this._state &= ~HandleState.DRAG;\r\n        }\r\n\r\n        this._updateMaterial();\r\n    }\r\n\r\n    /**\r\n     * Node of this handle\r\n     */\r\n    public node: TransformNode;\r\n\r\n    /**\r\n     * Creates a handle for a SlateGizmo\r\n     * @param gizmo associated SlateGizmo\r\n     * @param scene scene\r\n     */\r\n    constructor(gizmo: SlateGizmo, scene: Scene) {\r\n        this._scene = scene;\r\n        this._gizmo = gizmo;\r\n\r\n        this.node = this.createNode();\r\n        this.node.reservedDataStore = {\r\n            handle: this,\r\n        };\r\n    }\r\n\r\n    protected _createMaterial(positionOffset?: Vector3) {\r\n        const mat = new HandleMaterial(\"handle\", this._scene);\r\n        if (positionOffset) {\r\n            mat._positionOffset = positionOffset;\r\n        }\r\n        return mat;\r\n    }\r\n\r\n    private _updateMaterial() {\r\n        const state = this._state;\r\n        for (const mat of this._materials) {\r\n            mat.hover = false;\r\n            mat.drag = false;\r\n        }\r\n\r\n        if (state & HandleState.DRAG) {\r\n            for (const mat of this._materials) {\r\n                mat.drag = true;\r\n            }\r\n        } else if (state & HandleState.HOVER) {\r\n            for (const mat of this._materials) {\r\n                mat.hover = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Binds callbacks from dragging interaction\r\n     * @param dragStartFn Function to call on drag start\r\n     * @param dragFn Function to call on drag\r\n     * @param dragEndFn Function to call on drag end\r\n     */\r\n    public setDragBehavior(dragStartFn: (event: { position: Vector3 }) => void, dragFn: (event: { position: Vector3 }) => void, dragEndFn: () => void) {\r\n        const dragBehavior = new BaseSixDofDragBehavior();\r\n\r\n        this._dragBehavior = dragBehavior;\r\n\r\n        this._dragStartObserver = dragBehavior.onDragStartObservable.add(dragStartFn);\r\n        this._draggingObserver = dragBehavior.onDragObservable.add(dragFn);\r\n        this._dragEndObserver = dragBehavior.onDragEndObservable.add(dragEndFn);\r\n\r\n        this._dragBehavior.attach(this.node);\r\n    }\r\n\r\n    /**\r\n     * Creates the meshes and parent node of the handle\r\n     * Should be overridden by child classes\r\n     * @returns created node\r\n     */\r\n    public abstract createNode(): TransformNode;\r\n\r\n    /**\r\n     * Disposes the handle\r\n     */\r\n    public dispose() {\r\n        this._dragBehavior.onDragStartObservable.remove(this._dragStartObserver);\r\n        this._dragBehavior.onDragObservable.remove(this._draggingObserver);\r\n        this._dragBehavior.onDragEndObservable.remove(this._dragEndObserver);\r\n\r\n        this._dragBehavior.detach();\r\n\r\n        for (const material of this._materials) {\r\n            material.dispose();\r\n        }\r\n        this.node.dispose();\r\n    }\r\n}\r\n\r\n/**\r\n * Side handle class that rotates the slate\r\n */\r\nexport class SideHandle extends GizmoHandle {\r\n    /**\r\n     * Creates the meshes and parent node of the handle\r\n     * @returns created node\r\n     */\r\n    public createNode() {\r\n        // Create a simple vertical rectangle\r\n        const verticalBox = CreateBox(\"sideVert\", { width: 1, height: 10, depth: 0.1 }, this._scene);\r\n        const sideNode = new TransformNode(\"side\", this._scene);\r\n        verticalBox.parent = sideNode;\r\n\r\n        const mat = this._createMaterial();\r\n        verticalBox.material = mat;\r\n        verticalBox.isNearGrabbable = true;\r\n        this._materials.push(mat);\r\n\r\n        return sideNode;\r\n    }\r\n}\r\n\r\n/**\r\n * Corner handle that resizes the slate\r\n */\r\nexport class CornerHandle extends GizmoHandle {\r\n    /**\r\n     * Creates the meshes and parent node of the handle\r\n     * @returns created node\r\n     */\r\n    public createNode() {\r\n        // Create 2 boxes making a bottom left corner\r\n        const horizontalBox = CreateBox(\"angleHor\", { width: 3, height: 1, depth: 0.1 }, this._scene);\r\n        const verticalBox = CreateBox(\"angleVert\", { width: 1, height: 3, depth: 0.1 }, this._scene);\r\n\r\n        const angleNode = new TransformNode(\"angle\", this._scene);\r\n        horizontalBox.parent = angleNode;\r\n        verticalBox.parent = angleNode;\r\n\r\n        horizontalBox.material = this._createMaterial(new Vector3(1, 0, 0));\r\n        verticalBox.material = this._createMaterial(new Vector3(0, 1, 0));\r\n        verticalBox.isNearGrabbable = true;\r\n        horizontalBox.isNearGrabbable = true;\r\n\r\n        this._materials.push(horizontalBox.material as HandleMaterial);\r\n        this._materials.push(verticalBox.material as HandleMaterial);\r\n        return angleNode;\r\n    }\r\n}\r\n", "import { Gizmo } from \"core/Gizmos/gizmo\";\r\nimport { Epsilon } from \"core/Maths/math.constants\";\r\nimport { Matrix, Quaternion, TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { PivotTools } from \"core/Misc/pivotTools\";\r\nimport type { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\nimport type { Nullable } from \"core/types\";\r\n\r\nimport type { HolographicSlate } from \"../controls/holographicSlate\";\r\nimport type { GizmoHandle } from \"./gizmoHandle\";\r\nimport { CornerHandle, SideHandle } from \"./gizmoHandle\";\r\n\r\n// Mask contains the influence of the drag offset vectors on dimensions or origin of the slate\r\n// Mask vector is multiplied to the offset vector\r\ntype HandleMasks = {\r\n    dimensions: Vector3;\r\n    origin: Vector3;\r\n};\r\n\r\n/**\r\n * Gizmo to resize 2D slates\r\n */\r\nexport class SlateGizmo extends Gizmo {\r\n    private _boundingDimensions = new Vector3(0, 0, 0);\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<AbstractMesh>>>;\r\n    private _renderObserver: Nullable<Observer<Scene>> = null;\r\n\r\n    private _tmpQuaternion = new Quaternion();\r\n    private _tmpVector = new Vector3(0, 0, 0);\r\n\r\n    // Ordered bl, br, tr, tl\r\n    private _corners: CornerHandle[] = [];\r\n    // Ordered left, bottom, right, top\r\n    private _sides: SideHandle[] = [];\r\n    private _handlesParent: TransformNode;\r\n    private _handleHovered: Nullable<GizmoHandle>;\r\n    private _handleDragged: Nullable<GizmoHandle>;\r\n\r\n    private _boundingBoxGizmo = {\r\n        min: new Vector3(),\r\n        max: new Vector3(),\r\n    };\r\n\r\n    /**\r\n     * Value we use to offset handles from mesh\r\n     */\r\n    private _margin = 0.35;\r\n    private _handleSize = 0.075;\r\n    private _attachedSlate: Nullable<HolographicSlate> = null;\r\n    private _existingSlateScale = new Vector3();\r\n    /**\r\n     * If set, the handles will increase in size based on the distance away from the camera to have a consistent screen size (Default: true)\r\n     */\r\n    public fixedScreenSize = false;\r\n    /**\r\n     * The distance away from the object which the draggable meshes should appear world sized when fixedScreenSize is set to true (default: 10)\r\n     */\r\n    public fixedScreenSizeDistanceFactor = 10;\r\n\r\n    /**\r\n     * The slate attached to this gizmo\r\n     */\r\n    public set attachedSlate(control: Nullable<HolographicSlate>) {\r\n        if (control) {\r\n            this.attachedMesh = control.mesh;\r\n            this.updateBoundingBox();\r\n\r\n            this._pickedPointObserver = control._host.onPickingObservable.add((pickedMesh) => {\r\n                if (this._handleHovered && (!pickedMesh || pickedMesh.parent !== this._handleHovered.node)) {\r\n                    this._handleHovered.hover = false;\r\n                    this._handleHovered = null;\r\n                }\r\n\r\n                if (pickedMesh && pickedMesh.parent && pickedMesh.parent.reservedDataStore && pickedMesh.parent.reservedDataStore.handle) {\r\n                    const handle = pickedMesh.parent.reservedDataStore.handle as GizmoHandle;\r\n                    if (handle.gizmo === this) {\r\n                        this._handleHovered = handle;\r\n                        this._handleHovered.hover = true;\r\n                    }\r\n                }\r\n            });\r\n        } else if (this._attachedSlate) {\r\n            this._attachedSlate._host.onPickingObservable.remove(this._pickedPointObserver);\r\n        }\r\n        this._attachedSlate = control;\r\n    }\r\n\r\n    public get attachedSlate(): Nullable<HolographicSlate> {\r\n        return this._attachedSlate;\r\n    }\r\n\r\n    constructor(utilityLayer?: UtilityLayerRenderer) {\r\n        super(utilityLayer);\r\n\r\n        this._createNode();\r\n        this.updateScale = false;\r\n\r\n        this._renderObserver = this.gizmoLayer.originalScene.onBeforeRenderObservable.add(() => {\r\n            // Only update the bounding box if scaling has changed\r\n            if (this.attachedMesh && !this._existingSlateScale.equals(this.attachedMesh.scaling)) {\r\n                this.updateBoundingBox();\r\n            }\r\n        });\r\n    }\r\n\r\n    private _createNode() {\r\n        this._handlesParent = new TransformNode(\"handlesParent\", this.gizmoLayer.utilityLayerScene);\r\n        this._handlesParent.rotationQuaternion = Quaternion.Identity();\r\n\r\n        const masksCorners = [\r\n            {\r\n                dimensions: new Vector3(-1, -1, 0),\r\n                origin: new Vector3(1, 0, 0),\r\n            },\r\n            {\r\n                dimensions: new Vector3(1, -1, 0),\r\n                origin: new Vector3(0, 0, 0),\r\n            },\r\n            {\r\n                dimensions: new Vector3(1, 1, 0),\r\n                origin: new Vector3(0, 1, 0),\r\n            },\r\n            {\r\n                dimensions: new Vector3(-1, 1, 0),\r\n                origin: new Vector3(1, 1, 0),\r\n            },\r\n        ];\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            const corner = new CornerHandle(this, this.gizmoLayer.utilityLayerScene);\r\n            this._corners.push(corner);\r\n            corner.node.rotation.z = (Math.PI / 2) * i;\r\n\r\n            corner.node.parent = this._handlesParent;\r\n            this._assignDragBehaviorCorners(\r\n                corner,\r\n                (originStart: Vector3, dimensionsStart: Vector3, offset: Vector3, masks: HandleMasks) => this._moveHandle(originStart, dimensionsStart, offset, masks, true),\r\n                masksCorners[i]\r\n            );\r\n        }\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            const side = new SideHandle(this, this.gizmoLayer.utilityLayerScene);\r\n            this._sides.push(side);\r\n            side.node.rotation.z = (Math.PI / 2) * i;\r\n            side.node.parent = this._handlesParent;\r\n            this._assignDragBehaviorSides(side, i % 2 === 0 ? new Vector3(0, 1, 0) : new Vector3(1, 0, 0));\r\n        }\r\n\r\n        this._handlesParent.parent = this._rootMesh;\r\n    }\r\n\r\n    private _keepAspectRatio(vector: Vector3, aspectRatio: number, invertDiagonal: boolean = false) {\r\n        const axis = TmpVectors.Vector3[0];\r\n        axis.copyFromFloats(aspectRatio, 1, 0).normalize();\r\n        if (invertDiagonal) {\r\n            axis.y *= -1;\r\n        }\r\n        const dot = Vector3.Dot(vector, axis);\r\n        vector.copyFrom(axis).scaleInPlace(dot);\r\n    }\r\n\r\n    private _clampDimensions(vector: Vector3, dimensions: Vector3, mask: Vector3, keepAspectRatio: boolean = false) {\r\n        const impact = TmpVectors.Vector3[0];\r\n        impact.copyFrom(vector).multiplyInPlace(mask);\r\n\r\n        const clampedDimensions = TmpVectors.Vector3[1];\r\n        clampedDimensions.copyFromFloats(\r\n            Math.max(this._attachedSlate!.minDimensions.x, impact.x + dimensions.x),\r\n            Math.max(this._attachedSlate!.minDimensions.y, impact.y + dimensions.y),\r\n            0\r\n        );\r\n\r\n        if (keepAspectRatio) {\r\n            // Extra logic to ensure the ratio is maintained when the vector has been clamped\r\n            const ratio = dimensions.x / dimensions.y;\r\n            clampedDimensions.x = Math.max(clampedDimensions.x, clampedDimensions.y * ratio);\r\n            clampedDimensions.y = Math.max(clampedDimensions.y, clampedDimensions.x / ratio);\r\n        }\r\n\r\n        // Calculating the real impact of vector on clamped dimensions\r\n        impact.copyFrom(clampedDimensions).subtractInPlace(dimensions);\r\n\r\n        vector.x = Math.sign(vector.x) * Math.abs(impact.x);\r\n        vector.y = Math.sign(vector.y) * Math.abs(impact.y);\r\n    }\r\n\r\n    private _moveHandle(originStart: Vector3, dimensionsStart: Vector3, offset: Vector3, masks: HandleMasks, isCorner: boolean) {\r\n        if (!this._attachedSlate) {\r\n            return;\r\n        }\r\n\r\n        if (isCorner) {\r\n            const aspectRatio = dimensionsStart.x / dimensionsStart.y;\r\n            this._keepAspectRatio(offset, aspectRatio, masks.dimensions.x * masks.dimensions.y < 0);\r\n        }\r\n        this._clampDimensions(offset, dimensionsStart, masks.dimensions, isCorner);\r\n\r\n        const offsetOriginMasked = TmpVectors.Vector3[0];\r\n        const offsetDimensionsMasked = TmpVectors.Vector3[1];\r\n        offsetOriginMasked.copyFrom(offset).multiplyInPlace(masks.origin);\r\n        offsetDimensionsMasked.copyFrom(offset).multiplyInPlace(masks.dimensions);\r\n\r\n        this._attachedSlate.origin.copyFrom(originStart).addInPlace(offsetOriginMasked);\r\n        this._attachedSlate.dimensions.set(dimensionsStart.x + offsetDimensionsMasked.x, dimensionsStart.y + offsetDimensionsMasked.y);\r\n    }\r\n\r\n    private _assignDragBehaviorCorners(\r\n        handle: GizmoHandle,\r\n        moveFn: (originStart: Vector3, dimensionsStart: Vector3, offset: Vector3, masks: HandleMasks) => void,\r\n        masks: HandleMasks\r\n    ) {\r\n        const dimensionsStart = new Vector3();\r\n        const originStart = new Vector3();\r\n        const dragOrigin = new Vector3();\r\n        const toObjectFrame = new Matrix();\r\n        const dragPlaneNormal = new Vector3();\r\n\r\n        const projectToRef = (position: Vector3, normal: Vector3, origin: Vector3, ref: Vector3) => {\r\n            // Projects on the plane with its normal and origin\r\n            position.subtractToRef(origin, TmpVectors.Vector3[0]);\r\n            const dot = Vector3.Dot(TmpVectors.Vector3[0], normal);\r\n            TmpVectors.Vector3[1].copyFrom(normal).scaleInPlace(dot);\r\n            TmpVectors.Vector3[0].subtractInPlace(TmpVectors.Vector3[1]);\r\n            TmpVectors.Vector3[0].addToRef(origin, ref);\r\n        };\r\n\r\n        const dragStart = (event: { position: Vector3 }) => {\r\n            if (this.attachedSlate && this.attachedMesh) {\r\n                dimensionsStart.set(this.attachedSlate.dimensions.x, this.attachedSlate.dimensions.y, Epsilon);\r\n                originStart.copyFrom(this.attachedSlate.origin);\r\n                dragOrigin.copyFrom(event.position);\r\n                toObjectFrame.copyFrom(this.attachedMesh.computeWorldMatrix(true));\r\n                toObjectFrame.invert();\r\n                this.attachedSlate._followButton.isToggled = false;\r\n                Vector3.TransformNormalToRef(Vector3.Forward(), this.attachedMesh.getWorldMatrix(), dragPlaneNormal);\r\n                dragPlaneNormal.normalize();\r\n\r\n                if (this._handleHovered) {\r\n                    this._handleDragged = this._handleHovered;\r\n                    this._handleDragged.drag = true;\r\n                }\r\n            }\r\n        };\r\n\r\n        const dragging = (event: { position: Vector3 }) => {\r\n            if (this.attachedSlate && this.attachedMesh) {\r\n                projectToRef(event.position, dragPlaneNormal, dragOrigin, this._tmpVector);\r\n                this._tmpVector.subtractInPlace(dragOrigin);\r\n                Vector3.TransformNormalToRef(this._tmpVector, toObjectFrame, this._tmpVector);\r\n\r\n                moveFn(originStart, dimensionsStart, this._tmpVector, masks);\r\n                this.attachedSlate._positionElements();\r\n                this.updateBoundingBox();\r\n            }\r\n        };\r\n\r\n        const dragEnd = () => {\r\n            if (this.attachedSlate && this.attachedNode) {\r\n                this.attachedSlate._updatePivot();\r\n\r\n                if (this._handleDragged) {\r\n                    this._handleDragged.drag = false;\r\n                    this._handleDragged = null;\r\n                }\r\n            }\r\n        };\r\n\r\n        handle.setDragBehavior(dragStart, dragging, dragEnd);\r\n    }\r\n\r\n    private _assignDragBehaviorSides(handle: GizmoHandle, dragPlaneNormal: Vector3) {\r\n        const quaternionOrigin = new Quaternion();\r\n        const dragOrigin = new Vector3();\r\n        const directionOrigin = new Vector3();\r\n        const worldPivot = new Vector3();\r\n        const worldPlaneNormal = new Vector3();\r\n\r\n        const dragStart = (event: { position: Vector3 }) => {\r\n            if (this.attachedSlate && this.attachedMesh) {\r\n                quaternionOrigin.copyFrom(this.attachedMesh.rotationQuaternion!);\r\n                dragOrigin.copyFrom(event.position);\r\n                worldPivot.copyFrom(this.attachedMesh.getAbsolutePivotPoint());\r\n                directionOrigin.copyFrom(dragOrigin).subtractInPlace(worldPivot).normalize();\r\n                this.attachedSlate._followButton.isToggled = false;\r\n                Vector3.TransformNormalToRef(dragPlaneNormal, this.attachedMesh.getWorldMatrix(), worldPlaneNormal);\r\n                worldPlaneNormal.normalize();\r\n\r\n                if (this._handleHovered) {\r\n                    this._handleDragged = this._handleHovered;\r\n                    this._handleDragged.drag = true;\r\n                }\r\n            }\r\n        };\r\n\r\n        const dragging = (event: { position: Vector3 }) => {\r\n            if (this.attachedSlate && this.attachedMesh) {\r\n                this._tmpVector.copyFrom(event.position);\r\n                this._tmpVector.subtractInPlace(worldPivot);\r\n                this._tmpVector.normalize();\r\n\r\n                const angle = -Vector3.GetAngleBetweenVectorsOnPlane(this._tmpVector, directionOrigin, worldPlaneNormal);\r\n                Quaternion.RotationAxisToRef(dragPlaneNormal, angle, this._tmpQuaternion);\r\n                quaternionOrigin.multiplyToRef(this._tmpQuaternion, this.attachedMesh.rotationQuaternion!);\r\n            }\r\n        };\r\n\r\n        const dragEnd = () => {\r\n            if (this.attachedSlate && this.attachedNode) {\r\n                this.attachedSlate._updatePivot();\r\n\r\n                if (this._handleDragged) {\r\n                    this._handleDragged.drag = false;\r\n                    this._handleDragged = null;\r\n                }\r\n            }\r\n        };\r\n\r\n        handle.setDragBehavior(dragStart, dragging, dragEnd);\r\n    }\r\n\r\n    protected _attachedNodeChanged(value: Nullable<AbstractMesh>) {\r\n        if (value) {\r\n            this.updateBoundingBox();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates the bounding box information for the gizmo\r\n     */\r\n    public updateBoundingBox() {\r\n        if (this.attachedMesh) {\r\n            PivotTools._RemoveAndStorePivotPoint(this.attachedMesh);\r\n\r\n            // Store original parent\r\n            const originalParent = this.attachedMesh.parent;\r\n            this.attachedMesh.setParent(null);\r\n\r\n            this._update();\r\n\r\n            // Rotate based on axis\r\n            if (!this.attachedMesh.rotationQuaternion) {\r\n                this.attachedMesh.rotationQuaternion = Quaternion.RotationYawPitchRoll(this.attachedMesh.rotation.y, this.attachedMesh.rotation.x, this.attachedMesh.rotation.z);\r\n            }\r\n\r\n            // Store original position and reset mesh to origin before computing the bounding box\r\n            this._tmpQuaternion.copyFrom(this.attachedMesh.rotationQuaternion);\r\n            this._tmpVector.copyFrom(this.attachedMesh.position);\r\n            this.attachedMesh.rotationQuaternion.set(0, 0, 0, 1);\r\n            this.attachedMesh.position.set(0, 0, 0);\r\n\r\n            // Update bounding dimensions/positions\r\n            const boundingMinMax = this.attachedMesh.getHierarchyBoundingVectors();\r\n            boundingMinMax.max.subtractToRef(boundingMinMax.min, this._boundingDimensions);\r\n            this._boundingBoxGizmo.min = boundingMinMax.min;\r\n            this._boundingBoxGizmo.max = boundingMinMax.max;\r\n\r\n            // Update handles of the gizmo\r\n            this._updateHandlesPosition();\r\n            this._updateHandlesScaling();\r\n\r\n            // Restore position/rotation values\r\n            this.attachedMesh.rotationQuaternion.copyFrom(this._tmpQuaternion);\r\n            this.attachedMesh.position.copyFrom(this._tmpVector);\r\n\r\n            PivotTools._RestorePivotPoint(this.attachedMesh);\r\n\r\n            // Restore original parent\r\n            this.attachedMesh.setParent(originalParent);\r\n            this.attachedMesh.computeWorldMatrix(true);\r\n\r\n            this._existingSlateScale.copyFrom(this.attachedMesh.scaling);\r\n        }\r\n    }\r\n\r\n    private _updateHandlesPosition() {\r\n        const min = this._boundingBoxGizmo.min.clone();\r\n        const max = this._boundingBoxGizmo.max.clone();\r\n\r\n        const handleScaling = this._corners[0].node.scaling.length();\r\n        min.x -= this._margin * handleScaling;\r\n        min.y -= this._margin * handleScaling;\r\n        max.x += this._margin * handleScaling;\r\n        max.y += this._margin * handleScaling;\r\n\r\n        const center = min.add(max).scaleInPlace(0.5);\r\n\r\n        this._corners[0].node.position.copyFromFloats(min.x, min.y, 0);\r\n        this._corners[1].node.position.copyFromFloats(max.x, min.y, 0);\r\n        this._corners[2].node.position.copyFromFloats(max.x, max.y, 0);\r\n        this._corners[3].node.position.copyFromFloats(min.x, max.y, 0);\r\n\r\n        this._sides[0].node.position.copyFromFloats(min.x, center.y, 0);\r\n        this._sides[1].node.position.copyFromFloats(center.x, min.y, 0);\r\n        this._sides[2].node.position.copyFromFloats(max.x, center.y, 0);\r\n        this._sides[3].node.position.copyFromFloats(center.x, max.y, 0);\r\n    }\r\n\r\n    private _updateHandlesScaling() {\r\n        if (this._attachedSlate && this._attachedSlate.mesh) {\r\n            const scaledWidth = this._attachedSlate.mesh.scaling.x * this._attachedSlate.dimensions.x;\r\n            const scaledHeight = this._attachedSlate.mesh.scaling.y * this._attachedSlate.dimensions.y;\r\n            const scale = Math.min(scaledWidth, scaledHeight) * this._handleSize;\r\n            for (let index = 0; index < this._corners.length; index++) {\r\n                this._corners[index].node.scaling.setAll(scale);\r\n            }\r\n            for (let index = 0; index < this._sides.length; index++) {\r\n                this._sides[index].node.scaling.setAll(scale);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _update() {\r\n        super._update();\r\n\r\n        if (!this.gizmoLayer.utilityLayerScene.activeCamera) {\r\n            return;\r\n        }\r\n\r\n        if (this._attachedSlate && this._attachedSlate.mesh) {\r\n            if (this.fixedScreenSize) {\r\n                this._attachedSlate.mesh.absolutePosition.subtractToRef(this.gizmoLayer.utilityLayerScene.activeCamera.position, this._tmpVector);\r\n                const distanceFromCamera = (this._handleSize * this._tmpVector.length()) / this.fixedScreenSizeDistanceFactor;\r\n                for (let i = 0; i < this._corners.length; i++) {\r\n                    this._corners[i].node.scaling.set(distanceFromCamera, distanceFromCamera, distanceFromCamera);\r\n                }\r\n                for (let i = 0; i < this._sides.length; i++) {\r\n                    this._sides[i].node.scaling.set(distanceFromCamera, distanceFromCamera, distanceFromCamera);\r\n                }\r\n            }\r\n            this._updateHandlesPosition();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this.gizmoLayer.originalScene.onBeforeRenderObservable.remove(this._renderObserver);\r\n\r\n        // Will dispose rootMesh and all descendants\r\n        super.dispose();\r\n\r\n        for (const corner of this._corners) {\r\n            corner.dispose();\r\n        }\r\n\r\n        for (const side of this._sides) {\r\n            side.dispose();\r\n        }\r\n    }\r\n}\r\n", "import { ContentDisplay3D } from \"./contentDisplay3D\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { TouchHolographicButton } from \"./touchHolographicButton\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport { Control } from \"../../2D/controls/control\";\r\nimport { TextBlock, TextWrapping } from \"../../2D/controls/textBlock\";\r\nimport { DefaultBehavior } from \"../behaviors/defaultBehavior\";\r\nimport { SlateGizmo } from \"../gizmos/slateGizmo\";\r\nimport { FluentMaterial } from \"../materials/fluent/fluentMaterial\";\r\nimport { FluentBackplateMaterial } from \"../materials/fluentBackplate/fluentBackplateMaterial\";\r\nimport { PointerDragBehavior } from \"core/Behaviors/Meshes/pointerDragBehavior\";\r\nimport type { Texture } from \"core/Materials/Textures/texture\";\r\nimport { Vector4 } from \"core/Maths/math\";\r\nimport { Epsilon } from \"core/Maths/math.constants\";\r\nimport { Scalar } from \"core/Maths/math.scalar\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Quaternion, Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { Viewport } from \"core/Maths/math.viewport\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport { CreatePlane } from \"core/Meshes/Builders/planeBuilder\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { Mesh } from \"core/Meshes/mesh\";\r\nimport { VertexData } from \"core/Meshes/mesh.vertexData\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\n\r\n/**\r\n * Class used to create a holographic slate\r\n * @since 5.0.0\r\n */\r\nexport class HolographicSlate extends ContentDisplay3D {\r\n    /**\r\n     * Base Url for the assets.\r\n     */\r\n    public static ASSETS_BASE_URL: string = \"https://assets.babylonjs.com/meshes/MRTK/\";\r\n    /**\r\n     * File name for the close icon.\r\n     */\r\n    public static CLOSE_ICON_FILENAME: string = \"IconClose.png\";\r\n    /**\r\n     * File name for the close icon.\r\n     */\r\n    public static FOLLOW_ICON_FILENAME: string = \"IconFollowMe.png\";\r\n\r\n    private static _DEFAULT_TEXT_RESOLUTION_Y = 102.4;\r\n\r\n    /**\r\n     * Margin between title bar and contentplate\r\n     */\r\n    public titleBarMargin = 0.005;\r\n\r\n    /**\r\n     * Origin in local coordinates (top left corner)\r\n     */\r\n    public origin = new Vector3(0, 0, 0);\r\n\r\n    private _dimensions = new Vector2(21.875, 12.5);\r\n    private _titleBarHeight = 0.625;\r\n\r\n    private _titleBarMaterial: FluentBackplateMaterial;\r\n    private _backMaterial: FluentBackplateMaterial;\r\n    private _contentMaterial: FluentMaterial;\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n    private _positionChangedObserver: Nullable<Observer<{ position: Vector3 }>>;\r\n\r\n    private _titleText = \"\";\r\n    private _titleTextComponent: TextBlock;\r\n\r\n    private _contentViewport: Viewport;\r\n    private _contentDragBehavior: PointerDragBehavior;\r\n\r\n    private _defaultBehavior: DefaultBehavior;\r\n    /**\r\n     * Regroups all mesh behaviors for the slate\r\n     */\r\n    public get defaultBehavior(): DefaultBehavior {\r\n        return this._defaultBehavior;\r\n    }\r\n\r\n    /** @internal */\r\n    public _gizmo: SlateGizmo;\r\n\r\n    protected _titleBar: Mesh;\r\n    protected _titleBarTitle: Mesh;\r\n    protected _contentPlate: Mesh;\r\n    protected _backPlate: Mesh;\r\n    /** @internal */\r\n    public _followButton: TouchHolographicButton;\r\n    protected _closeButton: TouchHolographicButton;\r\n    protected _contentScaleRatio = 1;\r\n\r\n    /**\r\n     * 2D dimensions of the slate\r\n     */\r\n    public get dimensions() {\r\n        return this._dimensions;\r\n    }\r\n    public set dimensions(value) {\r\n        //clamp, respecting ratios\r\n        let scale = 1.0;\r\n        if (value.x < this.minDimensions.x || value.y < this.minDimensions.y) {\r\n            const newRatio = value.x / value.y;\r\n            const minRatio = this.minDimensions.x / this.minDimensions.y;\r\n            if (minRatio > newRatio) {\r\n                // We just need to make sure the x-val is greater than the min\r\n                scale = this.minDimensions.x / value.x;\r\n            } else {\r\n                // We just need to make sure the y-val is greater than the min\r\n                scale = this.minDimensions.y / value.y;\r\n            }\r\n        }\r\n\r\n        this._dimensions.copyFrom(value).scaleInPlace(scale);\r\n        this._updatePivot();\r\n        this._positionElements();\r\n    }\r\n\r\n    /**\r\n     * Minimum dimensions of the slate\r\n     */\r\n    public minDimensions = new Vector2(15.625, 6.25);\r\n\r\n    /**\r\n     * Default dimensions of the slate\r\n     */\r\n    public readonly defaultDimensions = this._dimensions.clone();\r\n\r\n    /**\r\n     * Height of the title bar component\r\n     */\r\n    public get titleBarHeight() {\r\n        return this._titleBarHeight;\r\n    }\r\n    public set titleBarHeight(value) {\r\n        this._titleBarHeight = value;\r\n    }\r\n\r\n    /**\r\n     * Rendering ground id of all the meshes\r\n     */\r\n    public set renderingGroupId(id: number) {\r\n        this._titleBar.renderingGroupId = id;\r\n        this._titleBarTitle.renderingGroupId = id;\r\n        this._contentPlate.renderingGroupId = id;\r\n        this._backPlate.renderingGroupId = id;\r\n    }\r\n    public get renderingGroupId(): number {\r\n        return this._titleBar.renderingGroupId;\r\n    }\r\n\r\n    /**\r\n     * The title text displayed at the top of the slate\r\n     */\r\n    public set title(title: string) {\r\n        this._titleText = title;\r\n        if (this._titleTextComponent) {\r\n            this._titleTextComponent.text = title;\r\n        }\r\n    }\r\n    public get title() {\r\n        return this._titleText;\r\n    }\r\n\r\n    /**\r\n     * Creates a new slate\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n\r\n        this._followButton = new TouchHolographicButton(\"followButton\" + this.name);\r\n        this._followButton.isToggleButton = true;\r\n        this._closeButton = new TouchHolographicButton(\"closeButton\" + this.name);\r\n\r\n        this._contentViewport = new Viewport(0, 0, 1, 1);\r\n        this._contentDragBehavior = new PointerDragBehavior({\r\n            dragPlaneNormal: new Vector3(0, 0, -1),\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Apply the facade texture (created from the content property).\r\n     * This function can be overloaded by child classes\r\n     * @param facadeTexture defines the AdvancedDynamicTexture to use\r\n     */\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        this._contentMaterial.albedoTexture = facadeTexture;\r\n        this._resetContentPositionAndZoom();\r\n        this._applyContentViewport();\r\n\r\n        facadeTexture.attachToMesh(this._contentPlate, true);\r\n    }\r\n\r\n    private _addControl(control: Control3D): void {\r\n        control._host = this._host;\r\n        if (this._host.utilityLayer) {\r\n            control._prepareNode(this._host.utilityLayer.utilityLayerScene);\r\n        }\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"HolographicSlate\";\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _positionElements() {\r\n        const followButton = this._followButton;\r\n        const closeButton = this._closeButton;\r\n        const titleBar = this._titleBar;\r\n        const titleBarTitle = this._titleBarTitle;\r\n        const contentPlate = this._contentPlate;\r\n        const backPlate = this._backPlate;\r\n\r\n        if (followButton && closeButton && titleBar) {\r\n            closeButton.scaling.setAll(this.titleBarHeight);\r\n            followButton.scaling.setAll(this.titleBarHeight);\r\n            closeButton.position.copyFromFloats(this.dimensions.x - this.titleBarHeight / 2, -this.titleBarHeight / 2, 0).addInPlace(this.origin);\r\n            followButton.position.copyFromFloats(this.dimensions.x - (3 * this.titleBarHeight) / 2, -this.titleBarHeight / 2, 0).addInPlace(this.origin);\r\n\r\n            const contentPlateHeight = this.dimensions.y - this.titleBarHeight - this.titleBarMargin;\r\n            const rightHandScene = contentPlate.getScene().useRightHandedSystem;\r\n\r\n            titleBar.scaling.set(this.dimensions.x, this.titleBarHeight, Epsilon);\r\n            titleBarTitle.scaling.set(this.dimensions.x - 2 * this.titleBarHeight, this.titleBarHeight, Epsilon);\r\n            contentPlate.scaling.copyFromFloats(this.dimensions.x, contentPlateHeight, Epsilon);\r\n            backPlate.scaling.copyFromFloats(this.dimensions.x, contentPlateHeight, Epsilon);\r\n\r\n            titleBar.position.copyFromFloats(this.dimensions.x / 2, -(this.titleBarHeight / 2), 0).addInPlace(this.origin);\r\n            titleBarTitle.position\r\n                .copyFromFloats(this.dimensions.x / 2 - this.titleBarHeight, -(this.titleBarHeight / 2), rightHandScene ? Epsilon : -Epsilon)\r\n                .addInPlace(this.origin);\r\n            contentPlate.position.copyFromFloats(this.dimensions.x / 2, -(this.titleBarHeight + this.titleBarMargin + contentPlateHeight / 2), 0).addInPlace(this.origin);\r\n            backPlate.position\r\n                .copyFromFloats(this.dimensions.x / 2, -(this.titleBarHeight + this.titleBarMargin + contentPlateHeight / 2), rightHandScene ? -Epsilon : Epsilon)\r\n                .addInPlace(this.origin);\r\n\r\n            // Update the title's AdvancedDynamicTexture scale to avoid visual stretching\r\n            this._titleTextComponent.host.scaleTo(\r\n                (HolographicSlate._DEFAULT_TEXT_RESOLUTION_Y * titleBarTitle.scaling.x) / titleBarTitle.scaling.y,\r\n                HolographicSlate._DEFAULT_TEXT_RESOLUTION_Y\r\n            );\r\n\r\n            const aspectRatio = this.dimensions.x / contentPlateHeight;\r\n            this._contentViewport.width = this._contentScaleRatio;\r\n            this._contentViewport.height = this._contentScaleRatio / aspectRatio;\r\n\r\n            this._applyContentViewport();\r\n            if (this._gizmo) {\r\n                this._gizmo.updateBoundingBox();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _applyContentViewport() {\r\n        if (this._contentPlate?.material && (this._contentPlate.material as FluentMaterial).albedoTexture) {\r\n            const tex = (this._contentPlate.material as FluentMaterial).albedoTexture as Texture;\r\n            tex.uScale = this._contentScaleRatio;\r\n            tex.vScale = (this._contentScaleRatio / this._contentViewport.width) * this._contentViewport.height;\r\n            tex.uOffset = this._contentViewport.x;\r\n            tex.vOffset = this._contentViewport.y;\r\n        }\r\n    }\r\n\r\n    private _resetContentPositionAndZoom() {\r\n        this._contentViewport.x = 0;\r\n        this._contentViewport.y = 1 - this._contentViewport.height / this._contentViewport.width;\r\n        this._contentScaleRatio = 1;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _updatePivot() {\r\n        if (!this.mesh) {\r\n            return;\r\n        }\r\n\r\n        // Update pivot point so it is at the center of geometry\r\n        // As origin is topleft corner in 2D, dimensions are calculated towards bottom right corner, thus y axis is downwards\r\n        const center = new Vector3(this.dimensions.x * 0.5, -this.dimensions.y * 0.5, Epsilon);\r\n        center.addInPlace(this.origin);\r\n        center.z = 0;\r\n\r\n        const origin = new Vector3(0, 0, 0);\r\n        Vector3.TransformCoordinatesToRef(origin, this.mesh.computeWorldMatrix(true), origin);\r\n        this.mesh.setPivotPoint(center);\r\n        const origin2 = new Vector3(0, 0, 0);\r\n        Vector3.TransformCoordinatesToRef(origin2, this.mesh.computeWorldMatrix(true), origin2);\r\n        this.mesh.position.addInPlace(origin).subtractInPlace(origin2);\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        const node = new Mesh(\"slate_\" + this.name, scene);\r\n\r\n        this._titleBar = CreateBox(\"titleBar_\" + this.name, { size: 1 }, scene);\r\n        this._titleBarTitle = CreatePlane(\"titleText_\" + this.name, { size: 1 }, scene);\r\n        this._titleBarTitle.parent = node;\r\n        this._titleBarTitle.isPickable = false;\r\n\r\n        const adt = AdvancedDynamicTexture.CreateForMesh(this._titleBarTitle);\r\n        this._titleTextComponent = new TextBlock(\"titleText_\" + this.name, this._titleText);\r\n        this._titleTextComponent.textWrapping = TextWrapping.Ellipsis;\r\n        this._titleTextComponent.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._titleTextComponent.color = \"white\";\r\n        this._titleTextComponent.fontSize = HolographicSlate._DEFAULT_TEXT_RESOLUTION_Y / 2;\r\n        this._titleTextComponent.paddingLeft = HolographicSlate._DEFAULT_TEXT_RESOLUTION_Y / 4;\r\n        adt.addControl(this._titleTextComponent);\r\n\r\n        if (scene.useRightHandedSystem) {\r\n            const faceUV = new Vector4(0, 0, 1, 1);\r\n            this._contentPlate = CreatePlane(\"contentPlate_\" + this.name, { size: 1, sideOrientation: VertexData.BACKSIDE, frontUVs: faceUV }, scene);\r\n            this._backPlate = CreatePlane(\"backPlate_\" + this.name, { size: 1, sideOrientation: VertexData.FRONTSIDE }, scene);\r\n        } else {\r\n            const faceUV = new Vector4(0, 0, 1, 1);\r\n            this._contentPlate = CreatePlane(\"contentPlate_\" + this.name, { size: 1, sideOrientation: VertexData.FRONTSIDE, frontUVs: faceUV }, scene);\r\n            this._backPlate = CreatePlane(\"backPlate_\" + this.name, { size: 1, sideOrientation: VertexData.BACKSIDE }, scene);\r\n        }\r\n\r\n        this._titleBar.parent = node;\r\n        this._titleBar.isNearGrabbable = true;\r\n        this._contentPlate.parent = node;\r\n        this._backPlate.parent = node;\r\n        this._attachContentPlateBehavior();\r\n\r\n        this._addControl(this._followButton);\r\n        this._addControl(this._closeButton);\r\n\r\n        const followButton = this._followButton;\r\n        const closeButton = this._closeButton;\r\n\r\n        followButton.node!.parent = node;\r\n        closeButton.node!.parent = node;\r\n\r\n        this._positionElements();\r\n\r\n        this._followButton.imageUrl = HolographicSlate.ASSETS_BASE_URL + HolographicSlate.FOLLOW_ICON_FILENAME;\r\n        this._closeButton.imageUrl = HolographicSlate.ASSETS_BASE_URL + HolographicSlate.CLOSE_ICON_FILENAME;\r\n\r\n        this._followButton.isBackplateVisible = false;\r\n        this._closeButton.isBackplateVisible = false;\r\n\r\n        this._followButton.onToggleObservable.add((isToggled) => {\r\n            this._defaultBehavior.followBehaviorEnabled = isToggled;\r\n            if (this._defaultBehavior.followBehaviorEnabled) {\r\n                this._defaultBehavior.followBehavior.recenter();\r\n            }\r\n        });\r\n\r\n        this._closeButton.onPointerClickObservable.add(() => {\r\n            this.dispose();\r\n        });\r\n\r\n        node.rotationQuaternion = Quaternion.Identity();\r\n        node.isVisible = false;\r\n\r\n        return node;\r\n    }\r\n\r\n    private _attachContentPlateBehavior() {\r\n        this._contentDragBehavior.attach(this._contentPlate);\r\n        this._contentDragBehavior.moveAttached = false;\r\n        this._contentDragBehavior.useObjectOrientationForDragging = true;\r\n        this._contentDragBehavior.updateDragPlane = false;\r\n\r\n        const origin = new Vector3();\r\n        const worldDimensions = new Vector3();\r\n        const upWorld = new Vector3();\r\n        const rightWorld = new Vector3();\r\n        const projectedOffset = new Vector2();\r\n        let startViewport: Viewport;\r\n        let worldMatrix: Matrix;\r\n\r\n        this._contentDragBehavior.onDragStartObservable.add((event) => {\r\n            if (!this.node) {\r\n                return;\r\n            }\r\n            startViewport = this._contentViewport.clone();\r\n            worldMatrix = this.node.computeWorldMatrix(true);\r\n\r\n            origin.copyFrom(event.dragPlanePoint);\r\n            worldDimensions.set(this.dimensions.x, this.dimensions.y, Epsilon);\r\n            worldDimensions.y -= this.titleBarHeight + this.titleBarMargin;\r\n            Vector3.TransformNormalToRef(worldDimensions, worldMatrix, worldDimensions);\r\n            upWorld.copyFromFloats(0, 1, 0);\r\n            Vector3.TransformNormalToRef(upWorld, worldMatrix, upWorld);\r\n            rightWorld.copyFromFloats(1, 0, 0);\r\n            Vector3.TransformNormalToRef(rightWorld, worldMatrix, rightWorld);\r\n            upWorld.normalize();\r\n            upWorld.scaleInPlace(1 / Vector3.Dot(upWorld, worldDimensions));\r\n            rightWorld.normalize();\r\n            rightWorld.scaleInPlace(1 / Vector3.Dot(rightWorld, worldDimensions));\r\n        });\r\n\r\n        const offset = new Vector3();\r\n        this._contentDragBehavior.onDragObservable.add((event) => {\r\n            offset.copyFrom(event.dragPlanePoint);\r\n            offset.subtractInPlace(origin);\r\n            projectedOffset.copyFromFloats(Vector3.Dot(offset, rightWorld), Vector3.Dot(offset, upWorld));\r\n\r\n            // By default, content takes full width available and height is cropped to keep aspect ratio\r\n            this._contentViewport.x = Scalar.Clamp(startViewport.x - offset.x, 0, 1 - this._contentViewport.width * this._contentScaleRatio);\r\n            this._contentViewport.y = Scalar.Clamp(startViewport.y - offset.y, 0, 1 - this._contentViewport.height * this._contentScaleRatio);\r\n            this._applyContentViewport();\r\n        });\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        // TODO share materials\r\n        this._titleBarMaterial = new FluentBackplateMaterial(`${this.name} plateMaterial`, mesh.getScene());\r\n\r\n        this._contentMaterial = new FluentMaterial(`${this.name} contentMaterial`, mesh.getScene());\r\n        this._contentMaterial.renderBorders = true;\r\n\r\n        this._backMaterial = new FluentBackplateMaterial(`${this.name} backPlate`, mesh.getScene());\r\n        this._backMaterial.lineWidth = Epsilon;\r\n        this._backMaterial.radius = 0.005;\r\n        this._backMaterial.backFaceCulling = true;\r\n\r\n        this._titleBar.material = this._titleBarMaterial;\r\n        this._contentPlate.material = this._contentMaterial;\r\n        this._backPlate.material = this._backMaterial;\r\n\r\n        this._resetContent();\r\n        this._applyContentViewport();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _prepareNode(scene: Scene): void {\r\n        super._prepareNode(scene);\r\n        this._gizmo = new SlateGizmo(this._host.utilityLayer!);\r\n        this._gizmo.attachedSlate = this;\r\n        this._defaultBehavior = new DefaultBehavior();\r\n        this._defaultBehavior.attach(this.node as Mesh, [this._titleBar]);\r\n        this._defaultBehavior.sixDofDragBehavior.onDragStartObservable.add(() => {\r\n            this._followButton.isToggled = false;\r\n        });\r\n\r\n        this._positionChangedObserver = this._defaultBehavior.sixDofDragBehavior.onPositionChangedObservable.add(() => {\r\n            this._gizmo.updateBoundingBox();\r\n        });\r\n\r\n        this._updatePivot();\r\n        this.resetDefaultAspectAndPose(false);\r\n    }\r\n\r\n    /**\r\n     * Resets the aspect and pose of the slate so it is right in front of the active camera, facing towards it.\r\n     * @param resetAspect Should the slate's dimensions/aspect ratio be reset as well\r\n     */\r\n    public resetDefaultAspectAndPose(resetAspect: boolean = true) {\r\n        if (!this._host || !this._host.utilityLayer || !this.node) {\r\n            return;\r\n        }\r\n        const scene = this._host.utilityLayer.utilityLayerScene;\r\n        const camera = scene.activeCamera;\r\n        if (camera) {\r\n            const worldMatrix = camera.getWorldMatrix();\r\n            const backward = Vector3.TransformNormal(Vector3.Backward(scene.useRightHandedSystem), worldMatrix);\r\n            this.origin.setAll(0);\r\n            this._gizmo.updateBoundingBox();\r\n            const pivot = this.node.getAbsolutePivotPoint();\r\n            this.node.position.copyFrom(camera.position).subtractInPlace(backward).subtractInPlace(pivot);\r\n            this.node.rotationQuaternion = Quaternion.FromLookDirectionLH(backward, new Vector3(0, 1, 0));\r\n\r\n            if (resetAspect) {\r\n                this.dimensions = this.defaultDimensions;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n        this._titleBarMaterial.dispose();\r\n        this._contentMaterial.dispose();\r\n\r\n        this._titleBar.dispose();\r\n        this._titleBarTitle.dispose();\r\n        this._contentPlate.dispose();\r\n        this._backPlate.dispose();\r\n\r\n        this._followButton.dispose();\r\n        this._closeButton.dispose();\r\n\r\n        this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n        this._defaultBehavior.sixDofDragBehavior.onPositionChangedObservable.remove(this._positionChangedObserver);\r\n\r\n        this._defaultBehavior.detach();\r\n        this._gizmo.dispose();\r\n        this._contentDragBehavior.detach();\r\n    }\r\n}\r\n", "import type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nimport { Button3D } from \"./button3D\";\r\n\r\n/**\r\n * Class used to create an interactable object. It's a 3D button using a mesh coming from the current scene\r\n */\r\nexport class MeshButton3D extends Button3D {\r\n    /** @internal */\r\n    protected _currentMesh: Mesh;\r\n\r\n    /**\r\n     * Creates a new 3D button based on a mesh\r\n     * @param mesh mesh to become a 3D button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(mesh: Mesh, name?: string) {\r\n        super(name);\r\n        this._currentMesh = mesh;\r\n\r\n        /**\r\n         * Provides a default behavior on hover/out & up/down\r\n         * Override those function to create your own desired behavior specific to your mesh\r\n         */\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.1);\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 1.1);\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"MeshButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this._currentMesh.getChildMeshes().forEach((mesh) => {\r\n            this._injectGUI3DReservedDataStore(mesh).control = this;\r\n        });\r\n        return this._currentMesh;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _affectMaterial(mesh: AbstractMesh) {}\r\n}\r\n", "import type { Scene } from \"core/scene\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport { TouchHolographicButton } from \"./touchHolographicButton\";\r\nimport { DefaultBehavior } from \"../behaviors/defaultBehavior\";\r\nimport { TouchHolographicMenu } from \"./touchHolographicMenu\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport type { PickingInfo } from \"core/Collisions/pickingInfo\";\r\n\r\n/**\r\n * NearMenu that displays buttons and follows the camera\r\n * @since 5.0.0\r\n */\r\nexport class NearMenu extends TouchHolographicMenu {\r\n    /**\r\n     * Base Url for the assets.\r\n     */\r\n    private static _ASSETS_BASE_URL: string = \"https://assets.babylonjs.com/meshes/MRTK/\";\r\n    /**\r\n     * File name for the close icon.\r\n     */\r\n    private static _PIN_ICON_FILENAME: string = \"IconPin.png\";\r\n\r\n    private _pinButton: TouchHolographicButton;\r\n    private _dragObserver: Nullable<\r\n        Observer<{\r\n            delta: Vector3;\r\n            position: Vector3;\r\n            pickInfo: PickingInfo;\r\n        }>\r\n    >;\r\n\r\n    private _defaultBehavior: DefaultBehavior;\r\n    /**\r\n     * Regroups all mesh behaviors for the near menu\r\n     */\r\n    public get defaultBehavior(): DefaultBehavior {\r\n        return this._defaultBehavior;\r\n    }\r\n\r\n    private _isPinned: boolean = false;\r\n    /**\r\n     * Indicates if the near menu is world-pinned\r\n     */\r\n    public get isPinned(): boolean {\r\n        return this._isPinned;\r\n    }\r\n\r\n    public set isPinned(value: boolean) {\r\n        // Tell the pin button to toggle if this was called manually, for clean state control\r\n        if (this._pinButton.isToggled !== value) {\r\n            this._pinButton.isToggled = value;\r\n            return;\r\n        }\r\n\r\n        this._isPinned = value;\r\n\r\n        if (value) {\r\n            this._defaultBehavior.followBehaviorEnabled = false;\r\n        } else {\r\n            this._defaultBehavior.followBehaviorEnabled = true;\r\n        }\r\n    }\r\n\r\n    private _createPinButton(parent: TransformNode) {\r\n        const control = new TouchHolographicButton(\"pin\" + this.name, false);\r\n        control.imageUrl = NearMenu._ASSETS_BASE_URL + NearMenu._PIN_ICON_FILENAME;\r\n        control.parent = this;\r\n        control._host = this._host;\r\n        control.isToggleButton = true;\r\n        control.onToggleObservable.add((newState) => {\r\n            this.isPinned = newState;\r\n        });\r\n\r\n        if (this._host.utilityLayer) {\r\n            control._prepareNode(this._host.utilityLayer.utilityLayerScene);\r\n            control.scaling.scaleInPlace(TouchHolographicMenu.MENU_BUTTON_SCALE);\r\n\r\n            if (control.node) {\r\n                control.node.parent = parent;\r\n            }\r\n        }\r\n\r\n        return control;\r\n    }\r\n\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        const node = super._createNode(scene)! as Mesh;\r\n\r\n        this._pinButton = this._createPinButton(node);\r\n        this.isPinned = false;\r\n\r\n        this._defaultBehavior.attach(node, [this._backPlate]);\r\n        this._defaultBehavior.followBehavior.ignoreCameraPitchAndRoll = true;\r\n        this._defaultBehavior.followBehavior.pitchOffset = -15;\r\n        this._defaultBehavior.followBehavior.minimumDistance = 0.3;\r\n        this._defaultBehavior.followBehavior.defaultDistance = 0.4;\r\n        this._defaultBehavior.followBehavior.maximumDistance = 0.6;\r\n\r\n        this._backPlate.isNearGrabbable = true;\r\n        node.isVisible = false;\r\n\r\n        return node;\r\n    }\r\n\r\n    protected _finalProcessing() {\r\n        super._finalProcessing();\r\n\r\n        this._pinButton.position.copyFromFloats((this._backPlate.scaling.x + TouchHolographicMenu.MENU_BUTTON_SCALE) / 2, this._backPlate.scaling.y / 2, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates a near menu GUI 3D control\r\n     * @param name name of the near menu\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n\r\n        this._defaultBehavior = new DefaultBehavior();\r\n        this._dragObserver = this._defaultBehavior.sixDofDragBehavior.onDragObservable.add(() => {\r\n            this.isPinned = true;\r\n        });\r\n\r\n        this.backPlateMargin = 1;\r\n    }\r\n\r\n    /**\r\n     * Disposes the near menu\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._defaultBehavior.sixDofDragBehavior.onDragObservable.remove(this._dragObserver);\r\n        this._defaultBehavior.detach();\r\n    }\r\n}\r\n", "import { TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\n\r\nimport { Container3D } from \"./container3D\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a plane\r\n */\r\nexport class PlanePanel extends VolumeBasedPanel {\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        const mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        control.position = nodePosition.clone();\r\n        const target = TmpVectors.Vector3[0];\r\n\r\n        target.copyFrom(nodePosition);\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                target.addInPlace(new Vector3(0, 0, 1));\r\n                mesh.lookAt(target);\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                target.addInPlace(new Vector3(0, 0, -1));\r\n                mesh.lookAt(target);\r\n                break;\r\n        }\r\n    }\r\n}\r\n", "import { Tools } from \"core/Misc/tools\";\r\nimport { TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport type { float } from \"core/types\";\r\n\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a container panel where items get randomized planar mapping\r\n */\r\nexport class ScatterPanel extends VolumeBasedPanel {\r\n    private _iteration = 100.0;\r\n\r\n    /**\r\n     * Gets or sets the number of iteration to use to scatter the controls (100 by default)\r\n     */\r\n    public get iteration(): float {\r\n        return this._iteration;\r\n    }\r\n\r\n    public set iteration(value: float) {\r\n        if (this._iteration === value) {\r\n            return;\r\n        }\r\n\r\n        this._iteration = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        const mesh = control.mesh;\r\n        const newPos = this._scatterMapping(nodePosition);\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                mesh.lookAt(new Vector3(0, 0, 1));\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(0, 0, -1));\r\n                break;\r\n        }\r\n\r\n        control.position = newPos;\r\n    }\r\n\r\n    private _scatterMapping(source: Vector3): Vector3 {\r\n        source.x = (1.0 - Math.random() * 2.0) * this._cellWidth;\r\n        source.y = (1.0 - Math.random() * 2.0) * this._cellHeight;\r\n\r\n        return source;\r\n    }\r\n\r\n    protected _finalProcessing() {\r\n        const meshes = [];\r\n        for (const child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            meshes.push(child.mesh);\r\n        }\r\n\r\n        for (let count = 0; count < this._iteration; count++) {\r\n            meshes.sort((a, b) => {\r\n                const distance1 = a.position.lengthSquared();\r\n                const distance2 = b.position.lengthSquared();\r\n\r\n                if (distance1 < distance2) {\r\n                    return 1;\r\n                } else if (distance1 > distance2) {\r\n                    return -1;\r\n                }\r\n\r\n                return 0;\r\n            });\r\n\r\n            const radiusPaddingSquared = Math.pow(this.margin, 2.0);\r\n            const cellSize = Math.max(this._cellWidth, this._cellHeight);\r\n            const difference2D = TmpVectors.Vector2[0];\r\n            const difference = TmpVectors.Vector3[0];\r\n\r\n            for (let i = 0; i < meshes.length - 1; i++) {\r\n                for (let j = i + 1; j < meshes.length; j++) {\r\n                    if (i != j) {\r\n                        meshes[j].position.subtractToRef(meshes[i].position, difference);\r\n\r\n                        // Ignore Z axis\r\n                        difference2D.x = difference.x;\r\n                        difference2D.y = difference.y;\r\n                        const combinedRadius = cellSize;\r\n                        let distance = difference2D.lengthSquared() - radiusPaddingSquared;\r\n                        const minSeparation = Math.min(distance, radiusPaddingSquared);\r\n                        distance -= minSeparation;\r\n\r\n                        if (distance < Math.pow(combinedRadius, 2.0)) {\r\n                            difference2D.normalize();\r\n                            difference.scaleInPlace((combinedRadius - Math.sqrt(distance)) * 0.5);\r\n                            meshes[j].position.addInPlace(difference);\r\n                            meshes[i].position.subtractInPlace(difference);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlSliderBarPixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform vec4 Global_Left_Index_Middle_Position;uniform vec4 Global_Right_Index_Middle_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;void Blob_Fragment_B30(\nsampler2D Blob_Texture,\nvec4 Blob_Info1,\nvec4 Blob_Info2,\nout vec4 Blob_Color)\n{float k1=dot(Blob_Info1.xy,Blob_Info1.xy);float k2=dot(Blob_Info2.xy,Blob_Info2.xy);vec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);Blob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);}\nvoid FastLinearTosRGB_B42(\nvec4 Linear,\nout vec4 sRGB)\n{sRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));sRGB.a=Linear.a;}\nvoid Scale_RGB_B59(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}\nvoid Fragment_Main_B121(\nfloat Sun_Intensity,\nfloat Sun_Theta,\nfloat Sun_Phi,\nvec3 Normal,\nvec4 Albedo,\nfloat Fresnel_Reflect,\nfloat Shininess,\nvec3 Incident,\nvec4 Horizon_Color,\nvec4 Sky_Color,\nvec4 Ground_Color,\nfloat Indirect_Diffuse,\nfloat Specular,\nfloat Horizon_Power,\nfloat Reflection,\nvec4 Reflection_Sample,\nvec4 Indirect_Sample,\nfloat Sharpness,\nfloat SSS,\nfloat Subsurface,\nvec4 Translucence,\nvec4 Rim_Light,\nvec4 Iridescence,\nout vec4 Result)\n{float theta=Sun_Theta*2.0*3.14159;float phi=Sun_Phi*3.14159;vec3 lightDir= vec3(cos(phi)*cos(theta),sin(phi),cos(phi)*sin(theta));float NdotL=max(dot(lightDir,Normal),0.0);vec3 R=reflect(Incident,Normal);float RdotL=max(0.0,dot(R,lightDir));float specular=pow(RdotL,Shininess);specular=mix(specular,smoothstep(0.495*Sharpness,1.0-0.495*Sharpness,specular),Sharpness);vec4 gi=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);Result=((Sun_Intensity*NdotL+Indirect_Sample*Indirect_Diffuse+Translucence)*(1.0+SSS*Subsurface))*Albedo*(1.0-Fresnel_Reflect)+(Sun_Intensity*specular*Specular+Fresnel_Reflect*Reflection*Reflection_Sample)+Fresnel_Reflect*Rim_Light+Iridescence;}\nvoid Bulge_B79(\nbool Enabled,\nvec3 Normal,\nvec3 Tangent,\nfloat Bulge_Height,\nvec4 UV,\nfloat Bulge_Radius,\nvec3 ButtonN,\nout vec3 New_Normal)\n{vec2 xy=clamp(UV.xy*2.0,vec2(-1,-1),vec2(1,1));vec3 B=(cross(Normal,Tangent));float k=-clamp(1.0-length(xy)/Bulge_Radius,0.0,1.0)*Bulge_Height;k=sin(k*3.14159*0.5);k*=smoothstep(0.9998,0.9999,abs(dot(ButtonN,Normal)));New_Normal=Normal*sqrt(1.0-k*k)+(xy.x*Tangent+xy.y*B)*k;New_Normal=Enabled ? New_Normal : Normal;}\nvoid SSS_B77(\nvec3 ButtonN,\nvec3 Normal,\nvec3 Incident,\nout float Result)\n{float NdotI=abs(dot(Normal,Incident));float BdotI=abs(dot(ButtonN,Incident));Result=(abs(NdotI-BdotI)); }\nvoid FingerOcclusion_B67(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}\nvoid FingerOcclusion_B68(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}\nvoid Scale_Color_B91(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=Scalar*Color;}\nvoid From_HSV_B73(\nfloat Hue,\nfloat Saturation,\nfloat Value,\nfloat Alpha,\nout vec4 Color)\n{vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(vec3(Hue,Hue,Hue)+K.xyz)*6.0-K.www);Color.rgb=Value*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),Saturation);Color.a=Alpha;}\nvoid Fast_Fresnel_B122(\nfloat Front_Reflect,\nfloat Edge_Reflect,\nfloat Power,\nvec3 Normal,\nvec3 Incident,\nout float Transmit,\nout float Reflect)\n{float d=max(-dot(Incident,Normal),0.0);Reflect=Front_Reflect+(Edge_Reflect-Front_Reflect)*pow(.01-d,Power);Transmit=1.0-Reflect;}\nvoid Mapped_Environment_B51(\nsampler2D Reflected_Environment,\nsampler2D Indirect_Environment,\nvec3 Dir,\nout vec4 Reflected_Color,\nout vec4 Indirect_Diffuse)\n{Reflected_Color=texture(Reflected_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));Indirect_Diffuse=texture(Indirect_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));}\nvec4 SampleEnv_Bid50(vec3 D,vec4 S,vec4 H,vec4 G,float exponent)\n{float k=pow(abs(D.y),exponent);vec4 C;if (D.y>0.0) {C=mix(H,S,k);} else {C=mix(H,G,k); }\nreturn C;}\nvoid Sky_Environment_B50(\nvec3 Normal,\nvec3 Reflected,\nvec4 Sky_Color,\nvec4 Horizon_Color,\nvec4 Ground_Color,\nfloat Horizon_Power,\nout vec4 Reflected_Color,\nout vec4 Indirect_Color)\n{Reflected_Color=SampleEnv_Bid50(Reflected,Sky_Color,Horizon_Color,Ground_Color,Horizon_Power);Indirect_Color=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);}\nvoid Min_Segment_Distance_B65(\nvec3 P0,\nvec3 P1,\nvec3 Q0,\nvec3 Q1,\nout vec3 NearP,\nout vec3 NearQ,\nout float Distance)\n{vec3 u=P1-P0;vec3 v=Q1-Q0;vec3 w=P0-Q0;float a=dot(u,u);float b=dot(u,v);float c=dot(v,v);float d=dot(u,w);float e=dot(v,w);float D=a*c-b*b;float sD=D;float tD=D;float sc,sN,tc,tN;if (D<0.00001) {sN=0.0;sD=1.0;tN=e;tD=c;} else {sN=(b*e-c*d);tN=(a*e-b*d);if (sN<0.0) {sN=0.0;tN=e;tD=c;} else if (sN>sD) {sN=sD;tN=e+b;tD=c;}}\nif (tN<0.0) {tN=0.0;if (-d<0.0) {sN=0.0;} else if (-d>a) {sN=sD;} else {sN=-d;sD=a;}} else if (tN>tD) {tN=tD;if ((-d+b)<0.0) {sN=0.0;} else if ((-d+b)>a) {sN=sD;} else {sN=(-d+b);sD=a;}}\nsc=abs(sN)<0.000001 ? 0.0 : sN/sD;tc=abs(tN)<0.000001 ? 0.0 : tN/tD;NearP=P0+sc*u;NearQ=Q0+tc*v;Distance=distance(NearP,NearQ);}\nvoid To_XYZ_B74(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}\nvoid Finger_Positions_B64(\nvec3 Left_Index_Pos,\nvec3 Right_Index_Pos,\nvec3 Left_Index_Middle_Pos,\nvec3 Right_Index_Middle_Pos,\nout vec3 Left_Index,\nout vec3 Right_Index,\nout vec3 Left_Index_Middle,\nout vec3 Right_Index_Middle)\n{Left_Index= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Left_Index_Pos);Right_Index= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Right_Index_Pos);Left_Index_Middle= (Use_Global_Left_Index ? Global_Left_Index_Middle_Position.xyz : Left_Index_Middle_Pos);Right_Index_Middle= (Use_Global_Right_Index ? Global_Right_Index_Middle_Position.xyz : Right_Index_Middle_Pos);}\nvoid VaryHSV_B108(\nvec3 HSV_In,\nfloat Hue_Shift,\nfloat Saturation_Shift,\nfloat Value_Shift,\nout vec3 HSV_Out)\n{HSV_Out=vec3(fract(HSV_In.x+Hue_Shift),clamp(HSV_In.y+Saturation_Shift,0.0,1.0),clamp(HSV_In.z+Value_Shift,0.0,1.0));}\nvoid Remap_Range_B114(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}\nvoid To_HSV_B75(\nvec4 Color,\nout float Hue,\nout float Saturation,\nout float Value,\nout float Alpha,\nout vec3 HSV)\n{vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=Color.g<Color.b ? vec4(Color.bg,K.wz) : vec4(Color.gb,K.xy);vec4 q=Color.r<p.x ? vec4(p.xyw,Color.r) : vec4(Color.r,p.yzx);float d=q.x-min(q.w,q.y);float e=1.0e-10;Hue=abs(q.z+(q.w-q.y)/(6.0*d+e));Saturation=d/(q.x+e);Value=q.x;Alpha=Color.a;HSV=vec3(Hue,Saturation,Value);}\nvoid Code_B110(\nfloat X,\nout float Result)\n{Result=(acos(X)/3.14159-0.5)*2.0;}\nvoid Rim_Light_B132(\nvec3 Front,\nvec3 Normal,\nvec3 Incident,\nfloat Rim_Intensity,\nsampler2D Texture,\nout vec4 Result)\n{vec3 R=reflect(Incident,Normal);float RdotF=dot(R,Front);float RdotL=sqrt(1.0-RdotF*RdotF);vec2 UV=vec2(R.y*0.5+0.5,0.5);vec4 Color=texture(Texture,UV);Result=Color;}\nvoid main()\n{vec4 Blob_Color_Q30;\n#if BLOB_ENABLE\nBlob_Fragment_B30(_Blob_Texture_,vExtra2,vExtra3,Blob_Color_Q30);\n#else\nBlob_Color_Q30=vec4(0,0,0,0);\n#endif\nvec3 Incident_Q39=normalize(vPosition-cameraPosition);vec3 Normalized_Q38=normalize(vNormal);vec3 Normalized_Q71=normalize(vTangent);vec4 Color_Q83;\n#if DECAL_ENABLE\nColor_Q83=texture(_Decal_,vUV);\n#else\nColor_Q83=vec4(0,0,0,0);\n#endif\nfloat X_Q90;float Y_Q90;float Z_Q90;float W_Q90;X_Q90=vExtra1.x;Y_Q90=vExtra1.y;Z_Q90=vExtra1.z;W_Q90=vExtra1.w;vec4 Linear_Q43;Linear_Q43.rgb=clamp(_Sky_Color_.rgb*_Sky_Color_.rgb,0.0,1.0);Linear_Q43.a=_Sky_Color_.a;vec4 Linear_Q44;Linear_Q44.rgb=clamp(_Horizon_Color_.rgb*_Horizon_Color_.rgb,0.0,1.0);Linear_Q44.a=_Horizon_Color_.a;vec4 Linear_Q45;Linear_Q45.rgb=clamp(_Ground_Color_.rgb*_Ground_Color_.rgb,0.0,1.0);Linear_Q45.a=_Ground_Color_.a;vec3 Left_Index_Q64;vec3 Right_Index_Q64;vec3 Left_Index_Middle_Q64;vec3 Right_Index_Middle_Q64;Finger_Positions_B64(_Left_Index_Pos_,_Right_Index_Pos_,_Left_Index_Middle_Pos_,_Right_Index_Middle_Pos_,Left_Index_Q64,Right_Index_Q64,Left_Index_Middle_Q64,Right_Index_Middle_Q64);vec4 Linear_Q46;Linear_Q46.rgb=clamp(_Albedo_.rgb*_Albedo_.rgb,0.0,1.0);Linear_Q46.a=_Albedo_.a;vec3 Normalized_Q107=normalize(vBinormal);vec3 Incident_Q70=normalize(vPosition-cameraPosition);vec3 New_Normal_Q79;Bulge_B79(_Bulge_Enabled_,Normalized_Q38,Normalized_Q71,_Bulge_Height_,vColor,_Bulge_Radius_,vBinormal,New_Normal_Q79);float Result_Q77;SSS_B77(vBinormal,New_Normal_Q79,Incident_Q39,Result_Q77);vec4 Result_Q91;Scale_Color_B91(Color_Q83,X_Q90,Result_Q91);float Transmit_Q122;float Reflect_Q122;Fast_Fresnel_B122(_Front_Reflect_,_Edge_Reflect_,_Power_,New_Normal_Q79,Incident_Q39,Transmit_Q122,Reflect_Q122);float Product_Q125=Y_Q90*Y_Q90;vec3 NearP_Q65;vec3 NearQ_Q65;float Distance_Q65;Min_Segment_Distance_B65(Left_Index_Q64,Left_Index_Middle_Q64,vPosition,cameraPosition,NearP_Q65,NearQ_Q65,Distance_Q65);vec3 NearP_Q63;vec3 NearQ_Q63;float Distance_Q63;Min_Segment_Distance_B65(Right_Index_Q64,Right_Index_Middle_Q64,vPosition,cameraPosition,NearP_Q63,NearQ_Q63,Distance_Q63);vec3 Reflected_Q47=reflect(Incident_Q39,New_Normal_Q79);vec4 Product_Q103=Linear_Q46*vec4(1,1,1,1);vec4 Result_Q132;Rim_Light_B132(Normalized_Q107,Normalized_Q38,Incident_Q70,_Rim_Intensity_,_Rim_Texture_,Result_Q132);float Dot_Q72=dot(Incident_Q70, Normalized_Q71);float MaxAB_Q123=max(Reflect_Q122,Product_Q125);float NotInShadow_Q67;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B67(_Width_,Distance_Q65,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q65,_Clip_Fade_,NotInShadow_Q67);\n#else\nNotInShadow_Q67=1.0;\n#endif\nfloat NotInShadow_Q68;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B68(_Width_,Distance_Q63,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q63,_Clip_Fade_,NotInShadow_Q68);\n#else\nNotInShadow_Q68=1.0;\n#endif\nvec4 Reflected_Color_Q51;vec4 Indirect_Diffuse_Q51;\n#if ENV_ENABLE\nMapped_Environment_B51(_Reflection_Map_,_Indirect_Environment_,Reflected_Q47,Reflected_Color_Q51,Indirect_Diffuse_Q51);\n#else\nReflected_Color_Q51=vec4(0,0,0,1);Indirect_Diffuse_Q51=vec4(0,0,0,1);\n#endif\nvec4 Reflected_Color_Q50;vec4 Indirect_Color_Q50;\n#if SKY_ENABLED\nSky_Environment_B50(New_Normal_Q79,Reflected_Q47,Linear_Q43,Linear_Q44,Linear_Q45,_Horizon_Power_,Reflected_Color_Q50,Indirect_Color_Q50);\n#else\nReflected_Color_Q50=vec4(0,0,0,1);Indirect_Color_Q50=vec4(0,0,0,1);\n#endif\nfloat Hue_Q75;float Saturation_Q75;float Value_Q75;float Alpha_Q75;vec3 HSV_Q75;To_HSV_B75(Product_Q103,Hue_Q75,Saturation_Q75,Value_Q75,Alpha_Q75,HSV_Q75);float Hue_Q127;float Saturation_Q127;float Value_Q127;float Alpha_Q127;vec3 HSV_Q127;To_HSV_B75(Result_Q132,Hue_Q127,Saturation_Q127,Value_Q127,Alpha_Q127,HSV_Q127);float Result_Q110;Code_B110(Dot_Q72,Result_Q110);float AbsA_Q76=abs(Result_Q110);float MinAB_Q58=min(NotInShadow_Q67,NotInShadow_Q68);vec4 Sum_Q48=Reflected_Color_Q51+Reflected_Color_Q50;vec4 Sum_Q49=Indirect_Diffuse_Q51+Indirect_Color_Q50;vec3 HSV_Out_Q126;VaryHSV_B108(HSV_Q127,_Rim_Hue_Shift_,_Rim_Saturation_Shift_,_Rim_Value_Shift_,HSV_Out_Q126);float Out_Q114;Remap_Range_B114(-1.0,1.0,0.0,1.0,Result_Q110,Out_Q114);float Product_Q106;Product_Q106=AbsA_Q76*_Hue_Shift_;float X_Q128;float Y_Q128;float Z_Q128;To_XYZ_B74(HSV_Out_Q126,X_Q128,Y_Q128,Z_Q128);vec2 Vec2_Q112=vec2(Out_Q114,0.5);vec3 HSV_Out_Q108;VaryHSV_B108(HSV_Q75,Product_Q106,_Saturation_Shift_,_Value_Shift_,HSV_Out_Q108);vec4 Color_Q129;From_HSV_B73(X_Q128,Y_Q128,Z_Q128,0.0,Color_Q129);vec4 Color_Q111;\n#if IRIDESCENCE_ENABLED\nColor_Q111=texture(_Iridescence_Texture_,Vec2_Q112);\n#else\nColor_Q111=vec4(0,0,0,0);\n#endif\nfloat X_Q74;float Y_Q74;float Z_Q74;To_XYZ_B74(HSV_Out_Q108,X_Q74,Y_Q74,Z_Q74);vec4 Result_Q131=_Rim_Intensity_*Color_Q129;vec4 Result_Q113=_Iridescence_Intensity_*Color_Q111;vec4 Color_Q73;From_HSV_B73(X_Q74,Y_Q74,Z_Q74,0.0,Color_Q73);vec4 Result_Q84=Result_Q91+(1.0-Result_Q91.a)*Color_Q73;vec4 Result_Q121;Fragment_Main_B121(_Sun_Intensity_,_Sun_Theta_,_Sun_Phi_,New_Normal_Q79,Result_Q84,MaxAB_Q123,_Shininess_,Incident_Q39,_Horizon_Color_,_Sky_Color_,_Ground_Color_,_Indirect_Diffuse_,_Specular_,_Horizon_Power_,_Reflection_,Sum_Q48,Sum_Q49,_Sharpness_,Result_Q77,_Subsurface_,vec4(0,0,0,0),Result_Q131,Result_Q113,Result_Q121);vec4 Result_Q59;Scale_RGB_B59(Result_Q121,MinAB_Q58,Result_Q59);vec4 sRGB_Q42;FastLinearTosRGB_B42(Result_Q59,sRGB_Q42);vec4 Result_Q31=Blob_Color_Q30+(1.0-Blob_Color_Q30.a)*sRGB_Q42;vec4 Result_Q40=Result_Q31; Result_Q40.a=1.0;vec4 Out_Color=Result_Q40;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlSliderBarPixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlSliderBarVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;\n#ifdef TANGENT\nattribute vec3 tangent;\n#else\nconst vec3 tangent=vec3(0.);\n#endif\nuniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Object_To_World_Pos_B12(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}\nvoid Object_To_World_Normal_B32(\nvec3 Nrm_Object,\nout vec3 Nrm_World)\n{Nrm_World=(vec4(Nrm_Object,0.0)).xyz;}\nvoid Blob_Vertex_B23(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{vec3 blob= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}\nvoid Blob_Vertex_B24(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{vec3 blob= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}\nvoid Move_Verts_B130(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nfloat Bevel,\nvec3 Normal_Object,\nfloat ScaleZ,\nfloat Stretch,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir,\nout vec3 New_Normal)\n{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;float deltad=(length(delta)*2.0);float f=(Bevel+(Radius-Bevel)*Stretch)/Radius;float innerd=clamp(deltad*2.0,0.0,1.0);float outerd=clamp(deltad*2.0-1.0,0.0,1.0);float bevelAngle=outerd*3.14159*0.5;float sinb=sin(bevelAngle);float cosb=cos(bevelAngle);float beveld=(1.0-f)*innerd+f*sinb;float br=outerd;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);float dir=P.z<0.0001 ? 1.0 : -1.0;New_UV=center+r2*((0.5-center)+normalize(delta+vec2(0.0,0.000001))*beveld*0.5);New_P=vec3(New_UV-0.5,P.z+dir*(1.0-cosb)*Bevel*ScaleZ);Radial_Gradient=clamp((deltad-0.5)*2.0,0.0,1.0);Radial_Dir=vec3(delta*r2,0.0);vec3 beveledNormal=cosb*Normal_Object+sinb*vec3(delta.x,delta.y,0.0);New_Normal=Normal_Object.z==0.0 ? Normal_Object : beveledNormal;}\nvoid Object_To_World_Dir_B60(\nvec3 Dir_Object,\nout vec3 Normal_World,\nout vec3 Normal_World_N,\nout float Normal_Length)\n{Normal_World=(world*vec4(Dir_Object,0.0)).xyz;Normal_Length=length(Normal_World);Normal_World_N=Normal_World/Normal_Length;}\nvoid To_XYZ_B78(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}\nvoid Conditional_Float_B93(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{Result=Which ? If_True : If_False;}\nvoid Object_To_World_Dir_B28(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}\nvoid Pick_Radius_B69(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}\nvoid Conditional_Float_B36(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{Result=Which ? If_True : If_False;}\nvoid Greater_Than_B37(\nfloat Left,\nfloat Right,\nout bool Not_Greater_Than,\nout bool Greater_Than)\n{Greater_Than=Left>Right;Not_Greater_Than=!Greater_Than;}\nvoid Remap_Range_B105(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}\nvoid main()\n{vec2 XY_Q85;XY_Q85=(uv-vec2(0.5,0.5))*_Decal_Scale_XY_+vec2(0.5,0.5);vec3 Tangent_World_Q27;vec3 Tangent_World_N_Q27;float Tangent_Length_Q27;Tangent_World_Q27=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q27=length(Tangent_World_Q27);Tangent_World_N_Q27=Tangent_World_Q27/Tangent_Length_Q27;vec3 Normal_World_Q60;vec3 Normal_World_N_Q60;float Normal_Length_Q60;Object_To_World_Dir_B60(vec3(0,0,1),Normal_World_Q60,Normal_World_N_Q60,Normal_Length_Q60);float X_Q78;float Y_Q78;float Z_Q78;To_XYZ_B78(position,X_Q78,Y_Q78,Z_Q78);vec3 Nrm_World_Q26;Nrm_World_Q26=normalize((world*vec4(normal,0.0)).xyz);vec3 Binormal_World_Q28;vec3 Binormal_World_N_Q28;float Binormal_Length_Q28;Object_To_World_Dir_B28(vec3(0,1,0),Binormal_World_Q28,Binormal_World_N_Q28,Binormal_Length_Q28);float Anisotropy_Q29=Tangent_Length_Q27/Binormal_Length_Q28;float Result_Q69;Pick_Radius_B69(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q69);float Anisotropy_Q53=Binormal_Length_Q28/Normal_Length_Q60;bool Not_Greater_Than_Q37;bool Greater_Than_Q37;Greater_Than_B37(Z_Q78,0.0,Not_Greater_Than_Q37,Greater_Than_Q37);vec4 Linear_Q101;Linear_Q101.rgb=clamp(_Left_Color_.rgb*_Left_Color_.rgb,0.0,1.0);Linear_Q101.a=_Left_Color_.a;vec4 Linear_Q102;Linear_Q102.rgb=clamp(_Right_Color_.rgb*_Right_Color_.rgb,0.0,1.0);Linear_Q102.a=_Right_Color_.a;vec3 Difference_Q61=vec3(0,0,0)-Normal_World_N_Q60;vec4 Out_Color_Q34=vec4(X_Q78,Y_Q78,Z_Q78,1);float Result_Q36;Conditional_Float_B36(Greater_Than_Q37,_Bevel_Back_,_Bevel_Front_,Result_Q36);float Result_Q94;Conditional_Float_B36(Greater_Than_Q37,_Bevel_Back_Stretch_,_Bevel_Front_Stretch_,Result_Q94);vec3 New_P_Q130;vec2 New_UV_Q130;float Radial_Gradient_Q130;vec3 Radial_Dir_Q130;vec3 New_Normal_Q130;Move_Verts_B130(Anisotropy_Q29,position,Result_Q69,Result_Q36,normal,Anisotropy_Q53,Result_Q94,New_P_Q130,New_UV_Q130,Radial_Gradient_Q130,Radial_Dir_Q130,New_Normal_Q130);float X_Q98;float Y_Q98;X_Q98=New_UV_Q130.x;Y_Q98=New_UV_Q130.y;vec3 Pos_World_Q12;Object_To_World_Pos_B12(New_P_Q130,Pos_World_Q12);vec3 Nrm_World_Q32;Object_To_World_Normal_B32(New_Normal_Q130,Nrm_World_Q32);vec4 Blob_Info_Q23;\n#if BLOB_ENABLE\nBlob_Vertex_B23(Pos_World_Q12,Nrm_World_Q26,Tangent_World_N_Q27,Binormal_World_N_Q28,_Blob_Position_,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q23);\n#else\nBlob_Info_Q23=vec4(0,0,0,0);\n#endif\nvec4 Blob_Info_Q24;\n#if BLOB_ENABLE_2\nBlob_Vertex_B24(Pos_World_Q12,Nrm_World_Q26,Tangent_World_N_Q27,Binormal_World_N_Q28,_Blob_Position_2_,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q24);\n#else\nBlob_Info_Q24=vec4(0,0,0,0);\n#endif\nfloat Out_Q105;Remap_Range_B105(0.0,1.0,0.0,1.0,X_Q98,Out_Q105);float X_Q86;float Y_Q86;float Z_Q86;To_XYZ_B78(Nrm_World_Q32,X_Q86,Y_Q86,Z_Q86);vec4 Color_At_T_Q97=mix(Linear_Q101,Linear_Q102,Out_Q105);float Minus_F_Q87=-Z_Q86;float R_Q99;float G_Q99;float B_Q99;float A_Q99;R_Q99=Color_At_T_Q97.r; G_Q99=Color_At_T_Q97.g; B_Q99=Color_At_T_Q97.b; A_Q99=Color_At_T_Q97.a;float ClampF_Q88=clamp(0.0,Minus_F_Q87,1.0);float Result_Q93;Conditional_Float_B93(_Decal_Front_Only_,ClampF_Q88,1.0,Result_Q93);vec4 Vec4_Q89=vec4(Result_Q93,Radial_Gradient_Q130,G_Q99,B_Q99);vec3 Position=Pos_World_Q12;vec3 Normal=Nrm_World_Q32;vec2 UV=XY_Q85;vec3 Tangent=Tangent_World_N_Q27;vec3 Binormal=Difference_Q61;vec4 Color=Out_Color_Q34;vec4 Extra1=Vec4_Q89;vec4 Extra2=Blob_Info_Q23;vec4 Extra3=Blob_Info_Q24;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlSliderBarVertexShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector2, Vector3, Vector4 } from \"core/Maths/math.vector\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\nimport \"./shaders/mrdlSliderBar.fragment\";\r\nimport \"./shaders/mrdlSliderBar.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @internal */\r\nclass MRDLSliderBarMaterialDefines extends MaterialDefines {\r\n    /*\r\n        \"SKY_ENABLED\", \"BLOB_ENABLE_2\", \"IRIDESCENCE_ENABLED\"\r\n    */\r\n    public SKY_ENABLED = true;\r\n    public BLOB_ENABLE_2 = true;\r\n    public IRIDESCENCE_ENABLED = true;\r\n\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this._needUVs = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render Slider Bar material with MRDL\r\n */\r\nexport class MRDLSliderBarMaterial extends PushMaterial {\r\n    /**\r\n     * URL pointing to the texture used to define the coloring for the Iridescent Map effect.\r\n     */\r\n    public static BLUE_GRADIENT_TEXTURE_URL = \"https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-blue-gradient.png\";\r\n    private _blueGradientTexture: Texture;\r\n    private _decalTexture: Texture;\r\n    private _reflectionMapTexture: Texture;\r\n    private _indirectEnvTexture: Texture;\r\n\r\n    /**\r\n     * Gets or sets the corner Radius on the slider bar.\r\n     */\r\n    @serialize()\r\n    public radius = 0.6;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Front on the slider bar.\r\n     */\r\n    @serialize()\r\n    public bevelFront = 0.6;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Front Stretch on the slider bar.\r\n     */\r\n    @serialize()\r\n    public bevelFrontStretch = 0.077;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Back on the slider bar.\r\n     */\r\n    @serialize()\r\n    public bevelBack = 0;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Back Stretch on the slider bar.\r\n     */\r\n    @serialize()\r\n    public bevelBackStretch = 0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusTopLeft = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusTopRight = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusBottomLeft = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusBottomRight = 1.0;\r\n\r\n    /**\r\n     * Gets or sets whether Bulge is enabled.\r\n     * Default is false.\r\n     */\r\n    @serialize()\r\n    public bulgeEnabled = false;\r\n\r\n    /**\r\n     * Gets or sets the Bulge Height.\r\n     */\r\n    @serialize()\r\n    public bulgeHeight = -0.323;\r\n\r\n    /**\r\n     * Gets or sets the Bulge Radius.\r\n     */\r\n    @serialize()\r\n    public bulgeRadius = 0.73;\r\n\r\n    /**\r\n     * Gets or sets the Sun Intensity.\r\n     */\r\n    @serialize()\r\n    public sunIntensity = 1.102;\r\n\r\n    /**\r\n     * Gets or sets the Sun Theta.\r\n     */\r\n    @serialize()\r\n    public sunTheta = 0.76;\r\n\r\n    /**\r\n     * Gets or sets the Sun Phi.\r\n     */\r\n    @serialize()\r\n    public sunPhi = 0.526;\r\n\r\n    /**\r\n     * Gets or sets the Indirect Diffuse.\r\n     */\r\n    @serialize()\r\n    public indirectDiffuse = 0.658;\r\n\r\n    /**\r\n     * Gets or sets the base albedo.\r\n     */\r\n    @serialize()\r\n    public albedo = new Color4(0.0117647, 0.505882, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the Specular value.\r\n     */\r\n    @serialize()\r\n    public specular = 0;\r\n\r\n    /**\r\n     * Gets or sets the Shininess value.\r\n     */\r\n    @serialize()\r\n    public shininess = 10;\r\n\r\n    /**\r\n     * Gets or sets the Sharpness value.\r\n     */\r\n    @serialize()\r\n    public sharpness = 0;\r\n\r\n    /**\r\n     * Gets or sets the Subsurface value.\r\n     */\r\n    @serialize()\r\n    public subsurface = 0;\r\n\r\n    /**\r\n     * Gets or sets the left gradient color.\r\n     */\r\n    @serialize()\r\n    public leftGradientColor = new Color4(0.0117647, 0.505882, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the right gradient color.\r\n     */\r\n    @serialize()\r\n    public rightGradientColor = new Color4(0.0117647, 0.505882, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the reflection value.\r\n     */\r\n    @serialize()\r\n    public reflection = 0.749;\r\n\r\n    /**\r\n     * Gets or sets the front reflect value.\r\n     */\r\n    @serialize()\r\n    public frontReflect = 0;\r\n\r\n    /**\r\n     * Gets or sets the edge reflect value.\r\n     */\r\n    @serialize()\r\n    public edgeReflect = 0.09;\r\n\r\n    /**\r\n     * Gets or sets the power value.\r\n     */\r\n    @serialize()\r\n    public power = 8.13;\r\n\r\n    /**\r\n     * Gets or sets the sky color.\r\n     */\r\n    @serialize()\r\n    public skyColor = new Color4(0.0117647, 0.964706, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the horizon color.\r\n     */\r\n    @serialize()\r\n    public horizonColor = new Color4(0.0117647, 0.333333, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the ground color.\r\n     */\r\n    @serialize()\r\n    public groundColor = new Color4(0, 0.254902, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the horizon power value.\r\n     */\r\n    @serialize()\r\n    public horizonPower = 1;\r\n\r\n    /**\r\n     * Gets or sets the finger occlusion width value.\r\n     */\r\n    @serialize()\r\n    public width = 0.02;\r\n\r\n    /**\r\n     * Gets or sets the finger occlusion fuzz value.\r\n     */\r\n    @serialize()\r\n    public fuzz = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the minimum finger occlusion fuzz value.\r\n     */\r\n    @serialize()\r\n    public minFuzz = 0.001;\r\n\r\n    /**\r\n     * Gets or sets the finger occlusion clip fade value.\r\n     */\r\n    @serialize()\r\n    public clipFade = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the hue shift value.\r\n     */\r\n    @serialize()\r\n    public hueShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the saturation shift value.\r\n     */\r\n    @serialize()\r\n    public saturationShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the value shift.\r\n     */\r\n    @serialize()\r\n    public valueShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the position of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobPosition = new Vector3(0, 0, 0.1);\r\n\r\n    /**\r\n     * Gets or sets the intensity of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobIntensity = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the near size of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobNearSize = 0.01;\r\n    /**\r\n     * Gets or sets the far size of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobFarSize = 0.03;\r\n\r\n    /**\r\n     * Gets or sets the distance considered \"near\" to the mesh, which controls the size of the hover glow effect (see blobNearSize).\r\n     */\r\n    @serialize()\r\n    public blobNearDistance = 0;\r\n\r\n    /**\r\n     * Gets or sets the distance considered \"far\" from the mesh, which controls the size of the hover glow effect (see blobFarSize).\r\n     */\r\n    @serialize()\r\n    public blobFarDistance = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the length of the hover glow effect fade.\r\n     */\r\n    @serialize()\r\n    public blobFadeLength = 0.576;\r\n\r\n    /**\r\n     * Gets or sets the progress of the hover glow effect selection animation corresponding to the left pointer (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public blobPulse = 0;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the hover glow effect corresponding to the left pointer (0.0 - 1.0). Default is 0.\r\n     */\r\n    @serialize()\r\n    public blobFade = 1;\r\n\r\n    /**\r\n     * Gets or sets the position of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobPosition2 = new Vector3(0.2, 0, 0.1);\r\n\r\n    /**\r\n     * Gets or sets the size of the hover glow effect when the right pointer is considered \"near\" to the mesh (see blobNearDistance).\r\n     */\r\n    @serialize()\r\n    public blobNearSize2 = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the progress of the hover glow effect selection animation corresponding to the right pointer (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public blobPulse2 = 0;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the hover glow effect corresponding to the right pointer (0.0 - 1.0). Default is 1.\r\n     */\r\n    @serialize()\r\n    public blobFade2 = 1;\r\n\r\n    /**\r\n     * Gets or sets the texture of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobTexture = new Texture(\"\", this.getScene());\r\n\r\n    /**\r\n     * Gets or sets the finger position for left index.\r\n     */\r\n    @serialize()\r\n    public leftIndexPosition = new Vector3(0, 0, 1);\r\n\r\n    /**\r\n     * Gets or sets the finger position for right index.\r\n     */\r\n    @serialize()\r\n    public rightIndexPosition = new Vector3(-1, -1, -1);\r\n\r\n    /**\r\n     * Gets or sets the finger position for left index middle position.\r\n     */\r\n    @serialize()\r\n    public leftIndexMiddlePosition = new Vector3(0, 0, 0);\r\n\r\n    /**\r\n     * Gets or sets the finger position for right index middle position.\r\n     */\r\n    @serialize()\r\n    public rightIndexMiddlePosition = new Vector3(0, 0, 0);\r\n\r\n    /**\r\n     * Gets or sets the Decal Scle for XY.\r\n     */\r\n    @serialize()\r\n    public decalScaleXY = new Vector2(1.5, 1.5);\r\n\r\n    /**\r\n     * Gets or sets decalFrontOnly\r\n     * Default is true\r\n     */\r\n    @serialize()\r\n    public decalFrontOnly = true;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light intensity.\r\n     */\r\n    @serialize()\r\n    public rimIntensity = 0.287;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light hue shift value.\r\n     */\r\n    @serialize()\r\n    public rimHueShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light saturation shift value.\r\n     */\r\n    @serialize()\r\n    public rimSaturationShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light value shift.\r\n     */\r\n    @serialize()\r\n    public rimValueShift = -1;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the iridescence effect.\r\n     */\r\n    @serialize()\r\n    public iridescenceIntensity = 0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public useGlobalLeftIndex = 1.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public useGlobalRightIndex = 1.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftIndexTipProximity = 0.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalRightIndexTipProximity = 0.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftIndexTipPosition = new Vector4(0.5, 0.0, -0.55, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globaRightIndexTipPosition = new Vector4(0.0, 0.0, 0.0, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftThumbTipPosition = new Vector4(0.5, 0.0, -0.55, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalRightThumbTipPosition = new Vector4(0.0, 0.0, 0.0, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftIndexMiddlePosition = new Vector4(0.5, 0.0, -0.55, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalRightIndexMiddlePosition = new Vector4(0.0, 0.0, 0.0, 1.0);\r\n\r\n    constructor(name: string, scene?: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_DISABLE;\r\n        this.backFaceCulling = false;\r\n        this._blueGradientTexture = new Texture(MRDLSliderBarMaterial.BLUE_GRADIENT_TEXTURE_URL, this.getScene(), true, false, Texture.NEAREST_SAMPLINGMODE);\r\n        this._decalTexture = new Texture(\"\", this.getScene());\r\n        this._reflectionMapTexture = new Texture(\"\", this.getScene());\r\n        this._indirectEnvTexture = new Texture(\"\", this.getScene());\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new MRDLSliderBarMaterialDefines();\r\n        }\r\n\r\n        const defines = <MRDLSliderBarMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, false, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"mrdlSliderBar\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Radius_\",\r\n                \"_Bevel_Front_\",\r\n                \"_Bevel_Front_Stretch_\",\r\n                \"_Bevel_Back_\",\r\n                \"_Bevel_Back_Stretch_\",\r\n                \"_Radius_Top_Left_\",\r\n                \"_Radius_Top_Right_\",\r\n                \"_Radius_Bottom_Left_\",\r\n                \"_Radius_Bottom_Right_\",\r\n                \"_Bulge_Enabled_\",\r\n                \"_Bulge_Height_\",\r\n                \"_Bulge_Radius_\",\r\n                \"_Sun_Intensity_\",\r\n                \"_Sun_Theta_\",\r\n                \"_Sun_Phi_\",\r\n                \"_Indirect_Diffuse_\",\r\n                \"_Albedo_\",\r\n                \"_Specular_\",\r\n                \"_Shininess_\",\r\n                \"_Sharpness_\",\r\n                \"_Subsurface_\",\r\n                \"_Left_Color_\",\r\n                \"_Right_Color_\",\r\n                \"_Reflection_\",\r\n                \"_Front_Reflect_\",\r\n                \"_Edge_Reflect_\",\r\n                \"_Power_\",\r\n                \"_Sky_Color_\",\r\n                \"_Horizon_Color_\",\r\n                \"_Ground_Color_\",\r\n                \"_Horizon_Power_\",\r\n                \"_Reflection_Map_\",\r\n                \"_Indirect_Environment_\",\r\n                \"_Width_\",\r\n                \"_Fuzz_\",\r\n                \"_Min_Fuzz_\",\r\n                \"_Clip_Fade_\",\r\n                \"_Hue_Shift_\",\r\n                \"_Saturation_Shift_\",\r\n                \"_Value_Shift_\",\r\n                \"_Blob_Position_\",\r\n                \"_Blob_Intensity_\",\r\n                \"_Blob_Near_Size_\",\r\n                \"_Blob_Far_Size_\",\r\n                \"_Blob_Near_Distance_\",\r\n                \"_Blob_Far_Distance_\",\r\n                \"_Blob_Fade_Length_\",\r\n                \"_Blob_Pulse_\",\r\n                \"_Blob_Fade_\",\r\n                \"_Blob_Texture_\",\r\n                \"_Blob_Position_2_\",\r\n                \"_Blob_Near_Size_2_\",\r\n                \"_Blob_Pulse_2_\",\r\n                \"_Blob_Fade_2_\",\r\n                \"_Left_Index_Pos_\",\r\n                \"_Right_Index_Pos_\",\r\n                \"_Left_Index_Middle_Pos_\",\r\n                \"_Right_Index_Middle_Pos_\",\r\n                \"_Decal_\",\r\n                \"_Decal_Scale_XY_\",\r\n                \"_Decal_Front_Only_\",\r\n                \"_Rim_Intensity_\",\r\n                \"_Rim_Texture_\",\r\n                \"_Rim_Hue_Shift_\",\r\n                \"_Rim_Saturation_Shift_\",\r\n                \"_Rim_Value_Shift_\",\r\n                \"_Iridescence_Intensity_\",\r\n                \"_Iridescence_Texture_\",\r\n                \"Use_Global_Left_Index\",\r\n                \"Use_Global_Right_Index\",\r\n                \"Global_Left_Index_Tip_Position\",\r\n                \"Global_Right_Index_Tip_Position\",\r\n                \"Global_Left_Thumb_Tip_Position\",\r\n                \"Global_Right_Thumb_Tip_Position\",\r\n                \"Global_Left_Index_Middle_Position;\",\r\n                \"Global_Right_Index_Middle_Position\",\r\n                \"Global_Left_Index_Tip_Proximity\",\r\n                \"Global_Right_Index_Tip_Proximity\",\r\n            ];\r\n            const samplers: string[] = [\"_Rim_Texture_\", \"_Iridescence_Texture_\"];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines,\r\n                this._materialContext\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const defines = <MRDLSliderBarMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", this.getScene().getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", this.getScene().activeCamera!.position);\r\n\r\n        // \"Round Rect\"\r\n        this._activeEffect.setFloat(\"_Radius_\", this.radius);\r\n        this._activeEffect.setFloat(\"_Bevel_Front_\", this.bevelFront);\r\n        this._activeEffect.setFloat(\"_Bevel_Front_Stretch_\", this.bevelFrontStretch);\r\n        this._activeEffect.setFloat(\"_Bevel_Back_\", this.bevelBack);\r\n        this._activeEffect.setFloat(\"_Bevel_Back_Stretch_\", this.bevelBackStretch);\r\n\r\n        // \"Radii Multipliers\"\r\n        this._activeEffect.setFloat(\"_Radius_Top_Left_\", this.radiusTopLeft);\r\n        this._activeEffect.setFloat(\"_Radius_Top_Right_\", this.radiusTopRight);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Left_\", this.radiusBottomLeft);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Right_\", this.radiusBottomRight);\r\n\r\n        // \"Bulge\"\r\n        this._activeEffect.setFloat(\"_Bulge_Enabled_\", this.bulgeEnabled ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Bulge_Height_\", this.bulgeHeight);\r\n        this._activeEffect.setFloat(\"_Bulge_Radius_\", this.bulgeRadius);\r\n\r\n        // \"Sun\"\r\n        this._activeEffect.setFloat(\"_Sun_Intensity_\", this.sunIntensity);\r\n        this._activeEffect.setFloat(\"_Sun_Theta_\", this.sunTheta);\r\n        this._activeEffect.setFloat(\"_Sun_Phi_\", this.sunPhi);\r\n        this._activeEffect.setFloat(\"_Indirect_Diffuse_\", this.indirectDiffuse);\r\n\r\n        // \"Diffuse And Specular\"\r\n        this._activeEffect.setDirectColor4(\"_Albedo_\", this.albedo);\r\n        this._activeEffect.setFloat(\"_Specular_\", this.specular);\r\n        this._activeEffect.setFloat(\"_Shininess_\", this.shininess);\r\n        this._activeEffect.setFloat(\"_Sharpness_\", this.sharpness);\r\n        this._activeEffect.setFloat(\"_Subsurface_\", this.subsurface);\r\n\r\n        // \"Gradient\"\r\n        this._activeEffect.setDirectColor4(\"_Left_Color_\", this.leftGradientColor);\r\n        this._activeEffect.setDirectColor4(\"_Right_Color_\", this.rightGradientColor);\r\n\r\n        // \"Reflection\"\r\n        this._activeEffect.setFloat(\"_Reflection_\", this.reflection);\r\n        this._activeEffect.setFloat(\"_Front_Reflect_\", this.frontReflect);\r\n        this._activeEffect.setFloat(\"_Edge_Reflect_\", this.edgeReflect);\r\n        this._activeEffect.setFloat(\"_Power_\", this.power);\r\n\r\n        // \"Sky Environment\"\r\n        //define SKY_ENABLED true;\r\n        this._activeEffect.setDirectColor4(\"_Sky_Color_\", this.skyColor);\r\n        this._activeEffect.setDirectColor4(\"_Horizon_Color_\", this.horizonColor);\r\n        this._activeEffect.setDirectColor4(\"_Ground_Color_\", this.groundColor);\r\n        this._activeEffect.setFloat(\"_Horizon_Power_\", this.horizonPower);\r\n\r\n        // \"Mapped Environment\"\r\n        //define ENV_ENABLE false;\r\n        this._activeEffect.setTexture(\"_Reflection_Map_\", this._reflectionMapTexture);\r\n        this._activeEffect.setTexture(\"_Indirect_Environment_\", this._indirectEnvTexture);\r\n\r\n        // \"FingerOcclusion\"\r\n        //define OCCLUSION_ENABLED false;\r\n        this._activeEffect.setFloat(\"_Width_\", this.width);\r\n        this._activeEffect.setFloat(\"_Fuzz_\", this.fuzz);\r\n        this._activeEffect.setFloat(\"_Min_Fuzz_\", this.minFuzz);\r\n        this._activeEffect.setFloat(\"_Clip_Fade_\", this.clipFade);\r\n\r\n        // \"View Based Color Shift\"\r\n        this._activeEffect.setFloat(\"_Hue_Shift_\", this.hueShift);\r\n        this._activeEffect.setFloat(\"_Saturation_Shift_\", this.saturationShift);\r\n        this._activeEffect.setFloat(\"_Value_Shift_\", this.valueShift);\r\n\r\n        // \"Blob\"\r\n        //define BLOB_ENABLE false;\r\n        this._activeEffect.setVector3(\"_Blob_Position_\", this.blobPosition);\r\n        this._activeEffect.setFloat(\"_Blob_Intensity_\", this.blobIntensity);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_\", this.blobNearSize);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Size_\", this.blobFarSize);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Distance_\", this.blobNearDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Distance_\", this.blobFarDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_Length_\", this.blobFadeLength);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_\", this.blobPulse);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_\", this.blobFade);\r\n\r\n        // \"Blob Texture\"\r\n        this._activeEffect.setTexture(\"_Blob_Texture_\", this.blobTexture);\r\n\r\n        // \"Blob 2\"\r\n        //define BLOB_ENABLE_2 true;\r\n        this._activeEffect.setVector3(\"_Blob_Position_2_\", this.blobPosition2);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_2_\", this.blobNearSize2);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_2_\", this.blobPulse2);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_2_\", this.blobFade2);\r\n\r\n        // \"Finger Positions\"\r\n        this._activeEffect.setVector3(\"_Left_Index_Pos_\", this.leftIndexPosition);\r\n        this._activeEffect.setVector3(\"_Right_Index_Pos_\", this.rightIndexPosition);\r\n        this._activeEffect.setVector3(\"_Left_Index_Middle_Pos_\", this.leftIndexMiddlePosition);\r\n        this._activeEffect.setVector3(\"_Right_Index_Middle_Pos_\", this.rightIndexMiddlePosition);\r\n\r\n        // \"Decal Texture\"\r\n        //define DECAL_ENABLE false;\r\n        this._activeEffect.setTexture(\"_Decal_\", this._decalTexture);\r\n        this._activeEffect.setVector2(\"_Decal_Scale_XY_\", this.decalScaleXY);\r\n        this._activeEffect.setFloat(\"_Decal_Front_Only_\", this.decalFrontOnly ? 1.0 : 0.0);\r\n\r\n        // \"Rim Light\"\r\n        this._activeEffect.setFloat(\"_Rim_Intensity_\", this.rimIntensity);\r\n        this._activeEffect.setTexture(\"_Rim_Texture_\", this._blueGradientTexture);\r\n        this._activeEffect.setFloat(\"_Rim_Hue_Shift_\", this.rimHueShift);\r\n        this._activeEffect.setFloat(\"_Rim_Saturation_Shift_\", this.rimSaturationShift);\r\n        this._activeEffect.setFloat(\"_Rim_Value_Shift_\", this.rimValueShift);\r\n\r\n        // \"Iridescence\"\r\n        //define IRIDESCENCE_ENABLED true;\r\n        this._activeEffect.setFloat(\"_Iridescence_Intensity_\", this.iridescenceIntensity);\r\n        this._activeEffect.setTexture(\"_Iridescence_Texture_\", this._blueGradientTexture);\r\n\r\n        // Global inputs\r\n        this._activeEffect.setFloat(\"Use_Global_Left_Index\", this.useGlobalLeftIndex);\r\n        this._activeEffect.setFloat(\"Use_Global_Right_Index\", this.useGlobalRightIndex);\r\n\r\n        this._activeEffect.setVector4(\"Global_Left_Index_Tip_Position\", this.globalLeftIndexTipPosition);\r\n        this._activeEffect.setVector4(\"Global_Right_Index_Tip_Position\", this.globaRightIndexTipPosition);\r\n\r\n        this._activeEffect.setVector4(\"Global_Left_Thumb_Tip_Position\", this.globalLeftThumbTipPosition);\r\n        this._activeEffect.setVector4(\"Global_Right_Thumb_Tip_Position\", this.globalRightThumbTipPosition);\r\n\r\n        this._activeEffect.setVector4(\"Global_Left_Index_Middle_Position\", this.globalLeftIndexMiddlePosition);\r\n        this._activeEffect.setVector4(\"Global_Right_Index_Middle_Position\", this.globalRightIndexMiddlePosition);\r\n\r\n        this._activeEffect.setFloat(\"Global_Left_Index_Tip_Proximity\", this.globalLeftIndexTipProximity);\r\n        this._activeEffect.setFloat(\"Global_Right_Index_Tip_Proximity\", this.globalRightIndexTipProximity);\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n        this._reflectionMapTexture.dispose();\r\n        this._indirectEnvTexture.dispose();\r\n        this._blueGradientTexture.dispose();\r\n        this._decalTexture.dispose();\r\n    }\r\n\r\n    public clone(name: string): MRDLSliderBarMaterial {\r\n        return SerializationHelper.Clone(() => new MRDLSliderBarMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.customType = \"BABYLON.MRDLSliderBarMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"MRDLSliderBarMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): MRDLSliderBarMaterial {\r\n        return SerializationHelper.Parse(() => new MRDLSliderBarMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.MRDLSliderBarMaterial\", MRDLSliderBarMaterial);\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlSliderThumbPixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform vec4 Global_Left_Index_Middle_Position;uniform vec4 Global_Right_Index_Middle_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;void Blob_Fragment_B180(\nsampler2D Blob_Texture,\nvec4 Blob_Info1,\nvec4 Blob_Info2,\nout vec4 Blob_Color)\n{float k1=dot(Blob_Info1.xy,Blob_Info1.xy);float k2=dot(Blob_Info2.xy,Blob_Info2.xy);vec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);Blob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);}\nvoid FastLinearTosRGB_B192(\nvec4 Linear,\nout vec4 sRGB)\n{sRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));sRGB.a=Linear.a;}\nvoid Scale_RGB_B209(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}\nvoid Fragment_Main_B271(\nfloat Sun_Intensity,\nfloat Sun_Theta,\nfloat Sun_Phi,\nvec3 Normal,\nvec4 Albedo,\nfloat Fresnel_Reflect,\nfloat Shininess,\nvec3 Incident,\nvec4 Horizon_Color,\nvec4 Sky_Color,\nvec4 Ground_Color,\nfloat Indirect_Diffuse,\nfloat Specular,\nfloat Horizon_Power,\nfloat Reflection,\nvec4 Reflection_Sample,\nvec4 Indirect_Sample,\nfloat Sharpness,\nfloat SSS,\nfloat Subsurface,\nvec4 Translucence,\nvec4 Rim_Light,\nvec4 Iridescence,\nout vec4 Result)\n{float theta=Sun_Theta*2.0*3.14159;float phi=Sun_Phi*3.14159;vec3 lightDir= vec3(cos(phi)*cos(theta),sin(phi),cos(phi)*sin(theta));float NdotL=max(dot(lightDir,Normal),0.0);vec3 R=reflect(Incident,Normal);float RdotL=max(0.0,dot(R,lightDir));float specular=pow(RdotL,Shininess);specular=mix(specular,smoothstep(0.495*Sharpness,1.0-0.495*Sharpness,specular),Sharpness);vec4 gi=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);Result=((Sun_Intensity*NdotL+Indirect_Sample*Indirect_Diffuse+Translucence)*(1.0+SSS*Subsurface))*Albedo*(1.0-Fresnel_Reflect)+(Sun_Intensity*specular*Specular+Fresnel_Reflect*Reflection*Reflection_Sample)+Fresnel_Reflect*Rim_Light+Iridescence;}\nvoid Bulge_B229(\nbool Enabled,\nvec3 Normal,\nvec3 Tangent,\nfloat Bulge_Height,\nvec4 UV,\nfloat Bulge_Radius,\nvec3 ButtonN,\nout vec3 New_Normal)\n{vec2 xy=clamp(UV.xy*2.0,vec2(-1,-1),vec2(1,1));vec3 B=(cross(Normal,Tangent));float k=-clamp(1.0-length(xy)/Bulge_Radius,0.0,1.0)*Bulge_Height;k=sin(k*3.14159*0.5);k*=smoothstep(0.9998,0.9999,abs(dot(ButtonN,Normal)));New_Normal=Normal*sqrt(1.0-k*k)+(xy.x*Tangent+xy.y*B)*k;New_Normal=Enabled ? New_Normal : Normal;}\nvoid SSS_B227(\nvec3 ButtonN,\nvec3 Normal,\nvec3 Incident,\nout float Result)\n{float NdotI=abs(dot(Normal,Incident));float BdotI=abs(dot(ButtonN,Incident));Result=(abs(NdotI-BdotI)); }\nvoid FingerOcclusion_B217(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}\nvoid FingerOcclusion_B218(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}\nvoid Scale_Color_B241(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=Scalar*Color;}\nvoid From_HSV_B223(\nfloat Hue,\nfloat Saturation,\nfloat Value,\nfloat Alpha,\nout vec4 Color)\n{vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(vec3(Hue,Hue,Hue)+K.xyz)*6.0-K.www);Color.rgb=Value*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),Saturation);Color.a=Alpha;}\nvoid Fast_Fresnel_B272(\nfloat Front_Reflect,\nfloat Edge_Reflect,\nfloat Power,\nvec3 Normal,\nvec3 Incident,\nout float Transmit,\nout float Reflect)\n{float d=max(-dot(Incident,Normal),0.0);Reflect=Front_Reflect+(Edge_Reflect-Front_Reflect)*pow(1.0-d,Power);Transmit=1.0-Reflect;}\nvoid Mapped_Environment_B201(\nsampler2D Reflected_Environment,\nsampler2D Indirect_Environment,\nvec3 Dir,\nout vec4 Reflected_Color,\nout vec4 Indirect_Diffuse)\n{Reflected_Color=texture(Reflected_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));Indirect_Diffuse=texture(Indirect_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));}\nvec4 SampleEnv_Bid200(vec3 D,vec4 S,vec4 H,vec4 G,float exponent)\n{float k=pow(abs(D.y),exponent);vec4 C;if (D.y>0.0) {C=mix(H,S,k);} else {C=mix(H,G,k); }\nreturn C;}\nvoid Sky_Environment_B200(\nvec3 Normal,\nvec3 Reflected,\nvec4 Sky_Color,\nvec4 Horizon_Color,\nvec4 Ground_Color,\nfloat Horizon_Power,\nout vec4 Reflected_Color,\nout vec4 Indirect_Color)\n{Reflected_Color=SampleEnv_Bid200(Reflected,Sky_Color,Horizon_Color,Ground_Color,Horizon_Power);Indirect_Color=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);}\nvoid Min_Segment_Distance_B215(\nvec3 P0,\nvec3 P1,\nvec3 Q0,\nvec3 Q1,\nout vec3 NearP,\nout vec3 NearQ,\nout float Distance)\n{vec3 u=P1-P0;vec3 v=Q1-Q0;vec3 w=P0-Q0;float a=dot(u,u);float b=dot(u,v);float c=dot(v,v);float d=dot(u,w);float e=dot(v,w);float D=a*c-b*b;float sD=D;float tD=D;float sc,sN,tc,tN;if (D<0.00001) {sN=0.0;sD=1.0;tN=e;tD=c;} else {sN=(b*e-c*d);tN=(a*e-b*d);if (sN<0.0) {sN=0.0;tN=e;tD=c;} else if (sN>sD) {sN=sD;tN=e+b;tD=c;}}\nif (tN<0.0) {tN=0.0;if (-d<0.0) {sN=0.0;} else if (-d>a) {sN=sD;} else {sN=-d;sD=a;}} else if (tN>tD) {tN=tD;if ((-d+b)<0.0) {sN=0.0;} else if ((-d+b)>a) {sN=sD;} else {sN=(-d+b);sD=a;}}\nsc=abs(sN)<0.000001 ? 0.0 : sN/sD;tc=abs(tN)<0.000001 ? 0.0 : tN/tD;NearP=P0+sc*u;NearQ=Q0+tc*v;Distance=distance(NearP,NearQ);}\nvoid To_XYZ_B224(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}\nvoid Finger_Positions_B214(\nvec3 Left_Index_Pos,\nvec3 Right_Index_Pos,\nvec3 Left_Index_Middle_Pos,\nvec3 Right_Index_Middle_Pos,\nout vec3 Left_Index,\nout vec3 Right_Index,\nout vec3 Left_Index_Middle,\nout vec3 Right_Index_Middle)\n{Left_Index= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Left_Index_Pos);Right_Index= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Right_Index_Pos);Left_Index_Middle= (Use_Global_Left_Index ? Global_Left_Index_Middle_Position.xyz : Left_Index_Middle_Pos);Right_Index_Middle= (Use_Global_Right_Index ? Global_Right_Index_Middle_Position.xyz : Right_Index_Middle_Pos);}\nvoid VaryHSV_B258(\nvec3 HSV_In,\nfloat Hue_Shift,\nfloat Saturation_Shift,\nfloat Value_Shift,\nout vec3 HSV_Out)\n{HSV_Out=vec3(fract(HSV_In.x+Hue_Shift),clamp(HSV_In.y+Saturation_Shift,0.0,1.0),clamp(HSV_In.z+Value_Shift,0.0,1.0));}\nvoid Remap_Range_B264(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}\nvoid To_HSV_B225(\nvec4 Color,\nout float Hue,\nout float Saturation,\nout float Value,\nout float Alpha,\nout vec3 HSV)\n{vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=Color.g<Color.b ? vec4(Color.bg,K.wz) : vec4(Color.gb,K.xy);vec4 q=Color.r<p.x ? vec4(p.xyw,Color.r) : vec4(Color.r,p.yzx);float d=q.x-min(q.w,q.y);float e=1.0e-10;Hue=abs(q.z+(q.w-q.y)/(6.0*d+e));Saturation=d/(q.x+e);Value=q.x;Alpha=Color.a;HSV=vec3(Hue,Saturation,Value);}\nvoid Code_B260(\nfloat X,\nout float Result)\n{Result=(acos(X)/3.14159-0.5)*2.0;}\nvoid Rim_Light_B282(\nvec3 Front,\nvec3 Normal,\nvec3 Incident,\nfloat Rim_Intensity,\nsampler2D Texture,\nout vec4 Result)\n{vec3 R=reflect(Incident,Normal);float RdotF=dot(R,Front);float RdotL=sqrt(1.0-RdotF*RdotF);vec2 UV=vec2(R.y*0.5+0.5,0.5);vec4 Color=texture(Texture,UV);Result=Color;}\nvoid main()\n{vec4 Blob_Color_Q180;\n#if BLOB_ENABLE\nBlob_Fragment_B180(_Blob_Texture_,vExtra2,vExtra3,Blob_Color_Q180);\n#else\nBlob_Color_Q180=vec4(0,0,0,0);\n#endif\nvec3 Incident_Q189=normalize(vPosition-cameraPosition);vec3 Normalized_Q188=normalize(vNormal);vec3 Normalized_Q221=normalize(vTangent);vec4 Color_Q233;\n#if DECAL_ENABLE\nColor_Q233=texture(_Decal_,vUV);\n#else\nColor_Q233=vec4(0,0,0,0);\n#endif\nfloat X_Q240;float Y_Q240;float Z_Q240;float W_Q240;X_Q240=vExtra1.x;Y_Q240=vExtra1.y;Z_Q240=vExtra1.z;W_Q240=vExtra1.w;vec4 Linear_Q193;Linear_Q193.rgb=clamp(_Sky_Color_.rgb*_Sky_Color_.rgb,0.0,1.0);Linear_Q193.a=_Sky_Color_.a;vec4 Linear_Q194;Linear_Q194.rgb=clamp(_Horizon_Color_.rgb*_Horizon_Color_.rgb,0.0,1.0);Linear_Q194.a=_Horizon_Color_.a;vec4 Linear_Q195;Linear_Q195.rgb=clamp(_Ground_Color_.rgb*_Ground_Color_.rgb,0.0,1.0);Linear_Q195.a=_Ground_Color_.a;vec3 Left_Index_Q214;vec3 Right_Index_Q214;vec3 Left_Index_Middle_Q214;vec3 Right_Index_Middle_Q214;Finger_Positions_B214(_Left_Index_Pos_,_Right_Index_Pos_,_Left_Index_Middle_Pos_,_Right_Index_Middle_Pos_,Left_Index_Q214,Right_Index_Q214,Left_Index_Middle_Q214,Right_Index_Middle_Q214);vec4 Linear_Q196;Linear_Q196.rgb=clamp(_Albedo_.rgb*_Albedo_.rgb,0.0,1.0);Linear_Q196.a=_Albedo_.a;vec3 Normalized_Q257=normalize(vBinormal);vec3 Incident_Q220=normalize(vPosition-cameraPosition);vec3 New_Normal_Q229;Bulge_B229(_Bulge_Enabled_,Normalized_Q188,Normalized_Q221,_Bulge_Height_,vColor,_Bulge_Radius_,vBinormal,New_Normal_Q229);float Result_Q227;SSS_B227(vBinormal,New_Normal_Q229,Incident_Q189,Result_Q227);vec4 Result_Q241;Scale_Color_B241(Color_Q233,X_Q240,Result_Q241);float Transmit_Q272;float Reflect_Q272;Fast_Fresnel_B272(_Front_Reflect_,_Edge_Reflect_,_Power_,New_Normal_Q229,Incident_Q189,Transmit_Q272,Reflect_Q272);float Product_Q275=Y_Q240*Y_Q240;vec3 NearP_Q215;vec3 NearQ_Q215;float Distance_Q215;Min_Segment_Distance_B215(Left_Index_Q214,Left_Index_Middle_Q214,vPosition,cameraPosition,NearP_Q215,NearQ_Q215,Distance_Q215);vec3 NearP_Q213;vec3 NearQ_Q213;float Distance_Q213;Min_Segment_Distance_B215(Right_Index_Q214,Right_Index_Middle_Q214,vPosition,cameraPosition,NearP_Q213,NearQ_Q213,Distance_Q213);vec3 Reflected_Q197=reflect(Incident_Q189,New_Normal_Q229);vec4 Product_Q253=Linear_Q196*vec4(1,1,1,1);vec4 Result_Q282;Rim_Light_B282(Normalized_Q257,Normalized_Q188,Incident_Q220,_Rim_Intensity_,_Rim_Texture_,Result_Q282);float Dot_Q222=dot(Incident_Q220, Normalized_Q221);float MaxAB_Q273=max(Reflect_Q272,Product_Q275);float NotInShadow_Q217;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B217(_Width_,Distance_Q215,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q215,_Clip_Fade_,NotInShadow_Q217);\n#else\nNotInShadow_Q217=1.0;\n#endif\nfloat NotInShadow_Q218;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B218(_Width_,Distance_Q213,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q213,_Clip_Fade_,NotInShadow_Q218);\n#else\nNotInShadow_Q218=1.0;\n#endif\nvec4 Reflected_Color_Q201;vec4 Indirect_Diffuse_Q201;\n#if ENV_ENABLE\nMapped_Environment_B201(_Reflection_Map_,_Indirect_Environment_,Reflected_Q197,Reflected_Color_Q201,Indirect_Diffuse_Q201);\n#else\nReflected_Color_Q201=vec4(0,0,0,1);Indirect_Diffuse_Q201=vec4(0,0,0,1);\n#endif\nvec4 Reflected_Color_Q200;vec4 Indirect_Color_Q200;\n#if SKY_ENABLED\nSky_Environment_B200(New_Normal_Q229,Reflected_Q197,Linear_Q193,Linear_Q194,Linear_Q195,_Horizon_Power_,Reflected_Color_Q200,Indirect_Color_Q200);\n#else\nReflected_Color_Q200=vec4(0,0,0,1);Indirect_Color_Q200=vec4(0,0,0,1);\n#endif\nfloat Hue_Q225;float Saturation_Q225;float Value_Q225;float Alpha_Q225;vec3 HSV_Q225;To_HSV_B225(Product_Q253,Hue_Q225,Saturation_Q225,Value_Q225,Alpha_Q225,HSV_Q225);float Hue_Q277;float Saturation_Q277;float Value_Q277;float Alpha_Q277;vec3 HSV_Q277;To_HSV_B225(Result_Q282,Hue_Q277,Saturation_Q277,Value_Q277,Alpha_Q277,HSV_Q277);float Result_Q260;Code_B260(Dot_Q222,Result_Q260);float AbsA_Q226=abs(Result_Q260);float MinAB_Q208=min(NotInShadow_Q217,NotInShadow_Q218);vec4 Sum_Q198=Reflected_Color_Q201+Reflected_Color_Q200;vec4 Sum_Q199=Indirect_Diffuse_Q201+Indirect_Color_Q200;vec3 HSV_Out_Q276;VaryHSV_B258(HSV_Q277,_Rim_Hue_Shift_,_Rim_Saturation_Shift_,_Rim_Value_Shift_,HSV_Out_Q276);float Out_Q264;Remap_Range_B264(-1.0,1.0,0.0,1.0,Result_Q260,Out_Q264);float Product_Q256;Product_Q256=AbsA_Q226*_Hue_Shift_;float X_Q278;float Y_Q278;float Z_Q278;To_XYZ_B224(HSV_Out_Q276,X_Q278,Y_Q278,Z_Q278);vec2 Vec2_Q262=vec2(Out_Q264,0.5);vec3 HSV_Out_Q258;VaryHSV_B258(HSV_Q225,Product_Q256,_Saturation_Shift_,_Value_Shift_,HSV_Out_Q258);vec4 Color_Q279;From_HSV_B223(X_Q278,Y_Q278,Z_Q278,0.0,Color_Q279);vec4 Color_Q261;\n#if IRIDESCENCE_ENABLED\nColor_Q261=texture(_Iridescence_Texture_,Vec2_Q262);\n#else\nColor_Q261=vec4(0,0,0,0);\n#endif\nfloat X_Q224;float Y_Q224;float Z_Q224;To_XYZ_B224(HSV_Out_Q258,X_Q224,Y_Q224,Z_Q224);vec4 Result_Q281=_Rim_Intensity_*Color_Q279;vec4 Result_Q263=_Iridescence_Intensity_*Color_Q261;vec4 Color_Q223;From_HSV_B223(X_Q224,Y_Q224,Z_Q224,0.0,Color_Q223);vec4 Result_Q234=Result_Q241+(1.0-Result_Q241.a)*Color_Q223;vec4 Result_Q271;Fragment_Main_B271(_Sun_Intensity_,_Sun_Theta_,_Sun_Phi_,New_Normal_Q229,Result_Q234,MaxAB_Q273,_Shininess_,Incident_Q189,_Horizon_Color_,_Sky_Color_,_Ground_Color_,_Indirect_Diffuse_,_Specular_,_Horizon_Power_,_Reflection_,Sum_Q198,Sum_Q199,_Sharpness_,Result_Q227,_Subsurface_,vec4(0,0,0,0),Result_Q281,Result_Q263,Result_Q271);vec4 Result_Q209;Scale_RGB_B209(Result_Q271,MinAB_Q208,Result_Q209);vec4 sRGB_Q192;FastLinearTosRGB_B192(Result_Q209,sRGB_Q192);vec4 Result_Q181=Blob_Color_Q180+(1.0-Blob_Color_Q180.a)*sRGB_Q192;vec4 Result_Q190=Result_Q181; Result_Q190.a=1.0;vec4 Out_Color=Result_Q190;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlSliderThumbPixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlSliderThumbVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;\n#ifdef TANGENT\nattribute vec3 tangent;\n#else\nconst vec3 tangent=vec3(0.);\n#endif\nuniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Object_To_World_Pos_B162(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}\nvoid Object_To_World_Normal_B182(\nvec3 Nrm_Object,\nout vec3 Nrm_World)\n{Nrm_World=(vec4(Nrm_Object,0.0)).xyz;}\nvoid Blob_Vertex_B173(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{vec3 blob= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}\nvoid Blob_Vertex_B174(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{vec3 blob= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}\nvoid Move_Verts_B280(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nfloat Bevel,\nvec3 Normal_Object,\nfloat ScaleZ,\nfloat Stretch,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir,\nout vec3 New_Normal)\n{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;float deltad=(length(delta)*2.0);float f=(Bevel+(Radius-Bevel)*Stretch)/Radius;float innerd=clamp(deltad*2.0,0.0,1.0);float outerd=clamp(deltad*2.0-1.0,0.0,1.0);float bevelAngle=outerd*3.14159*0.5;float sinb=sin(bevelAngle);float cosb=cos(bevelAngle);float beveld=(1.0-f)*innerd+f*sinb;float br=outerd;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);float dir=P.z<0.0001 ? 1.0 : -1.0;New_UV=center+r2*((0.5-center)+normalize(delta+vec2(0.0,0.000001))*beveld*0.5);New_P=vec3(New_UV-0.5,P.z+dir*(1.0-cosb)*Bevel*ScaleZ);Radial_Gradient=clamp((deltad-0.5)*2.0,0.0,1.0);Radial_Dir=vec3(delta*r2,0.0);vec3 beveledNormal=cosb*Normal_Object+sinb*vec3(delta.x,delta.y,0.0);New_Normal=Normal_Object.z==0.0 ? Normal_Object : beveledNormal;}\nvoid Object_To_World_Dir_B210(\nvec3 Dir_Object,\nout vec3 Normal_World,\nout vec3 Normal_World_N,\nout float Normal_Length)\n{Normal_World=(world*vec4(Dir_Object,0.0)).xyz;Normal_Length=length(Normal_World);Normal_World_N=Normal_World/Normal_Length;}\nvoid To_XYZ_B228(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}\nvoid Conditional_Float_B243(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{Result=Which ? If_True : If_False;}\nvoid Object_To_World_Dir_B178(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}\nvoid Pick_Radius_B219(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}\nvoid Conditional_Float_B186(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{Result=Which ? If_True : If_False;}\nvoid Greater_Than_B187(\nfloat Left,\nfloat Right,\nout bool Not_Greater_Than,\nout bool Greater_Than)\n{Greater_Than=Left>Right;Not_Greater_Than=!Greater_Than;}\nvoid Remap_Range_B255(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}\nvoid main()\n{vec2 XY_Q235;XY_Q235=(uv-vec2(0.5,0.5))*_Decal_Scale_XY_+vec2(0.5,0.5);vec3 Tangent_World_Q177;vec3 Tangent_World_N_Q177;float Tangent_Length_Q177;Tangent_World_Q177=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q177=length(Tangent_World_Q177);Tangent_World_N_Q177=Tangent_World_Q177/Tangent_Length_Q177;vec3 Normal_World_Q210;vec3 Normal_World_N_Q210;float Normal_Length_Q210;Object_To_World_Dir_B210(vec3(0,0,1),Normal_World_Q210,Normal_World_N_Q210,Normal_Length_Q210);float X_Q228;float Y_Q228;float Z_Q228;To_XYZ_B228(position,X_Q228,Y_Q228,Z_Q228);vec3 Nrm_World_Q176;Nrm_World_Q176=normalize((world*vec4(normal,0.0)).xyz);vec3 Binormal_World_Q178;vec3 Binormal_World_N_Q178;float Binormal_Length_Q178;Object_To_World_Dir_B178(vec3(0,1,0),Binormal_World_Q178,Binormal_World_N_Q178,Binormal_Length_Q178);float Anisotropy_Q179=Tangent_Length_Q177/Binormal_Length_Q178;float Result_Q219;Pick_Radius_B219(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q219);float Anisotropy_Q203=Binormal_Length_Q178/Normal_Length_Q210;bool Not_Greater_Than_Q187;bool Greater_Than_Q187;Greater_Than_B187(Z_Q228,0.0,Not_Greater_Than_Q187,Greater_Than_Q187);vec4 Linear_Q251;Linear_Q251.rgb=clamp(_Left_Color_.rgb*_Left_Color_.rgb,0.0,1.0);Linear_Q251.a=_Left_Color_.a;vec4 Linear_Q252;Linear_Q252.rgb=clamp(_Right_Color_.rgb*_Right_Color_.rgb,0.0,1.0);Linear_Q252.a=_Right_Color_.a;vec3 Difference_Q211=vec3(0,0,0)-Normal_World_N_Q210;vec4 Out_Color_Q184=vec4(X_Q228,Y_Q228,Z_Q228,1);float Result_Q186;Conditional_Float_B186(Greater_Than_Q187,_Bevel_Back_,_Bevel_Front_,Result_Q186);float Result_Q244;Conditional_Float_B186(Greater_Than_Q187,_Bevel_Back_Stretch_,_Bevel_Front_Stretch_,Result_Q244);vec3 New_P_Q280;vec2 New_UV_Q280;float Radial_Gradient_Q280;vec3 Radial_Dir_Q280;vec3 New_Normal_Q280;Move_Verts_B280(Anisotropy_Q179,position,Result_Q219,Result_Q186,normal,Anisotropy_Q203,Result_Q244,New_P_Q280,New_UV_Q280,Radial_Gradient_Q280,Radial_Dir_Q280,New_Normal_Q280);float X_Q248;float Y_Q248;X_Q248=New_UV_Q280.x;Y_Q248=New_UV_Q280.y;vec3 Pos_World_Q162;Object_To_World_Pos_B162(New_P_Q280,Pos_World_Q162);vec3 Nrm_World_Q182;Object_To_World_Normal_B182(New_Normal_Q280,Nrm_World_Q182);vec4 Blob_Info_Q173;\n#if BLOB_ENABLE\nBlob_Vertex_B173(Pos_World_Q162,Nrm_World_Q176,Tangent_World_N_Q177,Binormal_World_N_Q178,_Blob_Position_,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q173);\n#else\nBlob_Info_Q173=vec4(0,0,0,0);\n#endif\nvec4 Blob_Info_Q174;\n#if BLOB_ENABLE_2\nBlob_Vertex_B174(Pos_World_Q162,Nrm_World_Q176,Tangent_World_N_Q177,Binormal_World_N_Q178,_Blob_Position_2_,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q174);\n#else\nBlob_Info_Q174=vec4(0,0,0,0);\n#endif\nfloat Out_Q255;Remap_Range_B255(0.0,1.0,0.0,1.0,X_Q248,Out_Q255);float X_Q236;float Y_Q236;float Z_Q236;To_XYZ_B228(Nrm_World_Q182,X_Q236,Y_Q236,Z_Q236);vec4 Color_At_T_Q247=mix(Linear_Q251,Linear_Q252,Out_Q255);float Minus_F_Q237=-Z_Q236;float R_Q249;float G_Q249;float B_Q249;float A_Q249;R_Q249=Color_At_T_Q247.r; G_Q249=Color_At_T_Q247.g; B_Q249=Color_At_T_Q247.b; A_Q249=Color_At_T_Q247.a;float ClampF_Q238=clamp(0.0,Minus_F_Q237,1.0);float Result_Q243;Conditional_Float_B243(_Decal_Front_Only_,ClampF_Q238,1.0,Result_Q243);vec4 Vec4_Q239=vec4(Result_Q243,Radial_Gradient_Q280,G_Q249,B_Q249);vec3 Position=Pos_World_Q162;vec3 Normal=Nrm_World_Q182;vec2 UV=XY_Q235;vec3 Tangent=Tangent_World_N_Q177;vec3 Binormal=Difference_Q211;vec4 Color=Out_Color_Q184;vec4 Extra1=Vec4_Q239;vec4 Extra2=Blob_Info_Q173;vec4 Extra3=Blob_Info_Q174;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlSliderThumbVertexShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector2, Vector3, Vector4 } from \"core/Maths/math.vector\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\nimport \"./shaders/mrdlSliderThumb.fragment\";\r\nimport \"./shaders/mrdlSliderThumb.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @internal */\r\nclass MRDLSliderThumbMaterialDefines extends MaterialDefines {\r\n    /*\r\n        \"SKY_ENABLED\", \"BLOB_ENABLE_2\", \"IRIDESCENCE_ENABLED\"\r\n    */\r\n    public SKY_ENABLED = true;\r\n    public BLOB_ENABLE_2 = true;\r\n    public IRIDESCENCE_ENABLED = true;\r\n\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this._needUVs = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render Slider Thumb material with MRDL\r\n */\r\nexport class MRDLSliderThumbMaterial extends PushMaterial {\r\n    /**\r\n     * URL pointing to the texture used to define the coloring for the Iridescent Map effect.\r\n     */\r\n    public static BLUE_GRADIENT_TEXTURE_URL = \"https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-blue-gradient.png\";\r\n    private _blueGradientTexture: Texture;\r\n    private _decalTexture: Texture;\r\n    private _reflectionMapTexture: Texture;\r\n    private _indirectEnvTexture: Texture;\r\n\r\n    /**\r\n     * Gets or sets the corner Radius on the slider thumb.\r\n     */\r\n    @serialize()\r\n    public radius = 0.157;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Front on the slider thumb.\r\n     */\r\n    @serialize()\r\n    public bevelFront = 0.065;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Front Stretch on the slider thumb.\r\n     */\r\n    @serialize()\r\n    public bevelFrontStretch = 0.077;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Back on the slider thumb.\r\n     */\r\n    @serialize()\r\n    public bevelBack = 0.031;\r\n\r\n    /**\r\n     * Gets or sets the Bevel Back Stretch on the slider thumb.\r\n     */\r\n    @serialize()\r\n    public bevelBackStretch = 0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusTopLeft = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusTopRight = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusBottomLeft = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusBottomRight = 1.0;\r\n\r\n    /**\r\n     * Gets or sets whether Bulge is enabled.\r\n     * Default is false.\r\n     */\r\n    @serialize()\r\n    public bulgeEnabled = false;\r\n\r\n    /**\r\n     * Gets or sets the Bulge Height.\r\n     */\r\n    @serialize()\r\n    public bulgeHeight = -0.323;\r\n\r\n    /**\r\n     * Gets or sets the Bulge Radius.\r\n     */\r\n    @serialize()\r\n    public bulgeRadius = 0.73;\r\n\r\n    /**\r\n     * Gets or sets the Sun Intensity.\r\n     */\r\n    @serialize()\r\n    public sunIntensity = 2;\r\n\r\n    /**\r\n     * Gets or sets the Sun Theta.\r\n     */\r\n    @serialize()\r\n    public sunTheta = 0.937;\r\n\r\n    /**\r\n     * Gets or sets the Sun Phi.\r\n     */\r\n    @serialize()\r\n    public sunPhi = 0.555;\r\n\r\n    /**\r\n     * Gets or sets the Indirect Diffuse.\r\n     */\r\n    @serialize()\r\n    public indirectDiffuse = 1;\r\n\r\n    /**\r\n     * Gets or sets the base albedo.\r\n     */\r\n    @serialize()\r\n    public albedo = new Color4(0.0117647, 0.505882, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the Specular value.\r\n     */\r\n    @serialize()\r\n    public specular = 0;\r\n\r\n    /**\r\n     * Gets or sets the Shininess value.\r\n     */\r\n    @serialize()\r\n    public shininess = 10;\r\n\r\n    /**\r\n     * Gets or sets the Sharpness value.\r\n     */\r\n    @serialize()\r\n    public sharpness = 0;\r\n\r\n    /**\r\n     * Gets or sets the Subsurface value.\r\n     */\r\n    @serialize()\r\n    public subsurface = 0.31;\r\n\r\n    /**\r\n     * Gets or sets the left gradient color.\r\n     */\r\n    @serialize()\r\n    public leftGradientColor = new Color4(0.0117647, 0.505882, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the right gradient color.\r\n     */\r\n    @serialize()\r\n    public rightGradientColor = new Color4(0.0117647, 0.505882, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the reflection value.\r\n     */\r\n    @serialize()\r\n    public reflection = 0.749;\r\n\r\n    /**\r\n     * Gets or sets the front reflect value.\r\n     */\r\n    @serialize()\r\n    public frontReflect = 0;\r\n\r\n    /**\r\n     * Gets or sets the edge reflect value.\r\n     */\r\n    @serialize()\r\n    public edgeReflect = 0.09;\r\n\r\n    /**\r\n     * Gets or sets the power value.\r\n     */\r\n    @serialize()\r\n    public power = 8.1;\r\n\r\n    /**\r\n     * Gets or sets the sky color.\r\n     */\r\n    @serialize()\r\n    public skyColor = new Color4(0.0117647, 0.960784, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the horizon color.\r\n     */\r\n    @serialize()\r\n    public horizonColor = new Color4(0.0117647, 0.333333, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the ground color.\r\n     */\r\n    @serialize()\r\n    public groundColor = new Color4(0, 0.254902, 0.996078, 1);\r\n\r\n    /**\r\n     * Gets or sets the horizon power value.\r\n     */\r\n    @serialize()\r\n    public horizonPower = 1;\r\n\r\n    /**\r\n     * Gets or sets the finger occlusion width value.\r\n     */\r\n    @serialize()\r\n    public width = 0.02;\r\n\r\n    /**\r\n     * Gets or sets the finger occlusion fuzz value.\r\n     */\r\n    @serialize()\r\n    public fuzz = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the minimum finger occlusion fuzz value.\r\n     */\r\n    @serialize()\r\n    public minFuzz = 0.001;\r\n\r\n    /**\r\n     * Gets or sets the finger occlusion clip fade value.\r\n     */\r\n    @serialize()\r\n    public clipFade = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the hue shift value.\r\n     */\r\n    @serialize()\r\n    public hueShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the saturation shift value.\r\n     */\r\n    @serialize()\r\n    public saturationShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the value shift.\r\n     */\r\n    @serialize()\r\n    public valueShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the position of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobPosition = new Vector3(0, 0, 0.1);\r\n\r\n    /**\r\n     * Gets or sets the intensity of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobIntensity = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the near size of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobNearSize = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the far size of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobFarSize = 0.03;\r\n\r\n    /**\r\n     * Gets or sets the distance considered \"near\" to the mesh, which controls the size of the hover glow effect (see blobNearSize).\r\n     */\r\n    @serialize()\r\n    public blobNearDistance = 0;\r\n\r\n    /**\r\n     * Gets or sets the distance considered \"far\" from the mesh, which controls the size of the hover glow effect (see blobFarSize).\r\n     */\r\n    @serialize()\r\n    public blobFarDistance = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the length of the hover glow effect fade.\r\n     */\r\n    @serialize()\r\n    public blobFadeLength = 0.576;\r\n\r\n    /**\r\n     * Gets or sets the progress of the hover glow effect selection animation corresponding to the left pointer (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public blobPulse = 0;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the hover glow effect corresponding to the left pointer (0.0 - 1.0). Default is 0.\r\n     */\r\n    @serialize()\r\n    public blobFade = 1;\r\n\r\n    /**\r\n     * Gets or sets the position of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobPosition2 = new Vector3(0.2, 0, 0.1);\r\n\r\n    /**\r\n     * Gets or sets the size of the hover glow effect when the right pointer is considered \"near\" to the mesh (see blobNearDistance).\r\n     */\r\n    @serialize()\r\n    public blobNearSize2 = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the progress of the hover glow effect selection animation corresponding to the right pointer (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public blobPulse2 = 0;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the hover glow effect corresponding to the right pointer (0.0 - 1.0). Default is 1.\r\n     */\r\n    @serialize()\r\n    public blobFade2 = 1;\r\n\r\n    /**\r\n     * Gets or sets the texture of the hover glow effect.\r\n     */\r\n    @serialize()\r\n    public blobTexture = new Texture(\"\", this.getScene());\r\n\r\n    /**\r\n     * Gets or sets the finger position for left index.\r\n     */\r\n    @serialize()\r\n    public leftIndexPosition = new Vector3(0, 0, 1);\r\n\r\n    /**\r\n     * Gets or sets the finger position for right index.\r\n     */\r\n    @serialize()\r\n    public rightIndexPosition = new Vector3(-1, -1, -1);\r\n\r\n    /**\r\n     * Gets or sets the finger position for left index middle position.\r\n     */\r\n    @serialize()\r\n    public leftIndexMiddlePosition = new Vector3(0, 0, 0);\r\n\r\n    /**\r\n     * Gets or sets the finger position for right index middle position.\r\n     */\r\n    @serialize()\r\n    public rightIndexMiddlePosition = new Vector3(0, 0, 0);\r\n\r\n    /**\r\n     * Gets or sets the Decal Scale for XY.\r\n     */\r\n    @serialize()\r\n    public decalScaleXY = new Vector2(1.5, 1.5);\r\n\r\n    /**\r\n     * Gets or sets decalFrontOnly\r\n     * Default is true\r\n     */\r\n    @serialize()\r\n    public decalFrontOnly = true;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light intensity.\r\n     */\r\n    @serialize()\r\n    public rimIntensity = 0.287;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light hue shift value.\r\n     */\r\n    @serialize()\r\n    public rimHueShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light saturation shift value.\r\n     */\r\n    @serialize()\r\n    public rimSaturationShift = 0;\r\n\r\n    /**\r\n     * Gets or sets the Rim Light value shift.\r\n     */\r\n    @serialize()\r\n    public rimValueShift = -1;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the iridescence effect.\r\n     */\r\n    @serialize()\r\n    public iridescenceIntensity = 0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public useGlobalLeftIndex = 1.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public useGlobalRightIndex = 1.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftIndexTipProximity = 0.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalRightIndexTipProximity = 0.0;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftIndexTipPosition = new Vector4(0.5, 0.0, -0.55, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globaRightIndexTipPosition = new Vector4(0.0, 0.0, 0.0, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftThumbTipPosition = new Vector4(0.5, 0.0, -0.55, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalRightThumbTipPosition = new Vector4(0.0, 0.0, 0.0, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalLeftIndexMiddlePosition = new Vector4(0.5, 0.0, -0.55, 1.0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public globalRightIndexMiddlePosition = new Vector4(0.0, 0.0, 0.0, 1.0);\r\n\r\n    constructor(name: string, scene?: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_DISABLE;\r\n        this.backFaceCulling = false;\r\n        this._blueGradientTexture = new Texture(MRDLSliderThumbMaterial.BLUE_GRADIENT_TEXTURE_URL, scene, true, false, Texture.NEAREST_SAMPLINGMODE);\r\n        this._decalTexture = new Texture(\"\", this.getScene());\r\n        this._reflectionMapTexture = new Texture(\"\", this.getScene());\r\n        this._indirectEnvTexture = new Texture(\"\", this.getScene());\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new MRDLSliderThumbMaterialDefines();\r\n        }\r\n\r\n        const defines = <MRDLSliderThumbMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, false, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"mrdlSliderThumb\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Radius_\",\r\n                \"_Bevel_Front_\",\r\n                \"_Bevel_Front_Stretch_\",\r\n                \"_Bevel_Back_\",\r\n                \"_Bevel_Back_Stretch_\",\r\n                \"_Radius_Top_Left_\",\r\n                \"_Radius_Top_Right_\",\r\n                \"_Radius_Bottom_Left_\",\r\n                \"_Radius_Bottom_Right_\",\r\n                \"_Bulge_Enabled_\",\r\n                \"_Bulge_Height_\",\r\n                \"_Bulge_Radius_\",\r\n                \"_Sun_Intensity_\",\r\n                \"_Sun_Theta_\",\r\n                \"_Sun_Phi_\",\r\n                \"_Indirect_Diffuse_\",\r\n                \"_Albedo_\",\r\n                \"_Specular_\",\r\n                \"_Shininess_\",\r\n                \"_Sharpness_\",\r\n                \"_Subsurface_\",\r\n                \"_Left_Color_\",\r\n                \"_Right_Color_\",\r\n                \"_Reflection_\",\r\n                \"_Front_Reflect_\",\r\n                \"_Edge_Reflect_\",\r\n                \"_Power_\",\r\n                \"_Sky_Color_\",\r\n                \"_Horizon_Color_\",\r\n                \"_Ground_Color_\",\r\n                \"_Horizon_Power_\",\r\n                \"_Reflection_Map_\",\r\n                \"_Indirect_Environment_\",\r\n                \"_Width_\",\r\n                \"_Fuzz_\",\r\n                \"_Min_Fuzz_\",\r\n                \"_Clip_Fade_\",\r\n                \"_Hue_Shift_\",\r\n                \"_Saturation_Shift_\",\r\n                \"_Value_Shift_\",\r\n                \"_Blob_Position_\",\r\n                \"_Blob_Intensity_\",\r\n                \"_Blob_Near_Size_\",\r\n                \"_Blob_Far_Size_\",\r\n                \"_Blob_Near_Distance_\",\r\n                \"_Blob_Far_Distance_\",\r\n                \"_Blob_Fade_Length_\",\r\n                \"_Blob_Pulse_\",\r\n                \"_Blob_Fade_\",\r\n                \"_Blob_Texture_\",\r\n                \"_Blob_Position_2_\",\r\n                \"_Blob_Near_Size_2_\",\r\n                \"_Blob_Pulse_2_\",\r\n                \"_Blob_Fade_2_\",\r\n                \"_Left_Index_Pos_\",\r\n                \"_Right_Index_Pos_\",\r\n                \"_Left_Index_Middle_Pos_\",\r\n                \"_Right_Index_Middle_Pos_\",\r\n                \"_Decal_\",\r\n                \"_Decal_Scale_XY_\",\r\n                \"_Decal_Front_Only_\",\r\n                \"_Rim_Intensity_\",\r\n                \"_Rim_Texture_\",\r\n                \"_Rim_Hue_Shift_\",\r\n                \"_Rim_Saturation_Shift_\",\r\n                \"_Rim_Value_Shift_\",\r\n                \"_Iridescence_Intensity_\",\r\n                \"_Iridescence_Texture_\",\r\n                \"Use_Global_Left_Index\",\r\n                \"Use_Global_Right_Index\",\r\n                \"Global_Left_Index_Tip_Position\",\r\n                \"Global_Right_Index_Tip_Position\",\r\n                \"Global_Left_Thumb_Tip_Position\",\r\n                \"Global_Right_Thumb_Tip_Position\",\r\n                \"Global_Left_Index_Middle_Position;\",\r\n                \"Global_Right_Index_Middle_Position\",\r\n                \"Global_Left_Index_Tip_Proximity\",\r\n                \"Global_Right_Index_Tip_Proximity\",\r\n            ];\r\n            const samplers: string[] = [\"_Rim_Texture_\", \"_Iridescence_Texture_\"];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const defines = <MRDLSliderThumbMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", this.getScene().getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", this.getScene().activeCamera!.position);\r\n\r\n        // \"Round Rect\"\r\n        this._activeEffect.setFloat(\"_Radius_\", this.radius);\r\n        this._activeEffect.setFloat(\"_Bevel_Front_\", this.bevelFront);\r\n        this._activeEffect.setFloat(\"_Bevel_Front_Stretch_\", this.bevelFrontStretch);\r\n        this._activeEffect.setFloat(\"_Bevel_Back_\", this.bevelBack);\r\n        this._activeEffect.setFloat(\"_Bevel_Back_Stretch_\", this.bevelBackStretch);\r\n\r\n        // \"Radii Multipliers\"\r\n        this._activeEffect.setFloat(\"_Radius_Top_Left_\", this.radiusTopLeft);\r\n        this._activeEffect.setFloat(\"_Radius_Top_Right_\", this.radiusTopRight);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Left_\", this.radiusBottomLeft);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Right_\", this.radiusBottomRight);\r\n\r\n        // \"Bulge\"\r\n        this._activeEffect.setFloat(\"_Bulge_Enabled_\", this.bulgeEnabled ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Bulge_Height_\", this.bulgeHeight);\r\n        this._activeEffect.setFloat(\"_Bulge_Radius_\", this.bulgeRadius);\r\n\r\n        // \"Sun\"\r\n        this._activeEffect.setFloat(\"_Sun_Intensity_\", this.sunIntensity);\r\n        this._activeEffect.setFloat(\"_Sun_Theta_\", this.sunTheta);\r\n        this._activeEffect.setFloat(\"_Sun_Phi_\", this.sunPhi);\r\n        this._activeEffect.setFloat(\"_Indirect_Diffuse_\", this.indirectDiffuse);\r\n\r\n        // \"Diffuse And Specular\"\r\n        this._activeEffect.setDirectColor4(\"_Albedo_\", this.albedo);\r\n        this._activeEffect.setFloat(\"_Specular_\", this.specular);\r\n        this._activeEffect.setFloat(\"_Shininess_\", this.shininess);\r\n        this._activeEffect.setFloat(\"_Sharpness_\", this.sharpness);\r\n        this._activeEffect.setFloat(\"_Subsurface_\", this.subsurface);\r\n\r\n        // \"Gradient\"\r\n        this._activeEffect.setDirectColor4(\"_Left_Color_\", this.leftGradientColor);\r\n        this._activeEffect.setDirectColor4(\"_Right_Color_\", this.rightGradientColor);\r\n\r\n        // \"Reflection\"\r\n        this._activeEffect.setFloat(\"_Reflection_\", this.reflection);\r\n        this._activeEffect.setFloat(\"_Front_Reflect_\", this.frontReflect);\r\n        this._activeEffect.setFloat(\"_Edge_Reflect_\", this.edgeReflect);\r\n        this._activeEffect.setFloat(\"_Power_\", this.power);\r\n\r\n        // \"Sky Environment\"\r\n        //define SKY_ENABLED true;\r\n        this._activeEffect.setDirectColor4(\"_Sky_Color_\", this.skyColor);\r\n        this._activeEffect.setDirectColor4(\"_Horizon_Color_\", this.horizonColor);\r\n        this._activeEffect.setDirectColor4(\"_Ground_Color_\", this.groundColor);\r\n        this._activeEffect.setFloat(\"_Horizon_Power_\", this.horizonPower);\r\n\r\n        // \"Mapped Environment\"\r\n        //define ENV_ENABLE false;\r\n        this._activeEffect.setTexture(\"_Reflection_Map_\", this._reflectionMapTexture);\r\n        this._activeEffect.setTexture(\"_Indirect_Environment_\", this._indirectEnvTexture);\r\n\r\n        // \"FingerOcclusion\"\r\n        //define OCCLUSION_ENABLED false;\r\n        this._activeEffect.setFloat(\"_Width_\", this.width);\r\n        this._activeEffect.setFloat(\"_Fuzz_\", this.fuzz);\r\n        this._activeEffect.setFloat(\"_Min_Fuzz_\", this.minFuzz);\r\n        this._activeEffect.setFloat(\"_Clip_Fade_\", this.clipFade);\r\n\r\n        // \"View Based Color Shift\"\r\n        this._activeEffect.setFloat(\"_Hue_Shift_\", this.hueShift);\r\n        this._activeEffect.setFloat(\"_Saturation_Shift_\", this.saturationShift);\r\n        this._activeEffect.setFloat(\"_Value_Shift_\", this.valueShift);\r\n\r\n        // \"Blob\"\r\n        //define BLOB_ENABLE false;\r\n        this._activeEffect.setVector3(\"_Blob_Position_\", this.blobPosition);\r\n        this._activeEffect.setFloat(\"_Blob_Intensity_\", this.blobIntensity);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_\", this.blobNearSize);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Size_\", this.blobFarSize);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Distance_\", this.blobNearDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Distance_\", this.blobFarDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_Length_\", this.blobFadeLength);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_\", this.blobPulse);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_\", this.blobFade);\r\n\r\n        // \"Blob Texture\"\r\n        this._activeEffect.setTexture(\"_Blob_Texture_\", this.blobTexture);\r\n\r\n        // \"Blob 2\"\r\n        //define BLOB_ENABLE_2 true;\r\n        this._activeEffect.setVector3(\"_Blob_Position_2_\", this.blobPosition2);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_2_\", this.blobNearSize2);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_2_\", this.blobPulse2);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_2_\", this.blobFade2);\r\n\r\n        // \"Finger Positions\"\r\n        this._activeEffect.setVector3(\"_Left_Index_Pos_\", this.leftIndexPosition);\r\n        this._activeEffect.setVector3(\"_Right_Index_Pos_\", this.rightIndexPosition);\r\n        this._activeEffect.setVector3(\"_Left_Index_Middle_Pos_\", this.leftIndexMiddlePosition);\r\n        this._activeEffect.setVector3(\"_Right_Index_Middle_Pos_\", this.rightIndexMiddlePosition);\r\n\r\n        // \"Decal Texture\"\r\n        //define DECAL_ENABLE false;\r\n        this._activeEffect.setTexture(\"_Decal_\", this._decalTexture);\r\n        this._activeEffect.setVector2(\"_Decal_Scale_XY_\", this.decalScaleXY);\r\n        this._activeEffect.setFloat(\"_Decal_Front_Only_\", this.decalFrontOnly ? 1.0 : 0.0);\r\n\r\n        // \"Rim Light\"\r\n        this._activeEffect.setFloat(\"_Rim_Intensity_\", this.rimIntensity);\r\n        this._activeEffect.setTexture(\"_Rim_Texture_\", this._blueGradientTexture);\r\n        this._activeEffect.setFloat(\"_Rim_Hue_Shift_\", this.rimHueShift);\r\n        this._activeEffect.setFloat(\"_Rim_Saturation_Shift_\", this.rimSaturationShift);\r\n        this._activeEffect.setFloat(\"_Rim_Value_Shift_\", this.rimValueShift);\r\n\r\n        // \"Iridescence\"\r\n        //define IRIDESCENCE_ENABLED true;\r\n        this._activeEffect.setFloat(\"_Iridescence_Intensity_\", this.iridescenceIntensity);\r\n        this._activeEffect.setTexture(\"_Iridescence_Texture_\", this._blueGradientTexture);\r\n\r\n        // Global inputs\r\n        this._activeEffect.setFloat(\"Use_Global_Left_Index\", this.useGlobalLeftIndex);\r\n        this._activeEffect.setFloat(\"Use_Global_Right_Index\", this.useGlobalRightIndex);\r\n\r\n        this._activeEffect.setVector4(\"Global_Left_Index_Tip_Position\", this.globalLeftIndexTipPosition);\r\n        this._activeEffect.setVector4(\"Global_Right_Index_Tip_Position\", this.globaRightIndexTipPosition);\r\n\r\n        this._activeEffect.setVector4(\"Global_Left_Thumb_Tip_Position\", this.globalLeftThumbTipPosition);\r\n        this._activeEffect.setVector4(\"Global_Right_Thumb_Tip_Position\", this.globalRightThumbTipPosition);\r\n\r\n        this._activeEffect.setVector4(\"Global_Left_Index_Middle_Position\", this.globalLeftIndexMiddlePosition);\r\n        this._activeEffect.setVector4(\"Global_Right_Index_Middle_Position\", this.globalRightIndexMiddlePosition);\r\n\r\n        this._activeEffect.setFloat(\"Global_Left_Index_Tip_Proximity\", this.globalLeftIndexTipProximity);\r\n        this._activeEffect.setFloat(\"Global_Right_Index_Tip_Proximity\", this.globalRightIndexTipProximity);\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n        this._reflectionMapTexture.dispose();\r\n        this._indirectEnvTexture.dispose();\r\n        this._blueGradientTexture.dispose();\r\n        this._decalTexture.dispose();\r\n    }\r\n\r\n    public clone(name: string): MRDLSliderThumbMaterial {\r\n        return SerializationHelper.Clone(() => new MRDLSliderThumbMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.customType = \"BABYLON.MRDLSliderThumbMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"MRDLSliderThumbMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): MRDLSliderThumbMaterial {\r\n        return SerializationHelper.Parse(() => new MRDLSliderThumbMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.MRDLSliderThumbMaterial\", MRDLSliderThumbMaterial);\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlBackplatePixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vExtra1;varying vec4 vExtra2;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform vec4 _Iridescence_Tint_;uniform sampler2D _Iridescent_Map_;uniform float _Angle_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform vec4 _Gradient_Color_;uniform vec4 _Top_Left_;uniform vec4 _Top_Right_;uniform vec4 _Bottom_Left_;uniform vec4 _Bottom_Right_;uniform float _Edge_Width_;uniform float _Edge_Power_;uniform float _Line_Gradient_Blend_;uniform float _Fade_Out_;void FastLinearTosRGB_B353(\nvec4 Linear,\nout vec4 sRGB)\n{sRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));sRGB.a=Linear.a;}\nvoid Round_Rect_Fragment_B332(\nfloat Radius,\nfloat Line_Width,\nvec4 Line_Color,\nfloat Filter_Width,\nvec2 UV,\nfloat Line_Visibility,\nvec4 Rect_Parms,\nvec4 Fill_Color,\nout vec4 Color)\n{float d=length(max(abs(UV)-Rect_Parms.xy,0.0));float dx=max(fwidth(d)*Filter_Width,0.00001);float g=min(Rect_Parms.z,Rect_Parms.w);float dgrad=max(fwidth(g)*Filter_Width,0.00001);float Inside_Rect=clamp(g/dgrad,0.0,1.0);float inner=clamp((d+dx*0.5-max(Radius-Line_Width,d-dx*0.5))/dx,0.0,1.0);Color=clamp(mix(Fill_Color,Line_Color,inner),0.0,1.0)*Inside_Rect;}\nvoid Iridescence_B343(\nvec3 Position,\nvec3 Normal,\nvec2 UV,\nvec3 Axis,\nvec3 Eye,\nvec4 Tint,\nsampler2D Texture,\nbool Reflected,\nfloat Frequency,\nfloat Vertical_Offset,\nout vec4 Color)\n{vec3 i=normalize(Position-Eye);vec3 r=reflect(i,Normal);float idota=dot(i,Axis);float idotr=dot(i,r);float x=Reflected ? idotr : idota;vec2 xy;xy.x=fract((x*Frequency+1.0)*0.5+UV.y*Vertical_Offset);xy.y=0.5;Color=texture(Texture,xy);Color.rgb*=Tint.rgb;}\nvoid Scale_RGB_B346(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}\nvoid Scale_RGB_B344(\nfloat Scalar,\nvec4 Color,\nout vec4 Result)\n{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}\nvoid Line_Fragment_B362(\nvec4 Base_Color,\nvec4 Highlight_Color,\nfloat Highlight_Width,\nvec3 Line_Vertex,\nfloat Highlight,\nout vec4 Line_Color)\n{float k2=1.0-clamp(abs(Line_Vertex.y/Highlight_Width),0.0,1.0);Line_Color=mix(Base_Color,Highlight_Color,Highlight*k2);}\nvoid Edge_B356(\nvec4 RectParms,\nfloat Radius,\nfloat Line_Width,\nvec2 UV,\nfloat Edge_Width,\nfloat Edge_Power,\nout float Result)\n{float d=length(max(abs(UV)-RectParms.xy,0.0));float edge=1.0-clamp((1.0-d/(Radius-Line_Width))/Edge_Width,0.0,1.0);Result=pow(edge,Edge_Power);}\nvoid Gradient_B355(\nvec4 Gradient_Color,\nvec4 Top_Left,\nvec4 Top_Right,\nvec4 Bottom_Left,\nvec4 Bottom_Right,\nvec2 UV,\nout vec4 Result)\n{vec3 top=Top_Left.rgb+(Top_Right.rgb-Top_Left.rgb)*UV.x;vec3 bottom=Bottom_Left.rgb+(Bottom_Right.rgb-Bottom_Left.rgb)*UV.x;Result.rgb=Gradient_Color.rgb*(bottom+(top-bottom)*UV.y);Result.a=1.0;}\nvoid main()\n{float X_Q338;float Y_Q338;float Z_Q338;float W_Q338;X_Q338=vExtra2.x;Y_Q338=vExtra2.y;Z_Q338=vExtra2.z;W_Q338=vExtra2.w;vec4 Color_Q343;\n#if IRIDESCENCE_ENABLE\nIridescence_B343(vPosition,vNormal,vUV,vBinormal,cameraPosition,_Iridescence_Tint_,_Iridescent_Map_,_Reflected_,_Frequency_,_Vertical_Offset_,Color_Q343);\n#else\nColor_Q343=vec4(0,0,0,0);\n#endif\nvec4 Result_Q344;Scale_RGB_B344(_Iridescence_Intensity_,Color_Q343,Result_Q344);vec4 Line_Color_Q362;Line_Fragment_B362(_Line_Color_,_Highlight_Color_,_Highlight_Width_,vTangent,_Highlight_,Line_Color_Q362);float Result_Q356;\n#if EDGE_ONLY\nEdge_B356(vExtra1,Z_Q338,W_Q338,vUV,_Edge_Width_,_Edge_Power_,Result_Q356);\n#else\nResult_Q356=1.0;\n#endif\nvec2 Vec2_Q339=vec2(X_Q338,Y_Q338);vec4 Result_Q355;Gradient_B355(_Gradient_Color_,_Top_Left_,_Top_Right_,_Bottom_Left_,_Bottom_Right_,Vec2_Q339,Result_Q355);vec4 Linear_Q348;Linear_Q348.rgb=clamp(Result_Q355.rgb*Result_Q355.rgb,0.0,1.0);Linear_Q348.a=Result_Q355.a;vec4 Result_Q346;Scale_RGB_B346(Linear_Q348,Result_Q356,Result_Q346);vec4 Sum_Q345=Result_Q346+Result_Q344;vec4 Color_At_T_Q347=mix(Line_Color_Q362,Result_Q346,_Line_Gradient_Blend_);vec4 Base_And_Iridescent_Q350;Base_And_Iridescent_Q350=_Base_Color_+vec4(Sum_Q345.rgb,0.0);vec4 Sum_Q349=Color_At_T_Q347+_Iridescence_Edge_Intensity_*Color_Q343;vec4 Result_Q351=Sum_Q349; Result_Q351.a=1.0;vec4 Color_Q332;Round_Rect_Fragment_B332(Z_Q338,W_Q338,Result_Q351,_Filter_Width_,vUV,1.0,vExtra1,Base_And_Iridescent_Q350,Color_Q332);vec4 Result_Q354=_Fade_Out_*Color_Q332;vec4 sRGB_Q353;FastLinearTosRGB_B353(Result_Q354,sRGB_Q353);vec4 Out_Color=sRGB_Q353;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlBackplatePixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlBackplateVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec3 tangent;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform vec4 _Iridescence_Tint_;uniform sampler2D _Iridescent_Map_;uniform float _Angle_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform vec4 _Gradient_Color_;uniform vec4 _Top_Left_;uniform vec4 _Top_Right_;uniform vec4 _Bottom_Left_;uniform vec4 _Bottom_Right_;uniform float _Edge_Width_;uniform float _Edge_Power_;uniform float _Line_Gradient_Blend_;uniform float _Fade_Out_;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vExtra1;varying vec4 vExtra2;void Object_To_World_Pos_B314(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}\nvoid Round_Rect_Vertex_B357(\nvec2 UV,\nfloat Radius,\nfloat Margin,\nfloat Anisotropy,\nfloat Gradient1,\nfloat Gradient2,\nvec3 Normal,\nvec4 Color_Scale_Translate,\nout vec2 Rect_UV,\nout vec4 Rect_Parms,\nout vec2 Scale_XY,\nout vec2 Line_UV,\nout vec2 Color_UV_Info)\n{Scale_XY=vec2(Anisotropy,1.0);Line_UV=(UV-vec2(0.5,0.5));Rect_UV=Line_UV*Scale_XY;Rect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius)-vec2(Margin,Margin);Rect_Parms.z=Gradient1; \nRect_Parms.w=Gradient2;Color_UV_Info=(Line_UV+vec2(0.5,0.5))*Color_Scale_Translate.xy+Color_Scale_Translate.zw;}\nvoid Line_Vertex_B333(\nvec2 Scale_XY,\nvec2 UV,\nfloat Time,\nfloat Rate,\nvec4 Highlight_Transform,\nout vec3 Line_Vertex)\n{float angle2=(Rate*Time)*2.0*3.1416;float sinAngle2=sin(angle2);float cosAngle2=cos(angle2);vec2 xformUV=UV*Highlight_Transform.xy+Highlight_Transform.zw;Line_Vertex.x=0.0;Line_Vertex.y=cosAngle2*xformUV.x-sinAngle2*xformUV.y;Line_Vertex.z=0.0; }\nvoid PickDir_B334(\nfloat Degrees,\nvec3 DirX,\nvec3 DirY,\nout vec3 Dir)\n{float a=Degrees*3.14159/180.0;Dir=cos(a)*DirX+sin(a)*DirY;}\nvoid Move_Verts_B327(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir)\n{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);New_UV=center+r2*(UV-2.0*center+0.5);New_P=vec3(New_UV-0.5,P.z);Radial_Gradient=1.0-length(delta)*2.0;Radial_Dir=vec3(delta*r2,0.0);}\nvoid Pick_Radius_B336(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}\nvoid Edge_AA_Vertex_B328(\nvec3 Position_World,\nvec3 Position_Object,\nvec3 Normal_Object,\nvec3 Eye,\nfloat Radial_Gradient,\nvec3 Radial_Dir,\nvec3 Tangent,\nout float Gradient1,\nout float Gradient2)\n{vec3 I=(Eye-Position_World);vec3 T=(vec4(Tangent,0.0)).xyz;float g=(dot(T,I)<0.0) ? 0.0 : 1.0;if (Normal_Object.z==0.0) { \nGradient1=Position_Object.z>0.0 ? g : 1.0;Gradient2=Position_Object.z>0.0 ? 1.0 : g;} else {Gradient1=g+(1.0-g)*(Radial_Gradient);Gradient2=1.0;}}\nvoid Object_To_World_Dir_B330(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}\nvoid RelativeOrAbsoluteDetail_B341(\nfloat Nominal_Radius,\nfloat Nominal_LineWidth,\nbool Absolute_Measurements,\nfloat Height,\nout float Radius,\nout float Line_Width)\n{float scale=Absolute_Measurements ? 1.0/Height : 1.0;Radius=Nominal_Radius*scale;Line_Width=Nominal_LineWidth*scale;}\nvoid main()\n{vec3 Nrm_World_Q326;Nrm_World_Q326=normalize((world*vec4(normal,0.0)).xyz);vec3 Tangent_World_Q329;vec3 Tangent_World_N_Q329;float Tangent_Length_Q329;Tangent_World_Q329=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q329=length(Tangent_World_Q329);Tangent_World_N_Q329=Tangent_World_Q329/Tangent_Length_Q329;vec3 Binormal_World_Q330;vec3 Binormal_World_N_Q330;float Binormal_Length_Q330;Object_To_World_Dir_B330(vec3(0,1,0),Binormal_World_Q330,Binormal_World_N_Q330,Binormal_Length_Q330);float Radius_Q341;float Line_Width_Q341;RelativeOrAbsoluteDetail_B341(_Radius_,_Line_Width_,_Absolute_Sizes_,Binormal_Length_Q330,Radius_Q341,Line_Width_Q341);vec3 Dir_Q334;PickDir_B334(_Angle_,Tangent_World_N_Q329,Binormal_World_N_Q330,Dir_Q334);float Result_Q336;Pick_Radius_B336(Radius_Q341,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q336);float Anisotropy_Q331=Tangent_Length_Q329/Binormal_Length_Q330;vec4 Out_Color_Q337=vec4(Result_Q336,Line_Width_Q341,0,1);vec3 New_P_Q327;vec2 New_UV_Q327;float Radial_Gradient_Q327;vec3 Radial_Dir_Q327;Move_Verts_B327(Anisotropy_Q331,position,Result_Q336,New_P_Q327,New_UV_Q327,Radial_Gradient_Q327,Radial_Dir_Q327);vec3 Pos_World_Q314;Object_To_World_Pos_B314(New_P_Q327,Pos_World_Q314);float Gradient1_Q328;float Gradient2_Q328;\n#if SMOOTH_EDGES\nEdge_AA_Vertex_B328(Pos_World_Q314,position,normal,cameraPosition,Radial_Gradient_Q327,Radial_Dir_Q327,tangent,Gradient1_Q328,Gradient2_Q328);\n#else\nGradient1_Q328=1.0;Gradient2_Q328=1.0;\n#endif\nvec2 Rect_UV_Q357;vec4 Rect_Parms_Q357;vec2 Scale_XY_Q357;vec2 Line_UV_Q357;vec2 Color_UV_Info_Q357;Round_Rect_Vertex_B357(New_UV_Q327,Result_Q336,0.0,Anisotropy_Q331,Gradient1_Q328,Gradient2_Q328,normal,vec4(1,1,0,0),Rect_UV_Q357,Rect_Parms_Q357,Scale_XY_Q357,Line_UV_Q357,Color_UV_Info_Q357);vec3 Line_Vertex_Q333;Line_Vertex_B333(Scale_XY_Q357,Line_UV_Q357,(20.0),_Rate_,_Highlight_Transform_,Line_Vertex_Q333);float X_Q359;float Y_Q359;X_Q359=Color_UV_Info_Q357.x;Y_Q359=Color_UV_Info_Q357.y;vec4 Vec4_Q358=vec4(X_Q359,Y_Q359,Result_Q336,Line_Width_Q341);vec3 Position=Pos_World_Q314;vec3 Normal=Nrm_World_Q326;vec2 UV=Rect_UV_Q357;vec3 Tangent=Line_Vertex_Q333;vec3 Binormal=Dir_Q334;vec4 Color=Out_Color_Q337;vec4 Extra1=Rect_Parms_Q357;vec4 Extra2=Vec4_Q358;vec4 Extra3=vec4(0,0,0,0);gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vExtra1=Extra1;vExtra2=Extra2;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlBackplateVertexShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport { Vector4 } from \"core/Maths/math.vector\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\nimport \"./shaders/mrdlBackplate.fragment\";\r\nimport \"./shaders/mrdlBackplate.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @internal */\r\nclass MRDLBackplateMaterialDefines extends MaterialDefines {\r\n    /*\r\n        \"IRIDESCENCE_ENABLE\", \"SMOOTH_EDGES\"\r\n    */\r\n    public IRIDESCENCE_ENABLE = true;\r\n    public SMOOTH_EDGES = true;\r\n\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render backplate material with MRDL\r\n */\r\nexport class MRDLBackplateMaterial extends PushMaterial {\r\n    /**\r\n     * URL pointing to the texture used to define the coloring for the Iridescent Map effect.\r\n     */\r\n    public static IRIDESCENT_MAP_TEXTURE_URL = \"https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-backplate-iridescence.png\";\r\n    private _iridescentMapTexture: Texture;\r\n\r\n    /**\r\n     * Gets or sets the corner radius on the backplate. If this value is changed, update the lineWidth to match.\r\n     */\r\n    @serialize()\r\n    public radius = 0.3;\r\n\r\n    /**\r\n     * Gets or sets the line width of the backplate.\r\n     */\r\n    @serialize()\r\n    public lineWidth = 0.003;\r\n\r\n    /**\r\n     * Gets or sets whether to use absolute sizes when calculating effects on the backplate.\r\n     * Since desktop and VR/AR have different relative sizes, it's usually best to keep this false.\r\n     */\r\n    @serialize()\r\n    public absoluteSizes = false;\r\n\r\n    /** @internal */\r\n    public _filterWidth = 1;\r\n\r\n    /**\r\n     * Gets or sets the base color of the backplate.\r\n     */\r\n    @serialize()\r\n    public baseColor = new Color4(0, 0, 0, 1);\r\n\r\n    /**\r\n     * Gets or sets the line color of the backplate.\r\n     */\r\n    @serialize()\r\n    public lineColor = new Color4(0.2, 0.262745, 0.4, 1);\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusTopLeft = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusTopRight = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusBottomLeft = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the top left Radii Multiplier.\r\n     */\r\n    @serialize()\r\n    public radiusBottomRight = 1.0;\r\n\r\n    /** @internal */\r\n    public _rate = 0;\r\n\r\n    /**\r\n     * Gets or sets the color of the highlights on the backplate line.\r\n     */\r\n    @serialize()\r\n    public highlightColor = new Color4(0.239216, 0.435294, 0.827451, 1);\r\n\r\n    /**\r\n     * Gets or sets the width of the highlights on the backplate line.\r\n     */\r\n    @serialize()\r\n    public highlightWidth = 0;\r\n\r\n    /** @internal */\r\n    public _highlightTransform = new Vector4(1, 1, 0, 0);\r\n\r\n    /** @internal */\r\n    public _highlight = 1;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the iridescence effect.\r\n     */\r\n    @serialize()\r\n    public iridescenceIntensity = 0.45;\r\n\r\n    /**\r\n     * Gets or sets the intensity of the iridescence effect on the backplate edges.\r\n     */\r\n    @serialize()\r\n    public iridescenceEdgeIntensity = 1;\r\n\r\n    /**\r\n     * Gets or sets the Tint of the iridescence effect on the backplate.\r\n     */\r\n    @serialize()\r\n    public iridescenceTint = new Color4(1, 1, 1, 1);\r\n\r\n    /** @internal */\r\n    public _angle = -45;\r\n\r\n    /**\r\n     * Gets or sets the opacity of the backplate (0.0 - 1.0).\r\n     */\r\n    @serialize()\r\n    public fadeOut = 1;\r\n\r\n    /** @internal */\r\n    public _reflected = true;\r\n\r\n    /** @internal */\r\n    public _frequency = 1;\r\n\r\n    /** @internal */\r\n    public _verticalOffset = 0;\r\n\r\n    /**\r\n     * Gets or sets the gradient color effect on the backplate.\r\n     */\r\n    @serialize()\r\n    public gradientColor = new Color4(0.74902, 0.74902, 0.74902, 1);\r\n\r\n    /**\r\n     * Gets or sets the top left gradient color effect on the backplate.\r\n     */\r\n    @serialize()\r\n    public topLeftGradientColor = new Color4(0.00784314, 0.294118, 0.580392, 1);\r\n\r\n    /**\r\n     * Gets or sets the top right gradient color effect on the backplate.\r\n     */\r\n    @serialize()\r\n    public topRightGradientColor = new Color4(0.305882, 0, 1, 1);\r\n\r\n    /**\r\n     * Gets or sets the bottom left gradient color effect on the backplate.\r\n     */\r\n    @serialize()\r\n    public bottomLeftGradientColor = new Color4(0.133333, 0.258824, 0.992157, 1);\r\n\r\n    /**\r\n     * Gets or sets the bottom right gradient color effect on the backplate.\r\n     */\r\n    @serialize()\r\n    public bottomRightGradientColor = new Color4(0.176471, 0.176471, 0.619608, 1);\r\n\r\n    /**\r\n     * Gets or sets the edge width of the backplate.\r\n     */\r\n    @serialize()\r\n    public edgeWidth = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the edge width of the backplate.\r\n     */\r\n    @serialize()\r\n    public edgePower = 1;\r\n\r\n    /**\r\n     * Gets or sets the edge width of the backplate.\r\n     */\r\n    @serialize()\r\n    public edgeLineGradientBlend = 0.5;\r\n\r\n    constructor(name: string, scene?: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_DISABLE;\r\n        this.backFaceCulling = false;\r\n\r\n        this._iridescentMapTexture = new Texture(MRDLBackplateMaterial.IRIDESCENT_MAP_TEXTURE_URL, this.getScene(), true, false, Texture.NEAREST_SAMPLINGMODE);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new MRDLBackplateMaterialDefines();\r\n        }\r\n\r\n        const defines = <MRDLBackplateMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, false, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"mrdlBackplate\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Radius_\",\r\n                \"_Line_Width_\",\r\n                \"_Absolute_Sizes_\",\r\n                \"_Filter_Width_\",\r\n                \"_Base_Color_\",\r\n                \"_Line_Color_\",\r\n                \"_Radius_Top_Left_\",\r\n                \"_Radius_Top_Right_\",\r\n                \"_Radius_Bottom_Left_\",\r\n                \"_Radius_Bottom_Right_\",\r\n                \"_Rate_\",\r\n                \"_Highlight_Color_\",\r\n                \"_Highlight_Width_\",\r\n                \"_Highlight_Transform_\",\r\n                \"_Highlight_\",\r\n                \"_Iridescence_Intensity_\",\r\n                \"_Iridescence_Edge_Intensity_\",\r\n                \"_Iridescence_Tint_\",\r\n                \"_Iridescent_Map_\",\r\n                \"_Angle_\",\r\n                \"_Reflected_\",\r\n                \"_Frequency_\",\r\n                \"_Vertical_Offset_\",\r\n                \"_Gradient_Color_\",\r\n                \"_Top_Left_\",\r\n                \"_Top_Right_\",\r\n                \"_Bottom_Left_\",\r\n                \"_Bottom_Right_\",\r\n                \"_Edge_Width_\",\r\n                \"_Edge_Power_\",\r\n                \"_Line_Gradient_Blend_\",\r\n                \"_Fade_Out_\",\r\n            ];\r\n            const samplers: string[] = [\"_Iridescent_Map_\"];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const defines = <MRDLBackplateMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", this.getScene().getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", this.getScene().activeCamera!.position);\r\n\r\n        // \"Round Rect\"\r\n        this._activeEffect.setFloat(\"_Radius_\", this.radius);\r\n        this._activeEffect.setFloat(\"_Line_Width_\", this.lineWidth);\r\n        this._activeEffect.setFloat(\"_Absolute_Sizes_\", this.absoluteSizes ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Filter_Width_\", this._filterWidth);\r\n        this._activeEffect.setDirectColor4(\"_Base_Color_\", this.baseColor);\r\n        this._activeEffect.setDirectColor4(\"_Line_Color_\", this.lineColor);\r\n\r\n        // \"Radii Multipliers\"\r\n        this._activeEffect.setFloat(\"_Radius_Top_Left_\", this.radiusTopLeft);\r\n        this._activeEffect.setFloat(\"_Radius_Top_Right_\", this.radiusTopRight);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Left_\", this.radiusBottomLeft);\r\n        this._activeEffect.setFloat(\"_Radius_Bottom_Right_\", this.radiusBottomRight);\r\n\r\n        // \"Line Highlight\"\r\n        this._activeEffect.setFloat(\"_Rate_\", this._rate);\r\n        this._activeEffect.setDirectColor4(\"_Highlight_Color_\", this.highlightColor);\r\n        this._activeEffect.setFloat(\"_Highlight_Width_\", this.highlightWidth);\r\n        this._activeEffect.setVector4(\"_Highlight_Transform_\", this._highlightTransform);\r\n        this._activeEffect.setFloat(\"_Highlight_\", this._highlight);\r\n\r\n        // \"Iridescence\"\r\n        //define IRIDESCENCE_ENABLE true;\r\n        this._activeEffect.setFloat(\"_Iridescence_Intensity_\", this.iridescenceIntensity);\r\n        this._activeEffect.setFloat(\"_Iridescence_Edge_Intensity_\", this.iridescenceEdgeIntensity);\r\n        this._activeEffect.setDirectColor4(\"_Iridescence_Tint_\", this.iridescenceTint);\r\n        this._activeEffect.setTexture(\"_Iridescent_Map_\", this._iridescentMapTexture);\r\n        this._activeEffect.setFloat(\"_Angle_\", this._angle);\r\n        this._activeEffect.setFloat(\"_Reflected_\", this._reflected ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Frequency_\", this._frequency);\r\n        this._activeEffect.setFloat(\"_Vertical_Offset_\", this._verticalOffset);\r\n\r\n        // \"Gradient\"\r\n        this._activeEffect.setDirectColor4(\"_Gradient_Color_\", this.gradientColor);\r\n        this._activeEffect.setDirectColor4(\"_Top_Left_\", this.topLeftGradientColor);\r\n        this._activeEffect.setDirectColor4(\"_Top_Right_\", this.topRightGradientColor);\r\n        this._activeEffect.setDirectColor4(\"_Bottom_Left_\", this.bottomLeftGradientColor);\r\n        this._activeEffect.setDirectColor4(\"_Bottom_Right_\", this.bottomRightGradientColor);\r\n        //define EDGE_ONLY false;\r\n        this._activeEffect.setFloat(\"_Edge_Width_\", this.edgeWidth);\r\n        this._activeEffect.setFloat(\"_Edge_Power_\", this.edgePower);\r\n        this._activeEffect.setFloat(\"_Line_Gradient_Blend_\", this.edgeLineGradientBlend);\r\n\r\n        // \"Fade\"\r\n        this._activeEffect.setFloat(\"_Fade_Out_\", this.fadeOut);\r\n\r\n        // \"Antialiasing\"\r\n        //define SMOOTH_EDGES true;\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): MRDLBackplateMaterial {\r\n        return SerializationHelper.Clone(() => new MRDLBackplateMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.customType = \"BABYLON.MRDLBackplateMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"MRDLBackplateMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): MRDLBackplateMaterial {\r\n        return SerializationHelper.Parse(() => new MRDLBackplateMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.MRDLBackplateMaterial\", MRDLBackplateMaterial);\r\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport { PointerDragBehavior } from \"core/Behaviors/Meshes/pointerDragBehavior\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { SceneLoader } from \"core/Loading/sceneLoader\";\r\nimport { MRDLSliderBarMaterial } from \"../materials/mrdl/mrdlSliderBarMaterial\";\r\nimport { MRDLSliderThumbMaterial } from \"../materials/mrdl/mrdlSliderThumbMaterial\";\r\nimport { MRDLBackplateMaterial } from \"../materials/mrdl/mrdlBackplateMaterial\";\r\n\r\nconst SLIDER_MIN: number = 0;\r\nconst SLIDER_MAX: number = 100;\r\nconst SLIDER_VAL: number = 50;\r\nconst SLIDER_STEP: number = 0;\r\nconst SLIDER_SCALING: number = 1.0;\r\nconst SLIDER_MARGIN: number = 0.2;\r\n\r\n/**\r\n * Class used to create a slider in 3D\r\n */\r\nexport class Slider3D extends Control3D {\r\n    /**\r\n     * Base Url for the models.\r\n     */\r\n    public static MODEL_BASE_URL: string = \"https://assets.babylonjs.com/meshes/MRTK/\";\r\n\r\n    /**\r\n     * File name for the 8x4 model.\r\n     */\r\n    public static MODEL_FILENAME: string = \"mrtk-fluent-backplate.glb\";\r\n\r\n    private _sliderBackplate: AbstractMesh;\r\n    private _sliderBackplateMaterial: MRDLBackplateMaterial;\r\n    private _sliderBarMaterial: MRDLSliderBarMaterial;\r\n    private _sliderThumbMaterial: MRDLSliderThumbMaterial;\r\n    private _sliderThumb: AbstractMesh;\r\n    private _sliderBar: AbstractMesh;\r\n    private _sliderBackplateVisible: boolean;\r\n\r\n    private _minimum: number;\r\n    private _maximum: number;\r\n    private _value: number;\r\n    private _step: number;\r\n\r\n    private _draggedPosition: number;\r\n\r\n    /** Observable raised when the sldier value changes */\r\n    public onValueChangedObservable = new Observable<number>();\r\n\r\n    /**\r\n     * Creates a new slider\r\n     * @param name defines the control name\r\n     * @param sliderBackplateVisible defines if the control has a backplate, default is false\r\n     */\r\n    constructor(name?: string, sliderBackplateVisible?: boolean) {\r\n        super(name);\r\n        this._sliderBackplateVisible = sliderBackplateVisible || false;\r\n\r\n        this._minimum = SLIDER_MIN;\r\n        this._maximum = SLIDER_MAX;\r\n        this._step = SLIDER_STEP;\r\n        this._value = SLIDER_VAL;\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh used to render this control\r\n     */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        if (this.node) {\r\n            return this._sliderThumb;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /** Gets or sets minimum value */\r\n    public get minimum(): number {\r\n        return this._minimum;\r\n    }\r\n\r\n    public set minimum(value: number) {\r\n        if (this._minimum === value) {\r\n            return;\r\n        }\r\n\r\n        this._minimum = Math.max(value, SLIDER_MIN);\r\n        this._value = Math.max(Math.min(this._value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets maximum value */\r\n    public get maximum(): number {\r\n        return this._maximum;\r\n    }\r\n\r\n    public set maximum(value: number) {\r\n        if (this._maximum === value) {\r\n            return;\r\n        }\r\n\r\n        this._maximum = Math.max(value, this._minimum);\r\n        this._value = Math.max(Math.min(this._value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets step value */\r\n    public get step(): number {\r\n        return this._step;\r\n    }\r\n\r\n    public set step(value: number) {\r\n        if (this._step === value) {\r\n            return;\r\n        }\r\n\r\n        this._step = Math.max(Math.min(value, this._maximum - this._minimum), SLIDER_STEP);\r\n    }\r\n\r\n    /** Gets or sets current value */\r\n    public get value(): number {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(value: number) {\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n\r\n        this._value = Math.max(Math.min(value, this._maximum), this._minimum);\r\n        if (this._sliderThumb) {\r\n            this._sliderThumb.position.x = this._convertToPosition(this.value);\r\n        }\r\n        this.onValueChangedObservable.notifyObservers(this._value);\r\n    }\r\n\r\n    protected get start(): number {\r\n        if (!this.node) {\r\n            return -SLIDER_SCALING / 2;\r\n        }\r\n\r\n        return this._sliderBar.position.x - this._sliderBar.scaling.x / 2;\r\n    }\r\n\r\n    protected get end(): number {\r\n        if (!this.node) {\r\n            return SLIDER_SCALING / 2;\r\n        }\r\n\r\n        return this._sliderBar.position.x + this._sliderBar.scaling.x / 2;\r\n    }\r\n\r\n    /**\r\n     * Gets the slider bar material used by this control\r\n     */\r\n    public get sliderBarMaterial(): MRDLSliderBarMaterial {\r\n        return this._sliderBarMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the slider thumb material used by this control\r\n     */\r\n    public get sliderThumbMaterial(): MRDLSliderThumbMaterial {\r\n        return this._sliderThumbMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the slider backplate material used by this control\r\n     */\r\n    public get sliderBackplateMaterial(): MRDLBackplateMaterial {\r\n        return this._sliderBackplateMaterial;\r\n    }\r\n\r\n    /** Sets a boolean indicating if the control is visible */\r\n    public set isVisible(value: boolean) {\r\n        if (this._isVisible === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVisible = value;\r\n\r\n        this.node?.setEnabled(value);\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        const sliderBackplate = CreateBox(\r\n            `${this.name}_sliderbackplate`,\r\n            {\r\n                width: 1.0,\r\n                height: 1.0,\r\n                depth: 1.0,\r\n            },\r\n            scene\r\n        );\r\n        sliderBackplate.isPickable = false;\r\n        sliderBackplate.visibility = 0;\r\n        sliderBackplate.scaling = new Vector3(1, 0.5, 0.8);\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, Slider3D.MODEL_BASE_URL, Slider3D.MODEL_FILENAME, scene).then((result) => {\r\n            // make all meshes not pickable. Required meshes' pickable state will be set later.\r\n            result.meshes.forEach((m) => {\r\n                m.isPickable = false;\r\n            });\r\n            const sliderBackplateModel = result.meshes[1];\r\n            const sliderBarModel = result.meshes[1].clone(`${this.name}_sliderbar`, sliderBackplate);\r\n            const sliderThumbModel = result.meshes[1].clone(`${this.name}_sliderthumb`, sliderBackplate);\r\n            sliderBackplateModel.visibility = 0;\r\n\r\n            if (this._sliderBackplateVisible) {\r\n                sliderBackplateModel.visibility = 1;\r\n                sliderBackplateModel.name = `${this.name}_sliderbackplate`;\r\n                sliderBackplateModel.scaling.x = 1;\r\n                sliderBackplateModel.scaling.z = 0.2;\r\n                sliderBackplateModel.parent = sliderBackplate;\r\n                if (this._sliderBackplateMaterial) {\r\n                    sliderBackplateModel.material = this._sliderBackplateMaterial;\r\n                }\r\n                this._sliderBackplate = sliderBackplateModel;\r\n            }\r\n\r\n            if (sliderBarModel) {\r\n                sliderBarModel.parent = sliderBackplate;\r\n                sliderBarModel.position.z = -0.1;\r\n                sliderBarModel.scaling = new Vector3(SLIDER_SCALING - SLIDER_MARGIN, 0.04, 0.3);\r\n                if (this._sliderBarMaterial) {\r\n                    sliderBarModel.material = this._sliderBarMaterial;\r\n                }\r\n                this._sliderBar = sliderBarModel;\r\n            }\r\n\r\n            if (sliderThumbModel) {\r\n                sliderThumbModel.parent = sliderBackplate;\r\n                sliderThumbModel.isPickable = true;\r\n                sliderThumbModel.position.z = -0.115;\r\n                sliderThumbModel.scaling = new Vector3(0.025, 0.3, 0.6);\r\n                sliderThumbModel.position.x = this._convertToPosition(this.value);\r\n                sliderThumbModel.addBehavior(this._createBehavior());\r\n                if (this._sliderThumbMaterial) {\r\n                    sliderThumbModel.material = this._sliderThumbMaterial;\r\n                }\r\n                this._sliderThumb = sliderThumbModel;\r\n            }\r\n\r\n            this._injectGUI3DReservedDataStore(sliderBackplate).control = this;\r\n            sliderBackplate.getChildMeshes().forEach((mesh) => {\r\n                this._injectGUI3DReservedDataStore(mesh).control = this;\r\n            });\r\n        });\r\n\r\n        this._affectMaterial(sliderBackplate);\r\n        return sliderBackplate;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        this._sliderBackplateMaterial = this._sliderBackplateMaterial ?? new MRDLBackplateMaterial(`${this.name}_sliderbackplate_material`, mesh.getScene());\r\n        this._sliderBarMaterial = this._sliderBarMaterial ?? new MRDLSliderBarMaterial(`${this.name}_sliderbar_material`, mesh.getScene());\r\n        this._sliderThumbMaterial = this._sliderThumbMaterial ?? new MRDLSliderThumbMaterial(`${this.name}_sliderthumb_material`, mesh.getScene());\r\n    }\r\n\r\n    private _createBehavior(): PointerDragBehavior {\r\n        const pointerDragBehavior = new PointerDragBehavior({ dragAxis: Vector3.Right() });\r\n        pointerDragBehavior.moveAttached = false;\r\n\r\n        pointerDragBehavior.onDragStartObservable.add(() => {\r\n            this._draggedPosition = this._sliderThumb.position.x;\r\n        });\r\n\r\n        pointerDragBehavior.onDragObservable.add((event) => {\r\n            this._draggedPosition += event.dragDistance / this.scaling.x;\r\n            this.value = this._convertToValue(this._draggedPosition);\r\n        });\r\n\r\n        return pointerDragBehavior;\r\n    }\r\n\r\n    private _convertToPosition(value: number): number {\r\n        const position = ((value - this.minimum) / (this.maximum - this.minimum)) * (this.end - this.start) + this.start;\r\n        return Math.min(Math.max(position, this.start), this.end);\r\n    }\r\n\r\n    private _convertToValue(position: number): number {\r\n        let value = ((position - this.start) / (this.end - this.start)) * (this.maximum - this.minimum);\r\n        value = this.step ? Math.round(value / this.step) * this.step : value;\r\n\r\n        return Math.max(Math.min(this.minimum + value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n        this._sliderBar?.dispose();\r\n        this._sliderThumb?.dispose();\r\n        this._sliderBarMaterial?.dispose();\r\n        this._sliderThumbMaterial?.dispose();\r\n        this._sliderBackplate?.dispose();\r\n        this._sliderBackplateMaterial?.dispose();\r\n    }\r\n}\r\n", "import { Tools } from \"core/Misc/tools\";\r\nimport { Matrix, TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport type { float } from \"core/types\";\r\n\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport type { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\nimport { Axis, Space } from \"core/Maths/math.axis\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a sphere\r\n */\r\nexport class SpherePanel extends VolumeBasedPanel {\r\n    private _radius = 5.0;\r\n\r\n    /**\r\n     * Gets or sets the radius of the sphere where to project controls (5 by default)\r\n     */\r\n    public get radius(): float {\r\n        return this._radius;\r\n    }\r\n\r\n    public set radius(value: float) {\r\n        if (this._radius === value) {\r\n            return;\r\n        }\r\n\r\n        this._radius = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        const mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        const newPos = this._sphericalMapping(nodePosition);\r\n        control.position = newPos;\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n                mesh.lookAt(new Vector3(2 * newPos.x, 2 * newPos.y, 2 * newPos.z));\r\n                break;\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(-newPos.x, -newPos.y, -newPos.z));\r\n                break;\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n                mesh.rotate(Axis.Y, Math.PI, Space.LOCAL);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _sphericalMapping(source: Vector3) {\r\n        const newPos = new Vector3(0, 0, this._radius);\r\n\r\n        const xAngle = source.y / this._radius;\r\n        const yAngle = -(source.x / this._radius);\r\n\r\n        Matrix.RotationYawPitchRollToRef(yAngle, xAngle, 0, TmpVectors.Matrix[0]);\r\n\r\n        return Vector3.TransformNormal(newPos, TmpVectors.Matrix[0]);\r\n    }\r\n}\r\n", "import { Tools } from \"core/Misc/tools\";\r\nimport { Matrix, TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\n\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a stack panel in 3D on XY plane\r\n */\r\nexport class StackPanel3D extends Container3D {\r\n    private _isVertical = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the stack panel is vertical or horizontal (horizontal by default)\r\n     */\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the distance between elements\r\n     */\r\n    public margin = 0.1;\r\n\r\n    /**\r\n     * Creates new StackPanel\r\n     * @param isVertical\r\n     */\r\n    public constructor(isVertical = false) {\r\n        super();\r\n\r\n        this._isVertical = isVertical;\r\n    }\r\n\r\n    protected _arrangeChildren() {\r\n        let width = 0;\r\n        let height = 0;\r\n        let controlCount = 0;\r\n        const extendSizes = [];\r\n\r\n        const currentInverseWorld = Matrix.Invert(this.node!.computeWorldMatrix(true));\r\n\r\n        // Measure\r\n        for (const child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            controlCount++;\r\n            child.mesh.computeWorldMatrix(true);\r\n            child.mesh.getWorldMatrix().multiplyToRef(currentInverseWorld, TmpVectors.Matrix[0]);\r\n\r\n            const boundingBox = child.mesh.getBoundingInfo().boundingBox;\r\n            const extendSize = Vector3.TransformNormal(boundingBox.extendSize, TmpVectors.Matrix[0]);\r\n            extendSizes.push(extendSize);\r\n\r\n            if (this._isVertical) {\r\n                height += extendSize.y;\r\n            } else {\r\n                width += extendSize.x;\r\n            }\r\n        }\r\n\r\n        if (this._isVertical) {\r\n            height += ((controlCount - 1) * this.margin) / 2;\r\n        } else {\r\n            width += ((controlCount - 1) * this.margin) / 2;\r\n        }\r\n\r\n        // Arrange\r\n        let offset: number;\r\n        if (this._isVertical) {\r\n            offset = -height;\r\n        } else {\r\n            offset = -width;\r\n        }\r\n\r\n        let index = 0;\r\n        for (const child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n            controlCount--;\r\n            const extendSize = extendSizes[index++];\r\n\r\n            if (this._isVertical) {\r\n                child.position.y = offset + extendSize.y;\r\n                child.position.x = 0;\r\n                offset += extendSize.y * 2;\r\n            } else {\r\n                child.position.x = offset + extendSize.x;\r\n                child.position.y = 0;\r\n                offset += extendSize.x * 2;\r\n            }\r\n\r\n            offset += controlCount > 0 ? this.margin : 0;\r\n        }\r\n    }\r\n}\r\n", "import type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\n\r\nimport { TouchButton3D } from \"./touchButton3D\";\r\n\r\n/**\r\n * Class used to create an interactable object. It's a touchable 3D button using a mesh coming from the current scene\r\n * @since 5.0.0\r\n */\r\nexport class TouchMeshButton3D extends TouchButton3D {\r\n    /** @internal */\r\n    protected _currentMesh: Mesh;\r\n\r\n    /**\r\n     * Creates a new 3D button based on a mesh\r\n     * @param mesh mesh to become a 3D button. By default this is also the mesh for near interaction collision checking\r\n     * @param name defines the control name\r\n     */\r\n    constructor(mesh: Mesh, name?: string) {\r\n        super(name, mesh);\r\n\r\n        this._currentMesh = mesh;\r\n\r\n        /**\r\n         * Provides a default behavior on hover/out & up/down\r\n         * Override those function to create your own desired behavior specific to your mesh\r\n         */\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.1);\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 1.1);\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TouchMeshButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(): TransformNode {\r\n        this._currentMesh.getChildMeshes().forEach((mesh) => {\r\n            this._injectGUI3DReservedDataStore(mesh).control = this;\r\n        });\r\n\r\n        return this._currentMesh;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected _affectMaterial(mesh: AbstractMesh) {}\r\n}\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlBackglowPixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vNormal;varying vec2 vUV;uniform float _Bevel_Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Tuning_Motion_;uniform float _Motion_;uniform float _Max_Intensity_;uniform float _Intensity_Fade_In_Exponent_;uniform float _Outer_Fuzz_Start_;uniform float _Outer_Fuzz_End_;uniform vec4 _Color_;uniform vec4 _Inner_Color_;uniform float _Blend_Exponent_;uniform float _Falloff_;uniform float _Bias_;float BiasFunc(float b,float v) {return pow(v,log(clamp(b,0.001,0.999))/log(0.5));}\nvoid Fuzzy_Round_Rect_B33(\nfloat Size_X,\nfloat Size_Y,\nfloat Radius_X,\nfloat Radius_Y,\nfloat Line_Width,\nvec2 UV,\nfloat Outer_Fuzz,\nfloat Max_Outer_Fuzz,\nout float Rect_Distance,\nout float Inner_Distance)\n{vec2 halfSize=vec2(Size_X,Size_Y)*0.5;vec2 r=max(min(vec2(Radius_X,Radius_Y),halfSize),vec2(0.001,0.001));float radius=min(r.x,r.y)-Max_Outer_Fuzz;vec2 v=abs(UV);vec2 nearestp=min(v,halfSize-r);float d=distance(nearestp,v);Inner_Distance=clamp(1.0-(radius-d)/Line_Width,0.0,1.0);Rect_Distance=clamp(1.0-(d-radius)/Outer_Fuzz,0.0,1.0)*Inner_Distance;}\nvoid main()\n{float X_Q42;float Y_Q42;X_Q42=vNormal.x;Y_Q42=vNormal.y;float MaxAB_Q24=max(_Tuning_Motion_,_Motion_);float Sqrt_F_Q27=sqrt(MaxAB_Q24);float Power_Q43=pow(MaxAB_Q24,_Intensity_Fade_In_Exponent_);float Value_At_T_Q26=mix(_Outer_Fuzz_Start_,_Outer_Fuzz_End_,Sqrt_F_Q27);float Product_Q23=_Max_Intensity_*Power_Q43;float Rect_Distance_Q33;float Inner_Distance_Q33;Fuzzy_Round_Rect_B33(X_Q42,Y_Q42,_Bevel_Radius_,_Bevel_Radius_,_Line_Width_,vUV,Value_At_T_Q26,_Outer_Fuzz_Start_,Rect_Distance_Q33,Inner_Distance_Q33);float Power_Q44=pow(Inner_Distance_Q33,_Blend_Exponent_);float Result_Q45=pow(BiasFunc(_Bias_,Rect_Distance_Q33),_Falloff_);vec4 Color_At_T_Q25=mix(_Inner_Color_,_Color_,Power_Q44);float Product_Q22=Result_Q45*Product_Q23;vec4 Result_Q28=Product_Q22*Color_At_T_Q25;vec4 Out_Color=Result_Q28;float Clip_Threshold=0.0;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlBackglowPixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlBackglowVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;uniform float _Bevel_Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Tuning_Motion_;uniform float _Motion_;uniform float _Max_Intensity_;uniform float _Intensity_Fade_In_Exponent_;uniform float _Outer_Fuzz_Start_;uniform float _Outer_Fuzz_End_;uniform vec4 _Color_;uniform vec4 _Inner_Color_;uniform float _Blend_Exponent_;uniform float _Falloff_;uniform float _Bias_;varying vec3 vNormal;varying vec2 vUV;void main()\n{vec3 Dir_World_Q41=(world*vec4(tangent,0.0)).xyz;vec3 Dir_World_Q40=(world*vec4((cross(normal,tangent)),0.0)).xyz;float MaxAB_Q24=max(_Tuning_Motion_,_Motion_);float Length_Q16=length(Dir_World_Q41);float Length_Q17=length(Dir_World_Q40);bool Greater_Than_Q37=MaxAB_Q24>0.0;vec3 Sizes_Q35;vec2 XY_Q35;Sizes_Q35=(_Absolute_Sizes_ ? vec3(Length_Q16,Length_Q17,0) : vec3(Length_Q16/Length_Q17,1,0));XY_Q35=(uv-vec2(0.5,0.5))*Sizes_Q35.xy;vec3 Result_Q38=Greater_Than_Q37 ? position : vec3(0,0,0);vec3 Pos_World_Q39=(world*vec4(Result_Q38,1.0)).xyz;vec3 Position=Pos_World_Q39;vec3 Normal=Sizes_Q35;vec2 UV=XY_Q35;vec3 Tangent=vec3(0,0,0);vec3 Binormal=vec3(0,0,0);vec4 Color=vec4(1,1,1,1);gl_Position=viewProjection*vec4(Position,1);vNormal=Normal;vUV=UV;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlBackglowVertexShader = { name, shader };\n", "import type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\n\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\n\r\nimport \"./shaders/mrdlBackglow.fragment\";\r\nimport \"./shaders/mrdlBackglow.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @hidden */\r\nclass MRDLBackglowMaterialDefines extends MaterialDefines {\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this._needUVs = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\nexport class MRDLBackglowMaterial extends PushMaterial {\r\n    /**\r\n     * Gets or sets the bevel radius on the backglow. If this value is changed, update the lineWidth to match.\r\n     */\r\n    @serialize()\r\n    public bevelRadius = 0.16;\r\n\r\n    /**\r\n     * Gets or sets the line width of the backglow.\r\n     */\r\n    @serialize()\r\n    public lineWidth = 0.16;\r\n\r\n    /**\r\n     * Gets or sets whether to use absolute sizes when calculating effects on the backglow.\r\n     * Since desktop and VR/AR have different relative sizes, it's usually best to keep this false.\r\n     */\r\n    @serialize()\r\n    public absoluteSizes = false;\r\n\r\n    /**\r\n     * Gets or sets the tuning motion of the backglow.\r\n     */\r\n    @serialize()\r\n    public tuningMotion = 0.0;\r\n\r\n    /**\r\n     * Gets or sets the motion of the backglow.\r\n     */\r\n    @serialize()\r\n    public motion = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the maximum intensity of the backglow.\r\n     */\r\n    @serialize()\r\n    public maxIntensity = 0.7;\r\n\r\n    /**\r\n     * Gets or sets the fade-in exponent of the intensity of the backglow.\r\n     */\r\n    @serialize()\r\n    public intensityFadeInExponent = 2.0;\r\n\r\n    /**\r\n     * Gets or sets the start of the outer fuzz effect on the backglow.\r\n     */\r\n    @serialize()\r\n    public outerFuzzStart = 0.04;\r\n\r\n    /**\r\n     * Gets or sets the end of the outer fuzz effect on the backglow.\r\n     */\r\n    @serialize()\r\n    public outerFuzzEnd = 0.04;\r\n\r\n    /**\r\n     * Gets or sets the color of the backglow.\r\n     */\r\n    @serialize()\r\n    public color: Color4 = new Color4(0.682353, 0.698039, 1, 1);\r\n\r\n    /**\r\n     * Gets or sets the inner color of the backglow.\r\n     */\r\n    @serialize()\r\n    public innerColor: Color4 = new Color4(0.356863, 0.392157, 0.796078, 1);\r\n\r\n    /**\r\n     * Gets or sets the blend exponent of the backglow.\r\n     */\r\n    @serialize()\r\n    public blendExponent = 1.5;\r\n\r\n    /**\r\n     * Gets or sets the falloff of the backglow.\r\n     */\r\n    @serialize()\r\n    public falloff = 2.0;\r\n\r\n    /**\r\n     * Gets or sets the bias of the backglow.\r\n     */\r\n    @serialize()\r\n    public bias = 0.5;\r\n\r\n    constructor(name: string, scene: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_ADD;\r\n        this.disableDepthWrite = true;\r\n        this.backFaceCulling = false;\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return true;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new MRDLBackglowMaterialDefines();\r\n        }\r\n\r\n        const defines = <MRDLBackglowMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, false, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"mrdlBackglow\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"worldView\",\r\n                \"worldViewProjection\",\r\n                \"view\",\r\n                \"projection\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Bevel_Radius_\",\r\n                \"_Line_Width_\",\r\n                \"_Absolute_Sizes_\",\r\n                \"_Tuning_Motion_\",\r\n                \"_Motion_\",\r\n                \"_Max_Intensity_\",\r\n                \"_Intensity_Fade_In_Exponent_\",\r\n                \"_Outer_Fuzz_Start_\",\r\n                \"_Outer_Fuzz_End_\",\r\n                \"_Color_\",\r\n                \"_Inner_Color_\",\r\n                \"_Blend_Exponent_\",\r\n                \"_Falloff_\",\r\n                \"_Bias_\",\r\n            ];\r\n            const samplers: string[] = [];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const scene = this.getScene();\r\n\r\n        const defines = <MRDLBackglowMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", scene.activeCamera!.position);\r\n\r\n        // \"Rounded Rectangle\"\r\n        this._activeEffect.setFloat(\"_Bevel_Radius_\", this.bevelRadius);\r\n        this._activeEffect.setFloat(\"_Line_Width_\", this.lineWidth);\r\n        this._activeEffect.setFloat(\"_Absolute_Sizes_\", this.absoluteSizes ? 1.0 : 0.0);\r\n\r\n        // \"Animation\"\r\n        this._activeEffect.setFloat(\"_Tuning_Motion_\", this.tuningMotion);\r\n        this._activeEffect.setFloat(\"_Motion_\", this.motion);\r\n        this._activeEffect.setFloat(\"_Max_Intensity_\", this.maxIntensity);\r\n        this._activeEffect.setFloat(\"_Intensity_Fade_In_Exponent_\", this.intensityFadeInExponent);\r\n        this._activeEffect.setFloat(\"_Outer_Fuzz_Start_\", this.outerFuzzStart);\r\n        this._activeEffect.setFloat(\"_Outer_Fuzz_End_\", this.outerFuzzEnd);\r\n\r\n        // \"Color\"\r\n        this._activeEffect.setDirectColor4(\"_Color_\", this.color);\r\n        this._activeEffect.setDirectColor4(\"_Inner_Color_\", this.innerColor);\r\n        this._activeEffect.setFloat(\"_Blend_Exponent_\", this.blendExponent);\r\n\r\n        // \"Inner Transition\"\r\n        this._activeEffect.setFloat(\"_Falloff_\", this.falloff);\r\n        this._activeEffect.setFloat(\"_Bias_\", this.bias);\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): MRDLBackglowMaterial {\r\n        return SerializationHelper.Clone(() => new MRDLBackglowMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): unknown {\r\n        const serializationObject = SerializationHelper.Serialize(this);\r\n        serializationObject.customType = \"BABYLON.MRDLBackglowMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"MRDLBackglowMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): MRDLBackglowMaterial {\r\n        return SerializationHelper.Parse(() => new MRDLBackglowMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.MRDLBackglowMaterial\", MRDLBackglowMaterial);\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlFrontplatePixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Relative_To_Height_;uniform float _Filter_Width_;uniform vec4 _Edge_Color_;uniform float _Fade_Out_;uniform bool _Smooth_Edges_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform float _Blob_Pulse_Max_Size_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Gaze_Intensity_;uniform float _Gaze_Focus_;uniform sampler2D _Blob_Texture_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;void Scale_Color_B54(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=Scalar*Color;}\nvoid Scale_RGB_B50(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}\nvoid Proximity_Fragment_B51(\nfloat Proximity_Max_Intensity,\nfloat Proximity_Near_Radius,\nvec4 Deltas,\nfloat Show_Selection,\nfloat Distance_Fade1,\nfloat Distance_Fade2,\nfloat Strength,\nout float Proximity)\n{float proximity1=(1.0-clamp(length(Deltas.xy)/Proximity_Near_Radius,0.0,1.0))*Distance_Fade1;float proximity2=(1.0-clamp(length(Deltas.zw)/Proximity_Near_Radius,0.0,1.0))*Distance_Fade2;Proximity=Strength*(Proximity_Max_Intensity*max(proximity1,proximity2) *(1.0-Show_Selection)+Show_Selection);}\nvoid Blob_Fragment_B56(\nvec2 UV,\nvec3 Blob_Info,\nsampler2D Blob_Texture,\nout vec4 Blob_Color)\n{float k=dot(UV,UV);Blob_Color=Blob_Info.y*texture(Blob_Texture,vec2(vec2(sqrt(k),Blob_Info.x).x,1.0-vec2(sqrt(k),Blob_Info.x).y))*(1.0-clamp(k,0.0,1.0));}\nvoid Round_Rect_Fragment_B61(\nfloat Radius,\nvec4 Line_Color,\nfloat Filter_Width,\nfloat Line_Visibility,\nvec4 Fill_Color,\nbool Smooth_Edges,\nvec4 Rect_Parms,\nout float Inside_Rect)\n{float d=length(max(abs(Rect_Parms.zw)-Rect_Parms.xy,0.0));float dx=max(fwidth(d)*Filter_Width,0.00001);Inside_Rect=Smooth_Edges ? clamp((Radius-d)/dx,0.0,1.0) : 1.0-step(Radius,d);}\nvoid main()\n{float Is_Quad_Q53;Is_Quad_Q53=vNormal.z;vec4 Blob_Color_Q56;Blob_Fragment_B56(vUV,vTangent,_Blob_Texture_,Blob_Color_Q56);float X_Q52;float Y_Q52;float Z_Q52;float W_Q52;X_Q52=vExtra3.x;Y_Q52=vExtra3.y;Z_Q52=vExtra3.z;W_Q52=vExtra3.w;float Proximity_Q51;Proximity_Fragment_B51(_Proximity_Max_Intensity_,_Proximity_Near_Radius_,vExtra2,X_Q52,Y_Q52,Z_Q52,1.0,Proximity_Q51);float Inside_Rect_Q61;Round_Rect_Fragment_B61(W_Q52,vec4(1,1,1,1),_Filter_Width_,1.0,vec4(0,0,0,0),_Smooth_Edges_,vExtra1,Inside_Rect_Q61);vec4 Result_Q50;Scale_RGB_B50(_Edge_Color_,Proximity_Q51,Result_Q50);vec4 Result_Q47=Inside_Rect_Q61*Blob_Color_Q56;vec4 Color_At_T_Q48=mix(Result_Q50,Result_Q47,Is_Quad_Q53);vec4 Result_Q54;Scale_Color_B54(Color_At_T_Q48,_Fade_Out_,Result_Q54);vec4 Out_Color=Result_Q54;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlFrontplatePixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlFrontplateVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;attribute vec4 color;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Relative_To_Height_;uniform float _Filter_Width_;uniform vec4 _Edge_Color_;uniform float _Fade_Out_;uniform bool _Smooth_Edges_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform float _Blob_Pulse_Max_Size_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Gaze_Intensity_;uniform float _Gaze_Focus_;uniform sampler2D _Blob_Texture_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Blob_Vertex_B40(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nvec4 Vx_Color,\nvec2 UV,\nvec3 Face_Center,\nvec2 Face_Size,\nvec2 In_UV,\nfloat Blob_Fade_Length,\nfloat Selection_Fade,\nfloat Selection_Fade_Size,\nfloat Inner_Fade,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nfloat Blob_Enabled,\nfloat DistanceOffset,\nout vec3 Out_Position,\nout vec2 Out_UV,\nout vec3 Blob_Info,\nout vec2 Blob_Relative_UV)\n{float blobSize,fadeIn;vec3 Hit_Position;Blob_Info=vec3(0.0,0.0,0.0);float Hit_Distance=dot(Blob_Position-Face_Center,Normal)+DistanceOffset*Blob_Far_Distance;Hit_Position=Blob_Position-Hit_Distance*Normal;float absD=abs(Hit_Distance);float lerpVal=clamp((absD-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);fadeIn=1.0-clamp((absD-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float innerFade=1.0-clamp(-Hit_Distance/Inner_Fade,0.0,1.0);float farClip=clamp(1.0-step(Blob_Far_Distance+Blob_Fade_Length,absD),0.0,1.0);float size=mix(Blob_Near_Size,Blob_Far_Size,lerpVal)*farClip;blobSize=mix(size,Selection_Fade_Size,Selection_Fade)*innerFade*Blob_Enabled;Blob_Info.x=lerpVal*0.5+0.5;Blob_Info.y=fadeIn*Intensity*(1.0-Selection_Fade)*Blob_Fade;Blob_Info.x*=(1.0-Blob_Pulse);vec3 delta=Hit_Position-Face_Center;vec2 blobCenterXY=vec2(dot(delta,Tangent),dot(delta,Bitangent));vec2 quadUVin=2.0*UV-1.0; \nvec2 blobXY=blobCenterXY+quadUVin*blobSize;vec2 blobClipped=clamp(blobXY,-Face_Size*0.5,Face_Size*0.5);vec2 blobUV=(blobClipped-blobCenterXY)/max(blobSize,0.0001)*2.0;vec3 blobCorner=Face_Center+blobClipped.x*Tangent+blobClipped.y*Bitangent;Out_Position=mix(Position,blobCorner,Vx_Color.rrr);Out_UV=mix(In_UV,blobUV,Vx_Color.rr);Blob_Relative_UV=blobClipped/Face_Size.y;}\nvoid Round_Rect_Vertex_B36(\nvec2 UV,\nvec3 Tangent,\nvec3 Binormal,\nfloat Radius,\nfloat Anisotropy,\nvec2 Blob_Center_UV,\nout vec2 Rect_UV,\nout vec2 Scale_XY,\nout vec4 Rect_Parms)\n{Scale_XY=vec2(Anisotropy,1.0);Rect_UV=(UV-vec2(0.5,0.5))*Scale_XY;Rect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius);Rect_Parms.zw=Blob_Center_UV;}\nvec2 ProjectProximity(\nvec3 blobPosition,\nvec3 position,\nvec3 center,\nvec3 dir,\nvec3 xdir,\nvec3 ydir,\nout float vdistance\n)\n{vec3 delta=blobPosition-position;vec2 xy=vec2(dot(delta,xdir),dot(delta,ydir));vdistance=abs(dot(delta,dir));return xy;}\nvoid Proximity_Vertex_B33(\nvec3 Blob_Position,\nvec3 Blob_Position_2,\nvec3 Face_Center,\nvec3 Position,\nfloat Proximity_Far_Distance,\nfloat Relative_Scale,\nfloat Proximity_Anisotropy,\nvec3 Normal,\nvec3 Tangent,\nvec3 Binormal,\nout vec4 Extra,\nout float Distance_To_Face,\nout float Distance_Fade1,\nout float Distance_Fade2)\n{float distz1,distz2;Extra.xy=ProjectProximity(Blob_Position,Position,Face_Center,Normal,Tangent*Proximity_Anisotropy,Binormal,distz1)/Relative_Scale;Extra.zw=ProjectProximity(Blob_Position_2,Position,Face_Center,Normal,Tangent*Proximity_Anisotropy,Binormal,distz2)/Relative_Scale;Distance_To_Face=dot(Normal,Position-Face_Center);Distance_Fade1=1.0-clamp(distz1/Proximity_Far_Distance,0.0,1.0);Distance_Fade2=1.0-clamp(distz2/Proximity_Far_Distance,0.0,1.0);}\nvoid Object_To_World_Pos_B12(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}\nvoid Choose_Blob_B27(\nvec4 Vx_Color,\nvec3 Position1,\nvec3 Position2,\nbool Blob_Enable_1,\nbool Blob_Enable_2,\nfloat Near_Size_1,\nfloat Near_Size_2,\nfloat Blob_Inner_Fade_1,\nfloat Blob_Inner_Fade_2,\nfloat Blob_Pulse_1,\nfloat Blob_Pulse_2,\nfloat Blob_Fade_1,\nfloat Blob_Fade_2,\nout vec3 Position,\nout float Near_Size,\nout float Inner_Fade,\nout float Blob_Enable,\nout float Fade,\nout float Pulse)\n{Position=Position1*(1.0-Vx_Color.g)+Vx_Color.g*Position2;float b1=Blob_Enable_1 ? 1.0 : 0.0;float b2=Blob_Enable_2 ? 1.0 : 0.0;Blob_Enable=b1+(b2-b1)*Vx_Color.g;Pulse=Blob_Pulse_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Pulse_2;Fade=Blob_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Fade_2;Near_Size=Near_Size_1*(1.0-Vx_Color.g)+Vx_Color.g*Near_Size_2;Inner_Fade=Blob_Inner_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Inner_Fade_2;}\nvoid Move_Verts_B32(\nvec2 UV,\nfloat Radius,\nfloat Anisotropy,\nfloat Line_Width,\nfloat Visible,\nout vec3 New_P,\nout vec2 New_UV)\n{vec2 xy=2.0*UV-vec2(0.5,0.5);vec2 center=clamp(xy,0.0,1.0);vec2 delta=2.0*(xy-center);float deltaLength=length(delta);vec2 aniso=vec2(1.0/Anisotropy,1.0);center=(center-vec2(0.5,0.5))*(1.0-2.0*Radius*aniso);New_UV=vec2((2.0-2.0*deltaLength)*Visible,0.0);float deltaRadius= (Radius-Line_Width*New_UV.x);New_P.xy=(center+deltaRadius/deltaLength *aniso*delta);New_P.z=0.0;}\nvoid Object_To_World_Dir_B14(\nvec3 Dir_Object,\nout vec3 Binormal_World)\n{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;}\nvoid Proximity_Visibility_B55(\nfloat Selection,\nvec3 Proximity_Center,\nvec3 Proximity_Center_2,\nfloat Proximity_Far_Distance,\nfloat Proximity_Radius,\nvec3 Face_Center,\nvec3 Normal,\nvec2 Face_Size,\nfloat Gaze,\nout float Width)\n{float boxMaxSize=length(Face_Size)*0.5;float d1=dot(Proximity_Center-Face_Center,Normal);vec3 blob1=Proximity_Center-d1*Normal;float d2=dot(Proximity_Center_2-Face_Center,Normal);vec3 blob2=Proximity_Center_2-d2*Normal;vec3 delta1=blob1-Face_Center;vec3 delta2=blob2-Face_Center;float dist1=dot(delta1,delta1);float dist2=dot(delta2,delta2);float nearestProxDist=sqrt(min(dist1,dist2));Width=(1.0-step(boxMaxSize+Proximity_Radius,nearestProxDist))*(1.0-step(Proximity_Far_Distance,min(d1,d2))*(1.0-step(0.0001,Selection)));Width=max(Gaze,Width);}\nvec2 ramp2(vec2 start,vec2 end,vec2 x)\n{return clamp((x-start)/(end-start),vec2(0.0,0.0),vec2(1.0,1.0));}\nfloat computeSelection(\nvec3 blobPosition,\nvec3 normal,\nvec3 tangent,\nvec3 bitangent,\nvec3 faceCenter,\nvec2 faceSize,\nfloat selectionFuzz,\nfloat farDistance,\nfloat fadeLength\n)\n{vec3 delta=blobPosition-faceCenter;float absD=abs(dot(delta,normal));float fadeIn=1.0-clamp((absD-farDistance)/fadeLength,0.0,1.0);vec2 blobCenterXY=vec2(dot(delta,tangent),dot(delta,bitangent));vec2 innerFace=faceSize*(1.0-selectionFuzz)*0.5;vec2 selectPulse=ramp2(-faceSize*0.5,-innerFace,blobCenterXY)-ramp2(innerFace,faceSize*0.5,blobCenterXY);return selectPulse.x*selectPulse.y*fadeIn;}\nvoid Selection_Vertex_B31(\nvec3 Blob_Position,\nvec3 Blob_Position_2,\nvec3 Face_Center,\nvec2 Face_Size,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nfloat Selection_Fuzz,\nfloat Selected,\nfloat Far_Distance,\nfloat Fade_Length,\nvec3 Active_Face_Dir,\nout float Show_Selection)\n{float select1=computeSelection(Blob_Position,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);float select2=computeSelection(Blob_Position_2,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);Show_Selection=mix(max(select1,select2),1.0,Selected);}\nvoid main()\n{vec3 Vec3_Q29=vec3(vec2(0,0).x,vec2(0,0).y,color.r);vec3 Nrm_World_Q24;Nrm_World_Q24=normalize((world*vec4(normal,0.0)).xyz);vec3 Face_Center_Q30;Face_Center_Q30=(world*vec4(vec3(0,0,0),1.0)).xyz;vec3 Tangent_World_Q13;Tangent_World_Q13=(world*vec4(tangent,0.0)).xyz;vec3 Result_Q42;Result_Q42=_Use_Global_Left_Index_ ? Global_Left_Index_Tip_Position.xyz : _Blob_Position_;vec3 Result_Q43;Result_Q43=_Use_Global_Right_Index_ ? Global_Right_Index_Tip_Position.xyz : _Blob_Position_2_;float Value_At_T_Q58=mix(_Blob_Near_Size_,_Blob_Pulse_Max_Size_,_Blob_Pulse_);float Value_At_T_Q59=mix(_Blob_Near_Size_2_,_Blob_Pulse_Max_Size_,_Blob_Pulse_2_);vec3 Cross_Q70=cross(normal,tangent);float Product_Q45=_Gaze_Intensity_*_Gaze_Focus_;float Step_Q46=step(0.0001,Product_Q45);vec3 Tangent_World_N_Q15=normalize(Tangent_World_Q13);vec3 Position_Q27;float Near_Size_Q27;float Inner_Fade_Q27;float Blob_Enable_Q27;float Fade_Q27;float Pulse_Q27;Choose_Blob_B27(color,Result_Q42,Result_Q43,_Blob_Enable_,_Blob_Enable_2_,Value_At_T_Q58,Value_At_T_Q59,_Blob_Inner_Fade_,_Blob_Inner_Fade_2_,_Blob_Pulse_,_Blob_Pulse_2_,_Blob_Fade_,_Blob_Fade_2_,Position_Q27,Near_Size_Q27,Inner_Fade_Q27,Blob_Enable_Q27,Fade_Q27,Pulse_Q27);vec3 Binormal_World_Q14;Object_To_World_Dir_B14(Cross_Q70,Binormal_World_Q14);float Anisotropy_Q21=length(Tangent_World_Q13)/length(Binormal_World_Q14);vec3 Binormal_World_N_Q16=normalize(Binormal_World_Q14);vec2 Face_Size_Q35;float ScaleY_Q35;Face_Size_Q35=vec2(length(Tangent_World_Q13),length(Binormal_World_Q14));ScaleY_Q35=Face_Size_Q35.y;float Out_Radius_Q38;float Out_Line_Width_Q38;Out_Radius_Q38=_Relative_To_Height_ ? _Radius_ : _Radius_/ScaleY_Q35;Out_Line_Width_Q38=_Relative_To_Height_ ? _Line_Width_ : _Line_Width_/ScaleY_Q35;float Show_Selection_Q31;Selection_Vertex_B31(Result_Q42,Result_Q43,Face_Center_Q30,Face_Size_Q35,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,_Selection_Fuzz_,_Selected_,_Selected_Distance_,_Selected_Fade_Length_,vec3(0,0,-1),Show_Selection_Q31);float MaxAB_Q41=max(Show_Selection_Q31,Product_Q45);float Width_Q55;Proximity_Visibility_B55(Show_Selection_Q31,Result_Q42,Result_Q43,_Proximity_Far_Distance_,_Proximity_Near_Radius_,Face_Center_Q30,Nrm_World_Q24,Face_Size_Q35,Step_Q46,Width_Q55);vec3 New_P_Q32;vec2 New_UV_Q32;Move_Verts_B32(uv,Out_Radius_Q38,Anisotropy_Q21,Out_Line_Width_Q38,Width_Q55,New_P_Q32,New_UV_Q32);vec3 Pos_World_Q12;Object_To_World_Pos_B12(New_P_Q32,Pos_World_Q12);vec3 Out_Position_Q40;vec2 Out_UV_Q40;vec3 Blob_Info_Q40;vec2 Blob_Relative_UV_Q40;Blob_Vertex_B40(Pos_World_Q12,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,Position_Q27,_Blob_Intensity_,Near_Size_Q27,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,color,uv,Face_Center_Q30,Face_Size_Q35,New_UV_Q32,_Blob_Fade_Length_,_Selection_Fade_,_Selection_Fade_Size_,Inner_Fade_Q27,Pulse_Q27,Fade_Q27,Blob_Enable_Q27,0.0,Out_Position_Q40,Out_UV_Q40,Blob_Info_Q40,Blob_Relative_UV_Q40);vec2 Rect_UV_Q36;vec2 Scale_XY_Q36;vec4 Rect_Parms_Q36;Round_Rect_Vertex_B36(New_UV_Q32,Tangent_World_Q13,Binormal_World_Q14,Out_Radius_Q38,Anisotropy_Q21,Blob_Relative_UV_Q40,Rect_UV_Q36,Scale_XY_Q36,Rect_Parms_Q36);vec4 Extra_Q33;float Distance_To_Face_Q33;float Distance_Fade1_Q33;float Distance_Fade2_Q33;Proximity_Vertex_B33(Result_Q42,Result_Q43,Face_Center_Q30,Pos_World_Q12,_Proximity_Far_Distance_,1.0,_Proximity_Anisotropy_,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,Extra_Q33,Distance_To_Face_Q33,Distance_Fade1_Q33,Distance_Fade2_Q33);vec4 Vec4_Q37=vec4(MaxAB_Q41,Distance_Fade1_Q33,Distance_Fade2_Q33,Out_Radius_Q38);vec3 Position=Out_Position_Q40;vec3 Normal=Vec3_Q29;vec2 UV=Out_UV_Q40;vec3 Tangent=Blob_Info_Q40;vec3 Binormal=vec3(0,0,0);vec4 Color=vec4(1,1,1,1);vec4 Extra1=Rect_Parms_Q36;vec4 Extra2=Extra_Q33;vec4 Extra3=Vec4_Q37;gl_Position=viewProjection*vec4(Position,1);vNormal=Normal;vUV=UV;vTangent=Tangent;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlFrontplateVertexShader = { name, shader };\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\n\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\n\r\nimport \"./shaders/mrdlFrontplate.fragment\";\r\nimport \"./shaders/mrdlFrontplate.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\n/** @hidden */\r\nclass MRDLFrontplateMaterialDefines extends MaterialDefines {\r\n    /**\r\n     * Sets default value for \"SMOOTH_EDGES\"\r\n     */\r\n    public SMOOTH_EDGES = true;\r\n\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this._needUVs = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\nexport class MRDLFrontplateMaterial extends PushMaterial {\r\n    /**\r\n     * Gets or sets the corner radius on the frontplate. If this value is changed, update the lineWidth to match.\r\n     */\r\n    @serialize()\r\n    public radius = 0.12;\r\n\r\n    /**\r\n     * Gets or sets the line width of the frontplate.\r\n     */\r\n    @serialize()\r\n    public lineWidth = 0.01;\r\n\r\n    /**\r\n     * Gets or sets whether the scale is relative to the frontplate height.\r\n     */\r\n    @serialize()\r\n    public relativeToHeight = false;\r\n\r\n    /** @hidden */\r\n    public _filterWidth = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the edge color of the frontplate.\r\n     */\r\n    @serialize()\r\n    public edgeColor: Color4 = new Color4(0.53, 0.53, 0.53, 1);\r\n\r\n    /**\r\n     * Gets or sets whether to enable blob effects on the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobEnable = true;\r\n\r\n    /**\r\n     * Gets or sets the blob position on the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobPosition: Vector3 = new Vector3(100, 100, 100);\r\n\r\n    /**\r\n     * Gets or sets the blob intensity of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobIntensity = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the blob near size of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobNearSize = 0.032;\r\n\r\n    /**\r\n     * Gets or sets the blob far size of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobFarSize = 0.048;\r\n\r\n    /**\r\n     * Gets or sets the blob near distance of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobNearDistance = 0.008;\r\n\r\n    /**\r\n     * Gets or sets the blob far distance of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobFarDistance = 0.064;\r\n\r\n    /**\r\n     * Gets or sets the blob fade length of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobFadeLength = 0.04;\r\n\r\n    /**\r\n     * Gets or sets the blob inner fade of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobInnerFade = 0.01;\r\n\r\n    /**\r\n     * Gets or sets the blob pulse of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobPulse = 0.0;\r\n\r\n    /**\r\n     * Gets or sets the blob fade effect on the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobFade = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the maximum size of the blob pulse on the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobPulseMaxSize = 0.05;\r\n\r\n    /**\r\n     * Gets or sets whether to enable extra blob effects of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobEnable2 = true;\r\n\r\n    /**\r\n     * Gets or sets blob2 position of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobPosition2: Vector3 = new Vector3(10, 10.1, -0.6);\r\n\r\n    /**\r\n     * Gets or sets the blob2 near size of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobNearSize2 = 0.008;\r\n\r\n    /**\r\n     * Gets or sets the blob2 inner fade of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobInnerFade2 = 0.1;\r\n\r\n    /**\r\n     * Gets or sets the blob2 pulse of the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobPulse2 = 0.0;\r\n\r\n    /**\r\n     * Gets or sets the blob2 fade effect on the frontplate.\r\n     */\r\n    @serialize()\r\n    public blobFade2 = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the gaze intensity of the frontplate.\r\n     */\r\n    @serialize()\r\n    public gazeIntensity = 0.8;\r\n\r\n    /**\r\n     * Gets or sets the gaze focus of the frontplate.\r\n     */\r\n    @serialize()\r\n    public gazeFocus = 0.0;\r\n\r\n    /**\r\n     * Gets or sets the selection fuzz of the frontplate.\r\n     */\r\n    @serialize()\r\n    public selectionFuzz = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the fade intensity of the frontplate.\r\n     */\r\n    @serialize()\r\n    public selected = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the selection fade intensity of the frontplate.\r\n     */\r\n    @serialize()\r\n    public selectionFade = 0.2;\r\n\r\n    /**\r\n     * Gets or sets the selection fade size of the frontplate.\r\n     */\r\n    @serialize()\r\n    public selectionFadeSize = 0.0;\r\n\r\n    /**\r\n     * Gets or sets the selected distance of the frontplate.\r\n     */\r\n    @serialize()\r\n    public selectedDistance = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the selected fade length of the frontplate.\r\n     */\r\n    @serialize()\r\n    public selectedFadeLength = 0.08;\r\n\r\n    /**\r\n     * Gets or sets the proximity maximum intensity of the frontplate.\r\n     */\r\n    @serialize()\r\n    public proximityMaxIntensity = 0.45;\r\n\r\n    /**\r\n     * Gets or sets the proximity far distance of the frontplate.\r\n     */\r\n    @serialize()\r\n    public proximityFarDistance = 0.16;\r\n\r\n    /**\r\n     * Gets or sets the proximity near radius of the frontplate.\r\n     */\r\n    @serialize()\r\n    public proximityNearRadius = 0.016;\r\n\r\n    /**\r\n     * Gets or sets the proximity anisotropy of the frontplate.\r\n     */\r\n    @serialize()\r\n    public proximityAnisotropy = 1.0;\r\n\r\n    /**\r\n     * Gets or sets whether to use global left index on the frontplate.\r\n     */\r\n    @serialize()\r\n    public useGlobalLeftIndex = true;\r\n\r\n    /**\r\n     * Gets or sets  whether to use global right index of the frontplate.\r\n     */\r\n    @serialize()\r\n    public useGlobalRightIndex = true;\r\n\r\n    /**\r\n     * URL pointing to the texture used to define the coloring for the BLOB.\r\n     */\r\n    public static BLOB_TEXTURE_URL = \"\";\r\n\r\n    /**\r\n     * Gets or sets the opacity of the frontplate (0.0 - 1.0).\r\n     */\r\n    public fadeOut = 1.0;\r\n\r\n    private _blobTexture: Texture;\r\n\r\n    constructor(name: string, scene: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_ADD;\r\n        this.disableDepthWrite = true;\r\n        this.backFaceCulling = false;\r\n        this._blobTexture = new Texture(MRDLFrontplateMaterial.BLOB_TEXTURE_URL, scene, true, false, Texture.NEAREST_SAMPLINGMODE);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return true;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new MRDLFrontplateMaterialDefines();\r\n        }\r\n\r\n        const defines = <MRDLFrontplateMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, false, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"mrdlFrontplate\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"worldView\",\r\n                \"worldViewProjection\",\r\n                \"view\",\r\n                \"projection\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Radius_\",\r\n                \"_Line_Width_\",\r\n                \"_Relative_To_Height_\",\r\n                \"_Filter_Width_\",\r\n                \"_Edge_Color_\",\r\n                \"_Fade_Out_\",\r\n                \"_Smooth_Edges_\",\r\n                \"_Blob_Enable_\",\r\n                \"_Blob_Position_\",\r\n                \"_Blob_Intensity_\",\r\n                \"_Blob_Near_Size_\",\r\n                \"_Blob_Far_Size_\",\r\n                \"_Blob_Near_Distance_\",\r\n                \"_Blob_Far_Distance_\",\r\n                \"_Blob_Fade_Length_\",\r\n                \"_Blob_Inner_Fade_\",\r\n                \"_Blob_Pulse_\",\r\n                \"_Blob_Fade_\",\r\n                \"_Blob_Pulse_Max_Size_\",\r\n                \"_Blob_Enable_2_\",\r\n                \"_Blob_Position_2_\",\r\n                \"_Blob_Near_Size_2_\",\r\n                \"_Blob_Inner_Fade_2_\",\r\n                \"_Blob_Pulse_2_\",\r\n                \"_Blob_Fade_2_\",\r\n                \"_Gaze_Intensity_\",\r\n                \"_Gaze_Focus_\",\r\n                \"_Blob_Texture_\",\r\n                \"_Selection_Fuzz_\",\r\n                \"_Selected_\",\r\n                \"_Selection_Fade_\",\r\n                \"_Selection_Fade_Size_\",\r\n                \"_Selected_Distance_\",\r\n                \"_Selected_Fade_Length_\",\r\n                \"_Proximity_Max_Intensity_\",\r\n                \"_Proximity_Far_Distance_\",\r\n                \"_Proximity_Near_Radius_\",\r\n                \"_Proximity_Anisotropy_\",\r\n                \"Global_Left_Index_Tip_Position\",\r\n                \"Global_Right_Index_Tip_Position\",\r\n                \"_Use_Global_Left_Index_\",\r\n                \"_Use_Global_Right_Index_\",\r\n            ];\r\n            const samplers: string[] = [];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const scene = this.getScene();\r\n\r\n        const defines = <MRDLFrontplateMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", scene.activeCamera!.position);\r\n\r\n        // \"Round Rect\"\r\n        this._activeEffect.setFloat(\"_Radius_\", this.radius);\r\n        this._activeEffect.setFloat(\"_Line_Width_\", this.lineWidth);\r\n        this._activeEffect.setFloat(\"_Relative_To_Height_\", this.relativeToHeight ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Filter_Width_\", this._filterWidth);\r\n        this._activeEffect.setDirectColor4(\"_Edge_Color_\", this.edgeColor);\r\n\r\n        // \"Fade\"\r\n        this._activeEffect.setFloat(\"_Fade_Out_\", this.fadeOut);\r\n\r\n        // \"Blob\"\r\n        this._activeEffect.setFloat(\"_Blob_Enable_\", this.blobEnable ? 1.0 : 0.0);\r\n        this._activeEffect.setVector3(\"_Blob_Position_\", this.blobPosition);\r\n        this._activeEffect.setFloat(\"_Blob_Intensity_\", this.blobIntensity);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_\", this.blobNearSize);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Size_\", this.blobFarSize);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Distance_\", this.blobNearDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Far_Distance_\", this.blobFarDistance);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_Length_\", this.blobFadeLength);\r\n        this._activeEffect.setFloat(\"_Blob_Inner_Fade_\", this.blobInnerFade);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_\", this.blobPulse);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_\", this.blobFade);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_Max_Size_\", this.blobPulseMaxSize);\r\n\r\n        // \"Blob 2\"\r\n        this._activeEffect.setFloat(\"_Blob_Enable_2_\", this.blobEnable2 ? 1.0 : 0.0);\r\n        this._activeEffect.setVector3(\"_Blob_Position_2_\", this.blobPosition2);\r\n        this._activeEffect.setFloat(\"_Blob_Near_Size_2_\", this.blobNearSize2);\r\n        this._activeEffect.setFloat(\"_Blob_Inner_Fade_2_\", this.blobInnerFade2);\r\n        this._activeEffect.setFloat(\"_Blob_Pulse_2_\", this.blobPulse2);\r\n        this._activeEffect.setFloat(\"_Blob_Fade_2_\", this.blobFade2);\r\n\r\n        // \"Gaze\"\r\n        this._activeEffect.setFloat(\"_Gaze_Intensity_\", this.gazeIntensity);\r\n        this._activeEffect.setFloat(\"_Gaze_Focus_\", this.gazeFocus);\r\n\r\n        // \"Blob Texture\"\r\n        this._activeEffect.setTexture(\"_Blob_Texture_\", this._blobTexture);\r\n\r\n        // \"Selection\"\r\n        this._activeEffect.setFloat(\"_Selection_Fuzz_\", this.selectionFuzz);\r\n        this._activeEffect.setFloat(\"_Selected_\", this.selected);\r\n        this._activeEffect.setFloat(\"_Selection_Fade_\", this.selectionFade);\r\n        this._activeEffect.setFloat(\"_Selection_Fade_Size_\", this.selectionFadeSize);\r\n        this._activeEffect.setFloat(\"_Selected_Distance_\", this.selectedDistance);\r\n        this._activeEffect.setFloat(\"_Selected_Fade_Length_\", this.selectedFadeLength);\r\n\r\n        // \"Proximity\"\r\n        this._activeEffect.setFloat(\"_Proximity_Max_Intensity_\", this.proximityMaxIntensity);\r\n        this._activeEffect.setFloat(\"_Proximity_Far_Distance_\", this.proximityFarDistance);\r\n        this._activeEffect.setFloat(\"_Proximity_Near_Radius_\", this.proximityNearRadius);\r\n        this._activeEffect.setFloat(\"_Proximity_Anisotropy_\", this.proximityAnisotropy);\r\n\r\n        // \"Global\"\r\n        this._activeEffect.setFloat(\"_Use_Global_Left_Index_\", this.useGlobalLeftIndex ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Use_Global_Right_Index_\", this.useGlobalRightIndex ? 1.0 : 0.0);\r\n\r\n        // \"Antialiasing\"\r\n        //define SMOOTH_EDGES true;\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): MRDLFrontplateMaterial {\r\n        return SerializationHelper.Clone(() => new MRDLFrontplateMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): unknown {\r\n        const serializationObject = SerializationHelper.Serialize(this);\r\n        serializationObject.customType = \"BABYLON.MRDLFrontplateMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"MRDLFrontplateMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): MRDLFrontplateMaterial {\r\n        return SerializationHelper.Parse(() => new MRDLFrontplateMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.MRDLFrontplateMaterial\", MRDLFrontplateMaterial);\r\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlInnerquadPixelShader\";\nconst shader = `uniform vec3 cameraPosition;varying vec2 vUV;varying vec3 vTangent;uniform vec4 _Color_;uniform float _Radius_;uniform bool _Fixed_Radius_;uniform float _Filter_Width_;uniform float _Glow_Fraction_;uniform float _Glow_Max_;uniform float _Glow_Falloff_;float FilterStep_Bid194(float edge,float x,float filterWidth)\n{float dx=max(1.0E-5,fwidth(x)*filterWidth);return max((x+dx*0.5-max(edge,x-dx*0.5))/dx,0.0);}\nvoid Round_Rect_B194(\nfloat Size_X,\nfloat Size_Y,\nfloat Radius,\nvec4 Rect_Color,\nfloat Filter_Width,\nvec2 UV,\nfloat Glow_Fraction,\nfloat Glow_Max,\nfloat Glow_Falloff,\nout vec4 Color)\n{vec2 halfSize=vec2(Size_X,Size_Y)*0.5;vec2 r=max(min(vec2(Radius,Radius),halfSize),vec2(0.01,0.01));vec2 v=abs(UV);vec2 nearestp=min(v,halfSize-r);vec2 delta=(v-nearestp)/max(vec2(0.01,0.01),r);float Distance=length(delta);float insideRect=1.0-FilterStep_Bid194(1.0-Glow_Fraction,Distance,Filter_Width);float glow=clamp((1.0-Distance)/Glow_Fraction,0.0,1.0);glow=pow(glow,Glow_Falloff);Color=Rect_Color*max(insideRect,glow*Glow_Max);}\nvoid main()\n{float X_Q192;float Y_Q192;float Z_Q192;X_Q192=vTangent.x;Y_Q192=vTangent.y;Z_Q192=vTangent.z;vec4 Color_Q194;Round_Rect_B194(X_Q192,1.0,Y_Q192,_Color_,_Filter_Width_,vUV,_Glow_Fraction_,_Glow_Max_,_Glow_Falloff_,Color_Q194);vec4 Out_Color=Color_Q194;float Clip_Threshold=0.0;gl_FragColor=Out_Color;}\n`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlInnerquadPixelShader = { name, shader };\n", "// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlInnerquadVertexShader\";\nconst shader = `uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;attribute vec4 color;uniform vec4 _Color_;uniform float _Radius_;uniform bool _Fixed_Radius_;uniform float _Filter_Width_;uniform float _Glow_Fraction_;uniform float _Glow_Max_;uniform float _Glow_Falloff_;varying vec2 vUV;varying vec3 vTangent;void main()\n{vec3 Pos_World_Q189;Pos_World_Q189=(world*vec4(position,1.0)).xyz;vec3 Dir_World_Q190;Dir_World_Q190=(world*vec4(tangent,0.0)).xyz;vec3 Dir_World_Q191;Dir_World_Q191=(world*vec4((cross(normal,tangent)),0.0)).xyz;float Length_Q180=length(Dir_World_Q190);float Length_Q181=length(Dir_World_Q191);float Quotient_Q184=Length_Q180/Length_Q181;float Quotient_Q195=_Radius_/Length_Q181;vec2 Result_Q193;Result_Q193=vec2((uv.x-0.5)*Length_Q180/Length_Q181,(uv.y-0.5));float Result_Q198=_Fixed_Radius_ ? Quotient_Q195 : _Radius_;vec3 Vec3_Q183=vec3(Quotient_Q184,Result_Q198,0);vec3 Position=Pos_World_Q189;vec3 Normal=vec3(0,0,0);vec2 UV=Result_Q193;vec3 Tangent=Vec3_Q183;vec3 Binormal=vec3(0,0,0);vec4 Color=color;gl_Position=viewProjection*vec4(Position,1);vUV=UV;vTangent=Tangent;}\n`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlInnerquadVertexShader = { name, shader };\n", "import type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { IEffectCreationOptions } from \"core/Materials/effect\";\r\nimport type { Matrix } from \"core/Maths/math.vector\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { SubMesh } from \"core/Meshes/subMesh\";\r\n\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { EffectFallbacks } from \"core/Materials/effectFallbacks\";\r\nimport { MaterialDefines } from \"core/Materials/materialDefines\";\r\nimport { PushMaterial } from \"core/Materials/pushMaterial\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport { VertexBuffer } from \"core/Buffers/buffer\";\r\n\r\nimport \"./shaders/mrdlInnerquad.fragment\";\r\nimport \"./shaders/mrdlInnerquad.vertex\";\r\nimport { HandleFallbacksForShadows, PrepareAttributesForInstances, PrepareDefinesForAttributes, PrepareUniformsAndSamplersList } from \"core/Materials/materialHelper.functions\";\r\n\r\nclass MRDLInnerquadMaterialDefines extends MaterialDefines {\r\n    constructor() {\r\n        super();\r\n        this._needNormals = true;\r\n        this._needUVs = true;\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\nexport class MRDLInnerquadMaterial extends PushMaterial {\r\n    /**\r\n     * Gets or sets the color of the innerquad.\r\n     */\r\n    @serialize()\r\n    public color: Color4 = new Color4(1, 1, 1, 0.05);\r\n    /**\r\n     * Gets or sets the corner radius on the innerquad. If this value is changed, update the lineWidth to match.\r\n     */\r\n    @serialize()\r\n    public radius = 0.12;\r\n\r\n    /**\r\n     * Gets or sets whether the radius of the innerquad should be fixed.\r\n     */\r\n    @serialize()\r\n    public fixedRadius = true;\r\n\r\n    /** @hidden */\r\n    public _filterWidth = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the glow fraction of the innerquad.\r\n     */\r\n    @serialize()\r\n    public glowFraction = 0.0;\r\n\r\n    /**\r\n     * Gets or sets the maximum glow intensity of the innerquad.\r\n     */\r\n    @serialize()\r\n    public glowMax = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the glow falloff effect of the innerquad.\r\n     */\r\n    @serialize()\r\n    public glowFalloff = 2.0;\r\n\r\n    constructor(name: string, scene: Scene) {\r\n        super(name, scene);\r\n        this.alphaMode = Constants.ALPHA_COMBINE;\r\n        this.backFaceCulling = false;\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return true;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    // Methods\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh): boolean {\r\n        const drawWrapper = subMesh._drawWrapper;\r\n\r\n        if (this.isFrozen) {\r\n            if (drawWrapper.effect && drawWrapper._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh.materialDefines) {\r\n            subMesh.materialDefines = new MRDLInnerquadMaterialDefines();\r\n        }\r\n\r\n        const defines = <MRDLInnerquadMaterialDefines>subMesh.materialDefines;\r\n        const scene = this.getScene();\r\n\r\n        if (this._isReadyForSubMesh(subMesh)) {\r\n            return true;\r\n        }\r\n\r\n        const engine = scene.getEngine();\r\n\r\n        // Attribs\r\n        PrepareDefinesForAttributes(mesh, defines, true, false);\r\n\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n\r\n            scene.resetCachedMaterial();\r\n\r\n            // Fallbacks\r\n            const fallbacks = new EffectFallbacks();\r\n            if (defines.FOG) {\r\n                fallbacks.addFallback(1, \"FOG\");\r\n            }\r\n\r\n            HandleFallbacksForShadows(defines, fallbacks);\r\n\r\n            defines.IMAGEPROCESSINGPOSTPROCESS = scene.imageProcessingConfiguration.applyByPostProcess;\r\n\r\n            //Attributes\r\n            const attribs = [VertexBuffer.PositionKind];\r\n\r\n            if (defines.NORMAL) {\r\n                attribs.push(VertexBuffer.NormalKind);\r\n            }\r\n\r\n            if (defines.UV1) {\r\n                attribs.push(VertexBuffer.UVKind);\r\n            }\r\n\r\n            if (defines.UV2) {\r\n                attribs.push(VertexBuffer.UV2Kind);\r\n            }\r\n\r\n            if (defines.VERTEXCOLOR) {\r\n                attribs.push(VertexBuffer.ColorKind);\r\n            }\r\n\r\n            if (defines.TANGENT) {\r\n                attribs.push(VertexBuffer.TangentKind);\r\n            }\r\n\r\n            PrepareAttributesForInstances(attribs, defines);\r\n\r\n            // Legacy browser patch\r\n            const shaderName = \"mrdlInnerquad\";\r\n            const join = defines.toString();\r\n\r\n            const uniforms = [\r\n                \"world\",\r\n                \"worldView\",\r\n                \"worldViewProjection\",\r\n                \"view\",\r\n                \"projection\",\r\n                \"viewProjection\",\r\n                \"cameraPosition\",\r\n                \"_Color_\",\r\n                \"_Radius_\",\r\n                \"_Fixed_Radius_\",\r\n                \"_Filter_Width_\",\r\n                \"_Glow_Fraction_\",\r\n                \"_Glow_Max_\",\r\n                \"_Glow_Falloff_\",\r\n            ];\r\n            const samplers: string[] = [];\r\n            const uniformBuffers: string[] = [];\r\n\r\n            PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4,\r\n            });\r\n\r\n            subMesh.setEffect(\r\n                scene.getEngine().createEffect(\r\n                    shaderName,\r\n                    <IEffectCreationOptions>{\r\n                        attributes: attribs,\r\n                        uniformsNames: uniforms,\r\n                        uniformBuffersNames: uniformBuffers,\r\n                        samplers: samplers,\r\n                        defines: join,\r\n                        fallbacks: fallbacks,\r\n                        onCompiled: this.onCompiled,\r\n                        onError: this.onError,\r\n                        indexParameters: { maxSimultaneousLights: 4 },\r\n                    },\r\n                    engine\r\n                ),\r\n                defines\r\n            );\r\n        }\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        drawWrapper._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        const scene = this.getScene();\r\n\r\n        const defines = <MRDLInnerquadMaterialDefines>subMesh.materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        const effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n        this._activeEffect.setVector3(\"cameraPosition\", scene.activeCamera!.position);\r\n\r\n        // \"Color\"\r\n        this._activeEffect.setDirectColor4(\"_Color_\", this.color);\r\n\r\n        // \"Shape\"\r\n        this._activeEffect.setFloat(\"_Radius_\", this.radius);\r\n        this._activeEffect.setFloat(\"_Fixed_Radius_\", this.fixedRadius ? 1.0 : 0.0);\r\n        this._activeEffect.setFloat(\"_Filter_Width_\", this._filterWidth);\r\n\r\n        // \"Glow\"\r\n        this._activeEffect.setFloat(\"_Glow_Fraction_\", this.glowFraction);\r\n        this._activeEffect.setFloat(\"_Glow_Max_\", this.glowMax);\r\n        this._activeEffect.setFloat(\"_Glow_Falloff_\", this.glowFalloff);\r\n\r\n        this._afterBind(mesh, this._activeEffect, subMesh);\r\n    }\r\n\r\n    /**\r\n     * Get the list of animatables in the material.\r\n     * @returns the list of animatables object used in the material\r\n     */\r\n    public getAnimatables(): IAnimatable[] {\r\n        return [];\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): MRDLInnerquadMaterial {\r\n        return SerializationHelper.Clone(() => new MRDLInnerquadMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): unknown {\r\n        const serializationObject = SerializationHelper.Serialize(this);\r\n        serializationObject.customType = \"BABYLON.MRDLInnerquadMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"MRDLInnerquadMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): MRDLInnerquadMaterial {\r\n        return SerializationHelper.Parse(() => new MRDLInnerquadMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.GUI.MRDLInnerquadMaterial\", MRDLInnerquadMaterial);\r\n", "import type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { Control3D } from \"../control3D\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Vector3WithInfo } from \"../../vector3WithInfo\";\r\n\r\nimport { AdvancedDynamicTexture } from \"../../../2D/advancedDynamicTexture\";\r\nimport { Animation } from \"core/Animations/animation\";\r\nimport { AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { Control } from \"../../../2D/controls/control\";\r\nimport { CreatePlane } from \"core/Meshes/Builders/planeBuilder\";\r\nimport { CreateBox } from \"core/Meshes/Builders/boxBuilder\";\r\nimport { IsDocumentAvailable } from \"core/Misc/domManagement\";\r\nimport { FadeInOutBehavior } from \"core/Behaviors/Meshes/fadeInOutBehavior\";\r\nimport { Grid } from \"../../../2D/controls/grid\";\r\nimport { Image } from \"../../../2D/controls/image\";\r\nimport { MRDLBackglowMaterial } from \"../../materials/mrdl/mrdlBackglowMaterial\";\r\nimport { MRDLBackplateMaterial } from \"../../materials/mrdl/mrdlBackplateMaterial\";\r\nimport { MRDLFrontplateMaterial } from \"../../materials/mrdl/mrdlFrontplateMaterial\";\r\nimport { MRDLInnerquadMaterial } from \"../../materials/mrdl/mrdlInnerquadMaterial\";\r\nimport { Rectangle } from \"../../../2D/controls/rectangle\";\r\nimport { SceneLoader } from \"core/Loading/sceneLoader\";\r\nimport { StackPanel } from \"../../../2D/controls/stackPanel\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { TextBlock } from \"../../../2D/controls/textBlock\";\r\nimport { TouchButton3D } from \"../touchButton3D\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * Class used to create the mrtkv3 button\r\n */\r\nexport class TouchHolographicButton extends TouchButton3D {\r\n    /**\r\n     * Base Url for the frontplate model.\r\n     */\r\n    public static MRTK_ASSET_BASE_URL = \"https://assets.babylonjs.com/meshes/MRTK/\";\r\n\r\n    /**\r\n     * File name for the frontplate model.\r\n     */\r\n    public static FRONTPLATE_MODEL_FILENAME = \"mrtk-fluent-frontplate.glb\";\r\n\r\n    /**\r\n     * File name for the backplate model.\r\n     */\r\n    public static BACKPLATE_MODEL_FILENAME = \"mrtk-fluent-backplate.glb\";\r\n\r\n    /**\r\n     * File name for the backglow model.\r\n     */\r\n    public static BACKGLOW_MODEL_FILENAME = \"mrtk-fluent-button.glb\";\r\n\r\n    /**\r\n     * File name for the innerquad model.\r\n     */\r\n    public static INNERQUAD_MODEL_FILENAME = \"SlateProximity.glb\";\r\n\r\n    /**\r\n     * Gets or sets the horizontal scaling for the button.\r\n     */\r\n    public width = 1;\r\n\r\n    /**\r\n     * Gets or sets the vertical scaling for the button.\r\n     */\r\n    public height = 1;\r\n\r\n    /**\r\n     * Gets or sets the bevel radius for the button.\r\n     */\r\n    public radius = 0.14;\r\n\r\n    /**\r\n     * Gets or sets the font size of the button text in pixels.\r\n     * This is only adjustable for a button with width to height ratio greater than 1.\r\n     */\r\n    public textSizeInPixels = 18;\r\n\r\n    /**\r\n     * Gets or sets the size of the button image in pixels.\r\n     * This is only adjustable for a button with width to height ratio greater than 1.\r\n     */\r\n    public imageSizeInPixels = 40;\r\n\r\n    /**\r\n     * Gets or sets the color of the button plate.\r\n     */\r\n    public plateMaterialColor = new Color3(0.4, 0.4, 0.4);\r\n\r\n    // Shared variables for meshes\r\n    /**\r\n     * Gets or sets the depth of the button's front plate.\r\n     * This variable determines the z scaling and z position for some of the button's meshes.\r\n     */\r\n    public frontPlateDepth = 0.2;\r\n\r\n    /**\r\n     * Gets or sets the depth of the button's back plate.\r\n     * This variable determines the z scaling and z position for some of the button's meshes.\r\n     */\r\n    public backPlateDepth = 0.04;\r\n\r\n    /**\r\n     * Gets or sets the offset value for button's back glow.\r\n     * This variable determines the x, y scaling of the button's meshes.\r\n     */\r\n    public backGlowOffset = 0.1;\r\n\r\n    /**\r\n     * Gets or sets the value that determines the z scaling and z position for the innerQuad and BackGlow meshes.\r\n     */\r\n    public flatPlaneDepth = 0.001;\r\n\r\n    /**\r\n     * Gets or sets the radius for FrontMaterial and innerQuadMaterial.\r\n     */\r\n    public innerQuadRadius = this.radius - 0.04;\r\n\r\n    /**\r\n     * Gets or sets the color for innerQuadMaterial.\r\n     */\r\n    public innerQuadColor = new Color4(0, 0, 0, 0);\r\n\r\n    /**\r\n     * Gets or sets the color for innerQuadMaterial for when it is toggled.\r\n     */\r\n    public innerQuadToggledColor = new Color4(0.5197843, 0.6485234, 0.9607843, 0.6);\r\n\r\n    /**\r\n     * Gets or sets the color for innerQuadMaterial for when it is hovered.\r\n     */\r\n    public innerQuadHoverColor = new Color4(1, 1, 1, 0.05);\r\n\r\n    /**\r\n     * Gets or sets the color for innerQuadMaterial for when it is toggled and hovered.\r\n     */\r\n    public innerQuadToggledHoverColor = new Color4(0.5197843, 0.6485234, 0.9607843, 1);\r\n\r\n    // Meshes\r\n    private _backPlate: AbstractMesh;\r\n    private _textPlate: Mesh;\r\n    private _frontPlate: AbstractMesh;\r\n    private _backGlow: AbstractMesh;\r\n    private _innerQuad: AbstractMesh;\r\n    private _collisionPlate: AbstractMesh;\r\n    private _frontPlateCollisionMesh: AbstractMesh;\r\n    private _isBackplateVisible = true;\r\n\r\n    // Content\r\n    private _text: string;\r\n    private _subtext: string;\r\n    private _imageUrl: string;\r\n\r\n    // Materials\r\n    private _shareMaterials = true;\r\n    private _frontMaterial: MRDLFrontplateMaterial;\r\n    private _backMaterial: MRDLBackplateMaterial;\r\n    private _backGlowMaterial: MRDLBackglowMaterial;\r\n    private _innerQuadMaterial: MRDLInnerquadMaterial;\r\n    private _plateMaterial: StandardMaterial;\r\n\r\n    // Events\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n    private _pointerClickObserver: Nullable<Observer<Vector3WithInfo>>;\r\n    private _pointerEnterObserver: Nullable<Observer<Control3D>>;\r\n    private _pointerOutObserver: Nullable<Observer<Control3D>>;\r\n    private _toggleObserver: Nullable<Observer<boolean>>;\r\n\r\n    // Tooltip\r\n    private _tooltipFade: Nullable<FadeInOutBehavior>;\r\n    private _tooltipTextBlock: Nullable<TextBlock>;\r\n    private _tooltipTexture: Nullable<AdvancedDynamicTexture>;\r\n    private _tooltipMesh: Nullable<Mesh>;\r\n    private _tooltipHoverObserver: Nullable<Observer<Control3D>>;\r\n    private _tooltipOutObserver: Nullable<Observer<Control3D>>;\r\n\r\n    private _disposeTooltip() {\r\n        this._tooltipFade = null;\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.dispose();\r\n        }\r\n        if (this._tooltipTexture) {\r\n            this._tooltipTexture.dispose();\r\n        }\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.dispose();\r\n        }\r\n        this.onPointerEnterObservable.remove(this._tooltipHoverObserver);\r\n        this.onPointerOutObservable.remove(this._tooltipOutObserver);\r\n    }\r\n\r\n    /**\r\n     * Rendering ground id of all the mesh in the button\r\n     */\r\n    public set renderingGroupId(id: number) {\r\n        this._backPlate.renderingGroupId = id;\r\n        this._textPlate.renderingGroupId = id;\r\n        this._frontPlate.renderingGroupId = id;\r\n        this._backGlow.renderingGroupId = id;\r\n        this._innerQuad.renderingGroupId = id;\r\n\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.renderingGroupId = id;\r\n        }\r\n    }\r\n    public get renderingGroupId(): number {\r\n        return this._backPlate.renderingGroupId;\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh used to render this control\r\n     */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        return this._backPlate as AbstractMesh;\r\n    }\r\n\r\n    /**\r\n     * Text to be displayed on the tooltip shown when hovering on the button. When set to null tooltip is disabled. (Default: null)\r\n     * Set this property after adding the button to the GUI3DManager\r\n     */\r\n    public set tooltipText(text: Nullable<string>) {\r\n        if (!text) {\r\n            this._disposeTooltip();\r\n            return;\r\n        }\r\n        if (!this._tooltipFade) {\r\n            const rightHandedScene = this._backPlate._scene.useRightHandedSystem;\r\n            // Create tooltip with mesh and text\r\n            this._tooltipMesh = CreatePlane(\"\", { size: 1 }, this._backPlate._scene);\r\n            this._tooltipMesh.position = Vector3.Down().scale(0.7).add(Vector3.Forward(rightHandedScene).scale(-0.15));\r\n            this._tooltipMesh.isPickable = false;\r\n            this._tooltipMesh.parent = this._frontPlateCollisionMesh;\r\n\r\n            // Create text texture for the tooltip\r\n            this._tooltipTexture = AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh);\r\n            const tooltipBackground = new Rectangle();\r\n            tooltipBackground.height = 0.25;\r\n            tooltipBackground.width = 0.8;\r\n            tooltipBackground.cornerRadius = 25;\r\n            tooltipBackground.color = \"#ffffff\";\r\n            tooltipBackground.thickness = 20;\r\n            tooltipBackground.background = \"#060668\";\r\n            this._tooltipTexture.addControl(tooltipBackground);\r\n\r\n            this._tooltipTextBlock = new TextBlock();\r\n            this._tooltipTextBlock.color = \"white\";\r\n            this._tooltipTextBlock.fontSize = 100;\r\n            this._tooltipTexture.addControl(this._tooltipTextBlock);\r\n\r\n            // Add hover action to tooltip\r\n            this._tooltipFade = new FadeInOutBehavior();\r\n            this._tooltipFade.delay = 500;\r\n            this._tooltipMesh.addBehavior(this._tooltipFade);\r\n            this._tooltipHoverObserver = this.onPointerEnterObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(true);\r\n                }\r\n            });\r\n            this._tooltipOutObserver = this.onPointerOutObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(false);\r\n                }\r\n            });\r\n        }\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.text = text;\r\n        }\r\n    }\r\n\r\n    public get tooltipText() {\r\n        return this._tooltipTextBlock?.text || null;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text for the button\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n\r\n        this._text = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets subtext for a button with larger width\r\n     */\r\n    public get subtext(): string {\r\n        return this._subtext;\r\n    }\r\n\r\n    public set subtext(value: string) {\r\n        if (this._subtext === value) {\r\n            return;\r\n        }\r\n\r\n        this._subtext = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image url for the button\r\n     */\r\n    public get imageUrl(): string {\r\n        return this._imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        if (this._imageUrl === value) {\r\n            return;\r\n        }\r\n\r\n        this._imageUrl = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets the back material used by this button\r\n     */\r\n    public get backMaterial(): MRDLBackplateMaterial {\r\n        return this._backMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the front material used by this button\r\n     */\r\n    public get frontMaterial(): MRDLFrontplateMaterial {\r\n        return this._frontMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the back glow material used by this button\r\n     */\r\n    public get backGlowMaterial(): MRDLBackglowMaterial {\r\n        return this._backGlowMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the inner quad material used by this button\r\n     */\r\n    public get innerQuadMaterial(): MRDLInnerquadMaterial {\r\n        return this._innerQuadMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the plate material used by this button\r\n     */\r\n    public get plateMaterial(): StandardMaterial {\r\n        return this._plateMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this button shares its material with other V3 Buttons\r\n     */\r\n    public get shareMaterials(): boolean {\r\n        return this._shareMaterials;\r\n    }\r\n\r\n    /**\r\n     * Sets whether the backplate is visible or hidden. Hiding the backplate is not recommended without some sort of replacement\r\n     */\r\n    public set isBackplateVisible(isVisible: boolean) {\r\n        if (this.mesh && this._backMaterial) {\r\n            if (isVisible && !this._isBackplateVisible) {\r\n                this._backPlate.visibility = 1;\r\n            } else if (!isVisible && this._isBackplateVisible) {\r\n                this._backPlate.visibility = 0;\r\n            }\r\n        }\r\n\r\n        this._isBackplateVisible = isVisible;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     * @param shareMaterials\r\n     */\r\n    constructor(name?: string, shareMaterials = true) {\r\n        super(name);\r\n\r\n        this._shareMaterials = shareMaterials;\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            if (this._frontPlate && this._textPlate && !this.isToggleButton) {\r\n                this._performEnterExitAnimation(1);\r\n            }\r\n\r\n            if (this.isToggleButton && this._innerQuadMaterial) {\r\n                if (this.isToggled) {\r\n                    this._innerQuadMaterial.color = this.innerQuadToggledHoverColor;\r\n                } else {\r\n                    this._innerQuadMaterial.color = this.innerQuadHoverColor;\r\n                }\r\n            }\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (this._frontPlate && this._textPlate && !this.isToggleButton) {\r\n                this._performEnterExitAnimation(-0.8);\r\n            }\r\n\r\n            if (this.isToggleButton && this._innerQuadMaterial) {\r\n                this._onToggle(this.isToggled);\r\n            }\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            // Do nothing\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            // Do nothing\r\n        };\r\n\r\n        this._pointerClickObserver = this.onPointerClickObservable.add(() => {\r\n            if (this._frontPlate && this._backGlow && !this.isActiveNearInteraction) {\r\n                this._performClickAnimation();\r\n            }\r\n\r\n            if (this.isToggleButton && this._innerQuadMaterial) {\r\n                this._onToggle(this.isToggled);\r\n            }\r\n        });\r\n\r\n        this._pointerEnterObserver = this.onPointerEnterObservable.add(() => {\r\n            this.pointerEnterAnimation();\r\n        });\r\n\r\n        this._pointerOutObserver = this.onPointerOutObservable.add(() => {\r\n            this.pointerOutAnimation();\r\n        });\r\n\r\n        this._toggleObserver = this.onToggleObservable.add((isToggled) => {\r\n            if (isToggled) {\r\n                this._innerQuadMaterial.color = this.innerQuadToggledColor;\r\n            } else {\r\n                this._innerQuadMaterial.color = this.innerQuadColor;\r\n            }\r\n        });\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TouchHolographicButton\";\r\n    }\r\n\r\n    private _rebuildContent(): void {\r\n        let content: Control;\r\n\r\n        if (this._getAspectRatio() <= 1) {\r\n            // align text and image vertically\r\n            content = this._alignContentVertically();\r\n        } else {\r\n            // align text and image horizontally\r\n            content = this._alignContentHorizontally();\r\n        }\r\n\r\n        this.content = content;\r\n    }\r\n\r\n    private _getAspectRatio() {\r\n        return this.width / this.height;\r\n    }\r\n\r\n    private _alignContentVertically() {\r\n        const panel = new StackPanel();\r\n        panel.isVertical = true;\r\n\r\n        if (IsDocumentAvailable() && !!document.createElement) {\r\n            if (this._imageUrl) {\r\n                const image = new Image();\r\n                image.source = this._imageUrl;\r\n                image.heightInPixels = 180;\r\n                image.widthInPixels = 100;\r\n                image.paddingTopInPixels = 40;\r\n                image.paddingBottomInPixels = 40;\r\n                panel.addControl(image);\r\n            }\r\n        }\r\n\r\n        if (this._text) {\r\n            const text = new TextBlock();\r\n            text.text = this._text;\r\n            text.color = \"white\";\r\n            text.heightInPixels = 30;\r\n            text.fontSize = 24;\r\n            panel.addControl(text);\r\n        }\r\n\r\n        return panel;\r\n    }\r\n\r\n    private _alignContentHorizontally() {\r\n        let totalPanelWidthInPixels = 240;\r\n        const padding = 15;\r\n\r\n        const contentContainer = new Rectangle();\r\n        contentContainer.widthInPixels = totalPanelWidthInPixels;\r\n        contentContainer.heightInPixels = totalPanelWidthInPixels;\r\n        contentContainer.color = \"transparent\";\r\n        contentContainer.setPaddingInPixels(padding, padding, padding, padding);\r\n        totalPanelWidthInPixels -= padding * 2;\r\n\r\n        const panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.scaleY = this._getAspectRatio();\r\n\r\n        if (IsDocumentAvailable() && !!document.createElement) {\r\n            if (this._imageUrl) {\r\n                const imageContainer = new Rectangle(`${this.name}_image`);\r\n                imageContainer.widthInPixels = this.imageSizeInPixels;\r\n                imageContainer.heightInPixels = this.imageSizeInPixels;\r\n                imageContainer.color = \"transparent\";\r\n                totalPanelWidthInPixels -= this.imageSizeInPixels;\r\n\r\n                const image = new Image();\r\n                image.source = this._imageUrl;\r\n\r\n                imageContainer.addControl(image);\r\n                panel.addControl(imageContainer);\r\n            }\r\n        }\r\n\r\n        if (this._text) {\r\n            const text = new TextBlock(`${this.name}_text`);\r\n            text.text = this._text;\r\n            text.color = \"white\";\r\n            text.fontSize = this.textSizeInPixels;\r\n            text.widthInPixels = totalPanelWidthInPixels;\r\n\r\n            if (this._imageUrl) {\r\n                text.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n                text.paddingLeftInPixels = padding;\r\n            }\r\n\r\n            if (this._subtext) {\r\n                const textContainer = new Grid();\r\n                textContainer.addColumnDefinition(1);\r\n                textContainer.addRowDefinition(0.5);\r\n                textContainer.addRowDefinition(0.5);\r\n                textContainer.widthInPixels = totalPanelWidthInPixels;\r\n                textContainer.heightInPixels = 45;\r\n\r\n                const subtext = new TextBlock(`${this.name}_subtext`);\r\n                subtext.text = this._subtext;\r\n                subtext.color = \"#EEEEEEAB\";\r\n                subtext.fontSize = this.textSizeInPixels * 0.75;\r\n                subtext.fontWeight = \"600\";\r\n\r\n                if (this._imageUrl) {\r\n                    subtext.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n                    subtext.paddingLeftInPixels = padding;\r\n                }\r\n\r\n                textContainer.addControl(text, 0);\r\n                textContainer.addControl(subtext, 1);\r\n                panel.addControl(textContainer);\r\n            } else {\r\n                panel.addControl(text);\r\n            }\r\n        }\r\n\r\n        contentContainer.addControl(panel);\r\n        return contentContainer;\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this.name = this.name ?? \"TouchHolographicButton\";\r\n\r\n        const backPlateMesh = this._createBackPlate(scene);\r\n        const collisionMesh = this._createFrontPlate(scene);\r\n        const innerQuadMesh = this._createInnerQuad(scene);\r\n        const backGlowMesh = this._createBackGlow(scene);\r\n\r\n        this._frontPlateCollisionMesh = collisionMesh;\r\n        this._textPlate = <Mesh>super._createNode(scene);\r\n        this._textPlate.name = `${this.name}_textPlate`;\r\n        this._textPlate.isPickable = false;\r\n        this._textPlate.scaling.x = this.width;\r\n        this._textPlate.parent = collisionMesh;\r\n\r\n        this._backPlate = backPlateMesh;\r\n        this._backPlate.position = Vector3.Forward(scene.useRightHandedSystem).scale(this.backPlateDepth / 2);\r\n        this._backPlate.isPickable = false;\r\n\r\n        this._backPlate.addChild(collisionMesh);\r\n        this._backPlate.addChild(innerQuadMesh);\r\n\r\n        if (backGlowMesh) {\r\n            this._backPlate.addChild(backGlowMesh);\r\n        }\r\n\r\n        const tn = new TransformNode(`${this.name}_root`, scene);\r\n        this._backPlate.setParent(tn);\r\n\r\n        this.collisionMesh = collisionMesh;\r\n        this.collidableFrontDirection = this._backPlate.forward.negate(); // Mesh is facing the wrong way\r\n\r\n        return tn;\r\n    }\r\n\r\n    private _createBackPlate(scene: Scene) {\r\n        const backPlateMesh = CreateBox(`${this.name}_backPlate`, {}, scene);\r\n        backPlateMesh.isPickable = false;\r\n        backPlateMesh.visibility = 0;\r\n        backPlateMesh.scaling.z = 0.2;\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, TouchHolographicButton.MRTK_ASSET_BASE_URL, TouchHolographicButton.BACKPLATE_MODEL_FILENAME, scene).then((result) => {\r\n            const backPlateModel = result.meshes[1];\r\n            backPlateModel.visibility = 0;\r\n\r\n            if (this._isBackplateVisible) {\r\n                backPlateModel.visibility = 1;\r\n                backPlateModel.name = `${this.name}_backPlate`;\r\n                backPlateModel.isPickable = false;\r\n                backPlateModel.scaling.x = this.width;\r\n                backPlateModel.scaling.y = this.height;\r\n                backPlateModel.parent = backPlateMesh;\r\n            }\r\n\r\n            if (this._backMaterial) {\r\n                backPlateModel.material = this._backMaterial;\r\n            }\r\n\r\n            this._backPlate = backPlateModel;\r\n        });\r\n\r\n        return backPlateMesh;\r\n    }\r\n\r\n    private _createFrontPlate(scene: Scene) {\r\n        const collisionMesh = CreateBox(\r\n            `${this.name}_frontPlate`,\r\n            {\r\n                width: this.width,\r\n                height: this.height,\r\n                depth: this.frontPlateDepth,\r\n            },\r\n            scene\r\n        );\r\n        collisionMesh.isPickable = true;\r\n        collisionMesh.isNearPickable = true;\r\n        collisionMesh.visibility = 0;\r\n        collisionMesh.position = Vector3.Forward(scene.useRightHandedSystem).scale((this.backPlateDepth - this.frontPlateDepth) / 2);\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, TouchHolographicButton.MRTK_ASSET_BASE_URL, TouchHolographicButton.FRONTPLATE_MODEL_FILENAME, scene).then((result) => {\r\n            const collisionPlate = CreateBox(\r\n                `${this.name}_collisionPlate`,\r\n                {\r\n                    width: this.width,\r\n                    height: this.height,\r\n                },\r\n                scene\r\n            );\r\n            collisionPlate.isPickable = false;\r\n            collisionPlate.scaling.z = this.frontPlateDepth;\r\n            collisionPlate.visibility = 0;\r\n            collisionPlate.parent = collisionMesh;\r\n            this._collisionPlate = collisionPlate;\r\n\r\n            const frontPlateModel = result.meshes[1];\r\n            frontPlateModel.name = `${this.name}_frontPlate`;\r\n            frontPlateModel.isPickable = false;\r\n            frontPlateModel.scaling.x = this.width - this.backGlowOffset;\r\n            frontPlateModel.scaling.y = this.height - this.backGlowOffset;\r\n            frontPlateModel.position = Vector3.Forward(scene.useRightHandedSystem).scale(-0.5);\r\n            frontPlateModel.parent = collisionPlate;\r\n\r\n            if (this.isToggleButton) {\r\n                frontPlateModel.visibility = 0;\r\n            }\r\n\r\n            if (this._frontMaterial) {\r\n                frontPlateModel.material = this._frontMaterial;\r\n            }\r\n\r\n            this._textPlate.scaling.x = 1;\r\n            this._textPlate.parent = frontPlateModel;\r\n            this._frontPlate = frontPlateModel;\r\n        });\r\n\r\n        return collisionMesh;\r\n    }\r\n\r\n    private _createInnerQuad(scene: Scene) {\r\n        const innerQuadMesh = CreateBox(`${this.name}_innerQuad`, {}, scene);\r\n        innerQuadMesh.isPickable = false;\r\n        innerQuadMesh.visibility = 0;\r\n        innerQuadMesh.scaling.z = this.flatPlaneDepth;\r\n        innerQuadMesh.position.z += this.backPlateDepth / 2 - this.flatPlaneDepth;\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, TouchHolographicButton.MRTK_ASSET_BASE_URL, TouchHolographicButton.INNERQUAD_MODEL_FILENAME, scene).then((result) => {\r\n            const innerQuadModel = result.meshes[1];\r\n            innerQuadModel.name = `${this.name}_innerQuad`;\r\n            innerQuadModel.isPickable = false;\r\n            innerQuadModel.scaling.x = this.width - this.backGlowOffset;\r\n            innerQuadModel.scaling.y = this.height - this.backGlowOffset;\r\n            innerQuadModel.parent = innerQuadMesh;\r\n\r\n            if (this._innerQuadMaterial) {\r\n                innerQuadModel.material = this._innerQuadMaterial;\r\n            }\r\n\r\n            this._innerQuad = innerQuadModel;\r\n        });\r\n\r\n        return innerQuadMesh;\r\n    }\r\n\r\n    private _createBackGlow(scene: Scene) {\r\n        if (this.isToggleButton) {\r\n            return;\r\n        }\r\n\r\n        const backGlowMesh = CreateBox(`${this.name}_backGlow`, {}, scene);\r\n        backGlowMesh.isPickable = false;\r\n        backGlowMesh.visibility = 0;\r\n        backGlowMesh.scaling.z = this.flatPlaneDepth;\r\n        backGlowMesh.position.z += this.backPlateDepth / 2 - this.flatPlaneDepth * 2;\r\n\r\n        SceneLoader.ImportMeshAsync(undefined, TouchHolographicButton.MRTK_ASSET_BASE_URL, TouchHolographicButton.BACKGLOW_MODEL_FILENAME, scene).then((result) => {\r\n            const backGlowModel = result.meshes[1];\r\n            backGlowModel.name = `${this.name}_backGlow`;\r\n            backGlowModel.isPickable = false;\r\n            backGlowModel.scaling.x = this.width - this.backGlowOffset;\r\n            backGlowModel.scaling.y = this.height - this.backGlowOffset;\r\n            backGlowModel.parent = backGlowMesh;\r\n\r\n            if (this._backGlowMaterial) {\r\n                backGlowModel.material = this._backGlowMaterial;\r\n            }\r\n\r\n            this._backGlow = backGlowModel;\r\n        });\r\n\r\n        return backGlowMesh;\r\n    }\r\n\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        this._plateMaterial.emissiveTexture = facadeTexture;\r\n        this._plateMaterial.opacityTexture = facadeTexture;\r\n        this._plateMaterial.diffuseColor = this.plateMaterialColor;\r\n    }\r\n\r\n    private _performClickAnimation() {\r\n        const frameRate = 60;\r\n        const animationGroup = new AnimationGroup(\"Click Animation Group\");\r\n\r\n        const animations = [\r\n            {\r\n                name: \"backGlowMotion\",\r\n                mesh: this._backGlow,\r\n                property: \"material.motion\",\r\n                keys: [\r\n                    {\r\n                        frame: 0,\r\n                        values: [0, 0, 0],\r\n                    },\r\n                    {\r\n                        frame: 20,\r\n                        values: [1, 0.0144, 0.0144],\r\n                    },\r\n                    {\r\n                        frame: 40,\r\n                        values: [0.0027713229489760476, 0, 0],\r\n                    },\r\n                    {\r\n                        frame: 45,\r\n                        values: [0.0027713229489760476],\r\n                    },\r\n                ],\r\n            },\r\n            {\r\n                name: \"_collisionPlateZSlide\",\r\n                mesh: this._collisionPlate,\r\n                property: \"position.z\",\r\n                keys: [\r\n                    {\r\n                        frame: 0,\r\n                        values: [0.0, 0.0, 0.0],\r\n                    },\r\n                    {\r\n                        frame: 20,\r\n                        values: [Vector3.Forward(this._collisionPlate._scene.useRightHandedSystem).scale(this.frontPlateDepth / 2).z, 0.0, 0.0],\r\n                    },\r\n                    {\r\n                        frame: 40,\r\n                        values: [0.0, 0.005403332496794331],\r\n                    },\r\n                    {\r\n                        frame: 45,\r\n                        values: [0.0],\r\n                    },\r\n                ],\r\n            },\r\n            {\r\n                name: \"_collisionPlateZScale\",\r\n                mesh: this._collisionPlate,\r\n                property: \"scaling.z\",\r\n                keys: [\r\n                    {\r\n                        frame: 0,\r\n                        values: [this.frontPlateDepth, 0.0, 0.0],\r\n                    },\r\n                    {\r\n                        frame: 20,\r\n                        values: [this.backPlateDepth, 0.0, 0.0],\r\n                    },\r\n                    {\r\n                        frame: 40,\r\n                        values: [this.frontPlateDepth, 0.0054],\r\n                    },\r\n                    {\r\n                        frame: 45,\r\n                        values: [this.frontPlateDepth],\r\n                    },\r\n                ],\r\n            },\r\n        ];\r\n\r\n        for (const animation of animations) {\r\n            const anim = new Animation(animation.name, animation.property, frameRate, Animation.ANIMATIONTYPE_FLOAT, Animation.ANIMATIONLOOPMODE_CYCLE);\r\n            const animkeyFrames = [];\r\n\r\n            for (const key of animation.keys) {\r\n                animkeyFrames.push({\r\n                    frame: key.frame,\r\n                    value: key.values[0],\r\n                    inTangent: key.values[1],\r\n                    outTangent: key.values[2],\r\n                    interpolation: key.values[3],\r\n                });\r\n            }\r\n\r\n            anim.setKeys(animkeyFrames);\r\n\r\n            if (!animation.mesh) {\r\n                continue;\r\n            }\r\n\r\n            animationGroup.addTargetedAnimation(anim, animation.mesh);\r\n        }\r\n\r\n        animationGroup.normalize(0, 45);\r\n        animationGroup.speedRatio = 1;\r\n\r\n        animationGroup.play();\r\n    }\r\n\r\n    private _performEnterExitAnimation(speedRatio: number) {\r\n        const frameRate = 60;\r\n        const animationGroup = new AnimationGroup(\"Enter Exit Animation Group\");\r\n\r\n        const animations = [\r\n            {\r\n                name: \"frontPlateFadeOut\",\r\n                mesh: this._frontPlate,\r\n                property: \"material.fadeOut\",\r\n                keys: [\r\n                    {\r\n                        frame: 0,\r\n                        values: [0, 0, 0.025045314830017686, 0],\r\n                    },\r\n                    {\r\n                        frame: 40,\r\n                        values: [1.00205599570012, 0.025045314830017686, 0, 0],\r\n                    },\r\n                ],\r\n            },\r\n            {\r\n                name: \"textPlateZSlide\",\r\n                mesh: this._textPlate,\r\n                property: \"position.z\",\r\n                keys: [\r\n                    {\r\n                        frame: 0,\r\n                        values: [0, 0.0, 0.0],\r\n                    },\r\n                    {\r\n                        frame: 40,\r\n                        values: [Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-0.15).z, 0.0, 0.0],\r\n                    },\r\n                ],\r\n            },\r\n        ];\r\n\r\n        for (const animation of animations) {\r\n            const anim = new Animation(animation.name, animation.property, frameRate, Animation.ANIMATIONTYPE_FLOAT, Animation.ANIMATIONLOOPMODE_CYCLE);\r\n            const animkeyFrames = [];\r\n\r\n            for (const key of animation.keys) {\r\n                animkeyFrames.push({\r\n                    frame: key.frame,\r\n                    value: key.values[0],\r\n                    inTangent: key.values[1],\r\n                    outTangent: key.values[2],\r\n                    interpolation: key.values[3],\r\n                });\r\n            }\r\n\r\n            anim.setKeys(animkeyFrames);\r\n\r\n            if (!animation.mesh) {\r\n                continue;\r\n            }\r\n\r\n            animationGroup.addTargetedAnimation(anim, animation.mesh);\r\n        }\r\n\r\n        animationGroup.normalize(0, 45);\r\n        animationGroup.speedRatio = speedRatio;\r\n\r\n        animationGroup.play();\r\n    }\r\n\r\n    private _createBackMaterial(mesh: Mesh) {\r\n        this._backMaterial = this._backMaterial ?? new MRDLBackplateMaterial(this.name + \"backPlateMaterial\", mesh.getScene());\r\n        this._backMaterial.absoluteSizes = true;\r\n        this._backMaterial.radius = this.radius;\r\n        this._backMaterial.lineWidth = 0.02;\r\n    }\r\n\r\n    private _createFrontMaterial(mesh: Mesh) {\r\n        this._frontMaterial = this._frontMaterial ?? new MRDLFrontplateMaterial(this.name + \"Front Material\", mesh.getScene());\r\n        this.frontMaterial.radius = this.innerQuadRadius;\r\n        this.frontMaterial.fadeOut = 0.0;\r\n    }\r\n\r\n    private _createBackGlowMaterial(mesh: Mesh) {\r\n        const glowRadius = this.radius + 0.04;\r\n        this._backGlowMaterial = this._backGlowMaterial ?? new MRDLBackglowMaterial(this.name + \"Back Glow Material\", mesh.getScene());\r\n        this._backGlowMaterial.bevelRadius = glowRadius;\r\n        this._backGlowMaterial.lineWidth = glowRadius;\r\n        this._backGlowMaterial.motion = 0.0;\r\n    }\r\n\r\n    private _createInnerQuadMaterial(mesh: Mesh) {\r\n        this._innerQuadMaterial = this._innerQuadMaterial ?? new MRDLInnerquadMaterial(\"inner_quad\", mesh.getScene());\r\n        this._innerQuadMaterial.radius = this.innerQuadRadius;\r\n\r\n        if (this.isToggleButton) {\r\n            this._innerQuadMaterial.color = this.innerQuadColor;\r\n        }\r\n    }\r\n\r\n    private _createPlateMaterial(mesh: Mesh) {\r\n        this._plateMaterial = this._plateMaterial ?? new StandardMaterial(this.name + \"Plate Material\", mesh.getScene());\r\n        this._plateMaterial.specularColor = Color3.Black();\r\n    }\r\n\r\n    protected _onToggle(newState: boolean) {\r\n        super._onToggle(newState);\r\n    }\r\n\r\n    protected _affectMaterial(mesh: Mesh) {\r\n        if (this._shareMaterials) {\r\n            // Back\r\n            if (!this._host._touchSharedMaterials[\"mrdlBackplateMaterial\"]) {\r\n                this._createBackMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"mrdlBackplateMaterial\"] = this._backMaterial;\r\n            } else {\r\n                this._backMaterial = this._host._touchSharedMaterials[\"mrdlBackplateMaterial\"] as MRDLBackplateMaterial;\r\n            }\r\n\r\n            // Front\r\n            if (!this._host._touchSharedMaterials[\"mrdlFrontplateMaterial\"]) {\r\n                this._createFrontMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"mrdlFrontplateMaterial\"] = this._frontMaterial;\r\n            } else {\r\n                this._frontMaterial = this._host._touchSharedMaterials[\"mrdlFrontplateMaterial\"] as MRDLFrontplateMaterial;\r\n            }\r\n\r\n            // Back glow\r\n            if (!this._host._touchSharedMaterials[\"mrdlBackglowMaterial\"]) {\r\n                this._createBackGlowMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"mrdlBackglowMaterial\"] = this._backGlowMaterial;\r\n            } else {\r\n                this._backGlowMaterial = this._host._touchSharedMaterials[\"mrdlBackglowMaterial\"] as MRDLBackglowMaterial;\r\n            }\r\n\r\n            // Inner quad\r\n            if (!this._host._touchSharedMaterials[\"mrdlInnerQuadMaterial\"]) {\r\n                this._createInnerQuadMaterial(mesh);\r\n                this._host._touchSharedMaterials[\"mrdlInnerQuadMaterial\"] = this._innerQuadMaterial;\r\n            } else {\r\n                this._innerQuadMaterial = this._host._touchSharedMaterials[\"mrdlInnerQuadMaterial\"] as MRDLInnerquadMaterial;\r\n            }\r\n        } else {\r\n            this._createBackMaterial(mesh);\r\n            this._createFrontMaterial(mesh);\r\n            this._createBackGlowMaterial(mesh);\r\n            this._createInnerQuadMaterial(mesh);\r\n        }\r\n\r\n        this._createPlateMaterial(mesh);\r\n        this._backPlate.material = this._backMaterial;\r\n        this._textPlate.material = this._plateMaterial;\r\n\r\n        if (!this._isBackplateVisible) {\r\n            this._backPlate.visibility = 0;\r\n        }\r\n\r\n        if (this._frontPlate) {\r\n            this._frontPlate.material = this._frontMaterial;\r\n        }\r\n\r\n        if (this._backGlow) {\r\n            this._backGlow.material = this._backGlowMaterial;\r\n        }\r\n\r\n        if (this._innerQuad) {\r\n            this._innerQuad.material = this._innerQuadMaterial;\r\n        }\r\n\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose(); // will dispose main mesh ie. back plate\r\n\r\n        this._disposeTooltip();\r\n        this.onPointerClickObservable.remove(this._pointerClickObserver);\r\n        this.onPointerEnterObservable.remove(this._pointerEnterObserver);\r\n        this.onPointerOutObservable.remove(this._pointerOutObserver);\r\n        this.onToggleObservable.remove(this._toggleObserver);\r\n\r\n        if (!this.shareMaterials) {\r\n            this._backMaterial.dispose();\r\n            this._frontMaterial.dispose();\r\n            this._plateMaterial.dispose();\r\n            this._backGlowMaterial.dispose();\r\n            this._innerQuadMaterial.dispose();\r\n\r\n            if (this._pickedPointObserver) {\r\n                this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n                this._pickedPointObserver = null;\r\n            }\r\n        }\r\n    }\r\n}\r\n", "/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport type { PointerInfo } from \"core/Events/pointerEvents\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport type { Material } from \"core/Materials/material\";\r\nimport { HemisphericLight } from \"core/Lights/hemisphericLight\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\nimport type { IDisposable, Scene } from \"core/scene\";\r\n\r\nimport { Container3D } from \"./controls/container3D\";\r\nimport type { Control3D } from \"./controls/control3D\";\r\nimport type { IPointerEvent } from \"core/Events/deviceInputEvents\";\r\n\r\n/**\r\n * Class used to manage 3D user interface\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui3D\r\n */\r\nexport class GUI3DManager implements IDisposable {\r\n    private _scene: Scene;\r\n    private _sceneDisposeObserver: Nullable<Observer<Scene>>;\r\n    private _utilityLayer: Nullable<UtilityLayerRenderer>;\r\n    private _rootContainer: Container3D;\r\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\r\n    private _pointerOutObserver: Nullable<Observer<number>>;\r\n    private _customControlScaling = 1.0;\r\n    /** @internal */\r\n    public _lastPickedControl: Control3D;\r\n    /** @internal */\r\n    public _lastControlOver: { [pointerId: number]: Control3D } = {};\r\n    /** @internal */\r\n    public _lastControlDown: { [pointerId: number]: Control3D } = {};\r\n\r\n    protected static MRTK_REALISTIC_SCALING: number = 0.032;\r\n\r\n    /**\r\n     * Observable raised when the point picked by the pointer events changed\r\n     */\r\n    public onPickedPointChangedObservable = new Observable<Nullable<Vector3>>();\r\n\r\n    /**\r\n     * Observable raised when a picking happens\r\n     */\r\n    public onPickingObservable = new Observable<Nullable<AbstractMesh>>();\r\n\r\n    // Shared resources\r\n    /** @internal */\r\n    public _sharedMaterials: { [key: string]: Material } = {};\r\n\r\n    /** @internal */\r\n    public _touchSharedMaterials: { [key: string]: Material } = {};\r\n\r\n    /** Gets the hosting scene */\r\n    public get scene(): Scene {\r\n        return this._scene;\r\n    }\r\n\r\n    /** Gets associated utility layer */\r\n    public get utilityLayer(): Nullable<UtilityLayerRenderer> {\r\n        return this._utilityLayer;\r\n    }\r\n\r\n    /** Gets the scaling for all UI elements owned by this manager */\r\n    public get controlScaling() {\r\n        return this._customControlScaling;\r\n    }\r\n\r\n    /** Sets the scaling adjustment for all UI elements owned by this manager */\r\n    public set controlScaling(newScale: number) {\r\n        if (this._customControlScaling !== newScale && newScale > 0) {\r\n            const scaleRatio = newScale / this._customControlScaling;\r\n            this._customControlScaling = newScale;\r\n\r\n            this._rootContainer.children.forEach((control: Control3D) => {\r\n                control.scaling.scaleInPlace(scaleRatio);\r\n\r\n                if (newScale !== 1) {\r\n                    control._isScaledByManager = true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /** Gets if controls attached to this manager are realistically sized, based on the fact that 1 unit length is 1 meter */\r\n    public get useRealisticScaling() {\r\n        return this.controlScaling === GUI3DManager.MRTK_REALISTIC_SCALING;\r\n    }\r\n\r\n    /** Sets if controls attached to this manager are realistically sized, based on the fact that 1 unit length is 1 meter */\r\n    public set useRealisticScaling(newValue: boolean) {\r\n        this.controlScaling = newValue ? GUI3DManager.MRTK_REALISTIC_SCALING : 1;\r\n    }\r\n\r\n    /**\r\n     * Creates a new GUI3DManager\r\n     * @param scene\r\n     */\r\n    public constructor(scene?: Scene) {\r\n        this._scene = scene || EngineStore.LastCreatedScene!;\r\n        this._sceneDisposeObserver = this._scene.onDisposeObservable.add(() => {\r\n            this._sceneDisposeObserver = null;\r\n            this._utilityLayer = null;\r\n            this.dispose();\r\n        });\r\n\r\n        this._utilityLayer = UtilityLayerRenderer._CreateDefaultUtilityLayerFromScene(this._scene);\r\n        this._utilityLayer.onlyCheckPointerDownEvents = false;\r\n        this._utilityLayer.pickUtilitySceneFirst = false;\r\n        this._utilityLayer.mainSceneTrackerPredicate = (mesh: Nullable<AbstractMesh>) => {\r\n            return mesh && mesh.reservedDataStore?.GUI3D?.control?._node;\r\n        };\r\n\r\n        // Root\r\n        this._rootContainer = new Container3D(\"RootContainer\");\r\n        this._rootContainer._host = this;\r\n        const utilityLayerScene = this._utilityLayer.utilityLayerScene;\r\n\r\n        // Events\r\n        this._pointerOutObserver = this._utilityLayer.onPointerOutObservable.add((pointerId) => {\r\n            this._handlePointerOut(pointerId, true);\r\n        });\r\n\r\n        this._pointerObserver = utilityLayerScene.onPointerObservable.add((pi) => {\r\n            this._doPicking(pi);\r\n        });\r\n\r\n        // Scene\r\n        this._utilityLayer.utilityLayerScene.autoClear = false;\r\n        this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil = false;\r\n        new HemisphericLight(\"hemi\", Vector3.Up(), this._utilityLayer.utilityLayerScene);\r\n    }\r\n\r\n    private _handlePointerOut(pointerId: number, isPointerUp: boolean) {\r\n        const previousControlOver = this._lastControlOver[pointerId];\r\n        if (previousControlOver) {\r\n            previousControlOver._onPointerOut(previousControlOver);\r\n            delete this._lastControlOver[pointerId];\r\n        }\r\n\r\n        if (isPointerUp) {\r\n            if (this._lastControlDown[pointerId]) {\r\n                this._lastControlDown[pointerId].forcePointerUp();\r\n                delete this._lastControlDown[pointerId];\r\n            }\r\n        }\r\n\r\n        this.onPickedPointChangedObservable.notifyObservers(null);\r\n    }\r\n\r\n    private _doPicking(pi: PointerInfo): boolean {\r\n        if (!this._utilityLayer || !this._utilityLayer.shouldRender || !this._utilityLayer.utilityLayerScene.activeCamera) {\r\n            return false;\r\n        }\r\n\r\n        const pointerEvent = <IPointerEvent>pi.event;\r\n\r\n        const pointerId = pointerEvent.pointerId || 0;\r\n        const buttonIndex = pointerEvent.button;\r\n\r\n        const pickingInfo = pi.pickInfo;\r\n        if (pickingInfo) {\r\n            this.onPickingObservable.notifyObservers(pickingInfo.pickedMesh);\r\n        }\r\n\r\n        if (!pickingInfo || !pickingInfo.hit) {\r\n            this._handlePointerOut(pointerId, pi.type === PointerEventTypes.POINTERUP);\r\n            return false;\r\n        }\r\n\r\n        if (pickingInfo.pickedPoint) {\r\n            this.onPickedPointChangedObservable.notifyObservers(pickingInfo.pickedPoint);\r\n        }\r\n\r\n        const control = <Control3D>pickingInfo.pickedMesh!.reservedDataStore?.GUI3D?.control;\r\n        if (!!control && !control._processObservables(pi.type, pickingInfo.pickedPoint!, pickingInfo.originMesh?.position || null, pointerId, buttonIndex)) {\r\n            if (pi.type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId]);\r\n                }\r\n\r\n                delete this._lastControlOver[pointerId];\r\n            }\r\n        }\r\n\r\n        if (pi.type === PointerEventTypes.POINTERUP) {\r\n            if (this._lastControlDown[pointerEvent.pointerId]) {\r\n                this._lastControlDown[pointerEvent.pointerId].forcePointerUp();\r\n                delete this._lastControlDown[pointerEvent.pointerId];\r\n            }\r\n\r\n            if (pointerEvent.pointerType === \"touch\" || (pointerEvent.pointerType === \"xr\" && this._scene.getEngine().hostInformation.isMobile)) {\r\n                this._handlePointerOut(pointerId, false);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Gets the root container\r\n     */\r\n    public get rootContainer(): Container3D {\r\n        return this._rootContainer;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given control is in the root child list\r\n     * @param control defines the control to check\r\n     * @returns true if the control is in the root child list\r\n     */\r\n    public containsControl(control: Control3D): boolean {\r\n        return this._rootContainer.containsControl(control);\r\n    }\r\n\r\n    /**\r\n     * Adds a control to the root child list\r\n     * @param control defines the control to add\r\n     * @returns the current manager\r\n     */\r\n    public addControl(control: Control3D): GUI3DManager {\r\n        this._rootContainer.addControl(control);\r\n        if (this._customControlScaling !== 1) {\r\n            control.scaling.scaleInPlace(this._customControlScaling);\r\n            control._isScaledByManager = true;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the root child list\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control3D): GUI3DManager {\r\n        this._rootContainer.removeControl(control);\r\n        if (control._isScaledByManager) {\r\n            control.scaling.scaleInPlace(1 / this._customControlScaling);\r\n            control._isScaledByManager = false;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        this._rootContainer.dispose();\r\n\r\n        for (const materialName in this._sharedMaterials) {\r\n            if (!Object.prototype.hasOwnProperty.call(this._sharedMaterials, materialName)) {\r\n                continue;\r\n            }\r\n\r\n            this._sharedMaterials[materialName].dispose();\r\n        }\r\n\r\n        this._sharedMaterials = {};\r\n\r\n        for (const materialName in this._touchSharedMaterials) {\r\n            if (!Object.prototype.hasOwnProperty.call(this._touchSharedMaterials, materialName)) {\r\n                continue;\r\n            }\r\n\r\n            this._touchSharedMaterials[materialName].dispose();\r\n        }\r\n\r\n        this._touchSharedMaterials = {};\r\n\r\n        if (this._pointerOutObserver && this._utilityLayer) {\r\n            this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver);\r\n            this._pointerOutObserver = null;\r\n        }\r\n\r\n        this.onPickedPointChangedObservable.clear();\r\n        this.onPickingObservable.clear();\r\n\r\n        const utilityLayerScene = this._utilityLayer ? this._utilityLayer.utilityLayerScene : null;\r\n\r\n        if (utilityLayerScene) {\r\n            if (this._pointerObserver) {\r\n                utilityLayerScene.onPointerObservable.remove(this._pointerObserver);\r\n                this._pointerObserver = null;\r\n            }\r\n        }\r\n        if (this._scene) {\r\n            if (this._sceneDisposeObserver) {\r\n                this._scene.onDisposeObservable.remove(this._sceneDisposeObserver);\r\n                this._sceneDisposeObserver = null;\r\n            }\r\n        }\r\n\r\n        if (this._utilityLayer) {\r\n            this._utilityLayer.dispose();\r\n        }\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": ["name", "name", "contains", "name", "TextWrapping", "name", "name", "name", "name", "name", "name", "name", "name", "labelText", "minusPound", "name", "name", "name", "name", "name", "name", "name", "name", "name", "value", "name", "name", "name", "name", "name", "name", "name", "name", "name", "transformedX", "transformedY", "name", "name", "name", "name", "name", "name", "name", "shader", "name", "name", "name", "name", "shader", "name", "shader", "name", "name", "name", "name", "shader", "name", "shader", "name", "name", "_a", "name", "name", "shader", "name", "shader", "name", "HandleState", "name", "name", "name", "name", "shader", "name", "shader", "name", "name", "shader", "name", "shader", "name", "name", "shader", "name", "shader", "name", "name", "name", "name", "shader", "name", "shader", "name", "name", "shader", "name", "shader", "name", "name", "shader", "name", "shader", "name", "TouchHolographicButton", "name"]
}
