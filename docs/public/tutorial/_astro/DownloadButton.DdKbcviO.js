import{j as n}from"./jsx-runtime.B6N9iRLn.js";import{t as a,w as r}from"./webcontainer.C3RPLh_2.js";import"./index.DNi1g-pO.js";import"./is-preview-message.ZaUdCj-5.js";import"./index.DgoachrA.js";function f(){return n.jsx("button",{title:"Download lesson as zip-file",className:"flex items-center text-2xl text-tk-elements-topBar-iconButton-iconColor hover:text-tk-elements-topBar-iconButton-iconColorHover transition-theme bg-tk-elements-topBar-iconButton-backgroundColor hover:bg-tk-elements-topBar-iconButton-backgroundColorHover p-1 rounded-md",onClick:l,children:n.jsx("div",{className:"i-ph-download-simple"})})}async function l(){const t=a.lesson;if(!t)throw new Error("Missing lesson");const i=await(await r).export("/home/tutorial",{format:"zip",excludes:["node_modules"]});let e=typeof t.data.downloadAsZip=="object"?t.data.downloadAsZip.filename:[t.part?.id,t.chapter?.id,t.id].filter(Boolean).join("-");e.endsWith(".zip")||(e+=".zip");const o=document.createElement("a");o.style.display="none",o.download=e,o.href=URL.createObjectURL(new Blob([i],{type:"application/zip"})),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href)}export{f as DownloadButton};
